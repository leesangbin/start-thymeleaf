/*!
* RealGridJS Evaluation v1.1.18.2255
* Copyright (C) 2013-20015 WooriTech Inc.
* All Rights Reserved.
*/
!function(a){var b={};b.cipherModes={ECB:0,CBC:1,PCBC:2,CFB:3,OFB:4,CTR:5},b.outputTypes={Base64:0,Hex:1,String:2,Raw:3};var c={},d="=",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";c.encode=function(a){for(var b=[],c=a.length,f=c%3,g=c-f,h=0;g>h;){var i=a[h++]<<16|a[h++]<<8|a[h++];b.push(e.charAt(i>>>18&63)),b.push(e.charAt(i>>>12&63)),b.push(e.charAt(i>>>6&63)),b.push(e.charAt(63&i))}switch(f){case 2:var i=a[h++]<<16|a[h++]<<8;b.push(e.charAt(i>>>18&63)),b.push(e.charAt(i>>>12&63)),b.push(e.charAt(i>>>6&63)),b.push(d);break;case 1:var i=a[h++]<<16;b.push(e.charAt(i>>>18&63)),b.push(e.charAt(i>>>12&63)),b.push(d),b.push(d)}return b.join("")},c.decode=function(a){for(var b=a.split(""),c=[],f=b.length;b[--f]==d;);for(var g=0;f>g;){var h=e.indexOf(b[g++])<<18;f>=g&&(h|=e.indexOf(b[g++])<<12),f>=g&&(h|=e.indexOf(b[g++])<<6),f>=g&&(h|=e.indexOf(b[g++])),c.push(h>>>16&255),c.push(h>>>8&255),c.push(255&h)}for(;0==c[c.length-1];)c.pop();return c};var f={};f.isString=function(a){return"string"==typeof a||a instanceof String};var g={};g.map=function(a,b,c,d){var e=0,f=a&&a.length||0,g=new(d||Array)(f);if(f&&"string"==typeof a&&(a=a.split("")),"string"==typeof b&&(b=cache[b]||buildFn(b)),c)for(;f>e;++e)g[e]=b.call(c,a[e],e,a);else for(;f>e;++e)g[e]=b(a[e],e,a);return g},b.Blowfish=new function(){function a(a,b){return(a>>16^b>>16)<<16|65535&(65535&a^65535&b)}function d(a,b){var c=b.s3[255&a];a>>=8;var d=b.s2[255&a];a>>=8;var e=b.s1[255&a];a>>=8;var f=b.s0[255&a],g=(f>>16)+(e>>16)+((65535&f)+(65535&e)>>16)<<16|(65535&f)+(65535&e)&65535;return g=(g>>16^d>>16)<<16|65535&(65535&g^65535&d),(g>>16)+(c>>16)+((65535&g)+(65535&c)>>16)<<16|(65535&g)+(65535&c)&65535}function e(b,c){var e=b.left,f=b.right;e=a(e,c.p[0]),f=a(f,a(d(e,c),c.p[1])),e=a(e,a(d(f,c),c.p[2])),f=a(f,a(d(e,c),c.p[3])),e=a(e,a(d(f,c),c.p[4])),f=a(f,a(d(e,c),c.p[5])),e=a(e,a(d(f,c),c.p[6])),f=a(f,a(d(e,c),c.p[7])),e=a(e,a(d(f,c),c.p[8])),f=a(f,a(d(e,c),c.p[9])),e=a(e,a(d(f,c),c.p[10])),f=a(f,a(d(e,c),c.p[11])),e=a(e,a(d(f,c),c.p[12])),f=a(f,a(d(e,c),c.p[13])),e=a(e,a(d(f,c),c.p[14])),f=a(f,a(d(e,c),c.p[15])),e=a(e,a(d(f,c),c.p[16])),b.right=e,b.left=a(f,c.p[17])}function h(b,c){var e=b.left,f=b.right;e=a(e,c.p[17]),f=a(f,a(d(e,c),c.p[16])),e=a(e,a(d(f,c),c.p[15])),f=a(f,a(d(e,c),c.p[14])),e=a(e,a(d(f,c),c.p[13])),f=a(f,a(d(e,c),c.p[12])),e=a(e,a(d(f,c),c.p[11])),f=a(f,a(d(e,c),c.p[10])),e=a(e,a(d(f,c),c.p[9])),f=a(f,a(d(e,c),c.p[8])),e=a(e,a(d(f,c),c.p[7])),f=a(f,a(d(e,c),c.p[6])),e=a(e,a(d(f,c),c.p[5])),f=a(f,a(d(e,c),c.p[4])),e=a(e,a(d(f,c),c.p[3])),f=a(f,a(d(e,c),c.p[2])),e=a(e,a(d(f,c),c.p[1])),b.right=e,b.left=a(f,c.p[0])}function i(a){var b=a;f.isString(b)&&(b=g.map(b.split(""),function(a){return 255&a.charCodeAt(0)}));var c,d,h,i=0,k=0,l={left:0,right:0},m={p:g.map(n.p.slice(0),function(a){var c,d=b.length;for(c=0;4>c;c++)k=k*j|b[i++%d];return(a>>16^k>>16)<<16|65535&(65535&a^65535&k)}),s0:n.s0.slice(0),s1:n.s1.slice(0),s2:n.s2.slice(0),s3:n.s3.slice(0)};for(c=0,h=m.p.length;h>c;)e(l,m),m.p[c++]=l.left,m.p[c++]=l.right;for(c=0;4>c;c++)for(d=0,h=m["s"+c].length;h>d;)e(l,m),m["s"+c][d++]=l.left,m["s"+c][d++]=l.right;return m}var j=(Math.pow(2,2),Math.pow(2,3),Math.pow(2,4),Math.pow(2,8)),k=Math.pow(2,16),l=Math.pow(2,24),m=null,n={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]};this.getIV=function(a){var d=a||b.outputTypes.Base64;switch(d){case b.outputTypes.Hex:return g.map(m,function(a){return(15>=a?"0":"")+a.toString(16)}).join("");case b.outputTypes.String:return m.join("");case b.outputTypes.Raw:return m;default:return c.encode(m)}},this.setIV=function(a,d){var e=d||b.outputTypes.Base64,f=null;switch(e){case b.outputTypes.String:f=g.map(a.split(""),function(a){return a.charCodeAt(0)});break;case b.outputTypes.Hex:f=[];for(var h=0,i=a.length-1;i>h;h+=2)f.push(parseInt(a.substr(h,2),16));break;case b.outputTypes.Raw:f=a;break;default:f=c.decode(a)}m={},m.left=f[0]*l|f[1]*k|f[2]*j|f[3],m.right=f[4]*l|f[5]*k|f[6]*j|f[7]},this.encrypt=function(a,d,f){var h=b.outputTypes.Base64,n=b.cipherModes.ECB;f&&(f.outputType&&(h=f.outputType),f.cipherMode&&(n=f.cipherMode));for(var o=i(d),p=8-(7&a.length),q=0;p>q;q++)a+=String.fromCharCode(p);for(var r=[],s=a.length>>3,t=0,u={},v=n==b.cipherModes.CBC,w={left:m.left||null,right:m.right||null},q=0;s>q;q++)u.left=a.charCodeAt(t)*l|a.charCodeAt(t+1)*k|a.charCodeAt(t+2)*j|a.charCodeAt(t+3),u.right=a.charCodeAt(t+4)*l|a.charCodeAt(t+5)*k|a.charCodeAt(t+6)*j|a.charCodeAt(t+7),v&&(u.left=(u.left>>16^w.left>>16)<<16|65535&(65535&u.left^65535&w.left),u.right=(u.right>>16^w.right>>16)<<16|65535&(65535&u.right^65535&w.right)),e(u,o),v&&(w.left=u.left,w.right=u.right),r.push(u.left>>24&255),r.push(u.left>>16&255),r.push(u.left>>8&255),r.push(255&u.left),r.push(u.right>>24&255),r.push(u.right>>16&255),r.push(u.right>>8&255),r.push(255&u.right),t+=8;switch(h){case b.outputTypes.Hex:return g.map(r,function(a){return(15>=a?"0":"")+a.toString(16)}).join("");case b.outputTypes.String:return r.join("");case b.outputTypes.Raw:return r;default:return c.encode(r)}},this.decrypt=function(a,d,e){var f=b.outputTypes.Base64,n=b.cipherModes.ECB;e&&(e.outputType&&(f=e.outputType),e.cipherMode&&(n=e.cipherMode));var o=i(d),p=[],q=null;switch(f){case b.outputTypes.Hex:q=[];for(var r=0,s=a.length-1;s>r;r+=2)q.push(parseInt(a.substr(r,2),16));break;case b.outputTypes.String:q=g.map(a.split(""),function(a){return a.charCodeAt(0)});break;case b.outputTypes.Raw:q=a;break;default:q=c.decode(a)}for(var t=q.length>>3,u=0,v={},w=n==b.cipherModes.CBC,x={left:m.left||null,right:m.right||null},r=0;t>r;r++){if(v.left=q[u]*l|q[u+1]*k|q[u+2]*j|q[u+3],v.right=q[u+4]*l|q[u+5]*k|q[u+6]*j|q[u+7],w)var y=v.left,z=v.right;h(v,o),w&&(v.left=(v.left>>16^x.left>>16)<<16|65535&(65535&v.left^65535&x.left),v.right=(v.right>>16^x.right>>16)<<16|65535&(65535&v.right^65535&x.right),x.left=y,x.right=z),p.push(v.left>>24&255),p.push(v.left>>16&255),p.push(v.left>>8&255),p.push(255&v.left),p.push(v.right>>24&255),p.push(v.right>>16&255),p.push(v.right>>8&255),p.push(255&v.right),u+=8}if(p[p.length-1]==p[p.length-2]||1==p[p.length-1]){var A=p[p.length-1];p.splice(p.length-A,A)}return g.map(p,function(a){return String.fromCharCode(a)}).join("")},this.setIV("0000000000000000",b.outputTypes.Hex)},"undefined"!=typeof exports?exports.blowfish=b.Blowfish:a.blowfish=b.Blowfish}(this);var Grids=function(a){function b(a,b){return a==b?!0:0===a.indexOf("*")?(a=a.substr(1,a.length-1),b.substr(b.indexOf(a),a.length)==a):!1}function d(a,c){var d=[];d=a.split(",");for(var e=0,f=d.length;f>e;e++)if(b(d[e],c))return!0;return!1}function e(a){for(var b="",c=0,d=a.length;d>c;c++)b+=String.fromCharCode(a[c]>>1);return b}function f(a){for(var b=blowfish.decrypt(a,Ro+e([202,218,204,100]),{outputType:0,cipherMode:0}),c={},d=b.split(";"),f=0,g=d.length;g>f;f++){var h=d[f].split("="),i=h[0],j=h[1];j&&j.length>0&&(c[i]=j)}return c}function g(a){ua=a}function h(a){va=a}function j(){ya&&ya.apply(xa,arguments)}function k(){va&&ya&&ya.apply(xa,arguments)}function l(a){if(ua)throw a}function m(){return(new Date).getTime()-za}function n(a){return a!==ta&&null!==a}function p(a){return null===a?!1:"object"==typeof a}function q(a,b){return a&&b?a.toLowerCase()==b.toLowerCase():!a&&!b}function r(a){return!a||!a.trim()}function s(a){return Array.isArray?Array.isArray(a):"[object Array]"===Aa.call(a)}function t(a){return(Array.isArray?Array.isArray(a):"[object Array]"===Aa.call(a))?a:null}function u(a){return s(a)?a:[a]}function z(a,b){if(!s(a)||!s(b))return!1;var c=a.length;if(b.length!=c)return!1;for(var d=0;c>d;d++)if(a[d]!=b[d])return!1;return!0}function A(a){return a instanceof Date?a:null}function B(a,b){return Ca.width=a,Ca.height=b,Ca}function C(){for(var a=arguments,b=a.length,c=0;b>c;c++)if(v=a[c],v!==ta&&null!==v)return v;return ta}function D(a){for(var b=arguments,c=b.length,d=1;c>d;d++)if(b[d]==a)return!0;return!1}function E(a){return"number"==typeof a?isNaN(a)?"":String(a):null!==a&&void 0!==a?String(a):""}function F(a,b,c){return b=Math.max(b||2,1),c=c||0,new Array(b-String(a).length+1).join(c)+a}function G(a,b,c){b=Math.max(b||2,1),c=c||0;var d=a.toString(16);return new Array(b-d.toString(16).length+1).join(c)+d}function H(a,b){return a!==ta&&null!==a?parseInt(a,b||10):0}function I(a){return a%4==0&&a%100!=0||a%400==0}function J(a,b){var c=a.getDate();return a.setDate(1),a.setMonth(a.getMonth()+b),a.setDate(Math.min(c,Ja[I(a.getYear())?1:0][a.getMonth()])),a}function K(a){return s(a)?a:n(a)?[a]:null}function L(a,b){return a.push(b),b}function M(a){return/\s/.test(a)}function N(a){return a?a.trim():null}function O(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):a.returnValue=!1}function P(a){return a.charAt(0).toUpperCase()+a.substr(1)}function Q(a){return Object.freeze?Object.freeze(a):a}function R(a){a=a||{};for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];if(d)for(var e in d)a[e]=d[e]}return a}function S(a){this.message=a}function T(a){this.message=a||"Assert error"}function U(){throw new Error("Not supported Function.caller")}function V(a){if(s(a)){for(var b=[],c=0,d=a.length;d>c;c++)b.push(V(a[c]));return b}return"function"==typeof a.proxy?a.proxy():a}function W(a,b){if(a===b)return!0;if(null==a||null==b)return!1;var c=a.length;if(c!=b.length)return!1;for(var d=0;c>d;++d)if(a[d]!==b[d])return!1;return!0}function X(a){var b=null;try{b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a)}catch(c){if(b)throw c;b=(new DOMParser).parseFromString(a,"text/xml")}return b}function Y(a){if(a)try{return(new XMLSerializer).serializeToString(a)}catch(b){return a.xml}}function Z(a,b){var c=[];if(a){var d=a.childNodes;if(d)for(var e=0,f=d.length;f>e;e++){var g=d[e];g.tagName===b&&c.push(g)}}return c}function $(a,b){return a&&a.getAttribute(b)}function _(a,b,c){a.setAttribute(b,c)}function aa(a,b,c,d,e){var f=a.createElement(c);return d&&f.setAttribute(d,e),b.appendChild(f),f}function ba(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return b?Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0)):0}function ca(a,b){this.message=a,this.tokenPos=b}function da(a){this.message=a}function ea(a){for(var b=a[0].x,c=a[0].y,d=b,e=c,f=1,g=a.length;g>f;f++){var h=a[f];b=Math.min(b,h.x),c=Math.min(c,h.y),d=Math.max(d,h.y),e=Math.max(e,h.y)}return{x:b,y:c,width:d-b,height:e-c}}function fa(a){var b,c,d,e=a.length/2,f=a[0],g=a[1],h=f,i=g;for(b=1;e>b;b++)c=a[2*b],d=a[2*b+1],f=Math.min(f,c),g=Math.min(g,d),h=Math.max(h,c),i=Math.max(i,d);return{x:f,y:g,width:h-f,height:i-g}}function ga(a,b,c,d,e){if(c!=d){var f=c>d,g=f?-1:1,h=c;if((e||void 0===e)&&a.moveTo(b[h].x,b[h].y),2==Math.abs(d-c))return void a.lineTo(b[h+g].x,b[h+g].y);var i=.25,j={x:0,y:0},k={x:0,y:0},l={x:0,y:0},m={x:b[h+g].x-b[h].x,y:b[h+g].y-b[h].y},n={x:0,y:0},o={x:0,y:0},p={x:0,y:0},q={x:0,y:0},r=Math.sqrt(m.x*m.x+m.y*m.y);m.x/=r,m.y/=r;var s=b[h+g].x-b[h].x,t=b[h].x,u=b[h].y;for(h+=g;h!=d;h+=g){l.x=-m.x,l.y=-m.y,m.x=b[h+g].x-b[h].x,m.y=b[h+g].y-b[h].y,r=Math.sqrt(m.x*m.x+m.y*m.y),m.x/=r,m.y/=r,m.x<l.x?(n.x=l.x-m.x,n.y=l.y-m.y):(n.x=m.x-l.x,n.y=m.y-l.y);var v=Math.sqrt(n.x*n.x+n.y*n.y);n.x/=v,n.y/=v,l.y*m.y>=0&&(n={x:1,y:0}),j.x=-n.x*s*i,j.y=-n.y*s*i,h==g+c?a.quadraticCurveTo(b[h].x+j.x,b[h].y+j.y,b[h].x,b[h].y):(o.x=t+k.x,o.y=u+k.y,p.x=b[h].x+j.x,p.y=b[h].y+j.y,q.x=(o.x+p.x)/2,q.y=(o.y+p.y)/2,a.quadraticCurveTo(o.x,o.y,q.x,q.y),a.quadraticCurveTo(p.x,p.y,b[h].x,b[h].y)),s=b[h+g].x-b[h].x,k.x=n.x*s*i,k.y=n.y*s*i,t=b[h].x,u=b[h].y}a.quadraticCurveTo(t+k.x,u+k.y,b[h].x,b[h].y)}}function ha(a,b){this.message=a,this.tokenPos=b}var ia=a||window,ja=a&&a.document||document,ka="1.1.18.2255",la="",ma="assets/",na=function(a){a&&(a=String(a).trim()),a&&a.lastIndexOf("/")!=a.length-1&&(a+="/"),la=a},oa=function(a){a&&(a=String(a).trim()),a&&a.lastIndexOf("/")!=a.length-1&&(a+="/"),ma=a},pa=function(a){return"url("+la+ma+a+")"},qa=function(){return ka},ra={PRODUCT:"RealGridJs",TYPE:"Evaluation",VENDER:null},sa=function(){var a,b=location.hostname;try{a=realGridJsLic}catch(c){return!1}if(!a)return!1;var e=f(a);if(e.name!=ra.PRODUCT)return!1;var g=e.vender?e.vender:null,h=ra.VENDOR?ra.VENDOR:null;if(g!=h)return!1;var i=e.server.toLowerCase();if("Developer"!=ra.TYPE&&!d(i,b.toLowerCase()))return!1;if(licType=e.lic.toLowerCase(),"limited"!=licType&&e.lic!=ra.TYPE)return!1;if("evaluation"==licType||"asp"==licType||"limited"==licType){var j=e.expire.split("."),k=new Date(j[0],j[1],j[2],23,59,59,999);if(new Date>k)return!1}return!0};Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}(),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;var f=+b||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(c=Math.max(f>=0?f:e-Math.abs(f),0);e>c;){if(c in d&&d[c]===a)return c;c++}return-1}),Array.prototype.filter||(Array.prototype.filter=function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d}),function(){var a=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f})}();var ta,ua=!1,va=!1,wa=window.addEventListener,xa=window.console,ya=xa&&"function"==typeof xa.log?Function.prototype.bind.call(xa.log,xa):ta,za=(new Date).getTime(),Aa=Object.prototype.toString,Ba=(Math.PI,2*Math.PI,Math.pow(2,53)-1),Ca={width:0,height:0},Da=/\r|\n|\r\n/,Ea=k,Fa=(function(){var a=!1;return function(b){a||(a=!0,alert(b))}}(),m),Ga=s,Ha=F,Ia=["일","월","화","수","목","금","토"],Ja=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],Ka=K,La=N,Ma=Math.floor,Na=Math.floor,Oa=Math.round,Pa=(Math.ceil,{NOT_YET_IMPLEMENTED:"Not yet implemented"});T.prototype=new Error,T.prototype.constructor=T;var Qa=function(a,b){if(!a)throw new T(b)},Ra=Qa,Sa=function(a){this.defaultValue=a},Ta=new Sa(0),Ua=function(a){return new Sa(a)},Va={},Wa=function(){};Wa.$_hash=0;var Xa=function(a,b,c,d,e){if(null!==b&&"function"!=typeof b)throw"Base class is not a function";var f,g,h,i,j,k,l=function(){arguments[0]!==Va&&(this.$inited=!1,this.init&&this.init.apply(this,arguments),this.$inited=!0)},m=l.prototype=b?new b(Va):new Wa(Va),n=null;if(m.constructor=l,m.$base=b?b.prototype:Wa.prototype,m.$name=a,c){var o={},p=l.$inits={};for(n in c)f=c[n],"function"==typeof f?(f.$name=n,f.$owner=m,m[n]=f):(f&&f.init&&(f=f.init),o[n]=f);l.$attrs={};for(n in o)f=c[n],a=P(n),g="boolean"==typeof f?"is"+a:n,i="set"+a,k=n+"PropChanged",j=null,h=n+"_",m.hasOwnProperty(h)?(j=m[h],delete m[h]):f&&f.get?j=f.get:m.hasOwnProperty(g)||(j=function(a){return function(){return this["_"+a]}}(n)),j&&(j.$name=g,j.$owner=m,m[g]=j),j=null,f&&f.set?j=f.set:m.hasOwnProperty(i)||(j=f instanceof Sa?function(a,b){return function(c){var d;return c=parseInt(c),!isNaN(c)&&m[b]&&(d=m[b].call(this))!=c&&(this["_"+a]=c,this.$inited&&(this[k]?this[k].call(this,a,d,c):this.propertyChanged(a,d,c))),this}}(n,g):function(a,b){return function(c){var d;return m[b]&&(d=m[b].call(this))!=c&&(this["_"+a]=c,this.$inited&&(this[k]?this[k].call(this,a,d,c):this.propertyChanged(a,d,c))),this}}(n,g)),j&&(j.$name=i,j.$owner=m,m[i]=j),f&&(f instanceof Sa?o[n]=f.defaultValue:"function"==typeof f.init?p[n]=f.init:f.hasOwnProperty("value")&&(o[n]=f.value)),l.$attrs[n]={field:"_"+n,value:o[n],get:m[g],set:m[i]}}if(d)for(n in d)l[n]=d[n];return"function"==typeof e&&e.call(l,l),l};Wa.prototype.constructor=Wa,Wa.prototype.init=function(a){!a&&(this.$_hash=String(++Wa.$_hash));for(var b=this.constructor;b;){var c=b.$inits,d=b.$attrs;if(d)for(var e in d){var f=c[e],g=d[e];f=f?f.call(this):g.value,this[g.field]=f}b=b.prototype.$base&&b.prototype.$base.constructor}};var Ya=Wa.prototype;Wa.prototype._super=function(){var a,b=this._super.caller;if(b){if(a=b.$owner.$base[b.$name])return a.apply(this,arguments)}else U()},Wa.prototype._inherit=function(a){this.constructor.prototype.$base[a].apply(this,Array.prototype.slice.call(arguments,1))},Wa.prototype.className=function(){return this.constructor.prototype.$name},Wa.prototype.baseClass=function(){return this.constructor.prototype.$base},Wa.prototype.baseClassName=function(){var a=this.constructor.prototype.$base;return a&&a.$name},Wa.prototype.clone=function(){var a,b=this.constructor,c=new b,d=b.$attrs;for(var e in d)a=d[e],c[a.field]=this[a.field];return c},Wa.prototype.propertyChanged=function(a,b,c){},Wa.prototype.getAttr=function(a){for(var b=this.constructor;b;){var c=b.$attrs;if(c&&a in c)return c[a];b=b.prototype.$base&&b.prototype.$base.constructor}return null},Wa.prototype.getProperty=function(a){var b=this.getAttr(a),c=b?b.get?b.get.call(this):b:ta;return c&&c.proxy?c.proxy():c},Wa.prototype.setProperty=function(a,b){var c=this.getAttr(a);c&&c.set&&c.set.call(this,b)},Wa.prototype._initProps=function(a){if(a)for(var b in a){var c="_"+b;this.hasOwnProperty(c)&&(this[c]=a[b])}},Wa.prototype.assign=function(a){if(a instanceof Wa){if(a!==this)for(var b=a.constructor;b;){var c=b.$attrs;for(var d in c){var e=this.getAttr(d);if(e&&e.set&&(g=c[d],g.get)){var f=g.get.call(a);e.set.call(this,f)}}b=b.prototype.$base&&b.prototype.$base.constructor}}else if(p(a)){if(a!==this)for(var d in a)if(a[d]!==ta){var g=this.getAttr(d);g&&g.set&&g.set.call(this,a[d])}}else this.assignSimple(a)},Wa.prototype.assignSimple=function(a){},Wa.prototype.assignProps=function(a,b){if(a&&a!==this&&b)for(var c=0,d=b.length;d>c;c++){var e=b[c];if(a.hasOwnProperty(e)){var f=this.getAttr(e);f&&f.set&&f.set.call(this,a[e])}}},Wa.prototype.proxy=function(){for(var a,b,c,d={},e=this.constructor;e;){a=e.$attrs;for(var f in a)b=a[f],b.get&&(c=b.get.call(this),c&&c.noProxy||(c&&(c=V(c)),d[f]=c));e=e.prototype.$base&&e.prototype.$base.constructor}return d.$_hash=this.$_hash,d},Wa.prototype.as=function(a){return this instanceof a?this:null};var Za=function(a){if(ua)throw a},$a=function(){var a=arguments.callee.caller;throw Pa.NOT_YET_IMPLEMENTED+": "+a.$owner.$name+"::"+a.$name},_a=$a,ab=function(a,b){return a instanceof b?a:null},bb=Xa(null,null,{init:function(a){this._super(a),this._listeners=[]},addListener:function(a,b){return a&&this._listeners.indexOf(a)<0&&(void 0!=b&&b>=0?this._listeners.splice(b,0,a):this._listeners.push(a)),this},removeListener:function(a){var b;return a&&(b=this._listeners.indexOf(a))>=0&&this._listeners.splice(b,1),this},fireEvent:function(a){var b,c,d,e=this._listeners.length,f=Array.prototype.slice.call(arguments,0);for(f[0]=this,b=0;e>b;b++)c=this._listeners[b],d=c[a],d&&d.apply(c,f)},fireConfirmEvent:function(a){var b,c,d,e=this._listeners.length,f=Array.prototype.slice.call(arguments,0);for(f[0]=this,b=0;e>b;b++)if(c=this._listeners[b],d=c[a]){var g=d.apply(c,f);if("boolean"==typeof g&&!g)return!1}return!0},fireMessageEvent:function(a){var b,c,d,e=this._listeners.length,f=Array.prototype.slice.call(arguments,0);for(f[0]=this,b=0;e>b;b++)if(c=this._listeners[b],d=c[a]){var g=d.apply(c,f);if("string"==typeof g&&g)return g}return null},fireObjectEvent:function(a){var b,c,d,e=this._listeners.length,f=Array.prototype.slice.call(arguments,0);for(f[0]=this,b=0;e>b;b++)if(c=this._listeners[b],d=c[a]){var g=d.apply(c,f);if(g)return g}return null}}),cb=(bb.prototype,function(a,b,c,d){if(a===b)return!0;var e=String(a),f=String(b);return e||f?e&&f?(c||(e=e.toLowerCase(),f=f.toLowerCase()),d?f.indexOf(e)>=0:e==f):!1:!0}),db=function(){this._values={},this._keys={}};db.prototype={constructor:db,containsKey:function(a){return a&&this._values.hasOwnProperty(a.$_hash)},isEmpty:function(){for(var a in this._values)return!1;return!0},set:function(a,b){if(!a||!a.$_hash)throw"Invalid key";this._values[a.$_hash]=b,this._keys[a.$_hash]=a},unset:function(a){return a&&this._values.hasOwnProperty(a.$_hash)?(delete this._values[a.$_hash],delete this._keys[a.$_hash],!0):!1},clear:function(){this._values={},this._keys={}},get:function(a){return a?this._values[a.$_hash]:void 0},keys:function(){var a=[];for(var b in this._values)a.push(this._keys[b]);return a},values:function(){var a=[];for(var b in this._values)a.push(this._values[b]);return a},each:function(a){
for(var b in this._values)a.call(null,this._keys[b],this._values[b])},checkTrue:function(a){for(var b in this._values)if(a.call(null,this._keys[b],this._values[b]))return!0;return!1},checkFalse:function(a){for(var b in this._values)if(!a.call(null,this._keys[b],this._values[b]))return!0;return!1}};var eb=void 0,fb=function(a){eb=a},gb=function(){if(void 0==eb){var a=!1;return(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))&&(a=!0),a||!function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}return Boolean(eb)},hb=function(a,b){var c=a,d=b,e=[],f=[],g=[];this.name=function(){return c},this.count=function(){return e.length},this.addListener=function(a){a&&f.indexOf(a)<0&&f.push(a)},this.removeListener=function(a){var b=f.indexOf(a);b>=0&&_listener.splice(b,1)},this.addUrl=function(a){a&&e.indexOf(a)<0&&e.push(a)},this.addUrls=function(a){if(a)for(var b=0;b<a.length;b++)this.addUrl(a[b])},this.getImage=function(a){if(a>=0&&a<e.length){var b=g[a];if(b)return b;b=new Image,b.index=a,b.owner=this,g[a]=b,b.onload=function(){this.owner._fireLoaded(this.index)}.bind(b),b.src=d+e[a]}return null},this._fireLoaded=function(a){for(var b=0;b<f.length;b++)f[b].onImageListImageLoaded(this,a)}},ib=function(){var a=[],b={};this.addListener=function(b){b&&a.indexOf(b)<0&&a.push(b)},this.removeListener=function(b){var c=a.indexOf(b);c>=0&&a.splice(c,1)},this.getImage=function(a){if(a){var c=b[a];if(c)return c;c=new Image,c.owner=this,c.url=a,b[a]=c,c.onload=function(){this.owner._fireLoaded(this.url)}.bind(c),c.src=a}return null},this._fireLoaded=function(b){for(var c=0;c<a.length;c++)a[c].onImageLoaded(b)}},jb="$&,",kb=Xa("DecimalFormatter",null,{init:function(a){this._super(),this._minDigits=0,this._maxDigits=0,this._minInts=0,this._maxInts=0,this._optDecimal=!1,this._groupPos=0,this._reg=null,this._regDecimal=null,this._parse(a)},format:function(a){var b=Number(a);if(isNaN(b))return"";var c=this._minDigits;if(this._optDecimal){var d=ba(b);c=Math.min(Math.max(d,this._minDigits),this._maxDigits)}return b=Number(b.toPrecision(15)),this._reg?c?b.toFixed(c).replace(this._regDecimal,jb):b.toFixed(c).replace(this._reg,jb):b.toFixed(c)},_parse:function(a){if(a&&(a=a.trim()),a){var b,c,d=a.length,e=a.indexOf(".");if(this._optDecimal=a.indexOf("#",e)>0,e>=0){for(b=e+1;d>b&&"0"==a.charAt(b);b++)this._minDigits++,this._maxDigits++;for(;d>b&&"#"==a.charAt(b);b++)this._maxDigits++;a=a.substr(0,e)}if(a&&(d=a.length,","==a.charAt(d-1)&&(this._groupPos=3,a=a.substr(0,d-1))),a){d=a.length;var f=!0;for(b=d-1;b>=0;b--)if(c=a.charAt(b),"0"==c&&f)this._minInts++,this._maxInts++;else if(0==this._groupPos&&","==c)this._groupPos=d-b-1;else{if("#"!=c)break;f=!1}}this._groupPos>0&&(this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\.))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\.)","g"))}}},{PerformTest:function(a,b){for(var c=new kb(a),d=Fa(),e=0;b>e;e++)c.format(1234567.1234);d=Fa()-d,Ea("##### DecimalFormat PerformTest Result : "+d+" msces.")},Test:function(a,b){var c=new kb(a),d=c.format(b);Ea("##### DecimalFormat Test Result : "+d)}}),lb=Xa("BooleanFormatter",null,{init:function(a){this._super(),this._format=a,this._nullText=null,this._trueText=null,this._falseText=null,this._parse()},format:null,setFormat:function(a){a!=this._format&&(this._format=a,this._parse())},formatValue:function(a){return a===ta?this._nullText:a?this._trueText:this._falseText},_parse:function(){if(this._falseText=this._trueText=null,this._format){var a=this._format.split(/[;\:]/);this._falseText=a[0],a.length>0&&(this._trueText=a[1]),a.length>1&&(this._nullText=a[2])}}}),mb=function(a){var b=a,c=null,d=!0,e=null,f=null;this.format=function(){return b},this.setFormat=function(a){a!=b&&(b=a,g(a))},this.toBool=function(a){if(c&&a){var b=d?String(a):String(a).toLowerCase();if(b in c)return c[b]}return Boolean(a)},this.toBoolEx=function(a){var b=d?String(a):String(a).toLowerCase();return c&&b in c?c[b]:b?Boolean(b):void 0},this.toBoolStrict=function(a){if(c){var b=d?String(a):String(a).toLowerCase();if(b in c)return c[b]}return void 0},this.toText=function(a){return a?e:f};var g=function(a){if(a){var b,g,h,i,j=a.split(/[;\:]/),k=!0;for(b=j[0],h=b?b.split(","):null,j.length>1&&(b=j[1],i=b?b.split(","):null),j.length>2&&(b=La(j[2]),"0"==b&&(k=!1)),c={},d=k,g=0;g<h.length;g++)b=h[g],c[k?b:b.toLowerCase()]=!1;for(g=0;g<i.length;g++)b=i[g],c[k?b:b.toLowerCase()]=!0;e=i&&i.length>0?i[0]:"true",f=h&&h.length>0?h[0]:"false"}else c={},c["true"]=!0,c["false"]=!1,e="true",f="false"};g(b)};mb.Default=new mb("false,f,0:true,t,1:0");var nb="./-: ",ob=Xa("DateTimeParser",null,{init:function(a){this._super(),this._baseYear=0,this._patterns=[],this.setFormat(a)},format:null,baseYear:2e3,amText:"AM",pmText:"PM",setFormat:function(a){if(a!=this._format){if(!a)throw"Invalid empty date format";this.$_parseFormat(a),this._format=a}},setBaseYear:function(a){a!=this._baseYear&&(this._baseYear=a)},setAmText:function(a){a!=this._amText&&(this._amText=a)},setPmText:function(a){a!=this._pmText&&(this._pmText=a)},parse:function(a){try{var b,c=0,d=1,e=1,f=0,g=0,h=0,i=0,j=0,k=0,l=this._patterns.length,m=0,n=a.length;for(b=0;l>b&&n>m;b++){var o=this._patterns[b],p=o.c,q=o.len;switch(p){case"y":c=Na(a.substr(m,q));break;case"M":d=Na(a.substr(m,q));break;case"d":e=Na(a.substr(m,q));break;case"a":if(this._amText&&a.indexOf(this._amText,m)==m)j=12,q=this._amText.length;else{if(!this._pmText||a.indexOf(this._pmText,m)!=m)return null;k=12,q=this._pmText.length}break;case"H":f=Na(a.substr(m,q));break;case"h":f=Na(a.substr(m,q));break;case"m":g=Na(a.substr(m,q));break;case"s":h=Na(a.substr(m,q));break;case"S":i=Na(a.substr(m,q));break;case".":case"/":case"-":case":":case" ":if(nb.indexOf(a.charAt(m))<0)return null;break;default:return null}m+=q}}catch(r){return null}return 100>c&&(c+=this._baseYear),j>0?12==f&&(f=0):k>0&&12>f&&(f+=12),new Date(c,d-1,e,f,g,h,i)},$_parseFormat:function(a){var b,c,d,e=a,f=e.length,g=0;for(this._patterns=[];f>g;)if(b=g,c=e.charAt(g),M(c)){for(g++;f>g&&M(e.charAt(g));)g++;this._patterns.push({c:" ",p:b,len:g-b})}else{switch(d=0,c){case"y":d=this.$_getPattern(e,g,c),4!=d&&2!=d&&this.$_throwInvalidFormat(e);break;case"M":case"d":case"H":case"h":case"m":case"s":d=this.$_getPattern(e,g,c),2!=d&&this.$_throwInvalidFormat(e);break;case"S":d=this.$_getPattern(e,g,c),3!=d&&this.$_throwInvalidFormat(e);break;case"a":case".":case"/":case"-":case":":d=this.$_getPattern(e,g,c),1!=d&&this.$_throwInvalidFormat(e);break;default:this.$_throwInvalidFormat(e)}d>0&&(this._patterns.push({c:c,p:g,len:d}),g+=d)}},$_throwInvalidFormat:function(a){throw"Invalid date format: "+a},$_throwInvalidValue:function(a){throw"Invalid date text: "+a},$_getPattern:function(a,b,c){for(var d=1;++b<a.length&&a.charAt(b)==c;)d++;return d}}),pb=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],qb=[".","/","-",":"],rb=("0".charCodeAt(0),"9".charCodeAt(0),"Z".charCodeAt(0)),sb="z".charCodeAt(0),tb="A".charCodeAt(0),ub="a".charCodeAt(0),vb=("Y".charCodeAt(0),"y".charCodeAt(0)),wb="M".charCodeAt(0),xb="m".charCodeAt(0),yb=("D".charCodeAt(0),"d".charCodeAt(0)),zb="H".charCodeAt(0),Ab="h".charCodeAt(0),Bb="S".charCodeAt(0),Cb="s".charCodeAt(0),Db=function(a){var b=null,c=null,d=null,e=null,f=!1,g=null,h=function(a){var b=[];if(a)for(var c,d,e,f=a.trim(),g=f.length,h=0;g>h;){if(c=f.charAt(h),qb.indexOf(c)>=0)b.push(c),h++;else{for(d=h++;g>h&&f.charAt(h)==c;)h++;if(c=f.substring(d,h),pb.indexOf(c)<0&&(e=c.charCodeAt(0),e>=tb&&rb>=e||e>=ub&&sb>=e))throw new Error("Invalid datetime write format: "+a);b.push(c)}if(g>h&&M(c=f.charAt(h)))for(b.push(c);g>h&&M(f.charAt(h));)h++}return b},i=function(a){if(c="AM",d="PM",a){var g=a.split(";");if(b=g[0]||Db.$_DefaultFormat,e=h(b),f=e.indexOf("a")>=0||e.indexOf("A")>=0,g.length>1&&g[1]){var i=g[1].split(",");i.length>0&&i[0]&&(c=i[0]),i.length>1&&i[1]&&(d=i[1])}}},j=function(a){return 10>a?"0"+a:String(a)};this.format=function(){return b},this.formatString=function(){return g},this.setFormatString=function(a){a=a||Db.$_DefaultFormat,a!=g&&(e=[],i(a),g=a)},this.getText=function(a){if(!e)return"";var b=a;b instanceof Date||(b=new Date(a));for(var g,h="",i=0,k=e.length;k>i;i++){var l=e[i],m=l.length;switch(l.charCodeAt(0)){case vb:h+=m>2?b.getFullYear():j(b.getFullYear()%100);break;case wb:h+=m>1?j(b.getMonth()+1):b.getMonth()+1;break;case yb:h+=m>1?j(b.getDate()):b.getDate();break;case zb:h+=m>1?j(b.getHours()):b.getHours();break;case Ab:f?(g=b.getHours(),0==g?g=12:g>12&&(g-=12),h+=m>1?j(g):g):h+=m>1?j(b.getHours()):b.getHours();break;case xb:h+=m>1?j(b.getMinutes()):b.getMinutes();break;case Cb:h+=m>1?j(b.getSeconds()):b.getSeconds();break;case ub:case tb:h+=b.getHours()<12?c:d;break;case Bb:h+=b.getMilliseconds().toString().substr(0,m);break;default:h+=l}}return h},this.setFormatString(a||Db.$_DefaultFormat)};Db.$_DefaultFormat="yyyy/MM/dd",Db.Default=new Db(Db.$_DefaultFormat);var Eb=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],Fb=[".","/","-",":"],Gb="0".charCodeAt(0),Hb="9".charCodeAt(0),Ib=function(a){var b=null,c=null,d=null,e=null,f=2e3,g=!1,h=function(a){var b,c=[];if(b=N(a)){for(var d,e,f=b.length,g=0;f>g;){if(d=b.charAt(g),Fb.indexOf(d)>=0)c.push(d),g++;else{for(e=g++;f>g&&b.charAt(g)==d;)g++;if(d=b.substring(e,g),Eb.indexOf(d)<0)throw new Error("Invalid datetime read format: "+a);c.push("A"==d?"a":d)}if(f>g&&M(d=b.charAt(g)))for(c.push(" ");f>g&&M(b.charAt(g));)g++}var h=[];for(f=c.length,e=0,g=0;f>g;g++)d=c[g],"a"==d||Eb.indexOf(d)<0?(e>1&&h.push("E"),h.push(d),e=0):(1==e&&h.splice(h.length-2,0,"L"),h.push(d),e++);c=h}return c},i=function(a,b,c){var d,e=[],f=["am","pm","AM","PM","Am","Pm","aM","pM"];if(b&&f.push(b),c&&f.push(c),d=N(a))for(var g,h,i=d.length,j=0;i>j;){if(g=d.charAt(j),nb.indexOf(g)>=0)e.push(g),j++;else if(g.charCodeAt(0)>=Gb&&g.charCodeAt(0)<=Hb){for(h=j++;i>j&&d.charCodeAt(j)>=Gb&&d.charCodeAt(j)<=Hb;)j++;g=d.substring(h,j),e.push(g)}else{for(var k=-1,l=0;l<f.length;l++)if(d.indexOf(f[l],j)==j){k=l;break}if(0>k)throw"Invalid date value: "+d;e.push(f[l]),j+=f[l].length}if(i>j&&M(g=d.charAt(j)))for(e.push(" ");i>j&&M(d.charAt(j));)j++}return e},j=function(a){if(a=N(a)){var b=h(a),c=b.indexOf("a")>=0;if(c&&b.indexOf("H")>=0)throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+a;if(b.indexOf("h")>=0&&!c)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+a}},k=function(a){if(d="am",e="pm",f=2e3,g=!1,a){var b=a.split(";");if(c=b[0]?b[0]:_defaultFormat,j(c),b.length>1&&b[1]&&(f=Na(b[1])),b.length>2&&b[2]){var h=b[2].split(",");d=h[0]?h[0]:"am",h.length>1&&(e=h[1]?h[1]:"pm")}b.length>3&&(g=b[3]?"1"==b[3]:!1)}};this.formatString=function(){return b},this.setFormatString=function(a){a!=b&&(b=a,k(a))},this.format=function(){return c},this.getDate=function(a){var b=null;if(a=N(a)){for(var g,j=h(c),k=i(a,d,e),l=(j.indexOf("a")>=0||j.indexOf("A")>=0,j.length),m=k.length,n=0,o=1,p=1,q=0,r=0,s=0,t=0,u=0,v=0,w=0;l>v&&m>w;){var x=j[v],y=k[w];switch(x.charAt(0)){case"L":for(g=String(y),v++;l>v&&"E"!=(a=j[v]);){switch(y=g?Na(g.substr(0,a.length)):-1,g=g.substr(a.length),a.charAt(0)){case"Y":case"y":n=Math.max(0,y);break;case"M":o=y>=0?y:1;break;case"D":case"d":p=y>=0?y:1;break;case"H":case"h":q=Math.max(0,y);break;case"m":r=Math.max(0,y);break;case"s":s=Math.max(0,y)}v++}break;case"Y":case"y":n=Na(y);break;case"M":o=Na(y);break;case"D":case"d":p=Na(y);break;case"H":case"h":q=Na(y);break;case"m":r=Na(y);break;case"s":s=Na(y);break;case"a":a=String(y),a&&(a=a.toLowerCase(),d&&a==d.toLowerCase()||"am"==a?t=12:(e&&a==e.toLowerCase()||"pm"==a)&&(u=12))}v++,w++}if(100>n&&n>=0&&(n+=f),0>n||n>9999)return null;if(1>o||o>12)return null;if(1>p||p>31)return null;if(2==o){if(p>29)return null;if(29==p&&(n%4!=0||n%100==0)&&n%400!=0)return null}if(0>q||q>24)return null;if((t>0||u>0)&&q>12)return null;if(0>r||r>59)return null;if(0>s||s>59)return null;t>0?q%=12:u>0&&(q=q%12+12),b=new Date(n,o-1,p,q,r,s)}return b},this.getDateNull=function(a){try{return this.getDate(a)}catch(b){}return null},this.getText=function(a){var b=a;b instanceof Date||(b=new Date(a));for(var f,g=h(c),i=g.indexOf("a")>=0||g.indexOf("A")>=0,j="",k=0,l=g.length;l>k;k++){var m=g[k],n=m.length;switch(m.charAt(0)){case"L":break;case"Y":case"y":j+=n>2?b.getFullYear():Ha(b.getFullYear()%100);break;case"M":j+=n>1?Ha(b.getMonth()+1):b.getMonth()+1;break;case"D":case"d":j+=n>1?Ha(b.getDate()):b.getDate();break;case"H":j+=n>1?Ha(b.getHours()):b.getHours();break;case"h":i?(f=b.getHours(),0==f?f=12:f>12&&(f-=12),j+=n>1?Ha(f):f):j+=n>1?Ha(b.getHours()):b.getHours();break;case"m":j+=n>1?Ha(b.getMinutes()):b.getMinutes();break;case"s":j+=n>1?Ha(b.getSeconds()):b.getSeconds();break;case"A":case"a":j+=b.getHours()<12?d:e;break;default:j+=m}}return j},this._daysOfYear=function(a){for(var b=[31,28,31,30,31,30,31,31,30,31,30],c=0,d=0;d<a.getMonth();d++)c+=b[d];if(a.getMonth()>=2){var e=a.getFullYear();(e%400==0||e%4==0&&e%100!=0)&&c++}return c+=a.getDate()},this._daysOfPriorYears=function(a){if(1900>=a)return 0;a--;var b=parseInt(a/4)-parseInt(a/100)+parseInt(a/400)-460;return 365*(a-1899)+b},this.toExcelDate=function(a){var b=864e5,c=(1e3*(60*(60*a.getHours()+a.getMinutes())+a.getSeconds())+a.getMilliseconds())/b,d=this._daysOfPriorYears(a.getFullYear())+this._daysOfYear(a),e=d+c;return e>=60&&e++,e},this.setFormatString(a)};Ib.$_DefaultFormat="yyyy/MM/dd",Ib.Default=new Ib(Ib.$_DefaultFormat);var Jb=function(){},Kb=60*(new Date).getTimezoneOffset()*1e3;Jb.parse=function(a,b){var c=null;try{var d,e,f,g,h=a.indexOf("T"),i=a.substring(0,h),j=a.substring(h+1),k=i.split("-"),l=k.length,m=Na(k[0]),n=l>1?Na(k[1]):1,o=l>2?Na(k[2]):1;-1!=j.indexOf("Z")?(d=1,e=0,f=0,j=j.replace("Z","")):-1!=j.indexOf("+")?(d=1,g=j.substring(j.indexOf("+")+1,j.length),e=Number(g.substring(0,g.indexOf(":"))),f=Number(g.substring(g.indexOf(":")+1,g.length)),j=j.substring(0,j.indexOf("+"))):-1!=j.indexOf("-")?(d=-1,g=j.substring(j.indexOf("-")+1,j.length),e=Number(g.substring(0,g.indexOf(":"))),f=Number(g.substring(g.indexOf(":")+1,g.length)),j=j.substring(0,j.indexOf("-"))):d=0;var p=j.split(":");l=p?p.length:0;var q=l>0?Na(p[0]):0,r=l>1?Na(p[1]):0,s=l>2?String(p[2]).split("."):null,t=s&&s.length>0?Na(s[0]):0,u=s&&s.length>1?1e3*parseFloat("0."+s[1]):0,v=Date.UTC(m,n-1,o,q,r,t,u),w=d?(36e5*e+6e4*f)*d:-Kb;if(c=new Date(v-w),b&&isNaN(c.getTime()))throw"Invalidate date text: "+a}catch(x){if(b){var y="Invalid date Text: "+a;throw y+="\nError: "+x.toString()}}return c};var Lb=function(a){var b=null,c=0,d=new ob,e=function(a){if(a){var b=a.toLowerCase();c=Math.max(0,Lb.FORMATS.indexOf(b)),0==c&&d.setFormat(a)}};this.format=function(){return b},this.setFormat=function(a){a!=b&&(b=a,e(a))},this.amText=function(){return d.amText()},this.setAmText=function(a){d.setAmText(a)},this.pmText=function(){return d.pmText()},this.setPmText=function(a){d.setPmText(a)},this.baseYear=function(){return d.baseYear()},this.setBaseYear=function(a){d.setBaseYear(a)},this.toDate=function(a){if(void 0===a||null===a||""===a)return null;var b=a;if(!(b instanceof Date)){var e=String(a);if(e)switch(c){case 0:b=d.parse(e);break;case 1:b=Jb.parse(e);break;case 2:default:b=new Date(e)}}return b?isNaN(b.getTime())?null:b:null},this.setFormat(a)};Lb.FORMATS=["custom","iso","platform"],Lb.Default=new Lb("yyyy/MM/dd HH:mm:ss"),Lb.Default.setAmText("AM"),Lb.Default.setPmText("PM"),Lb.Default.setBaseYear(2e3),ExcelFormatConverter=Xa("ExcelFormatConverter",null,{},{convertNumberFormat:function(a){return a.indexOf(".#")>0?a.replace(".#",".0"):a},convertDateFormat:function(a){for(var b="",c=a.length,d=0;c>d;d++){var e=a.charAt(d);switch(e){case"y":case"d":case"m":case"s":case":":b+=e;break;case"M":b+="m";break;case"a":b+="AM/PM";break;case"H":b+="h",(d>=c-1||"H"!=a.charAt(d+1))&&(b+="h");break;case"h":(0==d||"h"!=a.charAt(d-1))&&(b+="h");break;case"S":break;case".":case"/":case"-":case" ":(d>=c-1||"S"!=a.charAt(d+1))&&(b=b+"\\"+e);break;default:b=b+'"'+e+'"'}}return b}}),ExcelFormatConverter.Default=new ExcelFormatConverter;var Mb=function(a,b,c,d,e){var f=Oa(b.x+(b.width-c)/2),g=Oa(b.y+(b.height-c)/2),h=Oa(c/9),i=[f+0*h,g+0*h,f+0*h,g+9*h,f+9*h,g+9*h,f+9*h,g+0*h],j=[f+4*h,g+2*h,f+4*h,g+4*h,f+2*h,g+4*h,f+2*h,g+5*h,f+4*h,g+5*h,f+4*h,g+7*h,f+5*h,g+7*h,f+5*h,g+5*h,f+7*h,g+5*h,f+7*h,g+4*h,f+5*h,g+4*h,f+5*h,g+2*h];a.drawPolygonArray(d,null,i),a.drawPolygonArray(e,null,j)},Nb=function(a,b,c,d,e){var f=Oa(b.x+(b.width-c)/2),g=Oa(b.y+(b.height-c)/2),h=Oa(c/9),i=[f+0*h,g+0*h,f+0*h,g+9*h,f+9*h,g+9*h,f+9*h,g+0*h],j=[f+2*h,g+4*h,f+2*h,g+5*h,f+7*h,g+5*h,f+7*h,g+4*h];a.drawPolygonArray(d,null,i),a.drawPolygonArray(e,null,j)},Ob=function(a,b,c,d){var e=c.x+(c.width-d)/2,f=c.y+(c.height-d)/2-d/6,g=d/10,h=[e+0*g,f+6.573*g,e+4.3915*g,f+10*g,e+10.1*g,f+.91*g,e+8.205*g,f+0*g,e+3.684*g,f+6.9425*g,e+1.2*g,f+5*g];a.drawPolygonArray(b,null,h)},Pb=function(a,b,c,d){var e=b.x+(b.width-c)/2,f=b.y+(b.height-c)/2,g=c/9,h=[e+1.75*g,f+1*g,e+5.25*g,f+4.5*g,e+1.75*g,f+8*g,e+2.75*g,f+9*g,e+7.25*g,f+4.5*g,e+2.75*g,f+0*g];a.drawPolygonArray(d,null,h)},Qb=function(a,b,c,d){var e=b.x+(b.width-c)/2,f=b.y+(b.height-c)/2,g=c/9,h=[e+0*g,f+2.75*g,e+4.5*g,f+7.25*g,e+9*g,f+2.75*g,e+8*g,f+1.75*g,e+4.5*g,f+5.25*g,e+1*g,f+1.75*g];a.drawPolygonArray(d,null,h)};ca.prototype=new Error,ca.prototype.constructor=ca,da.prototype=new Error,da.prototype.constructor=da;var Rb=function(){for(var a=[],b=0;b<arguments.length;b++)a[arguments[b]]=!0;return a},Sb={Unknown:0,Add:1,Slash:2,Star:3,Minus:4,Plus:5,Identifier:10,And:11,In:12,Not:13,Div:14,Mod:15,Shl:16,Shr:17,Or:18,Xor:19,ToStr:20,ToNum:21,ToBool:23,Length:24,LengthBin:25,Is:26,IsNot:27,BraceClose:30,BraceOpen:31,Comma:32,CRLF:33,Null:34,Defined:35,Empty:36,NaN:37,Equal:40,Greater:41,GreaterEqual:42,Lower:43,LowerEqual:44,NotEqual:45,Like:46,NotLike:47,ILike:48,NotILike:49,Match:50,NotMatch:51,IMatch:52,NotIMatch:53,String:60,StringLiteral:61,Ascii:62,FloatLiteral:63,IntegerLiteral:64,Point:65,RoundOpen:66,RoundClose:67,DotDot:68,BracketOpen:69,BracketClose:70,Space:71,Symbol:80,ToDateStr:90,ToYear:91,ToMonth:92,ToDay:93,ToHour:94};Sb.IS_CHECK=Rb(Sb.Is,Sb.IsNot),Sb.IS_RELATIVE=Rb(Sb.Equal,Sb.NotEqual,Sb.Like,Sb.NotLike,Sb.ILike,Sb.NotILike,Sb.Match,Sb.NotMatch,Sb.IMatch,Sb.NotIMatch,Sb.Greater,Sb.GreaterEqual,Sb.Lower,Sb.LowerEqual),Sb.IS_ADDITIVE=Rb(Sb.Minus,Sb.Plus,Sb.Or,Sb.Xor),Sb.IS_MULTIPLICATIVE=Rb(Sb.And,Sb.Star,Sb.Slash,Sb.Div,Sb.Mod,Sb.Shl,Sb.Shr);var Tb=function(){function a(){var a=K.charCodeAt(N);S=N,256>a?J[a]():j()}function b(){M=Sb.Symbol,N++}function c(){M=Sb.Comma,N++}function d(){M=Sb.CRLF,10==K.charCodeAt(N+1)?N+=2:N++,Q++,R=N}function e(){M=Sb.CRLF,N++,Q++,R=N}function f(){M=Sb.Equal,N++}function g(){"="==K.charAt(N+1)?(M=Sb.GreaterEqual,N+=2):(M=Sb.Greater,N++)}function h(){"="==K.charAt(N+1)?(M=Sb.LowerEqual,N+=2):">"==K.charAt(N+1)?(M=Sb.NotEqual,N+=2):(M=Sb.Lower,N++)}function i(){for(var a=N;L>a&&!A[K.charCodeAt(a)];)a++;for(var b=a;L>a&&A[K.charCodeAt(a)];)a++;return a>b?(P=a,K.substr(b,a-b).toLowerCase()):null}function j(){for(var a=N;L>N&&(A[K.charCodeAt(N)]||K.charCodeAt(N)>255);)N++;var b=K.substr(a,N-a).toLowerCase();if(H.hasOwnProperty(b))switch(M=H[b]){case Sb.Not:if(b=i())switch(b){case"like":M=Sb.NotLike,N=P;break;case"ilike":M=Sb.NotILike,N=P;break;case"match":M=Sb.NotMatch,N=P;break;case"imatch":M=Sb.NotIMatch,N=P}break;case Sb.Is:b=i(),"not"==b&&(M=Sb.IsNot,N=P)}else M=Sb.Identifier}function k(){for(M=Sb.IntegerLiteral,N++;L>N&&B[K.charCodeAt(N)];)N++}function l(){for(M=Sb.IntegerLiteral,N++;L>N&&C[K.charCodeAt(N)];){if("."==K.charAt(N)){if("."==K.charAt(N+1))break;M=Sb.FloatLiteral}N++}}function m(){M=Sb.Minus,N++}function n(){M=Sb.Plus,N++}function o(){var a=K.charAt(N+1);"."==a?(M=Sb.DotDot,N+=2):(M=Sb.Point,N++)}function p(){M=Sb.RoundOpen,N++}function q(){M=Sb.RoundClose,N++}function r(){M=Sb.Slash,N++}function s(){for(M=Sb.Space,N++;L>N&&D[K.charCodeAt(N)];)N++}function t(){M=Sb.BracketOpen,N++}function u(){M=Sb.BracketClose,N++}function v(){M=Sb.Star,N++}function w(){M=Sb.Mod,N++}function x(){M=Sb.StringLiteral;do{var a=K.charCodeAt(N);if(E[a])throw new ca("Untermintated string",a);N++}while(L>N&&K.charCodeAt(N)!=F);N++}function y(){M=Sb.StringLiteral;do{var a=K.charCodeAt(N);if(E[a])throw new ca("Untermintated string",a);N++}while(L>N&&K.charCodeAt(N)!=G);N++}function z(){var a;for(J=[],a=1;255>=a;a++)J[a]=b;for(a=1;32>=a;a++)J[a]=s;for(J[10]=e,J[13]=d,J["$".charCodeAt()]=k,J[F]=x,J[G]=y,a=0;9>=a;a++)J["0".charCodeAt()+a]=l;for(a="A".charCodeAt();a<="Z".charCodeAt();a++)J[a]=j;for(a="a".charCodeAt();a<="z".charCodeAt();a++)J[a]=j;J["_".charCodeAt()]=j,J["(".charCodeAt()]=p,J[")".charCodeAt()]=q,J["*".charCodeAt()]=v,J["+".charCodeAt()]=n,J[",".charCodeAt()]=c,J["-".charCodeAt()]=m,J[".".charCodeAt()]=o,J["/".charCodeAt()]=r,J["%".charCodeAt()]=w,J["<".charCodeAt()]=h,J["=".charCodeAt()]=f,J[">".charCodeAt()]=g,J["[".charCodeAt()]=t,J["]".charCodeAt()]=u}for(var A=[],B=[],C=[],D=[],E=[],F=0,G=0,H={},I=0;256>I;I++)A[I]=I=="_".charCodeAt()||I>="0".charCodeAt()&&I<="9".charCodeAt()||I>="a".charCodeAt()&&I<="z".charCodeAt()||I>="A".charCodeAt()&&I<="Z".charCodeAt(),B[I]=I>="0".charCodeAt()&&I<="9".charCodeAt()||I>="a".charCodeAt()&&I<="f".charCodeAt()||I>="A".charCodeAt()&&I<="F".charCodeAt(),C[I]=I>="0".charCodeAt()&&I<="9".charCodeAt()||I==".".charCodeAt()||I=="e".charCodeAt()||I=="E".charCodeAt(),D[I]=I>=1&&9>=I||11==I||I>=14&&32>=I,E[I]=0==I;F='"'.charCodeAt(),G="'".charCodeAt(),H={},H.str=Sb.ToStr,H.num=Sb.ToNum,H.bool=Sb.ToBool,H.not=Sb.Not,H.len=Sb.Length,H.lenb=Sb.LengthBin,H.and=Sb.And,H["in"]=Sb.In,H.mod=Sb.Mod,H.or=Sb.Or,H.div=Sb.Div,H.shl=Sb.Shl,H.shr=Sb.Shr,H.xor=Sb.Xor,H.is=Sb.Is,H.like=Sb.Like,H.ilike=Sb.ILike,H.match=Sb.Match,H.imatch=Sb.IMatch,H.defined=Sb.Defined,H["null"]=Sb.Null,H.empty=Sb.Empty,H.nan=Sb.NaN,H.datestr=Sb.ToDateStr,H.year=Sb.ToYear,H.month=Sb.ToMonth,H.day=Sb.ToDay,H.hour=Sb.ToHour;var J=null,K=null,L=0,M=0,N=0,O=0,P=0,Q=0,R=0,S=0;this.tokenId=function(){return M},this.tokenLoc=function(){return{x:S-R,y:Q}},this.tokenLen=function(){return N-S},this.token=function(){return K.substr(S,this.tokenLen())},this.isSpace=function(){return M==Sb.Space},this.init=function(a){K=a,L=a.length,_origin=0,Q=0,R=0,S=0,O=N=0,M=0},this.charAhread=function(){for(O=N;L>O&&K.charCodeAt(O)>0&&K.charCodeAt(O)<=32;)O++;return K.charCodeAt(this._runAhead)},this.nextId=function(b){do a();while(L>N&&M!=b)},this.nextNoSpace=function(){if(L>N)do a();while(L>N&&this.isSpace())},this.isFirstInLine=function(){if(0==S)return!0;var a,b=S;for(b--;b>0&&D[K.charCodeAt(b)];)b--;return 0==b?!0:(a=K.charCodeAt(b),10==a||13==a?!0:!1)},z()},Ub=Xa("ExpressionNode",null,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){_a()},toString:function(){return String(this)}}),Vb=Xa("EmptyExpressionNode",Ub,{init:function(){this._super()},_asLiteral:function(){return null},evaluate:function(){return void 0},toString:function(){return""}},null,function(a){a.Default=new a}),Wb=Xa("ExpressionNodeImpl",Ub,{init:function(){this._super(),this.leftExpr=null,this.rightExpr=null,this.operator=Sb.Unknown,this._literal=null},evaluate:function(a){if(this._literal)return this._literal.value();if(!this.rightExpr)return this.leftExpr.evaluate(a);var b=this.leftExpr.evaluate(a),c=this.rightExpr.evaluate(a);switch(this.operator){case Sb.Equal:return b==c;case Sb.NotEqual:return b!=c;case Sb.Greater:return b>c;case Sb.GreaterEqual:return b>=c;case Sb.Lower:return c>b;case Sb.LowerEqual:return c>=b;case Sb.Like:return this._calcLike(b,c,!1);case Sb.NotLike:return!this._calcLike(b,c,!1);case Sb.ILike:return this._calcLike(b,c,!0);case Sb.NotILike:return!this._calcLike(b,c,!0);case Sb.Match:return this._calcMatch(b,c,!1);case Sb.NotMatch:return!this._calcMatch(b,c,!1);case Sb.IMatch:return this._calcMatch(b,c,!0);case Sb.NotIMatch:return!this._calcMatch(b,c,!0);default:throw new da("Unknown operator: "+operator)}},toString:function(){var a="";if(this._literal)a=this._literal.toString();else if(this.rightExpr){var b,c=this.leftExpr.toString(),d=this.rightExpr.toString();switch(this.operator){case Sb.Equal:b="=";break;case Sb.NotEqual:b="<>";break;case Sb.Greater:b=">";break;case Sb.GreaterEqual:b=">=";break;case Sb.Lower:b="<";break;case Sb.LowerEqual:b="<=";break;case Sb.Like:b="like";break;case Sb.NotLike:b="not like";break;case Sb.ILike:b="ilike";break;case Sb.NotILike:b="not ilike";break;case Sb.Match:b="match";break;case Sb.NotMatch:b="not match";break;case Sb.IMatch:b="imatch";break;case Sb.NotIMatch:b="not imatch";break;default:b="<<ERROR>>"}a="("+c+" "+b+" "+d+")"}else a=this.leftExpr.toString();return a},isIdentifier:function(a){return this.leftExpr&&!this.rightExpr&&this.leftExpr.isIdentifier(a)},_prepareValue:function(){this.leftExpr._prepareValue(),null==this.rightExpr?this._literal=this.leftExpr._getLiteral():this.rightExpr._prepareValue()},_getLiteral:function(){return this._literal},_calcLike:function(a,b,c){var d=String(a),e=String(b);if(d&&e){c&&(d=d.toLowerCase(),e=e.toLowerCase());var f=e.length;if(f>1){var g="%"==e.charAt(0),h="%"==e.charAt(f-1);return g&&h?(e=e.substr(1,f-2),d.indexOf(e,0)>=0):g?(e=e.substr(1,f-1),f=d.length,d.lastIndexOf(e,f-1)==f-1):h?(e=e.substr(0,f-1),0==d.indexOf(e,0)):d==e}return"%"==e?!1:d==e}return!1},_calcMatch:function(a,b,c){var d=new RegExp(b,"m"+(c?"i":""));return d.test(a)}}),Xb=Xa("DefinedNode",Ub,{init:function(){this._super()}}),Yb=Xa("DefinedNode",Xb,{init:function(){this._super()},value:function(){return ta},_asLiteral:function(){return this},evaluate:function(a){return ta},toString:function(){return"defined"}}),Zb=Xa("EmptyNode",Xb,{init:function(){this._super()},value:function(){return ta},_asLiteral:function(){return this},evaluate:function(a){return ta},toString:function(){return"empty"}}),$b=Xa("NullNode",Xb,{init:function(){this._super()},value:function(){return ta},_asLiteral:function(){return this},evaluate:function(a){return null},toString:function(){return"null"}}),_b=Xa("NanNode",Xb,{init:function(){this._super()},value:function(){return NaN},_asLiteral:function(){return this},evaluate:function(a){return NaN},toString:function(){return"NaN"}}),ac=Xa("CheckNode",Wb,{init:function(a,b,c){this._super(),this.leftExpr=a,this.operator=b,this._isNot=b==Sb.IsNot,this._value=-1,c instanceof Yb?this._value=ac.DEFINED:c instanceof $b?this._value=ac.NULL:c instanceof Zb?this._value=ac.EMPTY:c instanceof _b&&(this._value=ac.NAN)},_prepareValue:function(){this.leftExpr._prepareValue(),this._literal=this.leftExpr._getLiteral()},_getLiteral:function(){return null},evaluate:function(a){var b,c=this._literal?this._literal.value():this.leftExpr.evaluate(a);switch(this._value){case ac.DEFINED:b=c!==ta;break;case ac.NULL:b=c===ta||null===c;break;case ac.EMPTY:b=c===ta||null===c||0==String(c).length;break;case ac.NAN:b=null===c||isNaN(c);break;default:return ta}return this._isNot?!b:b},toString:function(){var a="<<ERROR>>";switch(this._value){case ac.DEFINED:a="defined";break;case ac.NULL:a="null";break;case ac.EMPTY:a="empty";break;case ac.NAN:a="NaN"}return"("+((this._isNot?"is not ":"is ")+a)+")"}},{DEFINED:0,NULL:1,EMPTY:2,NAN:3}),bc=Xa("FloatLiteralNode",Ub,{init:function(a){this._super(),this._value=Number(a)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(a){return this._value},toString:function(){return String(this._value)}}),cc=Xa("IntegerLiteralNode",Ub,{init:function(a){this._super(),this._value=parseInt(a)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(a){return this._value},toString:function(){return String(this._value)}}),dc=Xa("StringLiteralNode",Ub,{init:function(a){this._super(),this._value=a.substr(1,a.length-2)},value:function(){return this._value},_asLiteral:function(){return this},evaluate:function(a){return this._value},toString:function(){return this._value}}),ec=Xa("IdentifierNode",Ub,{init:function(a){this._super(),this._literal=a,this._idKey=-651212},identifier:function(){return this._literal},evaluate:function(a){return-651212==this._idKey&&(this._idKey=a.isIdentifier(this._literal)),a.evaluateIdentifier(this._idKey)},toString:function(){return this._literal}}),fc=Xa("IndexerNode",Ub,{init:function(a,b,c){this._super(),this._ident=a,this._indexer=b,this._capital=c,this._idKey=-1490313,this._intIndex=NaN,this._strIndex=null},_prepareValue:function(){var a=null,b=this._indexer._asLiteral();if(b||(a=this._indexer._prepareValue&&this._indexer,a&&(a._prepareValue(),b=a._getLiteral())),b){var c=b.value();"string"==typeof c?this._strIndex=c:this._intIndex=parseInt(c),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},_getLiteral:function(){return null},evaluate:function(a){if(-1490313==this._idKey&&(this._idKey=a.isIdentifier(this._ident)),this._strIndex)return a.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var b=this._indexer.evaluate(a);return"string"==typeof b?a.evaluateIndexerS(this._idKey,b,this._capital):a.evaluateIndexerI(this._idKey,b)}return a.evaluateIndexerI(this._idKey,this._intIndex)},toString:function(){var a=this._ident+"["+this._indexer.toString()+"]";return a}}),gc=Xa("UnaryNode",Ub,{init:function(a){this._super(),this._factor=a,this._literal=null},_prepareValue:function(){this._literal=this._factor._asLiteral(),!this._literal&&this._factor._prepareValue&&(this._factor._prepareValue(),this._literal=this._factor._getLiteral())},_getLiteral:function(){return null}}),hc=Xa("LenNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b?b.length:0},toString:function(){return"(len "+this._factor+")"}}),ic=Xa("MinusNode",gc,{init:function(a){this._super(a)},evaluate:function(a){
var b=this._literal?this._literal.value():this._factor.evaluate(a);return-b},toString:function(){return"-"+this._factor}}),jc=Xa("PlusNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b},toString:function(){return"+"+this._factor}}),kc=Xa("NotNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return!b},toString:function(){return"(not "+this._factor+")"}}),lc=Xa("ToBoolNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return Boolean(b)},toString:function(){return"(bool "+this._factor+")"}}),mc=Xa("ToNumberNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return Number(b)},toString:function(){return"(num "+this._factor+")"}}),nc=Xa("ToStringNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return String(b)},toString:function(){return"(str "+this._factor+")"}}),oc=Xa("ToDateStringNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b instanceof Date&&(b=F(b.getFullYear(),4)+F(b.getMonth()+1,2)+F(b.getDate(),2)+F(b.getHours(),2)+F(b.getMinutes(),2)+F(b.getSeconds(),2)+F(b.getMilliseconds(),3)),String(b)},toString:function(){return"(datestr "+this._factor+")"}}),pc=Xa("ToYearNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b instanceof Date?b.getFullYear():null},toString:function(){return"(year "+this._factor+")"}}),qc=Xa("ToMonthNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b instanceof Date?b.getMonth()+1:null},toString:function(){return"(month "+this._factor+")"}}),rc=Xa("ToDayNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b instanceof Date?b.getDate():null},toString:function(){return"(day "+this._factor+")"}}),sc=Xa("ToHourNode",gc,{init:function(a){this._super(a)},evaluate:function(a){var b=this._literal?this._literal.value():this._factor.evaluate(a);return b instanceof Date?b.getHours():null},toString:function(){return"(hour "+this._factor+")"}}),tc=Xa("TermNode",Ub,{init:function(){this._super(),this._factors=[],this._operators=[],this._literal=null},addFactor:function(a){this._factors.push(a)},addOperator:function(a){this._operators.push(a)},isIdentifier:function(a){return 1==this._factors.length&&this._factors[0]instanceof ec&&this._factors[0].identifier()==a},_prepareValue:function(){var a,b,c;for(a=0,b=this._factors.length;b>a;a++)c=this._factors[a],c._prepareValue&&c._prepareValue();0==this._operators.length&&(c=this._factors[0],this._literal=c._asLiteral(),!this._literal&&c._prepareValue&&(this._literal=c._getLiteral()))},_getLiteral:function(){return this._literal},evaluate:function(a){if(this._literal)return this._literal.value();var b,c,d=this._factors.length,e=this._factors[0].evaluate(a);for(b=1;d>b;b++)switch(c=this._factors[b].evaluate(a),this._operators[b-1]){case Sb.And:e=e&&c;break;case Sb.Star:e*=c;break;case Sb.Slash:e/=c;break;case Sb.Div:e=Na(Na(e)/Na(c));break;case Sb.Mod:e%=c;break;case Sb.Shl:e<<=c;break;case Sb.Shr:e>>=c}return e},toString:function(){var a="";if(this._literal)a=this._literal.toString();else if(1==this._factors.length)a=this._factors[0].toString();else{var b,c=this._factors.length;for(a="("+this._factors[0].toString(),b=1;c>b;b++){switch(this._operators[b-1]){case Sb.And:a+=" and ";break;case Sb.Star:a+=" * ";break;case Sb.Slash:a+=" / ";break;case Sb.Div:a+=" / ";break;case Sb.Mod:a+=" mod ";break;case Sb.Shl:a+=" shl ";break;case Sb.Shr:a+=" shr "}a+=this._factors[b].toString()}a+=")"}return a}}),uc=Xa("SimpleExpressioNode",Ub,{init:function(){this._super(),this._terms=[],this._operators=[],this._literal=null},addTerm:function(a){this._terms.push(a)},addOperator:function(a){this._operators.push(a)},isIdentifier:function(a){return 1==this._terms.length&&this._terms[0].isIdentifier(a)},_prepareValue:function(){var a,b;for(a=0,b=this._terms.length;b>a;a++)this._terms[a]._prepareValue();0==this._operators.length&&(this._literal=this._terms[0]._getLiteral())},_getLiteral:function(){return this._literal},evaluate:function(a){if(this._literal)return this._literal.value();var b,c,d=this._terms.length,e=this._terms[0].evaluate(a);for(b=1;d>b;b++)switch(c=this._terms[b].evaluate(a),this._operators[b-1]){case Sb.Minus:e-=c;break;case Sb.Plus:e+=c;break;case Sb.Or:e=e||c;break;case Sb.Xor:e^=c}return e},toString:function(){var a="";if(this._literal)a=this._literal.toString();else if(1==this._terms.length)a=this._terms[0].toString();else{var b,c=this._terms.length;for(a="("+this._terms[0].toString(),b=1;c>b;b++){switch(this._operators[b-1]){case Sb.Minus:a+=" - ";break;case Sb.Plus:a+=" + ";break;case Sb.Or:a+=" or ";break;case Sb.Xor:a+=" xor ";break;default:a+=" <<ERROR>> "}a+=this._terms[b].toString()}a+=")"}return a}}),vc=function(){function a(a){if(a!=D.tokenId())throw new ca("Token is not a expected kind ["+a+"]: "+D.tokenId(),D.tokenLoc());b()}function b(){D.nextNoSpace()}function c(){var a,c,e,f=null,g=d();if(Sb.IS_CHECK[e=D.tokenId()]){if(b(),a=d(),a._prepareValue(),c=ab(a._getLiteral(),Xb),!c)throw new ca("is operator's operand must be defined, null or empty: "+D.tokenId());f=new ac(g,e,c)}else f=new Wb,f.leftExpr=g,Sb.IS_RELATIVE[D.tokenId()]&&(f.operator=D.tokenId(),b(),f.rightExpr=d());return f}function d(){var a=new uc;for(a.addTerm(e());Sb.IS_ADDITIVE[D.tokenId()];)a.addOperator(D.tokenId()),b(),a.addTerm(e());return a}function e(){var a=new tc;for(a.addFactor(f());Sb.IS_MULTIPLICATIVE[D.tokenId()];)a.addOperator(D.tokenId()),b(),a.addFactor(f());return a}function f(){var a=D.tokenId();switch(a){case Sb.StringLiteral:return g();case Sb.RoundOpen:return h();case Sb.Identifier:return i();case Sb.IntegerLiteral:return k();case Sb.FloatLiteral:return j();case Sb.Minus:return l();case Sb.Plus:return m();case Sb.Not:return n();case Sb.Defined:return o();case Sb.Null:return p();case Sb.Empty:return q();case Sb.NaN:return r();case Sb.ToBool:return s();case Sb.ToNum:return t();case Sb.ToStr:return u();case Sb.Length:return v();case Sb.LengthBin:return w();case Sb.ToDateStr:return x();case Sb.ToYear:return y();case Sb.ToMonth:return z();case Sb.ToDay:return A();case Sb.ToHour:return B()}throw new ca("Unkown token: "+a)}function g(){var a=D.token();return b(),new dc(a)}function h(){b();var d=c();return a(Sb.RoundClose),d}function i(){var d=D.token();if(b(),D.tokenId()==Sb.BracketOpen){b();var e=c();return a(Sb.BracketClose),new fc(d,e,C.indexOf(d)>=0)}return new ec(d)}function j(){var a=D.token();return b(),new bc(a)}function k(){var a=D.token();return b(),new cc(a)}function l(){return b(),new ic(f())}function m(){return b(),new jc(f())}function n(){return b(),new kc(f())}function o(){return b(),new Yb}function p(){return b(),new $b}function q(){return b(),new Zb}function r(){return b(),new _b}function s(){return b(),new lc(f())}function t(){return b(),new mc(f())}function u(){return b(),new nc(f())}function v(){return b(),new hc(f())}function w(){return b(),new LenBinNode(f())}function x(){return b(),new oc(f())}function y(){return b(),new pc(f())}function z(){return b(),new qc(f())}function A(){return b(),new rc(f())}function B(){return b(),new sc(f())}var C=null,D=new Tb;this.parse=function(a,d){if(!a)return null;C=d||[],D.init(a),b();var e=c();return e&&e._prepareValue(),e},this.evaluate=function(a,b,c){var d=this.parse(a,c);return d.evaluate(b)}};vc.Default=new vc;var wc=Xa("ExpressionRuntime",null,{init:function(){this._super()},isIdentifier:function(a){throw new Error("Token is not a valid Identifier: "+a)},evaluateIdentifier:function(a){throw new Error("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){throw new Error("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b){throw new Error("Invalid identifier indexer: "+a)}}),xc='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n',yc=function(a){return a>=26?(a-=26,String.fromCharCode(Na(a/26)+65)+String.fromCharCode(Na(a%26)+65)):String.fromCharCode(a+65)},zc=function(a){var b="",c=/(>)(<)(\/*)/g;a=a.replace(c,"$1\r\n$2$3");for(var d=0,e=a.split("\r\n"),f=0,g=e.length;g>f;f++){var h=e[f],i=0;h.match(/.+<\/\w[^>]*>$/)?i=0:h.match(/^<\/\w/)?0!=d&&(d-=1):i=h.match(/^<\w[^>]*[^\/]>.*$/)?1:0;for(var j="",k=0;d>k;k++)j+="  ";b+=j+h+"\r\n",d+=i}return b},Ac=Xa("ExcelStrings",null,{init:function(a){this._super(),this._workbook=a,this._nextId=0,this._count=0,this._stringMap={},this._strings=[]},count:function(){return this._count},uniqueCount:function(){return this._nextId},add:function(a){this._count++;var b=this._stringMap[a];return void 0===b&&(b=this._nextId++,this._stringMap[a]=b,this._strings[b]=a),b},getIndex:function(a){return this._stringMap[a]},createPart:function(){var a='<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></sst>',b=X(a),c=b.documentElement;c.setAttribute("count",this._count),c.setAttribute("uniqueCount",this._nextId);for(var d=0,e=this._strings.length;e>d;d++){var f=b.createElement("si");c.appendChild(f);var g=b.createElement("t");f.appendChild(g);var h=b.createTextNode(this._strings[d]);g.appendChild(h)}return a=Y(b),xc+a}}),Bc=function(){this.id=void 0,this.name="Tahoma",this.size=10,this.color="ff000000",this.bold=!1,this.italic=!1,this.scheme=void 0};Bc.prototype.serialize=function(a,b){aa(a,b,"sz","val",this.size||10),aa(a,b,"name","val",this.name||"Calibri"),aa(a,b,"color","rgb",this.color||"ff000000"),aa(a,b,"b","val",this.bold?"true":"false"),aa(a,b,"i","val",this.italic?"true":"false")};var Cc=function(){this.id=void 0,this.patternType="none",this.color=void 0,this.gradient=void 0,this.color2=void 0,this.degree="90",this.tint=0,this.serialize=function(a,b){var c;if("linear"==this.gradient){var d=a.createElement("gradientFill");b.appendChild(d),d.setAttribute("degree",this.degree);var e=a.createElement("stop");d.appendChild(e),e.setAttribute("position","0"),c=a.createElement("color"),e.appendChild(c),c.setAttribute("rgb",this.color),c.setAttribute("tint",this.tint),e=a.createElement("stop"),d.appendChild(e),e.setAttribute("position","1"),c=a.createElement("color"),e.appendChild(c),c.setAttribute("rgb",this.color2),c.setAttribute("tint",this.tint)}else{var f=a.createElement("patternFill");b.appendChild(f),f.setAttribute("patternType",this.patternType),"none"!=this.patternType&&(c=a.createElement("fgColor"),f.appendChild(c),c.setAttribute("rgb",this.color),c.setAttribute("tint",this.tint))}}},Dc=function(){this.id=void 0,this.left=void 0,this.right=void 0,this.top=void 0,this.bottom=void 0};Dc.prototype.serialize=function(a,b){this.serializeBorder(a,b,"left"),this.serializeBorder(a,b,"right"),this.serializeBorder(a,b,"top"),this.serializeBorder(a,b,"bottom")},Dc.prototype.serializeBorder=function(a,b,c){var d=a.createElement(c);if(b.appendChild(d),c=this[c]){d.setAttribute("style","thin");var e=a.createElement("color");d.appendChild(e),e.setAttribute("rgb",c._color.toColorHex())}};var Ec=function(){this.id=void 0,this.horzAlign=Ec.ALIGN_NEAR,this.vertAlign=Ec.VALIGN_CENTER,this.wrapText=!1,this.formatId=0,this.font=null,this.fill=null,this.border=null,this.xfId=0};Ec.ALIGN_NEAR="left",Ec.ALIGN_CENTER="center",Ec.ALIGN_FAR="right",Ec.VALIGN_NEAR="top",Ec.VALIGN_CENTER="center",Ec.VALIGN_FAR="bottom",Ec.prototype.clone=function(){var a=new Ec;for(var b in this)this.hasOwnProperty(b)&&(a[b]=this[b]);return a.id=void 0,a},Ec.prototype.serialize=function(a,b){this.border&&b.setAttribute("borderId",this.border?this.border.id:"0"),this.fill&&b.setAttribute("fillId",this.fill?this.fill.id:"0"),this.font&&b.setAttribute("fontId",this.font?this.font.id:"0"),b.setAttribute("numFmtId",this.formatId),b.setAttribute("xfId","0");var c=a.createElement("alignment");b.appendChild(c),c.setAttribute("horizontal",this.horzAlign),c.setAttribute("vertical",this.vertAlign),this.wrapText&&c.setAttribute("wrapText","1")},$$_EXCEL_NUMFMT_START=200;var Fc=Xa("ExcelStyles",null,{init:function(a){this._super(),this._book=a,this._fonts=[],this._fills=[],this._borders=[],this._numFormats=[],this._xfs=[];var b=new Cc;this._fills.push(b,b);var c=new Dc;this._borders.push(c);var d=new Bc;this._fonts.push(d);var e=new Ec;this._xfs.push(e)},addFont:function(a){return a?(this._fonts.push(a),a.id=this._fonts.length-1):0},addFill:function(a){return a?(this._fills.push(a),a.id=this._fills.length-1):0},addBorder:function(a){return a?(this._borders.push(a),a.id=this._borders.length-1):0},addNumberFormat:function(a){var b=this._numFormats.indexOf(a);return 0>b&&(this._numFormats.push(a),b=this._numFormats.length-1),$$_EXCEL_NUMFMT_START+b},add:function(a){return a?(this._xfs.push(a),a.id=this._xfs.length-1):0},createPart:function(){var a='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',b=X(a),c=b.documentElement;if(this._numFormats.length>0){var d=b.createElement("numFmts");c.appendChild(d),this.$_createNumberFormats(b,d)}var e=b.createElement("fonts");c.appendChild(e),this.$_createFonts(b,e);var f=b.createElement("fills");c.appendChild(f),this.$_createFills(b,f);var g=b.createElement("borders");c.appendChild(g),this.$_createBorders(b,g);var h=b.createElement("cellStyleXfs");c.appendChild(h),this.$_createDefXfs(b,h);var i=b.createElement("cellXfs");return c.appendChild(i),this.$_createXfs(b,i),a=Y(b),xc+a},$_createNumberFormats:function(a,b){for(var c=0,d=this._numFormats.length;d>c;c++){var e=a.createElement("numFmt");_(e,"formatCode",this._numFormats[c]),_(e,"numFmtId",$$_EXCEL_NUMFMT_START+c),b.appendChild(e)}},$_createFonts:function(a,b){if(this._fonts.length<1){var c=new Bc;this._fonts.push(c)}for(var d=0,e=this._fonts.length;e>d;d++){var f=a.createElement("font");this._fonts[d].serialize(a,f),b.appendChild(f)}b.setAttribute("count",this._fonts.length)},$_createFills:function(a,b){if(this._fills.length<1){var c=new Cc;this._fills.push(c)}for(var d=0,e=this._fills.length;e>d;d++){var f=a.createElement("fill");this._fills[d].serialize(a,f),b.appendChild(f)}b.setAttribute("count",this._fills.length)},$_createBorders:function(a,b){if(this._borders.length<1){var c=new Dc;this._borders.push(c)}for(var d=0,e=this._borders.length;e>d;d++){var f=a.createElement("border");this._borders[d].serialize(a,f),b.appendChild(f)}b.setAttribute("count",this._borders.length)},$_createDefXfs:function(a,b){var c=a.createElement("xf");b.appendChild(c),c.setAttribute("borderId",0),c.setAttribute("fillId",0),c.setAttribute("fontId",0),c.setAttribute("numFmtId",0),b.setAttribute("count",1)},$_createXfs:function(a,b){if(this._xfs.length<1){var c=new Ec;this._xfs.push(c)}for(var d=0,e=this._xfs.length;e>d;d++){var f=this._xfs[d],g=a.createElement("xf");f.serialize(a,g),b.appendChild(g)}b.setAttribute("count",this._xfs.length)}}),Gc=function(){this.index=void 0,this.width=10,this.style=null,this.serialize=function(a,b){b.setAttribute("min",this.index),b.setAttribute("max",this.index),b.setAttribute("width",this.width),this.style&&b.setAttribute("style",this.style.id)}},Hc=Xa("ExcelSheet",null,{init:function(a){this._super(),this._book=a,this._columns=null,this._doc=null,this._viewRoot=null,this._dataRoot=null,this._mergeRoot=null,this._rows=[],this._mergeCount=0,this._outlineLevel=0,this.$_preparePart(),this._dateConverter=Ib.Default},colCount:function(){return this._columns.length},rowCount:function(){return this._rows.length},setColumns:function(a){this._columns=a},addRow:function(a,b){var c=this._rows[a];if(!c){var c=this._doc.createElement("row");c.setAttribute("r",a+1),b&&b>-1&&(c.setAttribute("ht",b),c.setAttribute("customHeight","1")),this._rows[a]=c,this._dataRoot.appendChild(c)}return c},setRowLevel:function(a,b){if(b>=0){var c=this._rows[a];c&&(c.setAttribute("outlineLevel",b),this._outlineLevel=Math.max(b,this._outlineLevel))}},addBlank:function(a,b,c){var d=this.addRow(a),e=this._doc.createElement("c");e.setAttribute("r",yc(b)+(a+1)),c&&e.setAttribute("s",c.id),d.appendChild(e)},addMerge:function(a,b,c,d){var e=yc(b)+(a+1)+":"+yc(b+d-1)+(a+c),f=this._doc.createElement("mergeCell");f.setAttribute("ref",e),this._mergeRoot.appendChild(f),this._mergeCount++},$_addCell:function(a,b,c,d,e,f){var g=this.addRow(a,f),h=this._doc.createElement("c");h.setAttribute("r",yc(b)+(a+1)),h.setAttribute("t",c),e&&h.setAttribute("s",e.id),g.appendChild(h);var i=this._doc.createElement("v");i.appendChild(this._doc.createTextNode(d)),h.appendChild(i)},addText:function(a,b,c,d,e){var f=void 0!==c&&null!==c?c:"";f=this._book.addString(f),this.$_addCell(a,b,"s",f,d,e)},addNumber:function(a,b,c,d,e,f){var g=isNaN(c)?"":String(c);this.$_addCell(a,b,"n",g,d)},addBool:function(a,b,c,d,e,f){this.$_addCell(a,b,"b",c?1:0,d)},addDate:function(a,b,c,d,e,f,g){if(c)if(g){var h=this._dateConverter.toExcelDate(c);this.addNumber(a,b,h,d)}else{var i=this.$_dateToStr(c);this.$_addCell(a,b,"d",i,d)}else this.$_addCell(a,b,"s","",d)},createPart:function(){var a=this._doc,b=a.documentElement,c="A1:"+yc(this._columns.length-1)+this._book._sheet._rows.length,d=a.getElementsByTagName("dimension");if(d&&d.length>0&&d[0].setAttribute("ref",c),this._outlineLevel>0){var e=a.createElement("sheetFormatPtr");b.appendChild(e),e.setAttribute("outlineLevelRow",this._outlineLevel)}if(this._columns){var f=a.createElement("cols");b.appendChild(f),this.$_createCols(a,f)}b.appendChild(this._dataRoot),this._mergeCount>0&&(b.appendChild(this._mergeRoot),this._mergeRoot.setAttribute("count",this._mergeCount));var g=Y(a);return zc(xc+g)},$_preparePart:function(){var a='<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"></worksheet>',b=this._doc=X(a),c=b.createElement("dimension");b.documentElement.appendChild(c);var d=b.createElement("sheetViews");b.documentElement.appendChild(d);var e=this._viewRoot=b.createElement("sheetView");d.appendChild(e),e.setAttribute("workbookViewId","0"),e.setAttribute("tabSelected","1"),e.setAttribute("showOutlineSymbols","true"),this._dataRoot=b.createElement("sheetData"),this._mergeRoot=b.createElement("mergeCells")},$_createCols:function(a,b){for(var c=this._columns,d=0,e=c.length;e>d;d++){var f=c[d],g=a.createElement("col");f.serialize(a,g),b.appendChild(g)}},$_dateToStr:function(a){return F(a.getFullYear(),4)+F(a.getMonth()+1,2)+F(a.getDate(),2)+"T"+F(a.getHours(),2)+F(a.getMinutes(),2)+F(a.getSeconds(),2)}}),Ic=Xa("ExcelWorkbook",null,{init:function(){this._super(),this._parts={},this._sst=new Ac(this),this._styles=new Fc(this),this._sheet=new Hc(this),this.$_preapreTemplateParts()},parts:function(){return this._parts},sheet:function(){return this._sheet},addString:function(a){return this._sst.add(a)},addNumberFormat:function(a){return this._styles.addNumberFormat(a)},addFill:function(a){return this._styles.addFill(a)},addBorder:function(a){return this._styles.addBorder(a)},addFont:function(a){return this._styles.addFont(a)},addStyle:function(a){return this._styles.add(a)},createParts:function(){var a=this._parts;return a["xl/sharedStrings.xml"]=this._sst.createPart(),a["xl/styles.xml"]=this._styles.createPart(),a["xl/worksheets/sheet1.xml"]=this._sheet.createPart(),a},$_preapreTemplateParts:function(){var a=this._parts;a["[Content_Types].xml"]=xc+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/><Override PartName="/xl/worksheets/sheet1.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/></Types>',a["_rels/.rels"]=xc+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',a["docProps/app.xml"]=xc+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGridJS</Application><AppVersion>1.0</AppVersion></Properties>',a["docProps/core.xml"]=xc+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">2014-12-25T03:06:34Z</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>',a["xl/workbook.xml"]=xc+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships"><workbookPr date1904="false"/><bookViews><workbookView activeTab="0"/></bookViews><sheets><sheet name="Sheet1" r:id="rId3" sheetId="1"/></sheets></workbook>',a["xl/_rels/workbook.xml.rels"]=xc+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet1.xml"/></Relationships>'}}),Jc=Xa("Dom",null,{init:function(a){this._super(),this._element=a},x:function(){return this._element.offsetLeft},y:function(){return this._element.offsetTop},size:function(){return Jc.getSize(this._element)},element:function(){return this._element},detach:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)},clearChildren:function(){Jc.clearChildren(this._element)},addChild:function(a){Jc.addChild(this._element,a)},setStyles:function(a){Jc.setStyles(this._element,a)},getBounds:function(){return Jc.getBounds(this._element)},getOffset:function(){return Jc.getOffset(this._element)},move:function(a,b){Jc.move(this._element,a,b)},disableSelection:function(){Jc.disableSelection(this._element)},isAncestorOf:function(a){for(var b=a.parentElement;b;)if(b==this._element)return!0;return!1}},{createElement:function(a,b,c){var d=document.createElement(a);if(b&&Jc.setStyles(d,b),c)for(var e in c)d[e]=c[e];return d},setStyles:function(a,b){if(b){var c=a.style;for(var d in b)c[d]=b[d]}},addWindowListener:function(a,b){ia.addEventListener(a,b)},removeWindowListener:function(a,b){ia.removeEventListener(a,b)},getSize:function(a){var b=a.getBoundingClientRect();return{width:b.width,height:b.height}},setSize:function(a,b,c){var d=a.style;d.width=b+"px",d.height=c+"px"},getBounds:function(a){var b=a.getBoundingClientRect();return b.cx=a.offsetLeft,b.cy=a.offsetTop,b},setBounds:function(a,b,c,d,e){var f=a.style;f.left=b+"px",f.top=c+"px",f.width=d+"px",f.height=e+"px"},getScrolled:function(){var a=document.body,b=document.documentElement;return{sx:window.pageXOffset||b.scrollLeft||a.scrollLeft,sy:window.pageYOffset||b.scrollTop||a.scrollTop}},getOffset:function(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.left+f-h,j=b.top+e-g;return{x:Math.round(i),y:Math.round(j)}},move:function(a,b,c){a.style.left=b+"px",a.style.top=c+"px"},disableSelection:function(a){a.style["-moz-user-select"]="-moz-none",a.style["-khtml-user-select"]="none",a.style["-webkit-user-select"]="none",a.style["-o-user-select"]="none",a.style["-ms-user-select"]="none",a.style["user-select"]="none"},addChild:function(a,b){return a&&b&&b.parentNode!==a?(a.appendChild(b),!0):!1},removeChild:function(a,b){return a&&b&&b.parentNode===a?(a.removeChild(b),!0):!1},clearChildren:function(a){for(var b=a;b.lastChild;)b.removeChild(b.lastChild)},getChildIndex:function(a){if(a){var b=a.parentNode;if(b)for(var c=b.childNodes,d=0;d<c.length;d++)if(c[d]===a)return d}return-1},getRadioGroupValue:function(a){var b=document.getElementsByName(a);if(b)for(var c=b.length;c--;)if(b[c].checked)return b[c].value;return void 0},htmlEncode:function(a){return document.createElement("a").appendChild(document.createTextNode(a)).parentNode.innerHTML},getClipRect:function(a){return"rect("+a.y+"px,"+(a.x+a.width)+"px,"+(a.y+a.height)+"px,"+a.x+"px)"},renderTextRect:function(a,b,c,d,e,f){Jc.renderTextBounds(a,b,c,d,e.x,e.y,e.width,e.height,f)},renderTextBounds:function(a,b,c,d,e,f,g,h,i,j){if(c&&d){var k=a.style;a.textContent=d,k.font=b?b.font:Hd,k.color=c.css(),k.whiteSpace="nowrap",k.textDecoration=b.underline?"underline":"none";var l=a.getBoundingClientRect2();switch(i){case id.CENTER:e+=(g-l.width)/2;break;case id.RIGHT:e=e+g-l.width}switch(k.left=e+"px",j){case jd.TOP:break;case jd.BOTTOM:f=f+h-l.height;break;case jd.MIDDLE:default:f+=(h-l.height)/2}k.top=f+"px"}},isAncestorOf:function(a,b){for(var c=b.parentElement;c;){if(c==a)return!0;c=c.parentElement}return!1}}),Kc=Xa("Progress",bb,{init:function(){this._super(),this._view=new Lc,this._runner=null,this._next=0,this._completed=!1,this._timer=void 0},min:0,max:100,step:1,execute:function(a){a&&(this._runner=a,this._next=this._min,a.container instanceof HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(a.container)),this.$_runNext())},$_runNext:function(){if(this._next<this._max){var a=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,a),k("P R O G R E S S : "+this._min+" > "+this._next+" > "+this._max),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this.$_completed&&this.$_complete()},$_complete:function(){try{this._runner.complete&&this._runner.complete()}finally{k("P R O G R E S S : completed : "+ +this._min+" > "+this._next+" > "+this._max),this.$_completed=!0,this._view.close()}}}),Lc=Xa("ProgressView",null,{init:function(){this._super(),this._container=null,this._dom=new Jc(this.$_createElement()),this._min=0,this._max=0,this._pos=0},modal:!1,message:"Load data...",position:function(){return this._pos},setPosition:function(a,b){a=Math.max(this._min,Math.min(this._max,a)),a!=this._pos&&(this._pos=a,this._message=b,this.$_refreshView())},setProperties:function(a,b,c,d,e){this._min=a,this._max=Math.max(a,b),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,c)),this._message=d,e&&this.$_refreshView()},show:function(a,b){this._container=a,b&&this.$_setMessage(b),a.appendChild(this._dom.element());var c=a.getBoundingClientRect(),d=this._dom.size();this._dom.move((c.width-d.width)/2,(c.height-d.height)/3)},close:function(){this._dom.detach()},$_createElement:function(){var a=Jc.createElement("div",{position:"absolute",zIndex:3001,minWidth:"250px",padding:"8px 10px",backgroundColor:"rgba(0, 111, 245, 0.05)",border:"1px solid #ddd"});return a.appendChild(a.$_bar=this.$_createBar()),a.appendChild(a.$_msg=this.$_createMsg()),a},$_createBar:function(){var a=Jc.createElement("div",{width:"100%",height:"13px",marginBottom:"4px",background:"linear-gradient(#aaa, #ccc)",border:"1px solid #333"}),b=Jc.createElement("div",{height:"100%",width:"0px",background:"linear-gradient(#fff, #ddd)",borderRight:"1px solid #333"});return a.appendChild(b),a.$_led=b,a},$_createMsg:function(){var a=Jc.createElement("div",{width:"100%",textAlign:"center"}),b=Jc.createElement("span",{fontSize:"11px",fontFamily:"Tahoma",fontWeight:"bold"});return a.appendChild(a.$_span=b),a},$_refreshView:function(){var a=this._dom.element(),b=a.$_bar,c=b.$_led,d=a.$_msg.$_span;d.innerHTML=Jc.htmlEncode(this._message);var e=Jc.getSize(b);c.style.width=Math.min(e.width-1,Na(e.width*(this._pos-this._min)/(this._max-this._min)))+"px"},$_setMessage:function(a){var b=this._dom.element().$_msg.$_span;b.innerHTML=Jc.htmlEncode(this._message)}}),Mc=Xa("ProgressManager",null,{init:function(a){this._super(),this._container=a,this._title=null,this._view=null},show:function(a,b,c){this._view||(this._view=new Lc),this._view.show(a||this._container,b||"Load data...")},close:function(){this._view&&this._view.close()},setProperties:function(a,b,c,d){d||(d=this._title||"Load data... ",b>a&&(d+=parseInt(100*(c-a)/(b-a))+"% ("+c+" / "+b+")")),this._view&&this._view.setProperties(a,b,c,d,!0)}}),Nc=navigator.platform.toUpperCase().indexOf("MAC")>=0,Oc=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,Pc="undefined"!=typeof InstallTrigger,Qc=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,Rc=!!window.chrome&&!Oc,Sc=!!document.documentMode,Tc=navigator.userAgent.toLowerCase().indexOf("edge/")>=0,Uc=function(){for(var a,b=3,c=document.createElement("div"),d=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++b+"]><i></i><![endif]-->",d[0];);return b>4?b:a}(),Vc=void 0!==Uc&&9>=Uc,Wc=void 0!==Uc&&8>=Uc,Xc=!1,Yc=-1!==navigator.appVersion.indexOf("MSIE 10"),Zc=-1!==navigator.appVersion.indexOf("MSIE 9");!function(){var a,b=document.createElement("div"),c=!1;try{a=b.getBoundingClientRect()}catch(d){c=!0}c||isNaN(a.width)?Element.prototype.getBoundingClientRect2=function(){var a=Element.prototype.getBoundingClientRect.call(this);return{left:a.left,right:a.right,width:a.right-a.left,top:a.top,bottom:a.bottom,height:a.bottom-a.top}}:Element.prototype.getBoundingClientRect2=Element.prototype.getBoundingClientRect;try{b.style.background="rgba(0, 0, 0, 1)"}catch(d){Xc=!0}}(),Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&!function(){var a=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return a.get.call(this)},set:function(b){return a.set.call(this,b)}})}();var $c=function(){return{width:ia.innerWidth||ja.documentElement.clientWidth||ja.body.clientWidth,height:ia.innerHeight||ja.documentElement.clientHeight||ja.body.clientHeight}},_c={},ad=0,bd=Image,cd=!0,dd=Xa("UIContainer",bb,{init:function(a,b){if(this._super(),a=!!a,this.$_dom=a?_c:null,this.$_rich=!a,!b)throw"container is null!";if(this._containerDiv=document.getElementById(b),!this._containerDiv)throw"Invalid grid container element: "+b;this._canvas=this._container=document.createElement("div"),this._containerDiv.appendChild(this._container),this._container.style.position="relative",this._container.style.width="100%",
this._container.style.height="100%",this._container.style.borderStyle="none",this._container.style.borderWidth="0px",this._container.style.overflow="hidden",this._container.style["-webkit-touch-callout"]="none",this._container.style["-webkit-user-select"]="none",this._container.style["user-select"]="none",this._container.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._width=this._container.clientWidth,this._height=this._container.clientHeight,this._updateRequested=!1,this._layoutNeeded=!1,this._invalidated=!1,this._defaultTool=new be(this),this._activeTool=this._defaultTool,this._captured=!1,this._focusing=!1,this._focusingTarget=null,this._hovered=null,this._currentX=0,this._currentY=0,this._rendered=0,this._defaultCursor=Zd.AUTO,this._drawing=!1,this._offsetX=0,this._offsetY=0,this._clicked=0,this._clicket=0,this._children=[],this._rootElement=this._createRootElement(this.$_dom),this._containerRender=this._render.bind(this),this.$_prepareContextMenu(),this._popupMenuManager=new hd(this).addListener(this),this._contextMenu=null,this.onContextMenuItemClicked=null},_registerEventHandlers:function(a){a.style.cursor=this._defaultCursor,ia.addEventListener?(ia.addEventListener("resize",this._resizeHandler.bind(this),!1),a.addEventListener("keydown",this._keyDownHandler.bind(this),!1),a.addEventListener("keyup",this._keyUpHandler.bind(this),!1),a.addEventListener("keypress",this._keyPressHandler.bind(this),!1),a.addEventListener("click",this._clickHandler.bind(this),!1),a.addEventListener("dblclick",this._dblclickHandler.bind(this),!1),a.addEventListener("mousedown",this._mouseDownHandler.bind(this),!1),ia.addEventListener("mousemove",this._mouseMoveHandler.bind(this),!1),ia.addEventListener("mouseup",this._mouseUpHandler.bind(this),!1),a.addEventListener("mouseenter",this._mouseEnterHandler.bind(this),!1),a.addEventListener("mouseleave",this._mouseLeaveHandler.bind(this),!1),a.addEventListener("mouseover",this._mouseOverHandler.bind(this),!1),Pc?a.addEventListener("DOMMouseScroll",this._mouseScrollHandler.bind(this),!1):a.addEventListener("mousewheel",this._mouseWheelHandler.bind(this),!1),a.addEventListener("focus",this._focusHandler.bind(this),!1),a.addEventListener("blur",this._blurHandler.bind(this),!1),cd&&(a.addEventListener("touchstart",this._touchStartHandler.bind(this),!1),a.addEventListener("touchmove",this._touchMoveHandler.bind(this),!1),a.addEventListener("touchend",this._touchEndHandler.bind(this),!1),a.addEventListener("touchcancel",this._touchCancelHandler.bind(this),!1),a.addEventListener("touchleave",this._touchLeaveHandler.bind(this),!1)),ia.addEventListener("focus",this._focusHandlerFireFox.bind(this),!0),ia.addEventListener("focusin",this._focusinHandler.bind(this),!0)):(ia.attachEvent("onresize",this._resizeHandler.bind(this),!1),a.attachEvent("onkeydown",this._keyDownHandler.bind(this),!1),a.attachEvent("onkeyup",this._keyUpHandler.bind(this),!1),a.attachEvent("onkeypress",this._keyPressHandler.bind(this),!1),a.attachEvent("onclick",this._clickHandler.bind(this),!1),a.attachEvent("ondblclick",this._dblclickHandler.bind(this),!1),a.attachEvent("onmousedown",this._mouseDownHandler.bind(this),!1),ia.attachEvent("onmousemove",this._mouseMoveHandler.bind(this),!1),ia.attachEvent("onmouseup",this._mouseUpHandler.bind(this),!1),a.attachEvent("onmouseenter",this._mouseEnterHandler.bind(this),!1),a.attachEvent("onmouseleave",this._mouseLeaveHandler.bind(this),!1),a.attachEvent("onmouseover",this._mouseOverHandler.bind(this),!1),Pc?a.attachEvent("onDOMMouseScroll",this._mouseScrollHandler.bind(this),!1):a.attachEvent("onmousewheel",this._mouseWheelHandler.bind(this),!1),a.attachEvent("onfocus",this._focusHandler.bind(this),!1),a.attachEvent("onblur",this._blurHandler.bind(this),!1),cd&&(a.attachEvent("ontouchstart",this._touchStartHandler.bind(this),!1),a.attachEvent("ontouchmove",this._touchMoveHandler.bind(this),!1),a.attachEvent("ontouchend",this._touchEndHandler.bind(this),!1),a.attachEvent("ontouchcancel",this._touchCancelHandler.bind(this),!1),a.attachEvent("ontouchleave",this._touchLeaveHandler.bind(this),!1)))},containerElement:function(){return this._container},isVisible:function(){return"hidden"!=this._container.style.visibility},setVisible:function(a){this._container.style.visibility=a?"visible":"hidden"},width:function(){return this._width},height:function(){return this._height},defaultTool:function(){return this._defaultTool},setDefaultTool:function(a,b){return this._defaultTool=a,b&&a&&this.setActiveTool(a),this},activeTool:function(){return this._activeTool},setActiveTool:function(a){return a!==this._activeTool&&(this._activeTool&&this._activeTool.deactivate(),this._activeTool=a,this._activeTool&&this._activeTool.activate()),this},mouseX:function(){return this._currentX},mouseY:function(){return this._currentY},popupMenuManager:function(){return this._popupMenuManager},contextMenu:function(){return this._contextMenu},setContextMenu:function(a){a!=this._contextMenu&&(a instanceof fd?this._contextMenu=a:a?this._contextMenu=new fd("gridContextMenu",this,a):this._contextMenu=null)},addChild:function(a){return a&&this._children.indexOf(a)<0&&(this._children.push(a),a.attached(this)),a},removeChild:function(a){var b;a&&(b=this._children.indexOf(a))>=0&&(this._children.splice(b,1),a.detached())},addElement:function(a,b){return this._rootElement.addElement(a,b)},removeElement:function(a){this._rootElement.removeElement(a)},findElementAt:function(a,b,c){return this._rootElement.findChildAt(a-this._rootElement._x,b-this._rootElement._y,c)},setFocus:function(){this._setFocusAndScroll(this._canvas)},updateNow:function(){this._render(Fa())},invalidateLayout:function(){this._layoutNeeded=!0,this.invalidate(!0)},invalidate:function(a){this._updateRequested&&this._invalidated||!a&&this._drawing||(window.requestAnimationFrame(this._containerRender),this._updateRequested=!0,this._invalidated=!0)},setCursor:function(a){this._canvas.style.cursor=a||this._defaultCursor},_createChildren:function(a){},_layoutChildren:function(a){},_createRootElement:function(a){return null},_render:function(a){this._updateRequested=!1,this._offsetX=this._canvas.offsetLeft,this._offsetY=this._canvas.offsetTop;for(var b=this._canvas.offsetParent;b;)this._offsetX+=b.offsetLeft,this._offsetY+=b.offsetTop,b=b.offsetParent;this._drawing=!0;try{this.$_dom?this.$$_renderHtml(a,null,0,0):this.$$_render(a,null,0,0),this._resetSizeCallback&&(this._resetSizeCallback(),delete this._resetSizeCallback)}finally{this._drawing=!1,this._invalidated=!1}},$$_render:function(a,b,c,d){},$$_renderHtml:function(a,b,c,d){},_setFocusAndScroll:function(a){if(a)if(this._focusing)a!=this._focusingTarget&&(a.setFocus?a.setFocus():a.focus());else{this._focusing=!0,this._focusingTarget=a;try{var b=ia.pageXOffset,c=ia.pageYOffset;a.setFocus?a.setFocus():a.focus(),(ia.pageXOffset!=b||ia.pageYOffset!=c)&&ia.scrollTo(b,c)}finally{this._focusing=!1,this._focusingTarget=null}}},checkClicked:function(a,b){if(ua){var c=this._width-a,d=this._height-b,e=m();3>c&&3>d&&(e<this._clicket+300?(this._clicked++,3==this._clicked&&alert(this)):this._clicked=0),this._clicket=e}},toOffset:function(a){var b=this._canvas,c=b.getBoundingClientRect();return a.mouseX=a.clientX-c.left,a.mouseY=a.clientY-c.top,a},toScreen:function(a){return a.x+=this._offsetX,a.y+=this._offsetY,a},$_prepareContextMenu:function(){this.$_contextMenuHandler=function(a){var b=this._contextMenu;if(!b){var c=this.onGetContextMenu;if(c){var d=c(this,a.offsetX,a.offsetY);d&&d.length>0&&(b=new fd("gridContextMenu",this,d))}}if(b){a.preventDefault();var e=a.target||a.srcElement,f=e.getBoundingClientRect(),g=a.clientX-f.left,h=a.clientY-f.top;this._popupMenuManager.showContext(b,g,h)}}.bind(this),wa?this._container.addEventListener("contextmenu",this.$_contextMenuHandler):this._container.attachEvent("contextmenu",this.$_contextMenuHandler)},_resizeHandler:function(a){},_keyDownHandler:function(a){if(this._activeTool){Nc&&a.metaKey||!Nc&&a.ctrlKey;this._activeTool.keyDown(a.keyCode,a.ctrlKey,a.shiftKey,a.altKey)}},_keyUpHandler:function(a){if(this._activeTool){Nc&&a.metaKey||!Nc&&a.ctrlKey;this._activeTool.keyUp(a.keyCode,a.ctrlKey,a.shiftKey,a.altKey)}},_keyPressHandler:function(a){this._activeTool&&this._activeTool.keyPress(a.keyCode)},_clickHandler:function(a){this.checkClicked(a.clientX-this._offsetX,a.clientY-this._offsetY),this._activeTool&&this._activeTool.click(this.toOffset(a))},_dblclickHandler:function(a){this.checkClicked(a.clientX-this._offsetX,a.clientY-this._offsetY),this._activeTool&&this._activeTool.dblclick(this.toOffset(a))},_mouseDownHandler:function(a){this._popupMenuManager.close(),a.target===this._canvas&&(this._canvas.setAttribute("tabindex","0"),this._captured=!0,this.checkClicked(a.clientX-this._offsetX,a.clientY-this._offsetY),this.toOffset(a),this._currentX=a.mouseX,this._currentY=a.mouseY,this._activeTool&&this._activeTool.mouseDown(a),!Sc||this._activeTool&&!this._activeTool.isEditing()||O(a))},_mouseMoveHandler:function(a){if(!this._captured&&a.target!==this._canvas)return this._hovered&&(this._hovered.setHovered(!1),this._hovered=null),void(this._activeTool&&this._activeTool.mouseOutside());this.toOffset(a);var b=a.mouseX,c=a.mouseY;if(b!=this._currentX||c!=this._currentY){this._currentX=b,this._currentY=c;var d=this.findElementAt(b,c,!0);if((!this._activeTool||!this._activeTool.isDragging())&&d&&d.canHover()&&d!=this._hovered){var e=this._hovered;e&&(e.setHovered(!1),e instanceof fi&&(e.invalidate(),d instanceof fi||e._owner.invalidate())),this._hovered=d,this._hovered&&this._hovered._mouseEnabled&&(this._hovered.setHovered(!0),this._hovered instanceof fi&&this._hovered.invalidate())}}this._activeTool&&this._activeTool.mouseMove(a)},_mouseUpHandler:function(a){(this._captured||a.target===this._canvas)&&(this._captured=!1,this._activeTool&&this._activeTool.mouseUp(this.toOffset(a)))},_mouseEnterHandler:function(a){this._activeTool&&this._activeTool.mouseEnter(this.toOffset(a))},_mouseLeaveHandler:function(a){this._activeTool&&this._activeTool.mouseLeave(this.toOffset(a))},_mouseOverHandler:function(a){this._activeTool&&this._activeTool.mouseLeave(this.toOffset(a))},_mouseWheelHandler:function(a){this._activeTool&&this._activeTool.mouseWheel(this.toOffset(a))&&O(a)},_mouseScrollHandler:function(a){this._activeTool&&(a.wheelDelta=-a.detail,this._activeTool.mouseWheel(this.toOffset(a))&&O(a))},_focusHandler:function(a){},_blurHandler:function(a){},_focusinHandler:function(a){k("focusin to "+a.target),a.target===this._canvas&&this._activeTool&&this._activeTool.setFocus()},_focusHandlerFireFox:function(a){k("focus to "+a.target),a.target===this._canvas&&this._activeTool&&this._activeTool.setFocus()},_focusoutHandler:function(a){k("focusout from "+a.target)},_touchStartHandler:function(a){this._activeTool&&this._activeTool.touchStart(a)},_touchMoveHandler:function(a){this._activeTool&&this._activeTool.touchMove(a)},_touchEndHandler:function(a){this._activeTool&&this._activeTool.touchEnd(a)},_touchCancelHandler:function(a){this._activeTool&&this._activeTool.touchCancel(a)},_touchLeaveHandler:function(a){this._activeTool&&this._activeTool.touchEnd(a)},onMenuItemClick:function(a){this.onContextMenuItemClicked&&this.onContextMenuItemClicked(this,a),this.fireEvent(dd.CONTEXT_MENU_ITEM_CLICKED,a)}});dd.CONTEXT_MENU_ITEM_CLICKED="onUIContainerContextMenuItemClicked";var ed=Xa("PopupMenuItem",null,{init:function(a,b){this._super(),this._parent=a,this._children=null,b&&this.assign(b)},visible:!0,enabled:!0,label:null,type:null,group:null,checked:!1,tag:ta,children:null,callback:null,parent:function(){return this._parent},setChildren:function(a){},isSeparator:function(){return"-"==this._label||this._type==Je.SEPARATOR},getData:function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this._tag}},click:function(){"check"==this._type&&(this._checked=!this._checked),this._parent._itemClicked(this)}}),fd=Xa("PopupMenu",bb,{init:function(a,b,c){this._super(),this._name=a,this._parent=b,this._items=this._load(c)},visible:!0,enabled:!0,name:null,label:null,manager:function(){for(var a=this._parent;a;){if(a.popupMenuManager&&a.popupMenuManager()instanceof hd)return a.popupMenuManager();if(a instanceof hd)return a;a=a._parent}return null},items:function(){return this._items},count:function(){return this._items?this._items.length:0},isDescendant:function(a){for(var b=a;b;){if(b==this)return!0;b=b._parent}return!1},_load:function(a){var b=[];if(a){a=u(a);for(var c=0;c<a.length;c++){var d=a[c];if(s(d.children)&&d.children.length>0){var e=new fd(null,this,d.children);e._parent=this,e._label=d.label,e._callback=d.callback,b.push(e)}else{var f=new ed(this,d);b.push(f)}}}return b},_itemClicked:function(a){if(a.parent()==this&&"radio"==a.type()){var b=a.group();if(b){for(var c=0;c<this._items.length;c++){var d=this._items[c];d instanceof ed&&"radio"==d.type()&&d.group()==b&&d.setChecked(!1)}a.setChecked(!0)}}var e=this.manager()._popupIndex;"function"==typeof a.callback()?a.callback()(a.proxy(),e.proxy()):this._parent instanceof hd?this._parent._doMenuItemClick(a,e):this._parent.onMenuItemClick?this._parent.onMenuItemClick(a,e):this._parent._itemClicked(a)}});fd.CLICKED="onPopupMenuClicked";var gd=Xa("PopupMenuView",bb,{init:function(a){this._super(),this._container=a,this._useCssStyle=a._gridView instanceof jm&&(a._gridView._editorOptions._useCssStyle||a._gridView._editorOptions._useCssStylePopupMenu),this._containerElement=null,this._parentView=null,this._dom=new Jc(this._element=this._createElement(this._useCssStyle)),this._element.addEventListener("contextmenu",function(a){a.preventDefault()}),this._currDiv=null,this._menu=null,this._childView=null,this._showing=!1,this._timer=void 0,this._viewGridInside=!1},minWidth:0,maxWidth:0,dropDownCount:8,manager:function(){return this._menu.manager()},show:function(a,b,c,d,e,f,g){if(!this._showing){this._showing=!0;try{this._containerElement=a,this._parentView=b,this._menu=c;for(var h=c._parent;h._parent&&!(h instanceof jm);)h=h._parent;if(h&&h instanceof jm?this._viewGridInside=h._editorOptions._viewGridInside:h&&h instanceof hd&&(this._viewGridInside=h._container._gridView._editorOptions._viewGridInside),c._parent instanceof em||c._parent instanceof hd){var i=this.manager()._container._gridView,j=Ye.temp(i,-1,null).clone();i._layoutManager.mouseToIndex(i._container._currentX,i._container._currentY,j),this.manager()._popupIndex=j}this.$_show(a,this._menu,d,e,f,g)}finally{this._showing=!1}}},$_show:function(a,b,c,d,e,f){var g=this._element,h=this._viewGridInside?a:ja.documentElement;if(g){this._menu=b,this._dom.clearChildren(),this.$_buildItems(b),this._disableSelection(g),h.appendChild(g);var i=$c(),j=Yc||Zc?Jc.getBounds(ja.body):Jc.getBounds(ja.documentElement),k=Jc.getBounds(a),l=i.width,m=i.height,n=this._dom.getBounds(),o=window.pageXOffset||ja.documentElement.scrollLeft,p=window.pageYOffset||ja.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(m-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(l-=18),this._viewGridInside?d+k.top+n.height>k.bottom&&(d=this._parentView?k.bottom-n.height-k.top-3:d-n.height-f):(this._parentView||(c+=k.left-j.left,d+=k.top-j.top),d+n.height>=m+p-3&&(d=d-n.height-3,0>d&&(d=Math.max(0,m-n.height-3))),c+n.width>=l+o-3?c=Math.max(0,l-n.width-3):void 0!==e&&n.width<e&&(c+=e-n.width)),this._dom.move(Math.max(0,c),Math.max(0,d)),ia.onmousedown=function(a){for(var b=a.target;b;){if(b==this._element||b.menuItem)return;b=b.parentNode}this.manager().close()}.bind(this)}},hide:function(a){if(a&&this._parentView)this._parentView.hide(!0);else{this.$_hideChildView();var b=this._element;b&&b.parentNode&&(this._viewGridInside?this._containerElement.removeChild(b):ja.documentElement.removeChild(b))}},_createElement:function(a){var b=Jc.createElement("div",{position:"absolute","float":"none",minWidth:"60px",overflow:"hidden",zIndex:3e3});return!a&&Jc.setStyles(b,{background:"rgb(233, 233, 233)",border:"1px solid rgb(200, 200, 200)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"4px",margin:"0px"}),a&&(b.className="rg-popup-menu"),b.onkeydown=function(a){27==a.keyCode&&this.hide()}.bind(this),b},_showChild:function(a){if(this==this.manager()._showingView&&!(this._childView&&this._childView._menu===a.menuItem||this._currDiv!==a)){this.$_hideChildView();var b=a.menuItem,c=this._element.getBoundingClientRect(),d=this._element.offsetLeft+c.width-4,e=this._element.offsetTop+a.offsetTop;this._childView=gd._borrowView(this._container),this._childView.show(this._containerElement,this,b,d,e)}},$_hideChildView:function(){if(this.manager()._showingView=null,this._childView){this._childView.$_hideChildView();var a=this._viewGridInside?this._containerElement:ja.documentElement;this._childView._element&&a.removeChild(this._childView._element),gd._returnView(this._childView),this._childView=null}},_disableSelection:function(a){a.style.WebkitUserSelect="none",a.style.MozUserSelect="none",a.style.KhtmlUserSelect="none",a.style.MsUserSelect="none","undefined"!=typeof a.onselectstart?a.onselectstart=function(){return!1}:"undefined"!=typeof a.style.MozUserSelect?a.style.MozUserSelect="none":a.onmousedown=function(){return!1}},$_buildItems:function(a){for(var b=a.items(),c=0,d=[],e=0,f=b.length;f>e;e++){var g=b[e];if(g.isVisible()){var h=ja.createElement("div");if(h.menuView=this,h.menuItem=g,Jc.setStyles(h,{position:"relative","float":"none",width:"100%"}),!this._useCssStyle&&Jc.setStyles(h,{paddingTop:"2px",paddingBottom:"2px",cursor:"default"}),g instanceof ed&&g.isSeparator()){this._useCssStyle&&(h.className="rg-popup-separator");var i=ja.createElement("hr");!this._useCssStyle&&Jc.setStyles(i,{height:"1px",border:"0px",margin:"2px",color:"#777",backgroundColor:"#777"}),this._useCssStyle&&(i.className="rg-popup-separator-hr"),h.appendChild(i),h.onmouseover=function(a){h.menuView&&h.menuView._childView&&h.menuView.$_hideChildView()}}else{d.length=0,!this._useCssStyle&&(h.style.color=g.isEnabled()?"#333":"#aaa"),this._useCssStyle&&d.push("rg-popup-item"),this._useCssStyle&&g.group&&g.group()&&d.push("rg-popup-"+g.group()),this._useCssStyle&&!g.isEnabled()&&d.push("rg-popup-item-disable"),this._useCssStyle&&(h.className=d.join(" ")),h.style.whiteSpace="pre",h.onclick=function(a){var b=a.currentTarget,c=b.menuItem;c instanceof fd?c.isEnabled()&&this._showChild(b):c?(this.hide(!0),c.isEnabled()&&c.click()):this.$_hideChildView()}.bind(this),h.onmouseover=function(a){var b=this._currDiv=a.currentTarget,c=b.menuItem;c.isEnabled()&&!this._useCssStyle&&(b.style.background="rgba(0, 255, 0, 0.2)"),c instanceof fd?(this.manager()._showingView=b.menuView,this.timer=setTimeout(function(){b.menuView._showChild(b)},200)):b.menuView&&b.menuView._childView&&b.menuView.$_hideChildView()}.bind(this),h.onmouseout=function(a){var b=a.currentTarget;!this._useCssStyle&&(b.style.background="")};var j=ja.createElement("span");d.length=0,j.style.display="inline-block",j.style.minWidth="20px",j.style.minHeight="7px",j.style.verticalAlign="middle",j.innerHTML="",this._useCssStyle&&g.type&&("radio"===g.type()||"check"===g.type())&&d.push(g.group()?"rg-popup-radio":"rg-popup-check"),g.isChecked&&g.isChecked()&&(!this._useCssStyle&&Jc.setStyles(j,{backgroundImage:"url("+la+ma+(g.group()?"menu_radio.png":"menu_check.png")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),this._useCssStyle&&d.push(g.group()?"rg-popup-radio-checked":"rg-popup-check-checked")),this._useCssStyle&&(j.className=d.join(" ")),j.tabIndex=-1,this._disableSelection(j),h.appendChild(j);var k=ja.createElement("span");if(k.id="$popupMenu_item_"+gd.$_menuId++,k.style.paddingRight="24px",k.innerHTML=g.label(),k.tabIndex=-1,this._disableSelection(k),h.appendChild(k),g instanceof fd){var l=ja.createElement("span");this._useCssStyle&&(l.className="rg-popup-expander"),h.appendChild(l),l.style.position="absolute",l.style.right="0px",l.style.width="24px",l.style.height="17px",j.style.verticalAlign="middle",l.innerHTML=" ",!this._useCssStyle&&Jc.setStyles(l,{backgroundImage:"url("+la+ma+"menu_expander.png)",backgroundRepeat:"no-repeat",backgroundPosition:"center center"}),l.tabIndex=-1,this._disableSelection(l),h.appendChild(l)}}this._disableSelection(h),this._element.appendChild(h),c++}}}},{$_menuId:0,$_views:[],_borrowView:function(a){var b=gd.$_views.pop();return b||(b=new gd(a)),b},_returnView:function(a){if(a._children)for(var b=0;b<a._children.length;b++)gd.returnView(a[b]);gd.$_views.push(a)}}),hd=Xa("PopupMenuManager",bb,{init:function(a){this._super(),this._container=a,this._menus=[],this._mainView=null,this._showingView=null,this._popupIndex=null},indexOf:function(a){for(var b=this._menus.length;b--;)if(q(this._menus[b].name(),a))return b;return-1},getMenu:function(a){for(var b=this._menus.length;b--;)if(q(this._menus[b].name(),a))return this._menus[b];return null},addMenu:function(a,b,c){if(r(a))throw"Menu name is empty.";var d=-1;if(!c&&(d=this.indexOf(a),d>=0))return this._menus[d];var e=new fd(a,this,b);return c?this._menus[d]=e:this._menus.push(e),e},removeMenu:function(a){var b=this.indexOf(a);b>=0&&this._menus.splice(b,1)},clearMenus:function(){this._menus.length=0},show:function(a,b){if(!this._mainView&&("string"==typeof a?a=this.getMenu(a):a instanceof fd||(a=new fd(null,this,a)),a)){var c=b.boundsByContainer();this._mainView=gd._borrowView(this._container),this._mainView.show(this._container._container,null,a,c.x,c.bottom(),c.width,c.height)}},showContext:function(a,b,c){a&&!this._mainView&&(this._mainView=gd._borrowView(this._container),this._mainView.show(this._container._container,null,a,b,c,0,0))},close:function(){this._mainView&&(this._mainView.hide(),gd._returnView(this._mainView),this._mainView=null)},_doMenuItemClick:function(a,b){this.fireEvent(hd.MENU_ITEM_CLICKED,a,b)}});hd.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked";var id=Q({LEFT:"left",CENTER:"center",RIGHT:"right"}),jd=Q({TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"}),id=(Q({NONE:"none",NORMAL:"normal"}),Q({CIRCLE:"circle",TRIANGLE:"triangle",SQUARE:"square",DIAMOND:"diamond"}),Q({VISIBLE:"visible",HIDDEN:"hidden",COLLAPSED:"collapsed"}),Q({DEFAULT:"default",FAR:"far",MID:"mid",NEAR:"near"}),Q({HORIZONTAL:"horizontal",VERTICAL:"vertical"}),Q({DEFAULT:"default",LEFT:"left",CENTER:"center",RIGHT:"right",FILL:"fill"}),Q({DEFAULT:"default",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",FILL:"fill"}),Q({NONE:"none",JUSTIFY:"justify"}),Q({LEFT:"left",CENTER:"center",RIGHT:"right"})),jd=Q({TOP:"top",MIDDLE:"middle",BOTTOM:"bottom"}),kd=(Q({NONE:"none",NORMAL:"normal"}),Q({CIRCLE:"circle",TRIANGLE:"triangle",SQUARE:"square",DIAMOND:"diamond"}),Q({VISIBLE:"visible",HIDDEN:"hidden",COLLAPSED:"collapsed"}),Q({DEFAULT:"default",FAR:"far",MID:"mid",NEAR:"near"}),Q({HORIZONTAL:"horizontal",VERTICAL:"vertical"}),Q({DEFAULT:"default",LEFT:"left",CENTER:"center",RIGHT:"right",FILL:"fill"}),Q({DEFAULT:"default",TOP:"top",MIDDLE:"middle",BOTTOM:"bottom",FILL:"fill"}),Q({NONE:"none",JUSTIFY:"justify"}),function(a,b,c,d){"undefined"==typeof a||null===a?this.x=this.y=this.width=this.height=0:(this.x=a,this.y=b,this.width=c,this.height=d)});kd.prototype={constructor:kd,clone:function(){return new kd(this.x,this.y,this.width,this.height)},getInner:function(){return new kd(0,0,this.width,this.height)},equals:function(a){return a===this||a&&this.x===a.x&&this.y===a.y&&this.width===a.width&&this.height===a.height},toString:function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},left:function(){return this.x},setLeft:function(a){var b=a-this.x;this.x+=b,this.width-=b},leftBy:function(a){return this.x+=a,this.width-=a,this},right:function(){return this.x+this.width},setRight:function(a){var b=a-(this.x+this.width);this.width+=b},rightBy:function(a){return this.width+=a,this},top:function(){return this.y},setTop:function(a){var b=a-this.y;return this.y+=b,this.height-=b,this},topBy:function(a){return this.y+=a,this.height-=a,this},bottom:function(){return this.y+this.height},setBottom:function(a){var b=a-(this.y+this.height);return this.height+=b,this},bottomBy:function(a){return this.height+=a,this},shrink:function(a,b){return this.width-=a,this.height-=b,this},expand:function(a,b){return this.width+=a,this.height+=b,this},contains:function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},isEmpty:function(){return 0===this.width||0===this.height},setEmpty:function(){return this.width=this.height=0,this},set:function(a,b,c,d){return this.x=a,this.y=b,this.width=c,this.height=d,this},copy:function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},copyHorz:function(a){return this.x=a.x,this.width=a.width,this},copyVert:function(a){return this.y=a.y,this.height=a.height,this},inflate:function(a,b,c,d){return b=arguments.length>1?b:0,c=arguments.length>2?c:a,d=arguments.length>3?d:b,a&&this.setLeft(this.x-a),b&&this.setTop(this.y-b),c&&this.setRight(this.right()+c),d&&this.setBottom(this.bottom()+d),this},offset:function(a,b){return this.x+=a,this.y+=b,this},round:function(){var a=this.clone();return a.x>>>=0,a.y>>>=0,a.width>>>=0,a.height>>>=0,a},union:function(a){var b=this.clone();return b.setLeft(Math.min(this.x,a.x)),b.setRight(Math.max(this.right(),a.right())),b.setTop(Math.min(this.y,a.y)),b.setBottom(Math.max(this.bottom(),a.bottom())),b},normalize:function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this}};var ld=function(a,b){0==arguments.length?this.width=this.height=0:(this.width=a,this.height=b)};ld.EMPTY=new ld,ld.empty=function(){return new ld},ld.create=function(a,b){return new ld(a,b)},ld.prototype={constructor:ld,clone:function(){return new ld(this.width,this.height)},equals:function(a){return a===this||a&&this.width===a.width&&this.height===a.height},toString:function(){return"{width: "+this.width+", height: "+this.height+"}"},isEmpty:function(){return 0===this.width||0===this.height},setEmpty:function(){return this.width=this.height=0,this},set:function(a,b){return this.width=a,this.height=b,this},round:function(){var a=this.clone();return a.width>>>=0,a.height>>>=0,a}};var md=function(a,b){0==arguments.length?this.x=this.y=0:(this.x=a,this.y=b)};md.EMPTY=new md,md.empty=function(){return new md},md.create=function(a,b){return new md(a,b)},md.prototype={constructor:ld,clone:function(){return new md(this.x,this.y)},equals:function(a){return a===this||a&&this.width===a.width&&this.height===a.height},toString:function(){return"{x: "+this.x+", y: "+this.y+"}"},isEmpty:function(){return 0===this.x||0===this.y},setEmpty:function(){return this.x=this.y=0,this},set:function(a,b){return this.x=a,this.y=b,this},round:function(){var a=this.clone();return a.x>>>=0,a.y>>>=0,a}};var nd=function(){this.left=new kd,this.right=new kd,this.top=new kd,this.bottom=new kd};nd.prototype={constructor:nd,clear:function(){this.left.setEmpty(),this.right.setEmpty(),this.top.setEmpty(),this.bottom.setEmpty()},setLeft:function(a,b,c,d){this.left.set(a,b,c,d)},setRight:function(a,b,c,d){this.right.set(a,b,c,d)},setTop:function(a,b,c,d){this.top.set(a,b,c,d)},setBottom:function(a,b,c,d){this.bottom.set(a,b,c,d)}};var od=function(a,b){this._size=a,this._fixed=b};od.prototype={constructor:od,clone:function(){return new od(this._size,this._fixed)},getSize:function(a){return this._fixed?this._size:a*this._size}},od.Empty=new od(0,!1),od.createFrom=function(a){var b=0,c=!1;if(a){var d=String(a).trim(),e=d.length;e>0&&(e>2&&d.lastIndexOf("px")==e-2&&(c=!0,d=d.substr(0,e-3)),d&&(b=parseFloat(d)))}return new od(b,c)},od.equals=function(a,b){return a instanceof od&&b instanceof od&&a._size===b.size&&a._precentage===b._precentage};var pd=function(a,b){this._size=a,this._fixed=b};pd.prototype={constructor:pd,clone:function(){return new pd(this._size,this._fixed)},getSize:function(a,b){return this._fixed?this._size:a*this._size/(b||100)}},pd.Empty=new pd(0,!0),pd.createFrom=function(a){var b=0,c=!0;if(a){var d=String(a).trim(),e=d.length;e>0&&(e>1&&d.lastIndexOf("%")==e-1&&(c=!1,d=d.substr(0,e-1).trim()),d&&(b=parseFloat(d)))}return new pd(b,c)},pd.equals=function(a,b){return a instanceof pd&&b instanceof pd&&a._size===b.size&&a._precentage===b._precentage};var qd=function(a,b){this.width=a,this.height=b};qd.prototype={constructor:qd,clone:function(){return new qd(this.width,this.height)},set:function(a,b){this.width=parseFloat(a),this.height=parseFloat(b)}},qd.createFrom=function(a){var b=0,c=0;if(a){var d=String(a).split(",");d.length>0&&(b=c=parseFloat(d[0])),d.length>1&&(c=parseFloat(d[1]))}return new qd(b,c)};var rd=function(a,b){"string"==typeof a?rd._parse(a,this,b,!1):a instanceof rd?(this._r=a._r,this._g=a._g,this._b=a._b,this._a=a._a):isNaN(a)?(this._r=this._g=this._b=0,this._a=b?NaN:1):(this._a=(a>>>24)/255,this._r=(16711680&a)>>16,this._g=(65280&a)>>8,this._b=255&a)};rd._ERROR=new rd(ta,!0),rd._ERROR.error=!0,rd.createFrom=function(a,b){var c=rd._parse(a,sd,b,!1);return c?"object"==typeof c?c:sd.clone():null},rd._parse=function(a,b,c,d){var e=String(a);if(e){var f,g=e.length;if(e=e.trim().toLowerCase(),"#"==e.charAt(0))if(e=e.substr(1),g--,g>=6&&8>=g)b._b=H(e.substr(g-2,2),16),b._g=H(e.substr(g-4,2),16),b._r=H(e.substr(g-6,2),16),b._a=6==g?c?NaN:1:H(e.substr(0,g-6),16)/255;else{if(3!=g){if(d)throw"Invalid color value text: "+a;return!1}b._r=H(e.charAt(0)+e.charAt(0),16),b._g=H(e.charAt(1)+e.charAt(1),16),b._b=H(e.charAt(2)+e.charAt(2),16),b._a=c?NaN:1}else if(0==e.indexOf("rgba(")&&")"==e.charAt(g-1))e=e.substring(5,g-1),f=e.split(","),b._r=H(f[0]),b._g=H(f[1]),b._b=H(f[2]),b._a=f[3];else{if(0!=e.indexOf("rgb(")||")"!=e.charAt(g-1)){if(c&&vd.hasOwnProperty(e))return vd[e];if(!c&&ud.hasOwnProperty(e))return ud[e];var h=wd.createFrom(e,!1);if(h)return h;if(d)throw new Error("Invalid color text: "+a);return!1}e=e.substring(4,g-1),f=e.split(","),b._r=H(f[0]),b._g=H(f[1]),b._b=H(f[2]),b._a=c?NaN:1}return!0}return!1},rd.getColorStringArray=function(a){return a.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},rd.getColorCsvArray=function(a){return a.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},rd.prototype.clone=function(){return new rd(this)},rd.prototype.copy=function(a,b){return a?(this._r=a._r,this._g=a._g,this._b=a._b,this._a=isNaN(a._a)?Number(b):a._a):this._a=Number(b),this},rd.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},rd.prototype.valueWithBrightness=function(a){var b=this._r,c=this._g,d=this._b,e=Number(a);return isNaN(e)||1==e||(b=Ma(Math.max(0,Math.min(255,b*e))),c=Ma(Math.max(0,Math.min(255,c*e))),d=Ma(Math.max(0,Math.min(255,d*e))),255==b&&this._r<255&&(b=Ma((255+this._r)/2)),255==c&&this._g<255&&(c=Ma((255+this._g)/2)),255==d&&this._b<255&&(d=Ma((255+this._b)/2))),"rgba("+b+","+c+","+d+","+this._a+")"},rd.prototype.argb=function(){return Math._floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},rd.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},rd.prototype.extractAlpha=function(){var a=this._a;return this._a=NaN,a},rd.prototype.toHex=function(){return""+G(Ma(255*this._a))+G(this._r)+G(this._g)+G(this._b)},rd.prototype.toColorHex=function(){return""+G(this._r)+G(this._g)+G(this._b)},rd.prototype.toString=function(){return"#"+G(Ma(255*this._a))+G(this._r)+G(this._g)+G(this._b)},rd.prototype.toColorString=function(){return"#"+G(this._r)+G(this._g)+G(this._b)},rd.areEqual=function(a,b){return a&&b&&a._r==b._r&&a._g==b._g&&a._b==b._b&&a._a==b._a};var sd=new rd,td=[new rd,new rd],ud={transparent:new rd("#00000000"),aqua:new rd("#00ffff"),black:new rd("#000000"),blue:new rd("#0000ff"),fuchsia:new rd("#ff00ff"),
gray:new rd("#808080"),green:new rd("#008000"),lime:new rd("#00ff00"),maroon:new rd("#800000"),navy:new rd("#000080"),olive:new rd("#808000"),orange:new rd("#ffa500"),purple:new rd("#800080"),red:new rd("#ff0000"),silver:new rd("#c0c0c0"),teal:new rd("#008080"),white:new rd("#ffffff"),yellow:new rd("#ffff00"),dimGray:new rd("#696969"),ltGray:new rd("#d3d3d3")},vd={transparent:new rd("#00000000"),aqua:new rd("#00ffff",!0),black:new rd("#000000",!0),blue:new rd("#0000ff",!0),fuchsia:new rd("#ff00ff",!0),gray:new rd("#808080",!0),green:new rd("#008000",!0),lime:new rd("#00ff00",!0),maroon:new rd("#800000",!0),navy:new rd("#000080",!0),olive:new rd("#808000",!0),orange:new rd("#ffa500",!0),purple:new rd("#800080",!0),red:new rd("#ff0000",!0),silver:new rd("#c0c0c0",!0),teal:new rd("#008080",!0),white:new rd("#ffffff",!0),yellow:new rd("#ffff00",!0),dimGray:new rd("#696969",!0),ltGray:new rd("#d3d3d3",!0)},wd=function(a,b){this._palette=a,this._index=arguments.length>1?b:-1};wd.createFrom=function(a,b){var c=b?a.trim().toLowerCase():a;if(0==c.indexOf("pal(")&&")"==c.charAt(c.length-1)){if(c=c.substring(4,c.length-1),c.indexOf(",")>=1){var d=c.split(",");return d.length>1?new wd(d[0],parseInt(d[1])):new wd(d[0])}return new wd(c)}return null},wd.prototype.clone=function(){var a=new wd(this._palette,this._index);return a},wd.prototype.getColor=function(){var a=this.getIndex();return a>=0?this._palette.getColor(a):ud.transparent},wd.prototype.getIndex=function(){var a=this._palette;return a instanceof xd||(this._palette=a=xd.getPalette(this._palette)),a?((this._index<0||this._index>=a.getCount())&&(this._index=a.next()),this._index):-1};var xd=function(a){this._colors=[],this._next=0,this._parse(a)};xd.register=function(a,b){a&&(xd._palettes[a]=b)},xd.loadPalettes=function(a){if(a){var b=Ka(a);if(b)for(var c=0;c<b.length;c++){var d=b[c].name,e=b[c].colors;if(d&&e){var f=new xd(e);xd.register(d,f)}}}},xd.getPalette=function(a){return xd._palettes.hasOwnProperty(a)?xd._palettes[a]:xd._palettes["default"]},xd.prototype.getCount=function(){return this._colors.length},xd.prototype.getColors=function(){return this._colors.slice()},xd.prototype.next=function(){var a=this._next;return this._next=(this._next+1)%this._colors.length,a},xd.prototype.getColor=function(a){return this._colors[a]},xd.prototype._parse=function(a,b){if(this._colors=[],a){var c=a;Ga(c)||(c=String(a).split(","));for(var d=0,e=c.length;e>d;d++){var f=rd.createFrom(c[d],!0);this._colors.push(f)}}this._colors.length<1&&this._colors.push(rd.createFrom("#00000000"))},xd._palettes={"default":new xd("#eeeeee")};var yd=function(a){this._color=a instanceof rd?a:new rd(a)};yd.prototype.color=function(){return this._color},yd.prototype.applyTo=function(a,b,c,d,e){return a.setFill(this._color.value()),!0},yd.prototype.toText=function(){return this._color.toString()},yd.prototype.toColorText=function(){return this._color.toColorString()},yd.prototype.css=Xc?function(){return this._color.toColorString()}:function(){return this._color.value()},yd.prototype.applyToCss=function(a){if(this._color._a<1){var b=this._color.toString();b="progid:DXImageTransform.Microsoft.gradient(startColorstr="+b+",endColorstr="+b+")",a.filter=b,a.background=""}else a.filter="",a.background=this._color.toColorString()},yd.WHITE=new yd(ud.white),yd.BLACK=new yd(ud.black),yd.GRAY=new yd(ud.gray),yd.DKGRAY=new yd(ud.dimGray),yd.LTGRAY=new yd(ud.ltGray),yd.RED=new yd(ud.red),yd.YELLOW=new yd(ud.yellow),yd.GREEN=new yd(ud.green),yd.BLUE=new yd(ud.blue),yd.NULL={applyTo:function(a,b,c,d,e){return a.setFill("rgba(0, 0, 0, 0)"),!0}},yd.Null=yd.NULL,yd.areEqual=function(a,b){return a&&b&&rd.areEqual(a._color,b._color)};var zd=Xa(null,null,{init:function(a){this._super();var b=a?a.trim().toLowerCase():null;this.parse(b)},parse:function(a){}});zd.createFrom=function(a){if(a){var b=a.trim().toLowerCase();if(0==b.indexOf("linear"))return new Ad(b);if(0==b.indexOf("radial"))return new Bd(b);if(0==b.indexOf("glass"))return new Cd(b)}return null};var Ad=Xa(null,zd,{init:function(a){this._super(a),this._context=null},parse:function(a){if(this._colors=[],this._ratios=[],this._angle=1,a){var b=rd.getColorCsvArray(a),c=b.length;if(2>c||"linear"!=b[0])throw"Invalid linear gradient text";for(var d=1;c>d;){var e=String(b[d]),f=rd.createFrom(e);if(!f)break;this._colors[d-1]=f,d++}c>d&&(this._angle=parseFloat(b[d])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone()),c=this._colors.length;var g=255/(c-1),h=0;for(this._ratios=[0],d=1;c-1>d;d++)h+=g,this._ratios.push(h/255);this._ratios.push(1)}},clone:function(){var a=new Ad(null);return a._colors=this._colors.slice(),a._ratios=this._ratios.slice(),a._angle=this._angle,a},prepare:function(a){this._context=a},applyTo:function(a,b,c,d,e){var f;switch(this._angle){case 90:f=a.createLinearGradient(b,c,b,c+e);break;case 45:f=a.createLinearGradient(b,c,b+d,c+e);break;case 0:default:f=a.createLinearGradient(b,c,b+d,c)}for(var g=0,h=this._colors.length;h>g;g++){var i=this._colors[g].value();f.addColorStop(this._ratios[g],i)}return a.setFill(f),!0},applyToEx:function(a,b,c,d,e,f,g){var h;switch(this._angle){case 90:h=a.createLinearGradient(d,e,d,e+g);break;case 45:h=a.createLinearGradient(d,e,d+f,e+g);break;case 0:default:h=a.createLinearGradient(d,e,d+f,e)}for(var i=0,j=this._colors.length;j>i;i++){var k=this._context.getColorValue(this._colors[i],b,c);h.addColorStop(this._ratios[i],k)}return a.setFill(h),!0},toText:function(){for(var a="linear",b=0,c=this._colors.length;c>b;b++)a+=","+this._colors[b].toString();return a+","+this._angle},css:Xc?function(){return this._colors[0].toColorString()}:function(){var a="linear-gradient(180deg,"+this._colors[0].value()+","+this._colors[1].value()+")";return a},applyToCss:function(a){var b=this._colors[0].toString(),c=this._colors[1].toString(),d="progid:DXImageTransform.Microsoft.gradient(startColorstr="+b+",endColorstr="+c+")";a.filter=d,a.background=""}});Ad.areEqual=function(a,b){var c=a&&b;if(c){if(c=a._colors.length==b._colors.length)for(var d=0;d<a._colors.length&&(c=rd.areEqual(a._colors[d],b._colors[d]),c);d++);if(c){if(c=a._ratios.length==b._ratios.length)for(var d=0;d<a._ratios.length&&a._ratios[d]==b._ratios[d];d++);c&&(c=a._angle==b._angle)}}return c};var Bd=Xa(null,zd,{init:function(a){this._super(a)},parse:function(a){if(this._colors=[],this._ratios=[],a){var b=rd.getColorStringArray(a),c=b.length;if(2>c||"radial"!=b[0])throw"Invalid radial gradient text";for(var d=1;c>d;){var e=String(b[d]),f=rd.createFrom(e);if(!f)break;this._colors[d-1]=f,d++}c>d&&(this._angle=parseFloat(b[d])),1==this._colors.length&&(this._colors[1]=this._colors[0].clone()),c=this._colors.length;var g=255/(c-1),h=0;for(this._ratios=[0],d=1;c-1>d;d++)h+=g,this._ratios.push(h/255);this._ratios.push(1)}},clone:function(){var a=new Bd(null);return a._colors=this._colors.slice(),a._ratios=this._ratios.slice(),a},prepare:function(a){},applyTo:function(a,b,c,d,e){for(var f=a.createRadialGradient(b,c,b+d,c+e),g=0,h=this._colors.length;h>g;g++){var i=this._colors[g].value();f.addColorStop(this._ratios[g],i)}return a.setFill(f),!0},applyToEx:function(a,b,c,d,e,f,g){for(var h=a.createRadialGradient(d,e,d+f,e+g),i=0,j=this._colors.length;j>i;i++){var k=td[i]||L(td,new rd);k.copy(this._colors[i],b),h.addColorStop(this._ratios[i],k.valueWithBrightness(c))}return a.setFill(h),!0}}),Cd=Xa(null,zd,{init:function(a){this._super()},parse:function(a){}}),Dd=function(a,b,c){this._color=new rd(a),this._width=void 0!==b?Math.max(0,parseInt(b)):1,c&&(this._dash=c)};Dd.WHITE=new Dd(ud.white),Dd.BLACK=new Dd(ud.black),Dd.GRAY=new Dd(ud.gray),Dd.DKGRAY=new Dd(ud.dimGray),Dd.LTGRAY=new Dd(ud.ltGray),Dd.RED=new Dd(ud.red),Dd.GREEN=new Dd(ud.green),Dd.BLUE=new Dd(ud.blue),Dd.FOCUS=new Dd(ud.gray,1,[1,1]),Dd.prototype.applyTo=function(a){return a.setStroke(this._color.value(),this._width,this._dash),!0},Dd.prototype.width=function(){return this._width},Dd.prototype.getWidth=function(){return this._width},Dd.prototype.toText=function(){return this._color.toString()+","+this._width+"px"},Dd.prototype.css=Xc?function(){return this._width+"px solid "+this._color.toColorString()}:function(){return this._width+"px solid "+this._color.value()},Dd.areEqual=function(a,b){var c=a&&b&&rd.areEqual(a._color,b._color)&&a._width==b._width;if(c&&(c=!a._dash==!b._dash,c&&a))for(var d=a._dash.length;d--&&a._dash[d]==b._dash[d];);return c};var Ed=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;window.requestAnimationFrame=Ed||function(a){setTimeout(a,10)};var Fd="Tahoma",Gd=12,Hd=Gd+"px "+Fd,Id=function(a){var b=a;!("imageSmoothingEnabled"in b)&&(b.webkitImageSmoothingEnabled=!0),b.mozImageSmoothingEnabled=!0,b.oImageSmoothingEnabled=!0,b.imageSmoothingEnabled=!0,b.setLineDash=b.setLineDash||function(){},this.LINES_REG=new RegExp("\\n|\\r\\n?"),this.save=function(){b.save()},this.restore=function(){b.restore()},this.setCompositionOp=function(a){b.globalCompositeOperation=a},this.translate=function(a,c){b.translate(a,c)},this.scale=function(a,c){b.scale(a,c)},this.rotate=function(a){b.rotate(a)},this.clear=function(a,c,d,e){b.clearRect(a,c,d,e)},this.clip=function(){b.clip()},this.clipRect=function(a){b.beginPath(),b.rect(a.x,a.y,a.width,a.height),b.clip()},this.clipRectEx=function(a){b.beginPath(),b.rect(a.x,a.y,a.width+1,a.height+1),b.clip()},this.clipBounds=function(a,c,d,e){b.beginPath(),b.rect(a,c,d,e),b.clip()},this.clipBoundsEx=function(a,c,d,e){b.beginPath(),b.rect(a,c,d+1,e+1),b.clip()},this.containsPoint=function(a,c){return b.isPointInPath(a,c)},this.setAlpha=function(a){b.globalAlpha=a},this.setFill=function(a){b.fillStyle=a},this.setStroke=function(a,c,d){b.strokeStyle=a,b.lineWidth=c,b.setLineDash(d||[])},this.setShadow=function(a,c,d){b.shadowColor=a,b.shadowBlur=c,b.shadowOffsetX=b.shadowOffsetY=d},this.clearShadow=function(){b.shadowColor="transparent"},this.createLinearGradient=function(a,c,d,e){return isNaN(d)||isNaN(e),b.createLinearGradient(a,c,d,e)},this.createRadialGradient=function(a,c,d,e){var f=d/2,g=e/2,h=Math.min(f,g);return b.createRadialGradient(f,g,0,f,g,h)},this.drawBounds=function(a,c,d,e,f,g){b.beginPath(),b.rect(d,e,f,g),a&&(a.applyTo(this,d,e,f,g),b.fill()),c&&(c.applyTo(this),b.stroke())},this.drawBoundsI=function(a,c,d,e,f,g){var h=c&&c.applyTo(this);if(a||h){var i=h?c.width()%2/2:0;d+=i,e+=i,b.beginPath(),b.rect(d,e,f,g),a&&a.applyTo(this,d,e,f,g)&&b.fill(),h&&b.stroke()}},this.drawRect=function(a,c,d){b.beginPath(),b.rect(d.x,d.y,d.width,d.height),a&&(a.applyTo(this,d.x,d.y,d.width,d.height),b.fill()),c&&(c.applyTo(this),b.stroke())},this.drawStrokeRect=function(a,c){b.beginPath(),b.strokeRect(c.x,c.y,c.width,c.height),a&&(a.applyTo(this),b.stroke())},this.fillAndClear=function(){b.fill(),b.shadowColor="transparent"},this.drawRectI=function(a,c,d){var e=c&&c.applyTo(this);if(a||e){var f=e?c.width()%2/2:0,g=d.x+f,h=d.y+f;b.beginPath(),b.rect(g,h,d.width,d.height),a&&a.applyTo(this,g,h,d.width,d.height)&&this.fillAndClear(),e&&b.stroke()}},this.drawRoundRectI=function(a,c,d,e,f,g,h,i){var j=c&&c.applyTo(this);if(a||j){var k=j?c.width()%2/2:0,l=d.x+k,m=d.y+k,n=d.right()+k+(i||0),o=d.bottom()+k+(i||0);b.beginPath(),b.moveTo(l+e,m),b.lineTo(n-f,m),b.quadraticCurveTo(n,m,n,m+f),b.lineTo(n,o-h),b.quadraticCurveTo(n,o,n-h,o),b.lineTo(l+h,o),b.quadraticCurveTo(l,o,l,o-h),b.lineTo(l,m+e),b.quadraticCurveTo(l,m,l+e,m),b.closePath(),a&&a.applyTo(this,l,m,d.width,d.height)&&this.fillAndClear(),j&&b.stroke()}},this.drawRoundRectIWith=function(a,b,c,d,e){this.drawRoundRectI(a,b,c,d.topLeft,d.topRight,d.bottomLeft,d.bottomRight,e)},this.drawCircle=function(a,c,d,e,f){var g=c&&c.applyTo(this);(a||g)&&(b.beginPath(),b.arc(d,e,f,0,2*Math.PI),a&&a.applyTo(this,d-f,e-f,2*f,2*f)&&b.fill(),g&&b.stroke())},this.drawCircleBounds=function(a,c,d,e,f,g){var h=c&&c.applyTo(this);if(a||h){var i=d+f/2,j=e+g/2,k=Math.min(f,g)/2;b.beginPath(),b.arc(i,j,k,0,2*Math.PI),a&&a.applyTo(this,d-k,e-k,2*k,2*k)&&b.fill(),h&&b.stroke()}},this.drawCircleRect=function(a,b,c){this.drawCircleBounds(a,b,c.x,c.y,c.width,c.height)},this.drawEllipse=function(a,c,d,e,f,g){var h=c&&c.applyTo(this);if(a||h){var i=.5522848,j=f/2*i,k=g/2*i,l=d+f,m=e+g,n=d+f/2,o=e+g/2;b.beginPath(),b.moveTo(d,o),b.bezierCurveTo(d,o-k,n-j,e,n,e),b.bezierCurveTo(n+j,e,l,o-k,l,o),b.bezierCurveTo(l,o+k,n+j,m,n,m),b.bezierCurveTo(n-j,m,d,o+k,d,o),b.closePath(),a&&a.applyTo(this,d,e,f,g)&&b.fill(),h&&b.stroke()}},this.drawTriangle=function(a,c,d){var e=c&&c.applyTo(this);if(a||e){var f=d.x+d.width/2;b.beginPath(),b.moveTo(f,d.y),b.lineTo(d.right(),d.bottom()),b.lineTo(d.x,d.bottom()),b.closePath(),a&&a.applyTo(this,d.x,d.y,d.width,d.height)&&b.fill(),e&&b.stroke()}},this.drawDiamond=function(a,c,d){var e=c&&c.applyTo(this);if(a||e){var f=d.x+d.width/2,g=d.y+d.height/2;b.beginPath(),b.moveTo(f,d.y),b.lineTo(d.right(),g),b.lineTo(f,d.bottom()),b.lineTo(d.x,g),b.closePath(),a&&a.applyTo(this,d.x,d.y,d.width,d.height)&&b.fill(),e&&b.stroke()}},this.drawCross=function(a,c,d){var e=c&&c.applyTo(this);if(a||e){var f=d.x+d.width/2,g=d.y+d.height/2,h=Math.max(1.5,d.width/5),i=Math.max(1.5,d.height/5);b.beginPath(),b.moveTo(f-h,d.y),b.lineTo(f+h,d.y),b.lineTo(f+h,g-i),b.lineTo(d.right(),g-i),b.lineTo(d.right(),g+i),b.lineTo(f+h,g+i),b.lineTo(f+h,d.bottom()),b.lineTo(f-h,d.bottom()),b.lineTo(f-h,g+i),b.lineTo(d.x,g+i),b.lineTo(d.x,g-i),b.lineTo(f-h,g-i),b.closePath(),a&&a.applyTo(this,d.x,d.y,d.width,d.height)&&b.fill(),e&&b.stroke()}},this.drawDounut=function(a,c,d,e,f,g){var h=c&&c.applyTo(this);(a||h)&&(b.beginPath(),b.arc(d,e,f,0,2*Math.PI,!0),b.arc(d,e,f-g,0,2*Math.PI,!1),b.closePath(),a&&a.applyTo(this,d-f,e-f,2*f,2*f)&&b.fill(),h&&b.stroke())},this.drawArcSector=function(a,c,d,e,f,g,h,i,j,k){var l=c&&c.applyTo(this);(a||l)&&(h+=3*Math.PI/2,b.beginPath(),b.moveTo(d,e),b.arc(d,e,f,h,h+i),b.lineTo(d,e),b.closePath(),a&&a.applyTo(this,d-f,e-g,2*f,2*g)&&b.fill(),l&&b.stroke())},this.drawArcSector2=function(a,c,d,e,f,g,h,i,j,k,l,m){var n=c&&c.applyTo(this);(a||n)&&(j+=3*Math.PI/2,b.beginPath(),b.arc(d,e,f,j,j+k),b.arc(d,e,h,j+k,j,!0),b.closePath(),a&&a.applyTo(this,d-h,e-i,2*h,2*i)&&b.fill(),n&&b.stroke())},this.drawLine=function(a,c,d,e,f){a&&a.applyTo(this)&&(b.beginPath(),b.moveTo(c,d),b.lineTo(e,f),b.stroke())},this.drawLineI=function(a,c,d,e,f){if(a&&a.applyTo(this)){var g=a.width()%2/2;b.beginPath(),c==e?(b.moveTo(c+g,d),b.lineTo(e+g,f)):d==f&&(b.moveTo(c,d+g),b.lineTo(e,f+g)),b.stroke()}},this.drawHorzLine=function(a,c,d,e){a&&a.applyTo(this)&&(b.beginPath(),b.moveTo(c,e),b.lineTo(d,e),b.stroke())},this.drawHorzLineI=function(a,c,d,e){a&&a.applyTo(this)&&(e+=a.width()%2/2,b.beginPath(),b.moveTo(c,e),b.lineTo(d,e),b.stroke())},this.drawHLine=function(a,c,d,e){a&&a.applyTo(this)&&(b.beginPath(),b.moveTo(d,c),b.lineTo(e,c),b.stroke())},this.drawHLineI=function(a,c,d,e){a&&a.applyTo(this)&&(c+=a.width()%2/2,b.beginPath(),b.moveTo(d,c),b.lineTo(e,c),b.stroke())},this.drawVertLine=function(a,c,d,e){a&&a.applyTo(this)&&(b.beginPath(),b.moveTo(e,c),b.lineTo(e,d),b.stroke())},this.drawVertLineI=function(a,c,d,e){a&&a.applyTo(this)&&(e+=a.width()%2/2,b.beginPath(),b.moveTo(e,c),b.lineTo(e,d),b.stroke())},this.drawVLine=function(a,c,d,e){a&&a.applyTo(this)&&(b.beginPath(),b.moveTo(c,d),b.lineTo(c,e),b.stroke())},this.drawVLineI=function(a,c,d,e){a&&a.applyTo(this)&&(c+=a.width()%2/2,b.beginPath(),b.moveTo(c,d),b.lineTo(c,e),b.stroke())},this.drawLines=function(a,c){if(a&&a.applyTo(this)){var d=!1;if(Ga(c)&&c.length>=2){b.beginPath(),b.moveTo(c[0].x,c[0].y);for(var e=1;e<c.length;e++)b.lineTo(c[e].x,c[e].y);d=!0}else if(arguments.length>=5){b.beginPath(),b.moveTo(arguments[1],arguments[2]);for(var e=3;e<arguments.length-1;e+=2)b.lineTo(arguments[e],arguments[e+1]);d=!0}d&&b.stroke()}},this.drawLinesI=function(a,c){if(a&&a.applyTo(this)){var d,e,f=a.width()%2/2,g=!1;if(Ga(c)&&c.length>=2){for(b.beginPath(),b.moveTo(c[0].x,c[0].y),d=1;d<c.length;d++)b.lineTo(c[d].x,c[d].y);g=!0}else if(arguments.length>=5){var h=[];for(d=1,e=arguments.length;e>d;d++)h[d]=arguments[d]+f;for(b.beginPath(),b.moveTo(h[1],h[2]),d=3;e-1>d;d+=2)b.lineTo(h[d],h[d+1]);g=!0}g&&b.stroke()}},this.drawLinesArray=function(a,c){if(a&&c&&c.length>=4&&a.applyTo(this)){b.beginPath(),b.moveTo(c[0],c[1]);for(var d=1;d<c.length/2;d++)b.lineTo(c[2*d],c[2*d+1]);b.stroke()}},this.drawLinesArrayI=function(a,c){if(a&&c&&c.length>=4&&a.applyTo(this)){var d=a.width()%2/2;b.beginPath(),b.moveTo(c[0],c[1]);for(var e=1;e<c.length/2;e++)b.lineTo(c[2*e]+d,c[2*e+1]+d);b.stroke()}},this.drawCurve=function(a,c){a&&a.applyTo(this)&&(b.beginPath(),ga(b,c,0,c.length-1),b.stroke())},this.drawPolygon=function(a,c,d){var e,f,g;if(d&&(f=d.length)>1){var h=c&&c.applyTo(this);if(!a&&!h)return;for(b.beginPath(),b.moveTo(d[0].x,d[0].y),e=1;f>e;e++)b.lineTo(d[e].x,d[e].y);b.closePath(),a&&(g=ea(d),a.applyTo(this,g.x,g.y,g.width,g.height)&&b.fill()),h&&b.stroke()}},this.drawPolygonArray=function(a,c,d){var e,f,g;if(d&&(f=d.length)>2){var h=c&&c.applyTo(this);if(!a&&!h)return;for(b.beginPath(),b.moveTo(d[0],d[1]),f/=2,e=1;f>e;e++)b.lineTo(d[2*e],d[2*e+1]);b.closePath(),a&&(g=fa(d),a.applyTo(this,g.x,g.y,g.width,g.height)&&b.fill()),h&&b.stroke()}},this.drawRange=function(a,c,d,e){if(d&&d.length>1&&e&&e.length>1){var f=c&&c.applyTo(this);if(!a&&!f)return;b.beginPath(),b.moveTo(d[0].x,d[0].y);for(var g=1,h=d.length;h>g;g++)b.lineTo(d[g].x,d[g].y);for(var g=e.length-1;g>=0;g--)b.lineTo(e[g].x,e[g].y);if(b.closePath(),a){var i=ea(d.concat(e));a.applyTo(this,i.x,i.y,i.width,i.height)&&b.fill()}f&&b.stroke()}},this.drawCurvedRange=function(a,c,d,e){if(d&&d.length>1&&e&&e.length>1){var f=c&&c.applyTo(this);if(!a&&!f)return;b.beginPath(),ga(b,d,0,d.length-1,!0);var g=e[e.length-1];if(b.lineTo(g.x,g.y),ga(b,e,e.length-1,0,!1),g=d[0],b.lineTo(g.x,g.y),a){var h=ea(d.concat(e));a.applyTo(this,h.x,h.y,h.width,h.height)&&b.fill()}f&&b.stroke()}},this.drawCurvedStraightRange=function(a,c,d,e){if(d&&d.length>1&&e&&e.length>1){var f=c&&c.applyTo(this);if(!a&&!f)return;b.beginPath(),ga(b,d,0,d.length-1,!0);var g=e[e.length-1];b.lineTo(g.x,g.y);for(var h=e.length-2;h>=0;h--)b.lineTo(e[h].x,e[h].y);if(g=d[0],b.lineTo(g.x,g.y),a){var i=ea(d.concat(e));a.applyTo(this,i.x,i.y,i.width,i.height)&&b.fill()}f&&b.stroke()}},this.drawStraightCurvedRange=function(a,c,d,e){if(d&&d.length>1&&e&&e.length>1){var f=c&&c.applyTo(this);if(!a&&!f)return;b.beginPath();for(var g=0;g<d.length;g++)b.lineTo(d[g].x,d[g].y);var h=e[e.length-1];if(b.lineTo(h.x,h.y),ga(b,e,e.length-1,0,!1),h=d[0],b.lineTo(h.x,h.y),a){var i=ea(d.concat(e));a.applyTo(this,i.x,i.y,i.width,i.height)&&b.fill()}f&&b.stroke()}},this.drawText=function(a,c,d,e,f,g,h){c&&c.applyTo(this)&&(b.beginPath(),b.font=a?a.font:Hd,b.textAlign=g==id.CENTER?"center":g==id.RIGHT?"end":"start",b.textBaseline=h?h:"top",b.fillText(d,e,f))},this.drawTextRect=function(a,b,c,d,e,f){this.drawTextBounds(a,b,c,d.x,d.y,d.width,d.height,e,f)},this.drawTextBounds=function(a,c,d,e,f,g,h,i,j){if(d&&c&&c.applyTo(this)){var k=Gd;b.beginPath(),a?(b.font=a.font,k=a.size):b.font=Hd;var l="start";if(i===id.CENTER?(e+=g/2,l="center"):i===id.RIGHT&&(e+=g,l="end"),h!=k)switch(j){case"top":break;case"bottom":f=f+h-k;break;case"middle":default:f+=(h-k)/2}f+=k/2,b.textAlign=l,b.textBaseline="middle",b.fillText(d,e,f),a&&a.underline&&(b.beginPath(),this.setStroke(c._color.value(),1),g=Na(b.measureText(d).width),f=Na(f+k/2+1)+.5,i===id.CENTER?e-=Na(g/2):i===id.RIGHT&&(e-=g),b.moveTo(e,f),b.lineTo(e+g,f),b.stroke())}},this.getTextRect=function(a,c,d,e,f,g,h,i,j){if(j?j.width=j.height=0:j=new kd,c){var k=Gd;switch(a?(b.font=a.font,k=a.size):b.font=Hd,j.width=b.measureText(c).width,j.height=k,j.x=d,j.y=e,h===id.CENTER?j.x+=(f-j.width)/2:h===id.RIGHT&&(j.x+=f-j.width),i){case"top":break;case"bottom":j.y=j.bottom()-k;break;case"middle":default:j.y+=(g-k)/2}}return j},this.drawTextRectExplicit=function(a,b,c,d,e,f){this.drawTextBoundsExplicit(a,b,c,d.x,d.y,d.width,d.height,e,f)},this.drawTextBoundsExplicit=function(a,c,d,e,f,g,h,i,j){if(d&&c){var k,l,m,n=g*h;if(!(isNaN(n)||0>=n)){var o="string"==typeof d?d.split(/\n|\r\n?/):d;if(o.length<=1)return void this.drawTextBounds(a,c,o[0],e,f,g,h,i,j);if(c.applyTo(this)){var p=Gd;b.beginPath(),a?(b.font=a.font,p=a.size,a.underline&&(b.font="underline "+b.font)):b.font=Hd;var q=p+1;b.textBaseline="middle";var r,s,t,u,v=q*o.length,w=Math.min(o.length,Math.ceil(h/q));if("top"==j||v>=h);else switch(j){case"bottom":f=f+h-v;break;case"middle":default:f+=(h-v)/2}for(r=0;w>r;r++)s="start",i===id.CENTER?(t=e+g/2,s="center"):i===id.RIGHT?(t=e+g,s="end"):t=e,u=f+q*r,u+=p/2,b.textAlign=s,a&&a.underline&&(k=b.measureText(o[r]).width,l=t,m=f,m=Na(u+p/2+1)+.5,i===id.CENTER?l-=Na(k/2):i===id.RIGHT&&(l-=k),b.moveTo(l,m),b.lineTo(l+k,m)),b.fillText(o[r],t,u);b.stroke()}}}},this.getExplicitTextRect=function(a,c,d,e,f,g,h,i,j){if(j?j.width=j.height=0:j=new kd(d,e,0,0),!c)return j;var k="string"==typeof c?c.split(this.LINES_REG):c;if(1==k.length)return this.getTextRect(a,k[0],d,e,f,g,h,i,j);var l=Gd;a?(b.font=a.font,l=a.size):b.font=Hd;var m=l+1;b.textBaseline="middle";var n,o,p,q,r=m*k.length,s=Math.min(k.length,Math.ceil(g/m));if("top"==i||r>=g);else switch(i){case"bottom":e=e+g-r;break;case"middle":default:e+=(g-r)/2}for(j.y=e,j.height=m*s,n=0;s>n;n++)o=k[n],q=b.measureText(o).width,p=h===id.CENTER?d+(f-q)/2:h===id.RIGHT?d+f-q:d,0==j.width?(j.x=p,j.width=q):(j.setLeft(Math.min(j.x,p)),j.setRight(Math.max(j.right(),p+q)));return j},this.drawTextRectWrap=function(a,b,c,d,e,f){this.drawTextBoundsWrap(a,b,c,d.x,d.y,d.width,d.height,e,f)},this.drawTextBoundsWrap=function(a,c,d,e,f,g,h,i,j){if(d&&c){var k=g*h;if(!(isNaN(k)||0>=k)){var l=Gd;a?(b.font=a.font,l=a.size):b.font=Hd;var m="string"==typeof d?d.split(this.LINES_REG):d;if(m.length<=1&&b.measureText(m[0]).width<=g)return void this.drawTextBounds(a,c,m[0],e,f,g,h,i,j);if(c.applyTo(this)){var n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=l+1,D=Math.min(m.length,Math.ceil(h/C)),E=[],F=0,G=!0;for(n=0;D>n&&h>=F;n++){for(r=0,u="",q=m[n].split(/(\s+)/),o=0;o<q.length&&h>=F;){if(s=q[o],G&&(G=!1,s=s.trim(),s||((v=b.measureText(s).width)>g?(F+=C,E.push(s)):(u=s,r=v),s=q[++o])),r+(v=b.measureText(s).width)<=g)u+=s,r+=v;else if(s=s.trim())if(u&&(E.push(u),F+=C,u=""),v>g)for(;s&&h>=F;){for(p=2;p<=s.length;p++)if(t=s.substr(0,p),b.measureText(t).width>g){E.push(s.substr(0,p-1)),F+=C,s=s.substr(p-1);break}if(!s||1==s.length||b.measureText(s).width<=g){E.push(s),F+=C;break}}else u=s,r=0;o++}u&&(E.push(u),F+=C)}if(y=Math.min(E.length,Math.ceil(h/C)),F=E.length*C,b.beginPath(),b.textBaseline="middle","top"==j||F>=h);else switch(j){case"bottom":f=f+h-F;break;case"middle":default:f+=(h-F)/2}for(n=0;y>n;n++)w="start",r=e,i===id.CENTER?(r+=g/2,w="center"):i===id.RIGHT&&(r=e+g,w="end"),x=f+C*n,x+=l/2,b.textAlign=w,a&&a.underline&&(z=b.measureText(E[n]).width,A=r,B=f,B=Na(x+l/2+1)+.5,i===id.CENTER?A-=Na(z/2):i===id.RIGHT&&(A-=z),b.moveTo(A,B),b.lineTo(A+z,B)),b.fillText(E[n],r,x);b.stroke()}}}},this.getWrapTextRect=function(a,c,d,e,f,g,h,i,j){if(j?j.width=j.height=0:j=new kd(d,e,0,0),!c)return j;var k=Gd;a?(b.font=a.font,k=a.size):b.font=Hd;var l="string"==typeof c?c.split(/\n|\r\n?/):c;if(1==l.length&&b.measureText(l[0]).width<=f)return this.getTextRect(a,l[0],d,e,f,g,h,i,j);var m,n,o,p,q,r,s,t,u,v,w=k+1,x=Math.min(l.length,Math.ceil(g/w)),y=[],z=0,A=!0;for(m=0;x>m&&g>=z;m++){for(q=0,t="",p=l[m].split(/(\s+)/),n=0;n<p.length&&g>=z;){if(r=p[n],A&&(A=!1,r=r.trim(),r||((u=b.measureText(r).width)>f?(z+=w,y.push(r)):(t=r,q=u),r=p[++n])),q+(u=b.measureText(r).width)<=f)t+=r,q+=u;else if(r=r.trim())if(t&&(y.push(t),z+=w,t=""),u>f)for(;r&&g>=z;){for(o=2;o<=r.length;o++)if(s=r.substr(0,o),(u=b.measureText(s).width)>f){y.push(r.substr(0,o-1)),z+=w,r=r.substr(o-1);break}if(!r||1==r.length||(u=b.measureText(r).width)<=f){y.push(r),z+=w;break}}else t=r,q=0;n++}t&&(y.push(t),z+=w)}if(v=Math.min(y.length,Math.ceil(g/w)),z=y.length*w,"top"==i||z>=g);else switch(i){case"bottom":e=e+g-z;break;case"middle":default:e+=(g-z)/2}for(j.y=e,j.height=z,m=0;v>m;m++){var B=b.measureText(y[m]).width;q=h===id.CENTER?d+(f-B)/2:h===id.RIGHT?d+f-B:d,0==j.width?(j.x=q,j.width=B):(j.setLeft(Math.min(j.x,q)),j.setRight(Math.max(j.right(),q+B)))}return j},this.drawTextRectA=function(a,b,c,d,e){this.drawTextBoundsA(a,b,c,d.x,d.y,d.width,d.height,e)},this.drawTextBoundsA=function(a,c,d,e,f,g,h,i){c&&c.applyTo(this)&&(b.beginPath(),a?b.font=a.font:b.font=Hd,b.save(),b.translate(e+g/2,f+h/2),b.rotate(i),b.textAlign="center",b.textBaseline="middle",b.fillText(d,0,0),b.restore())},this.getTextWidth=function(a,c){return c?(b.font=a?a.font:Hd,b.measureText(c).width):0},this.getLinesWidth=function(a,c){b.font=a?a.font:Hd;var d=c.split(/\n|\r\n?/),e=d.length;if(1>=e)return b.measureText(c).width;for(var f=b.measureText(d[0]).width,g=1;e>g;g++)f=Math.max(b.measureText(d[0]).width);return f},this.drawImage=function(a,c,d,e,f,g,h,i,j){try{b.drawImage.apply(b,arguments)}catch(k){}},this.drawImageI=function(a,c,d,e,f,g,h,i,j){arguments[1]=Math.floor(arguments[1]),arguments[2]=Math.floor(arguments[2]);try{b.drawImage.apply(b,arguments)}catch(k){}},this.aL=function(a,c,d,e,f,g,h,i,j){try{b.drawImage.apply(b,arguments)}catch(k){}}};Id.getEllipsePoint=function(a,b,c,d,e,f,g){e+=f;var h=g?-1:1,i={};return i.x=a+Math.cos(e*h)*c,i.y=b+Math.sin(-e*h)*d,i},Id.getArcPoint=function(a,b,c,d,e,f,g,h,i){Math.abs(f)>2*Math.PI&&(f=2*Math.PI),i===ta&&(i=.5),e+=3*Math.PI/2;var j=h?-1:1;f=e-f*j*i;var k={};return k.x=a+Math.cos(f*j)*c,k.y=b+Math.sin(-f*j)*d,k};var Jd=function(){var a=null,b=[],c=[];this._render=function(){for(var d=0,e=b.length;e>d;d++)b[d].apply(a,c[d])},this.clear=function(d){a=d,b=[],c=[]},this.clipRect=function(d){b.push(a.clipBounds),c.push([d.x,d.y,d.width,d.height])},this.clipRectEx=function(d){b.push(a.clipBoundsEx),c.push([d.x,d.y,d.width,d.height])},this.setAlpha=function(d){b.push(a.setAlpha),c.push([d])},this.drawBounds=function(d,e,f,g,h,i){b.push(a.drawBounds),c.push([d,e,f,g,h,i])},this.drawBoundsI=function(d,e,f,g,h,i){b.push(a.drawBoundsI),c.push([d,e,f,g,h,i])},this.drawRect=function(d,e,f){b.push(a.drawBounds),c.push([d,e,f.x,f.y,f.width,f.height])},this.drawStrokeRect=function(d,e){b.push(a.drawStrokeRect),c.push([d,e.x,e.y,e.width,e.height])},this.drawRectI=function(d,e,f){b.push(a.drawBoundsI),c.push([d,e,f.x,f.y,f.width,f.height])},this.drawRoundRectI=function(d,e,f,g,h,i,j,k){b.push(a.drawRoundRectI),c.push([d,e,f.clone(),g,h,i,j,k])},this.drawRoundRectIWith=function(d,e,f,g,h){b.push(a.drawRoundRectIWith),c.push([d,e,f.clone(),g,h])},this.drawCircle=function(d,e,f,g,h){b.push(a.drawCircle),c.push([d,e,f,g,h])},this.drawEllipse=function(d,e,f,g,h,i){b.push(a.drawEllipse),c.push([d,e,f,g,h,i])},this.drawCircleRect=function(d,e,f){b.push(a.drawCircleRect),c.push([d,e,f.clone()])},this.drawTriangle=function(d,e,f){b.push(a.drawTriangle),c.push([d,e,f.clone()])},this.drawDiamond=function(d,e,f){b.push(a.drawDiamond),c.push([d,e,f.clone()])},this.drawArcSector=function(d,e,f,g,h,i,j,k,l,m){b.push(a.drawArcSector),c.push([d,e,f,g,h,i,j,k,l,m])},this.drawArcSector2=function(d,e,f,g,h,i,j,k,l,m,n,o){b.push(a.drawArcSector2),c.push([d,e,f,g,h,i,j,k,l,m,n,o])},this.drawLine=function(d,e,f,g,h){b.push(a.drawLine),c.push([d,e,f,g,h])},this.drawLineI=function(d,e,f,g,h){b.push(a.drawLineI),c.push([d,e,f,g,h])},this.drawHorzLine=function(d,e,f,g){b.push(a.drawHorzLine),c.push([d,e,f,g])},this.drawHorzLineI=function(d,e,f,g){b.push(a.drawHorzLineI),c.push([d,e,f,g])},this.drawVertLine=function(d,e,f,g){b.push(a.drawVertLine),c.push([d,e,f,g])},this.drawVertLineI=function(d,e,f,g){b.push(a.drawVertLineI),c.push([d,e,f,g])},this.drawLines=function(d,e){b.push(a.drawLines),c.push([d,e])},this.drawLinesI=function(d,e){b.push(a.drawLinesI),c.push([d,e])},this.drawCurve=function(d,e){b.push(a.drawCurve),c.push([d,e])},this.drawPolygon=function(d,e,f){b.push(a.drawPolygon),c.push([d,e,f])},this.drawPolygonArray=function(d,e,f){b.push(a.drawPolygonArray),c.push([d,e,f])},this.drawText=function(d,e,f,g,h,i,j){b.push(a.drawText),c.push([d,e,f,g,h,i,j])},this.drawTextBounds=function(d,e,f,g,h,i,j,k,l){b.push(a.drawTextBounds),c.push([d,e,f,g,h,i,j,k,l])},this.drawTextRect=function(d,e,f,g,h,i){b.push(a.drawTextBounds),c.push([d,e,f,g.x,g.y,g.width,g.height,h,i])},this.drawTextRectA=function(d,e,f,g,h){b.push(a.drawTextBoundsA),c.push([d,e,f,g.x,g.y,g.width,g.height,h])},this.drawImage=function(d,e,f,g,h,i,j,k,l){b.push(a.drawImage),c.push([d,e,f,g,h,i,j,k,l])},this.getTextWidth=function(a,b){return _graphics.gtTextWidth(a,b)}},Kd=Xa("ShapeCellRenderer",null,{init:function(){this._super()},draw:function(a,b,c,d){(c||d)&&this._doDraw(a,b,c,d)},_doDraw:function(a,b,c,d){}}),Ld=Xa("PolygonShape",Kd,{init:function(a){this._super(),this.setShape(a)},shape:null,setShape:function(a){this._shape=a?"inverted_triangle"===a?Ld.INVERTED_TRIANLGE:a.toLowerCase():null},_doDraw:function(a,b,c,d){var e,f,g,h,i=this._shape;if(Md.hasOwnProperty(i)){if(e=Md[i]){for(e=e.slice(),g=0,h=e.length/2;h>g;g++)e[2*g]=b.x+e[2*g]*b.width,e[2*g+1]=b.y+e[2*g+1]*b.height;e.push(e[0],e[1]),a.drawPolygonArray(c,d,e)}}else if(Nd.hasOwnProperty(i)&&(f=Nd[i])){for(e=f[0],e=e.slice(),g=0,h=e.length/2;h>g;g++)e[2*g]=b.x+e[2*g]*b.width,e[2*g+1]=b.y+e[2*g+1]*b.height;for(e.push(e[0],e[1]),a.drawPolygonArray(c,d,e),e=f[1],e=e.slice(),g=0,h=e.length/2;h>g;g++)e[2*g]=b.x+e[2*g]*b.width,e[2*g+1]=b.y+e[2*g+1]*b.height;e.push(e[0],e[1]),a.drawPolygonArray(c,d,e)}}});Ld.RECTANGLE="rectangle",Ld.TRIANLGE="triangle",Ld.INVERTED_TRIANLGE="itriangle",Ld.DIAMOND="diamond",Ld.UP_ARROW="uparrow",Ld.DOWN_ARROW="downarrow",Ld.LEFT_ARROW="leftarrow",Ld.RIGHT_ARROW="rightarrow",Ld.PLUS="plus",Ld.MINUS="minus",Ld.EQUAL="equal",Ld.STAR="star";var Md={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},Nd={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},Od=Xa("EllipseShape",Kd,{init:function(a){this._super()},_doDraw:function(a,b,c,d){a.drawEllipse(c,d,b)}}),Pd=Xa("NullShape",Kd,{init:function(){this._super()},_doDraw:function(a,b,c,d){}},null,function(a){a.Default=new a}),Qd=Xa("VisualContext",bb,{init:function(){this._super()}}),Rd=Xa("CanvasContext",Qd,{init:function(a,b){this._super(),this._name=a,this._container=b,this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._graphics=new Id(this._ctx),this._dirty=!1,this._buffer=null,this._bufferCtx=null},name:function(){return this._name},isDirty:function(){return this._dirty},resize:function(a,b){a>this._canvas.width&&(this._canvas.width=a),b>this._canvas.height&&(this._canvas.height=b)},prepare:function(a,b,c,d){if(a&&(b||c)){var e=a,f=this._buffer;f||(this._buffer=f=ja.createElement("canvas"),this._bufferCtx=f.getContext("2d")),e.width>f.width&&(f.width=e.width),e.height>f.height&&(f.height=e.height);var g=e.x,h=e.y,i=e.width,j=e.height;return this._bufferCtx.drawImage(this._canvas,g,h,i,j,0,0,i,j),d&&this._graphics.clear(0,0,this._canvas.width,this._canvas.height),b>0?(e.x+=b,i-=b):0>b&&(g-=b,i+=b),c>0?(e.y+=c,j-=c):0>c&&(h-=c,j+=c),this._ctx.drawImage(this._buffer,g,h,i,j,e.x,e.y,i,j),this._dirty=!0,this._graphics.save(),!0}return d?(this._graphics.clear(0,0,this._canvas.width,this._canvas.height),this._graphics.save(),!0):!1},restore:function(){this._dirty&&(this._graphics.restore(),this._dirty=!1)},invalidate:function(a){this._dirty||(this._dirty=!0)}}),Sd=Xa("VisualCache",bb,{init:function(){this._super()}}),Td=Xa("CanvasCache",Sd,{init:function(a,b){
this._super(),this._element=b,this._canvas=a.createElement("canvas"),this._ctx=this._canvas.getContext("2d"),this._graphics=new Id(this._ctx)},dispose:function(){},resize:function(a,b){a>this._canvas.width&&(this._canvas.width=a),b>this._canvas.height&&(this._canvas.height=b)},prepare:function(){this._graphics.clear(0,0,this._canvas.width,this._canvas.height),this._graphics.save()},restore:function(){this._graphics.restore()},invalidate:function(a){this._dirty||(this._dirty=!0,this._container.invalidate())}}),Ud=Xa("VisualContainer",dd,{init:function(a,b,c){this._super(a,b);var d=this._container;if(a)this._createChildren(d),this.invalidateLayout(),this._registerEventHandlers(d);else{var e=this._canvas=document.createElement("canvas");this._ctx=e.getContext("2d"),d.appendChild(e),e.width=d.clientWidth,e.height=d.clientHeight,e.style.position="absolute",e.style.left="0px",e.style.top="0px",e.style.background="#fff",e.style.borderStyle="none",e.style.borderWidth="0px",e.innerText=c?"":"Your browser does not support HTML5 Canvas.",e.setAttribute("tabindex","0"),e.setAttribute("role","application"),this._defContext=new Rd("defaultContext",this),this._defContext.resize(this._width,this._height),this._contexts=null,this._createChildren(d),this.invalidateLayout(),this._registerEventHandlers(e)}this._imagePool=new ib,this._imagePool.addListener(this)},onImageLoaded:function(a){var b=this._imagePool.getImage(a);Ea("Image loaded at "+a+" ["+b.width+","+b.height+"]"),this.invalidateLayout()},getCanvasImage:function(){return this._canvas&&this._canvas.toDataURL()},getContext:function(a){if(this._contexts)for(var b=this._contexts.length;b--;)if(this._contexts[b].name()==a)return this._contexts[b];return null},addContext:function(a){a&&(this._contexts||(this._contexts=[]),this._contexts.indexOf(a)<0&&(this._contexts.push(a),a.resize(this._width,this._height)))},getImage:function(a){return this._imagePool.getImage(a)},measureText:function(a,b){return this.$_dom?b?8*b.length:0:(this._ctx.font=a.font,this._ctx.measureText(b).width)},invalidateElement:function(a){if(!a._dom){var b=a._context||this._defContext;b.invalidate(a)}this._drawing||this._updateRequested||(window.requestAnimationFrame(this._containerRender),this._updateRequested=!0)},validateElement:function(a){},scroll:function(a,b,c){this.$$_render(Fa(),a,b,c)},resetSize:function(a){if(this._resetSizeCallback=a,this._width!=this._container.clientWidth||this._height!=this._container.clientHeight){if(this._defContext&&(this._width=this._canvas.width=this._container.clientWidth,this._height=this._canvas.height=this._container.clientHeight,this._defContext.resize(this._width,this._height),this._contexts))for(var b=0;b<this._contexts.length;b++)this._contexts[b].resize(this._width,this._height);this.invalidateLayout(),Ea("resized: "+this._width+", "+this._height)}else this.invalidateLayout()},_createRootElement:function(a){if(a){var b=new Wd(a,"root",this);return this._container.appendChild(b._dom),b}return new Wd(!1,"root",this,this._defContext)},$_validateChildren:function(a){var b=a._elements;if(b)for(var c=b.length;c--;){var d=b[c];d._dirty=d._nodraw=!1,this.$_validateChildren(d)}},_doLayout:function(a){},_doPrepareRender:function(a){},_beforeRender:function(a){},_doRender:function(a){if(this._doDrawContainer(this._defContext._graphics,a),this._defContext._dirty&&this._drawElement(this._rootElement,null,this._invalidated),this._contexts)for(var b=0,c=this._contexts.length;c>b;b++)this._contexts[b]._dirty&&this._drawElement(this._rootElement,this._contexts[b],!0);this.$_validateChildren(this._rootElement)},_doRenderHtml:function(a){this._doDrawContainerHtml(a),this._drawElementHtml(this._rootElement),this.$_validateChildren(this._rootElement)},_doDrawContainer:function(a,b){},_doDrawContainerHtml:function(a,b){},_drawElement:function(a,b,c){if(!a._nodraw){var d,e,f;if(a._dom)for(a.draw(),d=0,e=a.childCount();e>d;d++)f=a.getChild(d),f.isVisible()&&this._drawElement(f);else{var g=b?b._graphics:this._defContext._graphics;if(g.save(),g.translate(a.x(),a.y()),a._mask?a._mask instanceof Vd?(a._mask._doDraw(g),g.clip()):a._mask instanceof kd&&g.clipRect(a._mask):a.clip(g),g.setAlpha(a._alpha),a._context==b&&(c||a._dirty)){var h=a._cache;h?a.drawCache(g,h):(a._graphics=g,a.draw(g,!this._invalidated))}var i=a._elements;if(i)for(d=0,e=i.length;e>d;d++)f=i[d],f._visible&&this._drawElement(f,b,c);g.restore()}}},_drawElementHtml:function(a){a.draw();for(var b=0,c=a.childCount();c>b;b++){var d=a.getChild(b);d.isVisible()&&this._drawElementHtml(d)}},$$_render:function(a,b,c,d){var e,f=Fa(),g=this._width,h=this._height;if(this._layoutChildren(new kd(0,0,g,h)),ua&&(Ea("rendering["+ ++this._rendered+"] at "+a),f=m()),this._layoutNeeded?(this._layoutNeeded=!1,this._doLayout(new kd(0,0,g,h)),ua&&(f=Fa()-f,k("layouted in ["+f+"]"))):this._doPrepareRender(new kd(0,0,g,h)),ua&&(f=Fa()),this._invalidated&&(this._defContext._dirty=!0,this._contexts))for(var e=0,i=this._contexts.length;i>e;e++)this._contexts[e]._dirty=!0;if(this._defContext.prepare(b,c,d,this._invalidated),this._contexts)for(e=0;e<this._contexts.length;e++)this._contexts[e].prepare(null,0,0,this._contexts[e]._dirty);try{ad=0;var j=new kd(0,0,g,h);if(this._beforeRender(j),this._doRender(j),this._ctx.clearRect(0,0,g,h),g>0&&h>0&&(this._ctx.drawImage(this._defContext._canvas,0,0,g,h,0,0,g,h),this._contexts))for(e=0;e<this._contexts.length;e++)this._ctx.drawImage(this._contexts[e]._canvas,0,0,g,h,0,0,g,h)}finally{if(this._contexts)for(e=0;e<this._contexts.length;e++)this._contexts[e].restore();this._defContext.restore()}ua&&(f=Fa()-f,k("rendered elements2["+ad+"] in ["+f+"]"));for(var e=0,i=this._children.length;i>e;e++){var l=this._children[e];l._visible&&l._width>0&&l._height>0&&(l.resize(),l.layoutContent(),l._dirty&&l.draw(),this._ctx.drawImage(l._canvas,0,0,l._width,l._height,l._x,l._y,l._width,l._height))}},$$_renderHtml:function(a,b,c,d){var e=m(),f=this._width,g=this._height;this._layoutChildren(new kd(0,0,f,g)),this._drawing=!0;try{ua&&(Ea("rendering["+ ++this._rendered+"] at "+a),e=m()),this._layoutNeeded&&(this._layoutNeeded=!1,Ea("layout..."),this._doLayout(new kd(0,0,f,g)),ua&&(e=m()-e,Ea("layouted at ["+e+"]"))),ua&&(e=m()),ad=0,this._doRenderHtml(new kd(0,0,f,g)),ua&&(e=m()-e,Ea("rendered elements2["+ad+"] at ["+e+"]"))}finally{this._drawing=!1}},_resizeHandler:function(a){this.resetSize()}}),Vd=(Ud.prototype,Xa("VisualElement",bb,{init:function(a,b){this._super(),this._name=b,this._parent=null,this._elements=null,this._dirty=!1,this._mouseEnabled=!0,this._hovered=!1,this._mask=null,this._nodraw=!1,a?(this._dom=document.createElement("div"),this._dom.$_owner=this,this._css=this._dom.style,this._css.position="absolute",this._css.padding="0px",this._css.margin="0px",this._css["-webkit-print-color-adjust"]="exact"):(this._context=null,this._graphics=null,this._drawings=new Jd,this._cache=null)},x:0,y:0,width:0,height:0,rotation:0,visible:!0,alpha:1,renderCallback:null,right:function(){return this._x+this._width},bottom:function(){return this._y+this._height},setWidth:function(a){return a=Math.max(0,a),a!=this._width&&(this._width=a,this.invalidate()),this},setHeight:function(a){return a=Math.max(0,a),a!=this._height&&(this._height=a,this.invalidate()),this},setVisible:function(a){return a!=this._visible&&(this._visible=a,this.invalidate(!0),this._dom&&(this._css.display=a?"block":"none")),this},isCached:function(){return null!=this._cache},setCached:function(a){a&&!this._cache?(this._cache=new Td(ja,this),this._cache.resize(this._width,this._height)):!a&&this._cache&&(this._cache.dispose(),this._cahce=null)},isClickable:function(){return!1},name:function(){return this._name},setName:function(a){this._name=a},container:function(){return this._parent&&this._parent.container()},parent:function(){return this._parent},childCount:function(){return this._elements?this._elements.length:0},isSingleton:function(){return 1==this._parent.childCount()},position:function(){return{x:this._x,y:this._y}},bounds:function(){return new kd(this._x,this._y,this._width,this._height)},clientRect:function(){return new kd(0,0,this._width,this._height)},mouseX:function(){var a=this.container();if(a){for(var b=a._currentX,c=this;c&&c!==ta;)b-=c._x,c=c._parent;return b}return NaN},mouseY:function(){var a=this.container();if(a){for(var b=a._currentY,c=this;c&&c!==ta;)b-=c._y,c=c._parent;return b}return NaN},mask:function(){return this._mask},setMask:function(a){this._mask=a?a.clone():null},isLayer:function(){return!1},setMouseEnabled:function(a){this._mouseEnabled=a},canHover:function(){return!0},isHovered:function(){return this._hovered},setHovered:function(a){a!=this._hovered&&(this._hovered=a,this._hoveredChanged&&this._hoveredChanged())},propertyChanged:function(a,b){this.invalidate()},getChildren:function(){return this._elements&&this._elements.concat()},getChild:function(a){return this._elements?this._elements[a]:null},getChildIndex:function(a){return this._elements?this._elements.indexOf(a):-1},contains:function(a){return this._elements?this._elements.indexOf(a)>=0:!1},addChild:function(a,b){return this.insertChild(-1,a,b)},addElement:function(a,b){return this.addChild(a,b)},addContextElement:function(a){return this.addChild(a,this._context)},insertChild:function(a,b,c){return b instanceof Vd&&!this.contains(b)&&(this._elements||(this._elements=[]),0>a?(this._dom?this._dom.appendChild(b._dom):b._context=c,this._elements.push(b)):(this._dom?this._elements.length>a?this._dom.insertBefore(b._dom,this._elements[a]._dom):this._dom.appendChild(b._dom):b._context=c,this._elements.splice(a,0,b)),b._parent=this,b.$_attached(this)),b},insertElement:function(a,b,c){return this.insertChild(a,b,c)},removeChild:function(a){if(a&&this._elements){var b=this._elements.indexOf(a);if(b>=0)return this.removeChildAt(b)}return null},removeElement:function(a){return this.removeChild(a)},removeChildAt:function(a){if(a>=0&&a<this.childCount()){var b=this._elements[a];return this._elements.splice(a,1),this._dom&&b._dom?this._dom.removeChild(b._dom):b._context=null,b._parent=null,b._dirty=!1,b.$_detached(this),b}return null},removeElementAt:function(a){return this.removeChildAt(a)},clear:function(){var a,b=this._elements,c=b?b.length:0;if(c>0){for(a=0;c>a;a++)b[a]._parent=null,b[a].$_detached(this);if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);this.invalidate()}},hideAll:function(){var a,b=this._elements,c=b?b.length:0;if(this._dom)for(a=0;c>a;a++)b[a].setVisible(!1);else for(a=0;c>a;a++)b[a]._visible=!1},setTool:function(a){var b,c=this._elements,d=c?c.length:0;if(a)for(this.$_tool=!0,b=0;d>b;b++)c[b].setTool(!0);else if(this.$_tool)for(this.$_tool=!1,b=0;d>b;b++)c[b].setTool(!1)},invalidate:function(a,b){if(a||!this._dirty){var c=this.container();c&&(c.invalidateElement(this),this._dirty=!0)}if(b){var d=this._elements;if(d)for(var e=d.length;e--;)d[e].invalidate(a,!0)}},validate:function(){if(this._dirty){this._dirty=!1;var a=this.container();a&&a.validateElement(this)}},invalidateLayout:function(){var a=this.container();a&&a.invalidateLayout()},clip:function(a){},getBounds:function(a){return a?a.set(this._x,this._y,this._width,this._height):new kd(this._x,this._y,this._width,this._height)},getClientRect:function(a){return a?a.set(0,0,this._width,this._height):new kd(0,0,this._width,this._height)},containsInBounds:function(a,b){return a>=this._x&&a<this._x+this._width&&b>=this._y&&b<this._y+this._height},containsInClient:function(a,b){return a>=0&&a<this._width&&b>=0&&b<this._height},parentToElement:function(a,b,c){for(var d=this;d&&d!=a;)b-=d._x,c-=d._y,d=d._parent;return{x:b,y:c}},translateBy:function(a,b){var c=a;for(b||(b=new kd(0,0,this._width,this._height));c&&c!==this;)b.x-=c._x,b.y-=c._y,c=c._parent;return b},topBy:function(a,b){for(var c=this._y+b,d=this._parent;d&&d!==a;)c+=d._y,d=d._parent;return c},boundsBy:function(a,b){var c=this._x,d=this._y,e=this._parent;for(b&&(c+=b.x,d+=b.y);e&&e!==a;)c+=e._x,d+=e._y,e=e._parent;return b?new kd(c,d,b.width,b.height):new kd(c,d,this._width,this._height)},boundsByContainer:function(a){var b=this._x,c=this._y;a&&(b+=a.x,c+=a.y);for(var d=this._parent;d&&d._x!==ta;)b+=d._x,c+=d._y,d=d._parent;return a?new kd(b,c,a.width,a.height):new kd(b,c,this._width,this._height)},boundsByScreen:function(a){return a=this.boundsByContainer(a),a=this.container().toScreen(a)},containerToElement:function(a,b){for(var c=this;c;)a-=c._x,b-=c._y,c=c._parent;return{x:a,y:b}},move:function(a,b){this.setX(a),this.setY(b)},resize:function(a,b){this.setWidth(a),this.setHeight(b)},setSize:function(a,b){this.setWidth(a),this.setHeight(b)},setPosition:function(a,b){this.setX(a),this.setY(b)},setBounds:function(a,b,c,d){this.setX(a),this.setY(b),this.setWidth(c),this.setHeight(d)},setBoundsI:function(a,b,c,d){this.setX(a>>0),this.setY(b>>0),this.setWidth(c>>0),this.setHeight(d>>0)},setRect:function(a){this.setX(a.x),this.setY(a.y),this.setWidth(a.width),this.setHeight(a.height)},setRectI:function(a){this.setX(Ma(a.x)),this.setY(Ma(a.y)),this.setWidth(Ma(a.width)),this.setHeight(Ma(a.height))},drawCache:function(a,b){if(this._dirty){var c=b._graphics;this._dirty=!1,this._graphics=c,(b._element=this)?(b.resize(this._width,this._height),b.prepare()):c.save(),this._renderCallback?this._renderCallback(c):this._doDraw(c),b.restore(),ad++}a.drawImage(b._canvas,0,0,this._width,this._height,0,0,this._width,this._height)},draw:function(a,b){this._dom?this._dirty&&(this._dirty=!1,this._css.left=this._x+"px",this._css.top=this._y+"px",this._css.width=this._width+"px",this._css.height=this._height+"px",this._css.boxSizing="border-box",this._doDrawHtml(),ad++):(this._dirty=!1,this._renderCallback?this._renderCallback(a):this._doDraw(a,b),ad++)},moveDom:function(){this._css.left=this._x+"px",this._css.top=this._y+"px",this._css.width=this._width+"px",this._css.height=this._height+"px",this._css.boxSizing="border-box"},draw2:function(a){this._dirty&&(this._dirty=!1,this._drawings.clear(a),this._renderCallback?this._renderCallback(this._drawings):this._doDraw(this._drawings),ad++),this._drawings._render()},hitTest:function(a,b){return a>=0&&a<this._width&&b>=0&&b<this._height},containerToLocal:function(a){for(var b=a.x,c=a.y,d=this;d;)b-=d._x,c-=d._y,d=d._parent;return{x:b,y:c}},localToContainer:function(a){for(var b=a.x,c=a.y,d=this;d;)b+=d._x,c+=d._y,d=d._parent;return{x:b,y:c}},findChildAt:function(a,b,c){var d,e,f,g,h,i=this._elements,j=i?i.length:0;if(j>0)for(d=j-1;d>=0;d--)if(e=i[d],e.isVisible()&&(g=a-e._x,h=b-e._y,(c||e._mouseEnabled)&&(e.isLayer()||e.hitTest(g,h)))){if(f=e.findChildAt(g,h,c))return f;if(!e.isLayer()&&e._mouseEnabled)return e}return null},$_attached:function(a){this._doAttached(a)},_doAttached:function(a){},$_detached:function(a){this._doDetached(a)},_doDetached:function(a){},_doDraw:function(a,b){},_doDrawHtml:function(){},_hoveredChanged:function(){},$_prepareSpan:function(){return this._span||(this._span=document.createElement("span"),this._span.style.position="absolute",this._dom.appendChild(this._span)),this._span},$_setCssFill:function(a){Xc?a?a.applyToCss(this._css):(this._css.background="",this._css.filter=""):a instanceof Ad?a.applyToCss(this._css):(this._css.background=a?a.css():"",this._css.filter="")}},{addChild:function(a,b){a.addChild(b)}})),Wd=(Vd.prototype,Xa("RootElement",Vd,{init:function(a,b,c,d){this._super(a,b),this._container=c,this._context=d},container:function(){return this._container}})),Xd=(Xa("MaskElement",Vd,{init:function(a,b,c){this._super(!1,a),this._target=b,this._render=c},_doDraw:function(a){this._render&&this._render(a,this._target)}}),Xa("LayerElement",Vd,{init:function(a,b,c){this._super(a,b),a?this._dom.style.pointerEvents="none":(this._clip=c,this._drawRect=null)},isLayer:function(){return!0},clip:function(a){if(this._clip){var b=this._drawRect=this._drawRect||new kd;this.getClientRect(b),a.clipRect(b)}}})),Yd=Q({BACK:8,TAB:9,ENTER:13,ESC:27,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F2:113,F3:114,D:68,I:73,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90}),Zd=Q({DEFAUT:"default",AUTO:"auto",POINTER:"pointer",WAIT:"wait",MOVE:"move",COL_RESIZE:"col-resize",ROW_RESIZE:"row-resize",CROSSHAIR:"crosshair",HORZ_RESIZE:"ew-resize",VERT_RESIZE:"ns-resize",NESW_RESIZE:"nesw-resize",NWSE_RESIZE:"nwse-resize",NO_DROP:"no-drop",NOT_ALLOWED:"not-allowed"}),$d=function(a,b){if(!b)return void alert("no touch");if(!a)return void alert("no container");if(!a._canvas)return void alert("no canvas");var c=a._canvas.getBoundingClientRect();return b.x=b.pageX-(c.left+window.scrollX),b.y=b.pageY-(c.top+window.scrollY),b},_d=Xa("TouchManager",null,{init:function(a){this._super(),this._container=a},touchStart:function(a){},touchMove:function(a){},touchEnd:function(a){},touchCancel:function(a){},_toOffset:function(a){return $d(this._container,a)}}),ae=3,be=Xa("VisualTool",null,{init:function(a,b){this._super(),this._owner=a,this._name=b,this._dragTracker=null,this._clickX=0,this._clickY=0,this._currX=0,this._currY=0},dragTracker:null,owner:function(){return this._owner},setDragTracker:function(a){a!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=a,this._dragTracker&&this._dragTracker.activate())},isDragging:function(){return this._dragTracker&&this._dragTracker.isDragging()},clickX:function(){return this._clickX},clickY:function(){return this._clickY},currX:function(){return this._currX},currY:function(){return this._currY},isEditing:function(){return!1},touchManager:function(){return null},activate:function(){this._doActivate()},deactivate:function(){this._doDeactivate()},keyDown:function(a,b,c,d){return this._doKeyDown(a,b,c,d)},keyUp:function(a,b,c,d){return this._doKeyUp(a,b,c,d)},keyPress:function(a){return this._doKeyPress(a)},click:function(a){a.offsetX&&a.offsetY?this._doClick(a.offsetX,a.offsetY):this._doClick(a.mouseX,a.mouseY)},dblclick:function(a){a.offsetX&&a.offsetY?this._doDblClick(a.offsetX,a.offsetY):this._doDblClick(a.mouseX,a.mouseY)},mouseDown:function(a){var b=this._currX=this._clickX=a.mouseX,c=this._currY=this._clickY=a.mouseY;this.isDragging()&&(this._stopDragTracker(b,c,!1),this.setDragTracker(null)),this._doMouseDown(a.mouseX,a.mouseY,a.ctrlKey,a.shiftKey,a.button)},mouseMove:function(a){var b,c=this._currX=a.mouseX,d=this._currY=a.mouseY,e=this.dragTracker();e?e.isDragging()?("$hasNotButtons"in be||(be.$hasNotButtons=Vc||Qc),be.$hasNotButtons||a.buttons>0?e.drag(c,d)||(b=e.getNextRequest(c,d),b&&(this._stopDragTracker(c,d,!0),this.setDragTracker(this._getDragTracker(b)),this._startDragTracker(c,d))):this._stopDragTracker(c,d,!0)):Math.abs(c-this._clickX)>=ae||Math.abs(d-this._clickY)>=ae?this._startDragTracker(c,d):this._doMouseMove(c,d):this._doMouseMove(c,d)},mouseUp:function(a){var b=this._currX=a.mouseX,c=this._currY=a.mouseY;return this.isDragging()?void this._stopDragTracker(b,c,!1):void this._doMouseUp(b,c,a)},mouseEnter:function(a){this._doMouseEnter(a.mouseX,a.mouseY)},mouseLeave:function(a){this._doMouseLeave(a.mouseX,a.mouseY)},mouseOver:function(a){this._doMouseOver(a.mouseX,a.mouseY)},mouseOutside:function(){this._doMouseOutside()},mouseWheel:function(a){return this._doMouseWheel(a.mouseX,a.mouseY,a.wheelDelta,a.wheelDelta)},touchStart:function(a){this.touchManager()?this.touchManager().touchStart(a):this._doTouchStart(a)},touchMove:function(a){this.touchManager()?this.touchManager().touchMove(a):this._doTouchMove(a)},touchEnd:function(a){this.touchManager()?this.touchManager().touchEnd(a):this._doTouchEnd(a)},touchCancel:function(a){this.touchManager()?this.touchManager().touchCancel(a):this._doTouchCancel(a)},findElementAt:function(a,b,c){return this._owner.findElementAt(a,b,c)},setFocus:function(){return this._doSetFocus()},_doActivate:function(){Ea("tool: activated")},_doDeactivate:function(){Ea("tool: deactivated")},_doKeyDown:function(a,b,c,d){return Ea("tool: keyDown("+a+")"),!1},_doKeyUp:function(a,b,c,d){return Ea("tool: keyUp("+a+")"),!1},_doKeyPress:function(a){Ea("tool: keyPress("+a+")")},_doClick:function(a,b){Ea("tool: click("+a+","+b+")")},_doDblClick:function(a,b){Ea("tool: dblClick("+a+","+b+")")},_doMouseDown:function(a,b){Ea("tool: mouseDown("+a+","+b+")")},_doMouseMove:function(a,b){Ea("tool: mouseMove("+a+","+b+")")},_doMouseUp:function(a,b){Ea("tool: mouseUp("+a+","+b+")")},_doMouseEnter:function(a,b){Ea("tool: mouseEnter("+a+","+b+")")},_doMouseLeave:function(a,b){Ea("tool: mouseLeave("+a+","+b+")")},_doMouseOver:function(a,b){Ea("tool: mouseOver("+a+","+b+")")},_doMouseOutside:function(){},_doMouseWheel:function(a,b,c,d){return Ea("tool: mouseWheel("+c+","+d+")"),!1},_doTouchStart:function(a){Ea("tool: touchStart")},_doTouchMove:function(a){Ea("tool: touchMove")},_doTouchEnd:function(a){Ea("tool: touchEnd")},_doTouchCancel:function(a){Ea("tool: touchCancel")},_startDragTracker:function(a,b){this._dragTracker&&(this._dragTracker.start(a,b)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},_stopDragTracker:function(a,b,c){if(this.isDragging()){var d=this._dragTracker;c?d.cancel():d.drop(a,b),this.setDragTracker(null),this._doDragTrackerFinished(d,c),this._owner&&this._owner.invalidate&&this._owner.invalidate()}},_doDragTrackerStarted:function(a){Ea("dragTracker started: "+a.name())},_doDragTrackerFinished:function(a,b){Ea("dragTracker stopped: "+a.name()+", "+(b?"canceled":"completed"))},_doSetFocus:function(){}}),ce=Xa("EditRequest",null,{init:function(){this._super()},cursor:function(){return Zd.AUTO},source:function(){return null},isSelectable:function(){return!1},isDblClickable:function(){return!1}}),de=Xa("DragTracker",null,{init:function(a,b,c,d){this._super(),this._container=a,this._name=b,this._active=!1,this._completed=!1,this._dragging=!1,this._startX=c,this._startY=d,this._currentX=0,this._currentY=0},cancelabel:!1,container:function(){return this._container},name:function(){return this._name},isActive:function(){return this._active},isDragging:function(){return this._dragging},startWhenCreated:function(){return!1},isCompleted:function(){return this._completed},activate:function(){this._active||(this._doActivate(),this._active=!0)},deactivate:function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},start:function(a,b){return this.cancel(),this._active&&this._doStart(a,b)?(this._currentX=this._startX=a,this._currentY=this._startY=b,this._dragging=!0,this._completed=!1,this._showFeedback(a,b),!0):!1},drag:function(a,b){return this._dragging&&(this._currentX=a,this._currentY=b,this._doDrag(a,b))?(this._moveFeedback(a,b),!0):!1},cancel:function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled()}finally{this._doEnded()}}finally{this._hideFeedback()}},drop:function(a,b){try{if(this._dragging)try{this._currentX=a,this._currentY=b,this._dragging=!1,this._canAccept(a,b)?(this._doCompleted(a,b),this._completed=!0):this._doCanceled(a,b)}finally{this._doEnded()}}finally{this._hideFeedback()}},getNextRequest:function(a,b){return null},startX:function(){return this._startX},startY:function(){return this._startY},currentX:function(){return this._currentX},currentY:function(){return this._currentY},offsetX:function(){return this._currentX-this._startX},offsetY:function(){return this._currentY-this._startY},_showFeedback:function(a,b){},_moveFeedback:function(a,b){},_hideFeedback:function(){},_doActivate:function(){Ea(this._name+" activated")},_doDeactivate:function(){Ea(this._name+" deactivated")},_doStart:function(a,b){return!0},_doDrag:function(a,b){return!0},_doCanceled:function(){},_canAccept:function(a,b){return!0},_doCompleted:function(){},_doEnded:function(){},_findElementAt:function(a,b,c){return this._container.findElementAt(a,b,c)}}),ee=(Xa("SingleTouchTracker",null,{init:function(){this._super()},start:function(a,b){},move:function(a,b){},stop:function(a,b){}}),4),fe=300,ge=500,he=Xa("SingleTouchManager",_d,{init:function(a){this._super(a),this._touchId=void 0,this._started=null,this._seconded=null,this._startX=NaN,this._startY=NaN,this._tapped=0,this._dragging=!1,this._prevX=NaN,this._prevY=NaN,this._longTapTimer=void 0,this._tracker=null,this._events=[],this._touches=[]},touchHandler:null,tapHandler:null,doubleTapHandler:null,longTapHandler:null,dragStartHandler:null,dragHandler:null,dragEndHandler:null,swipeHandler:null,isSingleTouch:function(){return 1==this._touches.length},removeTouches:function(a){for(var b,c,d=0,e=a.length;e>d;d++){var b=a[d];(c=this._touches.indexOf(b.identifier))>-1&&this._touches.splice(c,1)}},touchStart:function(a){clearTimeout(this._longTapTimer);var b=a.changedTouches;if(k("#### touch Start",a.touches.length,this._touches.length),a.touches.length>1||this._touches.length>0)for(var c=0,d=b.length;d>c;c++){var e=b[c];this._touches.push(e.identifier)}else if(b.length>0){var e=this._toOffset(b[0]);if(this._tracker&&(this._tracker.stop(e.x,e.y),this._tracker=null),this._touchId=e.identifier,this._touches.push(e.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(e.x,e.y)))return void this._tracker.start(e.x,e.y);0==this._tapped?(this._started=m(),this._prevX=this._startX=e.x,this._prevY=this._startY=e.y):(this._seconded=m(),this._prevX=e.x,this._prevY=e.y),this._events=[],this._events.push({x:e.x,y:e.y,t:a.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),ge)}else alert("no touch ?")},touchMove:function(a){var b=this.$_findTouch(a);if(k("#### touch Move",b,this.isSingleTouch()),b&&this.isSingleTouch()){if(a.preventDefault(),this._tracker)return void this._tracker.move(b.x,b.y);this._dragging?this._dragHandler&&this._dragHandler(this._prevX,this._prevY,b.x,b.y):(Math.abs(this._prevX-b.x)>ee||Math.abs(this._prevY-b.y)>ee)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,b.x,b.y)),this._prevX=b.x,this._prevY=b.y,this._events.push({x:b.x,y:b.y,t:a.timeStamp}),this._events.length>30&&this._events.splice(0,15)}},touchEnd:function(a){if(clearTimeout(this._longTapTimer),k("#### touch end",this.isSingleTouch()),void 0===this._touchId)return void this.removeTouches(a.changedTouches);var b=this.$_findTouch(a);if(b&&this.isSingleTouch())if(a.preventDefault(),this._tracker)this._tracker.stop(b.x,b.y);else if(this._dragging)this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe();else if(0==this._tapped)this._tapped=1,this._tapHandler&&this._tapHandler(this._startX,this._startY);else if(1==this._tapped){this._touchId=void 0;var b=m();b-this._started<fe?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(this._startX,this._startY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._starty=this._prevY,this._tapHandler&&this._tapHandler(this._prevX,this._prevY))}else alert("touch end");this._tracker=null,this.removeTouches(a.changedTouches)},touchCancel:function(a){a.preventDefault(),this.removeTouches(a.changedTouches),clearTimeout(this._longTapTimer);var b=this.$_findTouch(a);b&&this._tracker&&this._tracker.stop(b.x,b.y)},$_findTouch:function(a){for(var b=a.changedTouches,c=0;c<b.length;c++){var d=b[c];if(d.identifier==this._touchId)return this._toOffset(d)}return null},$_checkSwipe:function(){var a=this._events,b=a.length;if(!(2>b)){for(var c=a[b-1],d=a[b-2],e=b-3;e>=0&&!(c.t-d.t>100);e--)d=a[e];var f=d.x,g=d.y,h=c.x,i=c.y,j=Math.sqrt(Math.pow(f-h,2)+Math.pow(g-i,2)),k=Math.max(16,c.t-d.t),l=j/k,m=.1,n=.998;if(l>m){var o=Math.log(m/l)/Math.log(n),p=l*(1-Math.pow(n,o+1))/(1-n),q="right",r=Math.round(180*Math.atan2(i-g,h-f)/Math.PI);0>r&&(r=360+r),r>45&&135>=r?q="bottom":r>135&&225>=r?q="left":r>225&&315>=r&&(q="top"),this._swipeHandler(o,p,q)}}}}),ie=(Xa("MobileContextMenu",null,{init:function(){this._super("focusView")},show:function(a){},close:function(){}}),Xa("MobileContextMenuView",bb,{init:function(a){this._super(),this._container=a,this._dom=new Jc(this.$_createElement())},show:function(a){},close:function(){},$_createElement:function(){}}),Q({TEXT:"text",NUMBER:"number",BOOLEAN:"boolean",DATETIME:"datetime",OBJECT:"object",CHAR:"char",UNUM:"unum",INT:"int",UINT:"uint",DATE:"date"})),je=Q({NONE:"none",CREATED:"created",UPDATED:"updated",DELETED:"deleted",CREATE_AND_DELETED:"createAndDeleted",isDeleted:function(a){return a==je.DELETED||a==je.CREATE_AND_DELETED}}),ke=Q({NONE:"none",AUTO:"auto",EXPLICIT:"explicit"}),le=Q({NORMAL:"normal",UPPER:"upper",LOWER:"lower",DEFAULT:"default"}),me=Q({NORMAL:"normal",FOCUSED:"focused",UPDATING:"updating",INSERTING:"inserting",APPENDING:"appending",isEditing:function(a){return a==me.UPDATING||a==me.INSERTING||a==me.APPENDING},isInserting:function(a){return a==me.INSERTING||a==me.APPENDING}}),ne=Q({ROWS:"rows",ITEMS:"items"}),oe=Q({HORIZONTAL:"horizontal",VERTICAL:"vertical"}),pe=(Q({UP:0,HOVER:1,DOWN:2}),Q({NONE:0,SORT:1})),qe=Q({VISIBLE:"visible",HOVERED:"hovered",ALWAYS:"always",HIDDEN:"hidden"}),re=Q({AUTO:"auto",EXPLICIT:"explicit"}),se=Q({NONE:"none",EXCLUSIVE:"exclusive",INCLUSIVE:"inclusive",REVERSE:"reverse"}),te=Q({ASCENDING:"ascending",DESCENDING:"descending"}),ue=Q({SENSITIVE:"sensitive",INSENSITIVE:"insensitive"}),ve=Q({AUTO:"auto",EXPLICIT:"explicit"}),we=Q({NONE:"none",ACTION:"action",POPUP:"popup"}),xe=Q({ALWAYS:"always",DEFAULT:"default",VISIBLE:"visible",HIDDEN:"hidden"}),ye=Q({SENSITIVE:"sensitvie",INSENSITIVE:"insensitive",LOWER:"lower",UPPER:"upper"}),ze=Q({ERROR:"error",WARNING:"warning",INFO:"info",IGNORE:"ignore"}),Ae=Q({NONE:"none",INDEX:"index",ROW:"row"}),Be=Q({NONE:"none",EVEN:"even",EVEN_FILL:"evenFill",FILL:"fill"}),Ce=Q({BOTH:"both",HEADER:"header",FOOTER:"footer",NONE:"none",isHeader:function(a){return"both"==a||"header"==a},isFooter:function(a){return"both"==a||"footer"==a}}),De=Q({NORMAL:"normal",MERGE:"merge",HIDE:"hide"}),Ee=Q({ALWAYS:"always",MULTI_ROWS_ONLY:"multiRowsOnly"}),Fe=Q({NONE:"none",AGGREGATE:"aggregate",STATISTICAL:"statistical"}),Ge=Q({NONE:"none",SINGLE:"single",EXTENDED:"extended"}),He=Q({BLOCK:"block",ROWS:"rows",COLUMNS:"columns",SINGLE_ROW:"singleRow",SINGLE_COLUMN:"singleColumn",SINGLE:"single",NONE:"none",isSingle:function(a){return a&&(a==He.SINGLE_ROW||a==He.SINGLE_COLUMN||a==He.SINGLE)},isRow:function(a){return a&&(a==He.ROWS||a==He.SINGLE_ROW)},isColumn:function(a){return a&&(a==He.COLUMNS||a==He.SINGLE_COLUMN)}}),Ie=Q({NONE:"none",HEAD:"head",BODY:"body",TAIL:"tail"}),Je=Q({NORMAL:"normal",CHECK:"check",RADIO:"radio",SEPARATOR:"separator"}),Ke=Q({NONE:"none",LEFT_EDGE:"leftEdge",RIGHT_EDGE:"rightEdge",TOP_EDGE:"topEdge",BOTTOM_EDGE:"bottomEdge",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center"}),Le=Q({DEFAULT:"default",NONE:"none",LEFT:"left",RIGHT:"right",UPPER:"upper",LOWER:"lower",LEFT_FILL:"leftFill",RIGHT_FILL:"rightFill",UPPER_FILL:"upperFill",LOWER_FILL:"lowerFill"}),Me=Q({NONE:"none",EXPLICIT:"explicit",NORMAL:"normal"}),Ne=(Q({CLIP:"clip",ELLIPSIS:"ellipsis",PATH:"path"}),Q({NEAR:"near",CENTER:"center",FAR:"far"})),Oe=Q({LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",NONE:"none"}),Pe=Q({NONE:"none",CENTER:"center",BOTH:"both",WIDTH:"width",HEIGHT:"height",AUTO:"auto"}),Qe=Q({MASK:"mask",INVERSION:"inversion"}),ze={ERROR:"error",WARNING:"warning",INFO:"info",IGNORE:"ignore"},Re={ALWAYS:"always",UPDATE:"update",INSERT:"insert"},Se=Q({ROW:"row",CELL:"cell",DEFAULT:"default"}),Te=Q({DEFAULT:"default",TEXT:"text"}),Ue=Q({DEFAULT:"default",FIXED:"fixed"}),Ve=function(a){this.allFields=!0,this.caseSensitive=!1,this.partialMath=!1,this.regularExpression=!1,a&&R(this,a)},We=function(a){this.fields=null,this.caseSensitive=!1,this.partialMatch=!1,this.regularExpression=!1,a&&R(this,a)},Xe=Xa("Dimension",null,{init:function(a){this._super(),this._value=NaN,this._valuePercent=!1,this._minimum=NaN,
this._minimumPercent=!1,this._maximum=NaN,this._maximumPercent=!1,a&&this.setSize(a)},size:null,minSize:null,maxSize:null,setSize:function(a){if(a!=this.size){this._size=a;var b=this.parse(a);this._value=b.value,this._valuePercent=b.percent}},setMinSize:function(a){if(a!=this.minSize){this._minSize=a;var b=this.parse(a);this._minimum=b.value,this._minimumPercent=b.percent}},setMaxSize:function(a){if(a!=this.maxSize){this._maxSize=a;var b=this.parse(a);this._maximum=b.value,this._maximumPercent=b.percent}},getDimension:function(a){var b,c=a;return isNaN(this._value)||(c=this._value?this._valuePercent?this._value*a/100:this._value:0),isNaN(this._minimum)||(b=this._minimum?this._minimumPercent?this._minimum*a/100:this._minimum:0,c=Math.max(b,c)),isNaN(this._maximum)||(b=this._maximum?this._maximumPercent?this._maximum*a/100:this._maximum:0,c=Math.min(b,c)),c},equals:function(a){return this._value==a._value&&this._valuePercent==a._valuePercent&&this._minimum==a._minimum&&this._minimumPercent==a._minimumPercent&&this._maximum==a._maximum&&this._maximumPercent==a._maximumPercent},toString:function(){return this._size||""},parse:function(a){var b={value:NaN,percent:!1};if(a&&(a=String(a).trim())){var c=a.length;b.percent="%"==a.charAt(c-1),b.percent?(a=a.substring(0,c-1),c=a.length,c>0&&(b.value=Number(a))):b.value=Number(a)}return b}},{createFrom:function(a){var b=null;if(a){var c=a.trim(),d=c.length;if(d>0){var e=c.split(",");e.length>0&&(c=e[o]&&e[0].trim(),c&&(b=new Xe,b.setSize(c))),e.length>1&&(c=e[1]&&e[1].trim(),c&&(b=new Xe,b.setMinSize(c))),e.length>2&&(c=e[2]&&e[2].trim(),c&&(b=new Xe,b.setMaxSize(c)))}}return b},areEquals:function(a,b){return a===b?!0:a&&b?a.equals(b):!1}}),Ye=Xa("CellIndex",null,{init:function(a,b,c,d){this._super(),this._grid=a,this._itemIndex=isNaN(b)?-1:b,this._column=c,this._verticalStep=d?d:Se.DEFAULT},verticalStep:Se.DEFAULT,grid:function(){return this._grid},itemIndex:function(a){return arguments.length>0?(this._itemIndex=a,this):this._itemIndex},setItemIndex:function(a){return this._itemIndex=a,this},column:function(a){return arguments.length>0?(this._column=a,this):this._column},setColumn:function(a){this._column=a},dataColumn:function(){return this._column instanceof rk&&this._column},valueColumn:function(){return this._column instanceof pk&&this._column},group:function(){return this._column instanceof ak&&this._column},I:function(){return this._itemIndex},C:function(){return this._column},col:function(){return this._column.index()},dataField:function(){return this._column instanceof rk?this._column.dataIndex():-1},item:function(){return this._grid&&this._grid.getItem(this._itemIndex)},dataRow:function(){var a=this.item();return a?a.dataRow():-1},dataId:function(){var a=this.item();return a?a.dataId():-1},value:function(){var a=this._column;if(a instanceof rk){var b=a.dataIndex();if(0>b)throw new Error("Not exists data field: "+a.fieldName());var c=this.item();if(!c)throw new Error("Invalid item index: "+this._itemIndex);return c.getData(b)}return ta},isFixed:function(){if(this._grid&&this._column){var a=this._grid.layoutManager(),b=this._column.root().displayIndex();return b<a.fixedColCount()||b>=a.rfixedStartCol()||this._itemIndex<a.fixedItemCount()}return!1},isFixedCol:function(){if(this._grid&&this._column){var a=this._grid.layoutManager(),b=this._column.root().displayIndex();return b<a.fixedColCount()}return!1},isRightFixedCol:function(){if(this._grid&&this._column){var a=this._grid.layoutManager(),b=this._column.root().displayIndex();return b>=a.rfixedStartCol()}return!1},isFixedRow:function(){if(this._grid&&this._column){var a=this._grid.layoutManager();return this._itemIndex<a.fixedItemCount()}return!1},isTop:function(){var a=this._column;return a&&a.group()?ak.isTop(a):!0},isBottom:function(){var a=this._column;return a&&a.group()?ak.isBottom(a):!0},isLeft:function(){var a=this._column;return a?a.group()?0==a.group().displayIndex()&&ak.isLeft(a):0==a.displayIndex():!1},isRight:function(){var a=this._column;return a?a.group()?0==a.group().displayIndex()&&ak.isRight(a):a.displayIndex()==this._grid.visibleColumnCount()-1:!1},isFirst:function(){if(this._column&&this._grid&&this._grid.visibleColumnCount()>0){var a=this._grid.getVisibleColumn(0);return a=a instanceof pk?a:a.root().first(),a==this._column}return!1},isLast:function(){if(this._column&&this._grid&&this._grid.visibleColumnCount()>0){var a=this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1);return a=a instanceof pk?a:a.root().last(),a==this._column}return!1},editable:function(){var a=this.item();return a&&(a.dataRow()>=0||a.itemState()==me.INSERTING||a.itemState()==me.APPENDING)},clone:function(){return new Ye(this._grid,this._itemIndex,this._column,this._verticalStep)},assign:function(a){return a?(a.grid&&(this._grid=a._grid),this._itemIndex=a._itemIndex,this._column=a._column,this._verticalStep=a._verticalStep):(this._itemIndex=-1,this._column=null),this},proxy:function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this._column?this._column.name():null,dataRow:this.dataRow(),fieldIndex:this.dataColumn()?this._column.dataIndex():-1,fieldName:this.dataColumn()?this._column.fieldName():null}},set:function(a,b,c){arguments.length>=3?(this._grid=a,this._itemIndex=b,this._column=c):2==arguments.length&&(this._itemIndex=a,this._column=b)},isValid:function(){return this._grid&&this._grid.isValid(this)},normalize:function(a){return a&&(this._grid=a,this._column||(this._column=a.getFirstColumn()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,a.itemCount()-1))),this},isMath:function(a,b){if(this._column===b){var c=this.item();return a>=0?c&&c.dataRow()==a:!c||c.dataRow()==a}return!1},incRow:function(a){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount()-1,this._itemIndex+a)))},first:function(){this._grid&&(this._itemIndex=0)},last:function(){this._grid&&(this._itemIndex=this._grid.itemCount()-1)},right:function(){var a=Ze(this._grid,this._column);a&&(this._column=a)},left:function(){var a=$e(this._grid,this._column);a&&(this._column=a)},next:function(){var a=_e(this._grid,this._column);return a?(this._column=a,!0):!1},prev:function(){var a=af(this._grid,this._column);return a?(this._column=a,!0):!1},lower:function(a){return this._verticalStep!==Se.ROW||a?this._verticalStep===Se.CELL?this.isBottom()?this._itemIndex<this._grid.itemCount()-1?(this.incRow(1),this._column=ak.getTop(this._column),!0):!1:(this._column=ak.getLower(this._column),!0):this.isBottom()?this._itemIndex<this._grid.itemCount()-1?(this.incRow(1),!0):!1:(this._column=ak.getLower(this._column),!0):this._itemIndex<this._grid.itemCount()-1?(this.incRow(1),!0):!1},upper:function(a){return this._verticalStep!==Se.ROW||a?this._verticalStep===Se.CELL?this.isTop()?this._itemIndex>0?(this.incRow(-1),this._column=ak.getBottom(this._column),!0):!1:(this._column=ak.getUpper(this._column),!0):this.isTop()?this._itemIndex>0?(this.incRow(-1),!0):!1:(this._column=ak.getUpper(this._column),!0):this._itemIndex>0?(this.incRow(-1),!0):!1},home:function(){var a=this._grid;if(a&&a.visibleColumnCount()>0){var b=a.getVisibleColumn(0);this._column=b instanceof pk?b:b.root().first()}},end:function(){var a=this._grid;if(a&&a.visibleColumnCount()>0){var b=a.getVisibleColumn(a.visibleColumnCount()-1);this._column=b instanceof pk?b:b.root().last()}},down:function(a){this._verticalStep==Se.ROW&&!a||this.isBottom()?this._itemIndex<this._grid.itemCount()-1&&(this.incRow(1),this._verticalStep==Se.CELL&&(this._column=ak.getTop(this._column))):this._column=ak.getLower(this._column)},up:function(a){this._verticalStep==Se.ROW&&!a||this.isTop()?this._itemIndex>0&&(this.incRow(-1),this._verticalStep==Se.CELL&&(this._column=ak.getBottom(this._column))):this._column=ak.getUpper(this._column)},toString:function(){var a=this._column?this._column.root():null,b=this._column?this._column.dataRoot():null,c="("+(a?a.displayIndex():"null")+","+(b?b.displayIndex():"null")+","+this._itemIndex+")";return c}},{NULL:null,$_temp:null,temp:function(a,b,c){return Ye.$_temp._grid=a,Ye.$_temp._itemIndex=b,Ye.$_temp._column=c,Ye.$_temp},areEquals:function(a,b){return a===b||a&&b&&a._grid===b._grid&&a._itemIndex===b._itemIndex&&a._column===b._column},nullProxy:function(){return{itemIndex:-1,column:null,dataRow:-1,fieldIndex:-1,fieldName:null}}},function(a){a.NULL=new a,a.$_temp=new a}),Ze=function(a,b){if(!a||!b)return null;var c,d,e,f=a.layoutManager(),g=ak.getRight(b);if(g)return g;for(e=b.group()?b.root().displayIndex():b.displayIndex(),c=e+1,d=f.columnCount();d>c;c++){if(g=f.getColumn(c),g instanceof pk)return g;if(g instanceof ak&&(g=g.first()))return g}return null},$e=function(a,b){if(!a||!b)return null;var c,d,e=a.layoutManager(),f=ak.getLeft(b);if(f)return f;for(d=b.group()?b.root().displayIndex():b.displayIndex(),c=d-1;c>=0;c--){if(f=e.getColumn(c),f instanceof pk)return f;if(f instanceof ak&&(f=f.last()))return f}return null},_e=function(a,b){if(!a||!b)return null;var c,d,e,f=a.layoutManager(),g=ak.getNext(b);if(g)return g;for(e=b.group()?b.root().displayIndex():b.displayIndex(),c=e+1,d=f.columnCount();d>c;c++){if(g=f.getColumn(c),g instanceof pk)return g;if(g instanceof ak&&(g=g.first()))return g}return null},af=function(a,b){if(!a||!b)return null;var c,d,e=a.layoutManager(),f=ak.getPrev(b);if(f)return f;for(d=b.group()?b.root().displayIndex():b.displayIndex(),c=d-1;c>=0;c++){if(f=e.getColumn(c),f instanceof pk)return f;if(f instanceof ak&&(f=f.last()))return f}return null},bf=Xa("GridRange",null,{init:function(){this._super(),this._row1=0,this._col1=null,this._row2=-1,this._col2=null},isEmpty:function(){return this._row2<this._row1||null==this._col2&&null==this._col2},R1:function(){return this._row1},C1:function(){return this._col1},R2:function(){return this._row2},C2:function(){return this._col2},top:function(){return this._row1<=this._row2?this._row1:this._row2},bottom:function(){return this._row1<=this._row2?this._row2:this._row1},firstCell:function(){var a=new Ye;return a.setItemIndex(this._row1<=this._row2?this._row1:this._row2),this._col1.dataRoot().distance()<=this._col2.dataRoot().distance()?a._column=this._col1:a._column=this._col2,a},lastCell:function(){var a=new Ye;return a.setItemIndex(this._row1>=this._row2?this._row1:this._row2),this._col1.dataRoot().distance()>=this._col2.dataRoot().distance()?a._column=this._col1:a._column=this._col2,a},contains:function(a,b){if(b){var c=b.root().displayIndex();return a>=this._row1&&a<=this._row2&&c>=this._col1.root().displayIndex()&&c<=this._col2.root().displayIndex()}return!1},containsIndex:function(a){return a&&this.contains(a._itemIndex,a._column)},normalize:function(){if(this._row1>this._row2){var a=this._row1;this._row1=this._row2,this._row2=a}if(this._col1.dataRoot().distance()>this._col2.dataRoot().distance()){var b=this._col1;this._col1=this._col2,this._col2=b}return this},normalizeData:function(){this.normalize();var a=this._col1;return a instanceof ak&&(this._col1=ak.getFirstDataRoot(a)),a=this._col2,a instanceof ak&&(this._col2=ak.getLastDataRoot(a)),this}},{$_setRange:function(a,b,c,d,e){return d>b?(a._row1=b,a._col1=c,a._row2=d,a._col2=e):b>d?(a._row1=d,a._col1=e,a._row2=b,a._col2=c):(a._row1=b,a._row2=d,c.dataRoot().distance()<=e.dataRoot().distance()?(a._col1=c,a._col2=e):(a._col1=e,a._col2=c)),a},create:function(a,b){if(b&&a!==b)return bf.$_setRange(new bf,a._itemIndex,a._column,b._itemIndex,b._column);var c=new bf;return c._row1=c._row2=a._itemIndex,c._col1=c._col2=a._column,c},temp:function(a,b){var c=bf.$_TEMP;return b&&a!==b?bf.$_setRange(c,a._itemIndex,a._column,b._itemIndex,b._column):(c._row1=c._row2=a._itemIndex,c._col1=c._col2=a._column,c)},createRange:function(a,b,c,d){return bf.$_setRange(new bf,a,b,c,d)}});bf.NULL=new bf,bf.$_TEMP=new bf;var cf=Xa("IconElement",Vd,{init:function(a,b){this._super(a,b),this._image=null},setImage:function(a){a!=this._image&&(this._image=a,this.invalidate())},iconWidth:function(){return this._image?this._image.width:0},iconHeight:function(){return this._image?this._image.height:0},_hoverChanged:function(){},_doDraw:function(a){var b=this._image;if(b){var c=Math.min(this.width(),b.width),d=Math.min(this.height(),b.height),e=(this.width()-c)/2,f=(this.height()-d)/2;a.drawImage(b,e,f,c,d)}}}),df=Xa("GridSummarizer",null,{init:function(){this._super()},getCount:function(){},getSum:function(a){},getMax:function(a){},getMin:function(a){},getAvg:function(a){},getVar:function(a){},getVarp:function(a){},getStdev:function(a){},getStdevp:function(a){}}),ef=Xa("DefaultSummarizer",df,{init:function(a){this._super(),this._provider=a},getCount:function(){return this._provider.itemCount()},getSum:function(a){return this._provider.getSum(a)},getMax:function(a){return this._provider.getMax(a)},getMin:function(a){return this._provider.getMin(a)},getAvg:function(a){return this._provider.getAvg(a)},getVar:function(a){return this._provider.getVar(a)},getVarp:function(a){return this._provider.getVarp(a)},getStdev:function(a){return this._provider.getStdev(a)},getStdevp:function(a){return this._provider.getStdevp(a)}}),ff=Xa("BarCode",null,{init:function(){this._super(),this._value=null,this._error=null},value:function(){return this._value},setValue:function(a){if(a!=this._value){this._value=a;try{this._error=null,this._parse(a)}catch(b){this._error=b}}},error:function(){return this._error},render:function(a,b){this._error?Ea("Barocde error: "+this._error):this._doRender(a,b)},_parse:function(a){},_doRender:function(a,b){}}),gf=Xa("LinearBarcode",ff,{init:function(){this._super()},barFill:null,integralBar:!0,minBarWidth:1,maxBarWidth:0,barWidth:0,_doRender:function(a,b){if(this._barFill){var c=this._getBarLength();if(!(1>c)){var d=this._barWidth;0>=d&&(d=this._integralBar?Math.floor(b.width/c):b.width/c,d=Math.max(this._minBarWidth,d),this._maxBarWidth>0&&(d=Math.min(this._maxBarWidth,d))),c=d*c,b.x+=(b.width-c)/2,this._integralBar&&(b.x=Math.floor(b.x)),this._drawBars(a,this._barFill,b.x,b.y,d,b.height)}}},_getBarLength:function(){return 0},_drawBars:function(a,b,c,d,e,f){}}),hf=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],jf=106,kf=0,lf=1,mf=2,nf=[103,104,105],of=[251658240,15728640,983040,61440,3840,240,15],pf=Xa("Code128",gf,{init:function(){this._super(),this._weights=[]},quietZoneWidth:10,_parse:function(a){this._weigthts=[];var b=a?a.length:0;if(!(1>b)){var c=this._detectType(a);c==mf&&b%2==1&&(a="0"+a,b++);var d,e,f=nf[c],g=hf[f],h=f;if(this._weigthts.push(g),c==mf)for(d=0;b>d;d+=2)e=a.substr(d,2),f=parseInt(e),f=this._convert(c,f),g=hf[f],this._weigthts.push(g),h+=f*(d+1);else for(d=0;b>d;d++)f=a.charCodeAt(d),f=this._convert(c,f),g=hf[f],this._weigthts.push(g),h+=f*(d+1);h%=103,this._weigthts.push(hf[h]),this._weigthts.push(hf[jf])}},_getBarLength:function(){return this._quietZoneWidth+11*(this._weigthts.length-1)+13+this._quietZoneWidth},_drawBars:function(a,b,c,d,e,f){c+=10*e;var g,h,i,j,k=this._weigthts.length-1;for(g=0;k>g;g++)for(i=this._weigthts[g],h=0;6>h;h++)j=(i&of[h+1])>>4*(5-h),j*=e,h%2==0&&(this._integralBar?a.drawBoundsI(b,null,c,d,j,f):a.drawBounds(b,null,c,d,j,f)),c+=j;for(i=this._weigthts[k],h=0;7>h;h++)j=(i&of[h])>>4*(6-h),j*=e,h%2==0&&(this._integralBar?a.drawBoundsI(b,null,c,d,j,f):a.drawBounds(b,null,c,d,j,f)),c+=j},_convert:function(a,b){switch(a){case kf:if(b>=0&&32>b)return b+64;if(b>=32&&96>b)return b-32;case lf:if(b>=32&&128>b)return b-32;case mf:if(b>=0&&99>=b)return b}throw new Error("Invalid code128 charactor: "+b)},_detectType:function(a){var b=/^[0-9]+$/;return b.test(a)?mf:(b=/[a-z]/,b.test(a)?lf:kf)}}),qf={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},rf=Xa("Code39",gf,{init:function(){this._super(),this._codes=[],this._wideWidth=3},_parse:function(a){if(this._codes=[],a){var b,c,d,e=a.length;for(this._codes.push(qf["*"]),b=0;e>b;b++){if(c=a.charAt(b),d=qf[c],!d)throw new Error("Invalid Code39 character: "+c);this._codes.push(d)}this._codes.push(qf["*"])}},_getBarLength:function(){var a=this._codes.length;return a*(3*this._wideWidth+6)+(a-1)},_drawBars:function(a,b,c,d,e,f){var g,h,i,j,k=this._codes.length;for(g=0;k>g;g++){for(h=this._codes[g],i=0;9>i;i++)j="n"==h.charAt(i)?1:this._wideWidth,j*=e,i%2==0&&(this._integralBar?a.drawBoundsI(b,null,c,d,j,f):a.drawBounds(b,null,c,d,j,f)),c+=j;k-1>g&&(c+=e)}}});ha.prototype=new Error,ha.prototype.constructor=ha;var sf="${",tf="}",uf=function(a,b){var c=null,d=b,e=[],f=function(a){return{literal:a,evaluate:function(a,b){return a.literal}}},g=function(a){return{ident:a,idKey:-1,evaluate:function(a,b){return a.idKey<0&&(a.idKey=b.isIdentifier(a.ident)),b.evaluateIdentifier(a.idKey)}}},h=function(a){if(e.splice(0,e.length),a)for(var b,c,d,h,i=a.length,j=0;i>j;)if(b=a.indexOf(sf,j),b>=0&&(c=a.indexOf(tf,b+2),c>=0?(b>j&&(d=a.substring(j,b),h=f(d),e.push(h)),d=a.substring(b+2,c).trim(),d&&(h=g(d),e.push(h)),j=c+1):b=-1),0>b){d=a.substr(j,i),h=f(d),e.push(h);break}};this.source=function(){return c},this.setSource=function(a){a!=c&&(c=a,h(a))},this.evaluate=function(a){try{for(var b,c="",f=0,g=e.length;g>f;f++)b=e[f].evaluate(e[f],a),c+=b||"";return c}catch(h){if(!d)throw h}return null},h(a)},vf=Xa("DataTag",null,{init:function(){this._super()},connect:function(a){},disconnect:function(){},clearRows:function(){},setRows:function(){},setRowCount:function(a){},insertRow:function(a){},insertRows:function(a,b){},removeRow:function(a){},removeRows:function(a){},updateRow:function(a){},updateRows:function(a,b){},setValue:function(a,b){},moveRow:function(a,b){},moveRows:function(a,b,c){}}),wf=Xa("DataTagCollection",null,{init:function(a){this._super(),this._owner=a,this._tags=null,this._tag=null},add:function(a){a&&(this._tag?a!==this._tag?(this._tags=[],this._tags.push(this._tag,a),this._tag=null):this._tags.indexOf(a)<0&&this._tags.push(a):this._tag=a,a.connect(this._owner))},remove:function(a){if(a)if(a==this._tag)this._tag=null,a.disconnect();else if(this._tags){var b=this._tags.indexOf(a);b>=0&&(this._tags.splice(b,1),1==this._tags.length&&(this._tag=this._tags[0],this._tags.length=0,this._tags=null),a.disconnect())}},clearRows:function(){if(this._tag)this._tag.clearRows();else if(this._tags)for(var a=this._tags,b=a.length-1;b--;)a[b].clearRows()},setRows:function(){if(this._tag)this._tag.setRows();else if(this._tags)for(var a=this._tags,b=a.length-1;b--;)a[b].setRows()},setRowCount:function(a){if(this._tag)this._tag.setRowCount(a);else if(this._tags)for(var b=this._tags,c=b.length-1;c--;)b[c].setRowCount(a)},insertRow:function(a){if(this._tag)this._tag.insertRow(a);else if(this._tags)for(var b=this._tags,c=b.length-1;c--;)b[c].insertRow(a)},insertRows:function(a,b){if(this._tag)this._tag.insertRows(a,b);else if(this._tags)for(var c=this._tags,d=c.length-1;d--;)c[d].insertRows(a,b)},removeRow:function(a){if(this._tag)this._tag.removeRow(a);else if(this._tags)for(var b=this._tags,c=b.length-1;c--;)b[c].removeRow(a)},removeRows:function(a){if(this._tag)this._tag.removeRows(a);else if(this._tags)for(var b=this._tags,c=b.length-1;c--;)b[c].removeRows(a)},updateRow:function(a){if(this._tag)this._tag.updateRow(a);else if(this._tags)for(var b=this._tags,c=b.length-1;c--;)b[c].updateRow(a)},updateRows:function(a,b){if(this._tag)this._tag.updateRows(a,b);else if(this._tags)for(var c=this._tags,d=c.length-1;d--;)c[d].updateRows(a,b)},setValue:function(a,b){if(this._tag)this._tag.setValue(a,b);else if(this._tags)for(var c=this._tags,d=c.length-1;d--;)c[d].setValue(a,b)},moveRow:function(a,b){if(this._tag)this._tag.moveRow(a,b);else if(this._tags)for(var c=this._tags,d=c.length-1;d--;)c[d].moveRow(a,b)},moveRows:function(a,b,c){if(this._tag)this._tag.moveRows(a,b,c);else if(this._tags)for(var d=this._tags,e=d.length-1;e--;)d[e].moveRows(a,b,c)}}),xf=Xa("DataField",bb,{init:function(a,b,c){if(this._super(),this._owner=null,this._index=-1,this._orgFieldName=null,this._orgAttrName=null,this._orgBaseField=null,this._boolParser=null,this._dateParser=null,this._ownerBoolParser=null,this._ownerDateParser=null,a&&this.setFieldName(a),void 0!==b&&(this._dataType="numeric"==b?ie.NUMBER:"date"==b?ie.DATETIME:b),void 0!=c){var d=parseInt(c);this._length=isNaN(d)?0:d}this._runType=void 0,this._ranged=!1,this._runSet=null,this._runMax=void 0,this._runMin=void 0,this._typeLock=!1,this.equalValues=null,this.sameValues=null,this.readValue=null,this.nullValue=void 0,this._calculated=!1},fieldName:null,dataType:ie.TEXT,subTypeEnabled:!0,subType:null,subtypeEnabled:!0,subtype:null,length:0,set:null,header:null,minimum:void 0,maximum:void 0,required:!1,updatable:!0,defaultValue:void 0,baseField:null,booleanFormat:null,dateFormat:null,datetimeFormat:null,amText:null,pmText:null,baseYear:NaN,calculateExpression:null,calculateCallback:null,comparer:null,hash:function(){return this._fieldName},index:function(){return this._index},$_setIndex:function(a){this._index=a},setFieldName:function(a){if(a=a&&a.trim(),!a)throw new Error("Field name must be exists.");a!=this._orgFieldName&&(this._orgFieldName=a,this._orgAttrName="@"+a,this._fieldName=a.toUpperCase(),this._changed())},orgFieldName:function(){return this._orgFieldName},orgAttrName:function(){return this._orgAttrName},setDataType:function(a){"numeric"==a?a=ie.NUMBER:"date"==a&&(a=ie.DATETIME),a!=this._dataType&&(this._dataType=a,this._resetTypes(),this._changed())},runType:function(){return this._runType},setSubType:function(a){a=a||null,a!=this._subType&&(this._subType=a,this._resetTypes(),this._changed())},setSubTypeEnabled:function(a){a!=this._subTypeEnabled&&(this._subTypeEnabled=a,this._resetTypes(),this._changed())},getSubtype_:function(){return this._subType},setSubtype:function(a){this.setSubType(a)},isSubtypeEnabled:function(){return this._subtypeEnabled},setSubtypeEnabled:function(a){this.setSubTypeEnabled(a)},setLength:function(a){a!=this._length&&(this._length=a,this._resetTypes(),this._changed())},setSet:function(a){a!==this._set&&s(a)&&(this._set=a,this._resetTypes(),this._changed())},setMinimum:function(a){a!=this._minimum&&(this._minimum=a,this._resetTypes(),this._changed())},setMaximum:function(a){a!=this._maximum&&(this._maximum=a,this._resetTypes(),this._changed())},setRequired:function(a){a!=this._required&&(this._required=a,this._changed())},setHeader:function(a){a!=this._header&&(this._header=a,this._changed())},setDefaultValue:function(a){a!=this._defaultValue&&(this._defaultValue=a)},setBaseField:function(a){a!=this._orgBaseField&&(this._orgBaseField=a,this._baseField=a&&a.toUpperCase(),this._changed())},booleanFormat_:function(){return this._boolFormat},setBooleanFormat:function(a){this.setBoolFormat(a)},setBoolFormat:function(a){a!=this._boolFormat&&(this._boolFormat=a,a?this._boolParser=new mb(a):this._boolParser=null,this._changed())},datetimeFormat_:function(){return this._dateFormat},setDatetimeFormat:function(a){this.setDateFormat(a)},setDateFormat:function(a){a!=this._dateFormat&&(this._dateFormat=a,a?(this._dateParser=new Lb(a),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear)):this._dateParser=null,this._changed())},setAmText:function(a){a!=this._amText&&(this._amText=a,this._dateParser&&this._dateParser.setAmText(a),this._changed())},setPmText:function(a){a!=this._pmText&&(this._pmText=a,this._dateParser&&this._dateParser.setPmText(a),this._changed())},setBaseYear:function(a){a!=this._baseYear&&(this._baseYear=a,this._dateParser&&this._dateParser.setBaseYear(a),this._changed())},isEmpty:function(a){var b=void 0===a||null===a||""==a;return b||this._dataType!=ie.NUMBER||(b=isNaN(a)),b},getBool:function(a,b){return"boolean"==typeof b?b:this._boolParser?this._boolParser.toBool(b):a.toBool(b)},getDate:function(a,b){return b instanceof Date?new Date(b):this._dateParser?this._dateParser.toDate(b):a.toDate(b)},setCalculateExpression:function(a){a!=this._calculateExpression&&(this._calculateExpression=a,this._updatable=this._calculateExpression||this._calculateCallback?!1:this._updatable)},setCalculateCallback:function(a){a!=this._calculateCallback&&(this._calculateCallback=a,this._updatable=this._calculateExpression||this._calculateCallback?!1:this._updatable)},isCalculated:function(){return this._calculateCallback||this._calculateExpression},isNull:function(a){if(void 0===a||null===a)return!0;switch(this._runType){case ie.TEXT:case ie.CHAR:if(0==String(a).length)return!0;break;case ie.NUMBER:case ie.UNUM:case ie.INT:case ie.UINT:if(isNaN(a))return!0}return!1},propertyChanged:function(a,b){this._changed()},clone:function(){var a=this._super();return a._orgFieldName=this._orgFieldName,a._orgAttrName=this._orgAttrName,a._boolParser=this._boolParser,a._dateParser=this._dateParser,a},_prepare:function(a){this._owner=a},_changed:function(){this._owner},_resetTypes:function(a){if(!this._typeLock){a&&(this._ownerBoolParser=a._boolParser,this._ownerDateParser=a._dateParser);var b,c,d=this._dataType,e=this._subType;if(this._runType=d,this._ranged=!1,(!this._owner||this._owner.isSubTypeEnabled())&&this._subTypeEnabled){if(e)switch(d){case ie.TEXT:e==ie.CHAR&&this._length>0&&(d=e);break;case ie.NUMBER:(e==ie.UNUM||e==ie.INT||e==ie.UINT)&&(d=e);break;case ie.DATETIME:e==ie.DATE&&(d=e)}if(this._runType=d,this._runSet=null,this._set&&this._set.length){if(this._runType==ie.DATETIME){for(this._runSet=[],b=0;b<this._set.length;b++)c=this.getDate(this._ownerDateParser,this._set[b]),c&&this._runSet.push(c.getTime());this._runSet.length<1&&(this._runSet=null)}else if(this._runType==ie.DATE){for(this._runSet=[],b=0;b<this._set.length;b++)if(c=this.getDate(this._ownerDateParser,this._set[b])){var f=new Date(c);this._runSet.push(f.setHours(0,0,0,0))}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case ie.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case ie.DATETIME:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case ie.TEXT:this.equalValues=this._equalTextValues,this.sameValues=this._sameTextValues,this.readValue=this._readTextValue,this.nullValue=null;break;case ie.CHAR:this.equalValues=this._equalTextValues,this.sameValues=this._sameTextValues,this.readValue=this._readCharValue,this.nullValue=null;break;case ie.NUMBER:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readNumberValue,this.nullValue=NaN;break;case ie.UNUM:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readUnumValue,this.nullValue=NaN;break;case ie.INT:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readIntValue,this.nullValue=NaN;break;case ie.UINT:this.equalValues=this._equalNumberValues,this.sameValues=this._sameNumberValues,this.readValue=this._readUintValue,this.nullValue=NaN;break;case ie.DATETIME:this.equalValues=this._equalDateValues,this.sameValues=this._sameDateValues,this.readValue=this._readDatetimeValue,this.nullValue=null;break;case ie.DATE:this.equalValues=this._equalDateValues,this.sameValues=this._sameDateValues,this.readValue=this._readDateValue,this.nullValue=null;break;case ie.BOOLEAN:this.equalValues=this._equalBoolValues,this.sameValues=this._sameBoolValues,this.readValue=this._readBooleanValue,this.nullValue=!1;break;default:this.equalValues=this._equalDummyValues,this.sameValues=this._sameDummyValues,this.readValue=this._readDummyValue,this.nullValue=void 0}}}},_refreshFormats:function(a){this._owner=a,this._dateParser&&(this._dateParser.baseYear||this._dateParser.setBaseYear(a.baseYear()),this._dateParser.amText||this._dateParser.setAmText(a.amText()),this._dateParser.pmText||this._dateParser.setPmText(a.pmText())),this._ownerBoolParser=a._boolParser,this._ownerDateParser=a._dateParser},_equalDummyValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:a==b},_sameDummyValues:function(a,b){return void 0===a||null===a?void 0===b||null===b:void 0===b||null===b?!1:a==b},_equalTextValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:a==b},_sameTextValues:function(a,b){return void 0===a||null===a||""==a?void 0===b||null===b||""==b:void 0===b||null===b||""==b?!1:a==b},_equalNumberValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:isNaN(a)?isNaN(b):isNaN(b)?!1:a==b},_sameNumberValues:function(a,b){return isNaN(a)?isNaN(b):isNaN(b)?!1:a==b},_equalDateValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:a instanceof Date?b instanceof Date?a.getTime()==b.getTime():!1:!(b instanceof Date)},_sameDateValues:function(a,b){return a instanceof Date?b instanceof Date?a.getTime()==b.getTime():!1:!(b instanceof Date)},_equalBoolValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:Boolean(a)==Boolean(b)},_sameBoolValues:function(a,b){return void 0===a?void 0===b:void 0===b?!1:Boolean(a)==Boolean(b)},_readDummyValue:function(a){return a},_readTextValue:function(a){if(void 0===a)return a;var b=null===a?null:String(a);return this._ranged&&this._runSet&&this._runSet.indexOf(b)<0?void 0:b},_readCharValue:function(a){if(void 0===a)return a;var b=null===a?null:String(a);return b&&(b=b.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(b)<0?void 0:b},_readNumberValue:function(a){if(void 0===a||null===a||""===a)return void 0;var b=Number(a);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(b)<0)return void 0}else isNaN(this._runMin)||(b=Math.max(this._runMin,b)),isNaN(this._runMax)||(b=Math.min(this._runMax,b));return b},_readUnumValue:function(a){if(void 0===a||null===a||""===a)return void 0;var b=Math.max(0,Number(a));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(b)<0)return void 0}else isNaN(this._runMin)||(b=Math.max(this._runMin,b)),isNaN(this._runMax)||(b=Math.min(this._runMax,b));b=Math.max(0,b)}return b},_readIntValue:function(a){if(void 0===a||null===a||""===a)return void 0;var b=a>=0?Math.floor(a):Math.ceil(a);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(b)<0)return void 0}else isNaN(this._runMin)||(b=Math.max(this._runMin,b)),isNaN(this._runMax)||(b=Math.min(this._runMax,b));b=b>=0?Math.floor(b):Math.ceil(b)}return b},_readUintValue:function(a){if(void 0===a||null===a||""===a)return void 0;
var b=Math.max(0,Math.floor(Math.floor(a)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(b)<0)return void 0}else isNaN(this._runMin)||(b=Math.max(this._runMin,b)),isNaN(this._runMax)||(b=Math.min(this._runMax,b));b=Math.max(0,Math.floor(Math.floor(b)))}return b},_readDatetimeValue:function(a){if(void 0===a)return void 0;if(null===a)return this.nullValue;var b=this.getDate(this._ownerDateParser,a);if(b&&this._ranged)if(this._runSet){for(var c=!1,d=this._runSet.length;d--;)if(b.getTime()==this._runSet[d]){c=!0;break}if(!c)return void 0}else this._runMin&&b.getTime()<this._runMin.getTime()&&(b=new Date(this._runMin)),this._runMax&&b.getTime()>this._runMax.getTime()&&(b=new Date(this._runMax));return b},_readDateValue:function(a){if(void 0===a)return void 0;if(null===a)return this.nullValue;var b=this.getDate(this._ownerDateParser,a);if(b&&(b.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var c=!1,d=this._runSet.length;d--;)if(b.getTime()==this._runSet[d]){c=!0;break}if(!c)return void 0}else this._runMin&&b.getTime()<this._runMin.getTime()&&(b=new Date(this._runMin)),this._runMax&&b.getTime()>this._runMax.getTime()&&(b=new Date(this._runMax));return b},_readBooleanValue:function(a){if(void 0===a)return a;if(null===a)return!1;var b=this.getBool(this._ownerBoolParser,a);return b},_calculateValue:function(a,b,c,d,e,f){return this._calculateCallback?this._calculateCallback(b,c,e,f):this._calculateExpression?(this._exprNode||(this._exprNode=vc.Default.parse(this._calculateExpression,xf.CAPITAL_INDEXERS)),a.setValues(f,d),this._exprNode.evaluate(a)):void 0}},{CAPITAL_INDEXERS:["value","values"]}),yf=Xa("DataSourceError",null,{init:function(a){this._super(),this._message=a},message:function(){return this._message}}),zf=Xa("SimpleDataComparer",null,{init:function(){this._super()},dataType:ie.TEXT,compare:function(a,b,c){return a._dataType==ie.NUMBER?Number(b)-Number(c):b>c?1:c>b?-1:0}}),Af=Xa("DataOutputOptions",null,{init:function(a){this._super(),this._datetimeWriter=null,this._booleanFormatter=null,a&&this.assign(a)},datetimeFormat:void 0,booleanFormat:void 0,datetimeCallback:null,booleanCallback:null,nullDateText:null,setDatetimeFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a,a?this._datetimeWriter=new Db(a):this._datetimeWriter=null)},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?this._booleanFormatter=new lb(a):this._booleanFormatter=null)}}),Bf=function(){this.message=Bf.message};Bf.message="Client is editing (call grid.commit() or grid.cancel() first)";var Cf=Xa("DataSource",bb,{init:function(){this._super(),this._fields=[],this._calcFields=[],this._fieldNames=[],this._fieldMap={},this._defComparer=new zf,this._comparers=[],this._boolParser=mb.Default,this._dateParser=Lb.Default,this._eventLock=0,this._clients=[],this._calculateRuntime=null},subTypeEnabled:!0,subtypeEnabled:!0,insertable:!0,updatable:!0,deletable:!0,softDeleting:!1,deleteCreated:!1,checkStates:!0,restoreMode:ke.NONE,strictRestore:!1,booleanFormat:null,datetimeFormat:null,dateFormat:null,baseYear:2e3,amText:"AM",pmText:"PM",alertClientError:!0,throwClientError:!1,commitBeforeDataEdit:!1,calculateRuntime:function(){return this._calculateRuntime||(this._calculateRuntime=new Om),this._calculateRuntime},setSubTypeEnabled:function(a){if(a!=this._subTypeEnabled){this._subTypeEnabled=a;for(var b=this._fields.length;b--;)this._fields[b]._resetTypes()}},subtypeEnabled_:function(){return this._subTypeEnabled},setSubtypeEnabled:function(a){this.setSubtypeEnabled(a)},setCheckStates:function(a){a!=this._checkStates&&(this._checkStates=a,this._doCheckStatesChanged())},setRestoreMode:function(a){if(a!=this._restoreMode){var b=this._restoreMode;this._restoreMode=a,this._doRestoreModeChanged(b,a)}},fieldCount:function(){return this._fields.length},rowCount:function(){_a()},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,this._boolParser=a?new mb(a):mb.Default)},$_createDateReader:function(){this._datetimeFormat?(this._dateParser=new Lb(this._datetimeFormat),this._dateParser.setAmText(this._amText),this._dateParser.setPmText(this._pmText),this._dateParser.setBaseYear(this._baseYear)):this._dateParser=Lb.Default},setDateFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a,this.$_createDateReader())},setAmText:function(a){a!=this._amText&&(this._amText=a,this.$_createDateReader())},setPmText:function(a){a!=this._pmText&&(this._pmText=a,this.$_createDateReader())},getDatetimeFormat_:function(){return this._dateFormat},setDatetimeFormat:function(a){this.setDateFormat(a)},getField:function(a){return a>=0&&a<this._fields.length?this._fields[a]:null},isLocal:function(){return!0},isImmediateUpdate:function(){return!1},isSummarized:function(){return!1},$_addField:function(a,b,c){if(!a)throw new Error("fieldName must be exists.");if(this.getFieldIndex(a)>=0)throw new Error("fieldName is already exists: "+a);var d=new xf(a,b,c);return this.$_internalInsertField(this._fields.length,d),d},addField:function(a,b,c){if(this._checkClientState()){var d=this.$_addField(a,b,c);return d._resetTypes(),this._doFieldsReset(),d}},clearFields:function(){if(this._fields.length>0){if(!this._checkClientState())return;this.$_internalClearFields(),this._doFieldsReset()}},setFields:function(a){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),s(a)){var b,c,d,e=a.length;for(b=0;e>b;b++)d=null,c=a[b],"string"==typeof c?d=this.$_addField(c,ie.TEXT,0):c instanceof xf?(d=c.clone(),this.$_internalInsertField(this._fields.length,d)):(d=this.$_addField(c.fieldName,c.dataType,c.length),"defaultValue"in c&&(d._defaultValue=c.defaultValue),"baseField"in c&&(d._baseField=c.baseField),"booleanFormat"in c&&d.setBooleanFormat(c.booleanFormat),"datetimeFormat"in c&&d.setDatetimeFormat(c.datetimeFormat),"amText"in c&&(d._amText=c.amText),"pmText"in c&&(d._pmText=c.pmText),"baseYear"in c&&(d._baseYear=c.baseYear),"header"in c&&(d._header=c.header)),d&&d._resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},getFields:function(){return this._fields.slice()},fieldByName:function(a){if(a)for(var b=a.toUpperCase(),c=0,d=this._fields.length;d>c;c++){var e=this._fields[c];if(e.fieldName()==b)return e}return null},getFieldNames:function(){var a,b=this._fields.length,c=[];for(a=0;b>a;a++)c.push(this._fields[a]._fieldName);return c},getOrgFieldNames:function(){var a,b=this._fields.length,c=[];for(a=0;b>a;a++)c.push(this._fields[a]._orgFieldName);return c},getFieldName:function(a){return this._checkFieldIndex(a),this._fields[a]._fieldName},getOrgFieldName:function(a){return this._checkFieldIndex(a),this._fields[a]._orgFieldName},getFieldIndex:function(a){if(a){var b=a.toUpperCase();if(b in this._fieldMap)return this._fieldMap[b]}return-1},getFieldIndexC:function(a){return a in this._fieldMap?this._fieldMap[a]:-1},getBaseField:function(a){return a>=0&&a<this._fields.length?this.getFieldIndex(this._fields[a]._baseField):-1},getFieldIndexOf:function(a){return"string"==typeof a?this.getFieldIndex(a):parseInt(a)},getValueType:function(a){return this._fields[a]._dataType},getDefaultValue:function(a){return this._fields[a]._defaultValue},getRowState:function(a){_a()},setRowState:function(a,b,c){_a()},clearRowStates:function(a,b){_a()},getStateRows:function(a){_a()},getAllStateRows:function(){_a()},setRowStates:function(a,b,c,d){_a()},getRowStateCount:function(a){_a()},restoreUpdatedStates:function(a){_a()},restoreUpdatedRows:function(a){_a()},getUpdatedCells:function(a){_a()},beginUpdate:function(){this._checkClientState(),this._eventLock++},endUpdate:function(a){this._checkClientState(),a=arguments.length>0?a:!0,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&a&&this._fireRefresh()},hasData:function(a){return!1},canUpdateField:function(a,b){if(b>=0&&b<this._fields.length){var c=this._fields[b];if(!c._updatable&&a>=0)try{var d=this.getRowState(a);return!d||d==je.CREATED||d==je.CREATE_AND_DELETED}catch(e){return!1}return!0}return!1},getDataComparer:function(a){if(a>=0){var b=this._comparers[a];return b?b:null}},setDataComparer:function(a,b){b?this._comparers[a]=b:this._comparers[a]=void 0},canSummarize:function(a){if(a>=0&&a<this.fieldCount()){var b=this.getValueType(a);if(b==ie.BOOLEAN||b==ie.NUMBER)return!0}return!1},findRow:function(a,b){return-1},getDistinctValues:function(a,b){return null},exportToJson:function(){},exportToCsv:function(){},exportToXml:function(){},registerClient:function(a){a&&this._clients.indexOf(a)<0&&this._clients.push(a)},unregisterClient:function(a){if(a){var b=this._clients.indexOf(a);b>=0&&this._clients.splice(b,1)}},cancelClients:function(){for(var a=this._clients.length;a--;)this._clients[a].cancelDataEditing()},commitClients:function(){for(var a=this._clients.length;a--;)this._clients[a].commitDataEditing()},refreshClients:function(){this._fireRefreshClients()},_checkClientState:function(){var a=this.$_isClientsBusy();if(a.busy){if(this._commitBeforeDataEdit&&1==a.cnt){listeners=a.client._listeners;for(var b=!0,c=0,d=listeners.length;d>c;c++)b=b&&listeners[c].commit(!1,!0);if(b)return!0}if(this._throwClientError)throw new Bf;return this._alertClientError&&alert(Bf.message),!1}return!0},_doCheckStatesChanged:function(){},_doRestoreModeChanged:function(a,b){},$_isClientsBusy:function(){for(var a={busy:!1,cnt:0,client:null},b=this._clients.length;b--;)this._clients[b].isDataEditing()&&(a.busy=!0,a.cnt++,a.client=this._clients[b]);return a},_checkFieldIndex:function(a){if(0>a||a>=this._fields.length)throw new Error("Invalid field index: "+a)},$_internalClearFields:function(){this._checkClientState();for(var a=this._fields.length;a--;)this._fields[a].$_setIndex(-1);this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},$_internalInsertField:function(a,b){this._checkClientState();var c=this._fields.length;if(0>a||a>c)throw new Error("index is out of bounds:"+a);if(b){b._prepare(this),this._fields.splice(a,0,b),this._fieldNames.splice(a,0,b._fieldName),b.isCalculated()&&this._calcFields.push(b),b.$_setIndex(a),this._fieldMap[b.fieldName()]=a;for(var d=a+1;c>=d;d++)b=this._fields[d],b.$_setIndex(d),this._fieldMap[b.fieldName()]=d;return a}return-1},$_internalCalculateValues:function(a,b){var c=this._calcFields;if(c.length>0){for(var d=[],e=0;e<a.length;e++)d[e]=this.getField(e).readValue(a[e]);for(e=0,len=c.length;e<len;e++){var f=c[e],g=this._fieldMap[f.fieldName()];a[g]=f.readValue(f._calculateValue(this._calculateRuntime,b,f.orgFieldName(),this._fieldNames,this.getOrgFieldNames(),d))}}},refreshFieldFormats:function(){for(var a=this._fields.length;a--;)this._fields[a]._refreshFormats(this)},refreshFieldFormat:function(a){a&&a._refreshFormats(this)},_doFieldsReset:function(){},$_createOutputRows:function(a,b,c){c=arguments.length>2?c:0;var d,e,f=this.fieldCount(),g=a.length;b instanceof Af||(b=new Af(b));for(var h=b.nullDateText(),i=0;f>i;i++){var j,k,l=this.getField(i),m=l.orgFieldName();if(l._dataType==ie.DATETIME&&((j=b._datetimeCallback)||(k=b._datetimeWriter)||null!=h&&void 0!=h))if(j)for(d=0;g>d;d++)e=a[d],e[m]=j(d+c,m,e[m]);else for(d=0;g>d;d++){e=a[d];var n=e[m];e[m]=n?k?k.getText(e[m]):n:h}else if(l._dataType==ie.BOOLEAN&&((j=b._booleanCallback)||(k=b._booleanFormatter)))if(j)for(d=0;g>d;d++)e=a[d],e[m]=j(d+c,m,e[m]);else for(d=0;g>d;d++)e=a[d],e[m]=k.formatValue(e[m])}},$_sortRows:function(a,b,c,d,e){var f,g,h,i,j,k,l;do{f=d,g=e,h=Na((d+e)/2),i=a[h];do{for(;g>=f&&(j=a[f],k=c(b,i,j),!(0>=k));)f++;for(;g>=f&&(j=a[g],k=c(b,i,j),!(k>=0));)g--;g>=f&&(f!=g&&(l=a[f],a[f]=a[g],a[g]=l),f++,g--)}while(g>=f);g>d&&this.$_sortRows(a,b,c,d,g),d=f}while(e>d)}}),Df=(Cf.prototype,Xa("DataProvider",Cf,{init:function(){this._super(),this._eventLock=0,this._resetLock=0,this._countLock=0,this._tags=new wf(this),this._filters=null,this._filterRuntime=null},filterRuntime:function(){return this._filterRuntime||(this._filterRuntime=new Gf(this)),this._filterRuntime},addTag:function(a){this._tags.add(a)},removeTag:function(a){this._tags.remove(a)},deletedCount:function(){return 0},setFilters:function(a,b){b=arguments.length>0?b:"and",!a||a instanceof If?(this._filters=a,b&&this._filters.setFilterMode(b)):this._filters=new If(this.filterRuntime(),a,b)},beginUpdate:function(){this._checkClientState()&&this._eventLock++},endUpdate:function(a){this._checkClientState()&&(a=arguments.length>0?a:!0,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(a&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0))},setRowCount:function(a,b,c,d){_a()},clearRows:function(){_a()},setRows:function(a,b,c){_a()},setXmlRows:function(a,b,c){_a()},addRows:function(a,b,c,d){_a()},insertRows:function(a,b,c,d,e){_a()},insertXmlRows:function(a,b,c,d,e){_a()},updateRows:function(a,b,c,d,e){_a()},updateStrictRows:function(a,b,c,d,e){_a()},updateXmlRows:function(a,b,c,d,e){_a()},appendXmlRows:function(a,b,c,d){_a()},getRows:function(a,b){_a()},getRowObjects:function(a,b){_a()},getOutputObject:function(a,b,c){_a()},getValue:function(a,b){_a()},setValue:function(a,b,c){_a()},getRow:function(a){_a()},getRowObject:function(a){if(0>a||a>=this.getRowCount())throw new RangeError("row is out of range: "+a);var b,c,d,e=this.fieldCount(),f={};for(b=0;e>b;b++)c=this.getOrgFieldName(b),d=this.getValue(a,b),f[c]=d;return f},getColumn:function(a,b,c){_a()},hasData:function(a){_a()},insertRow:function(a,b){_a()},appendRow:function(a){_a()},removeRow:function(a){_a()},removeRows:function(a){_a()},updateRow:function(a,b){_a()},updateStrictRow:function(a,b){_a()},moveRow:function(a,b){_a()},moveRows:function(a,b,c){_a()},canUpdateRow:function(a){return!1},canAppendRow:function(){return!1},canInsertRow:function(a){return!1},canDeleteRow:function(a){return!1},objectToRow:function(a){var b=[];if(a){var c,d,e=this.fieldCount();for(c=0;e>c;c++)d=this.getOrgFieldName(c),a.hasOwnProperty(d)&&(b[c]=a[d])}return b},equalValues:function(a,b,c){if(b!==c){var d=this._fields[a],e=this.getValue(b,a),f=this.getValue(c,a);return d.equalValues(e,f)}return!0},equalTexts:function(a,b,c){if(b!==c){var d=(this._fields[a],this.getValue(b,a)),e=this.getValue(c,a);return void 0===d||null===d?void 0===e||null===e:void 0===e||null===e?!1:d.toLowerCase()==e.toLowerCase()}return!0},sameValues:function(a,b,c){if(b!==c){var d=this._fields[a],e=this.getValue(b,a),f=this.getValue(c,a);return d.sameValues(e,f)}return!0},compareValues:function(a,b,c){return 0},compareTexts:function(a,b,c){return 0},compareNumbers:function(a,b,c){return 0},compareBools:function(a,b,c){return 0},summarize:function(a,b){return!1},summarizeRange:function(a,b,c){return!1},copyRows:function(a,b,c,d){},_doFieldsReset:function(){this._fireReset()},refreshClients:function(){this._fireRefreshClients()},tags:function(){return this._tags},isEventLocked:function(){return this._eventLock>0},filters:function(){return this._filters||null},_fireDisposed:function(){this._eventLock<=0&&this.fireEvent(Df.DISPOSED)},_fireReset:function(){this._eventLock<=0?this.fireEvent(Df.RESET):this._resetLock++},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(Df.REFRESH)},_fireRefreshClients:function(){this._eventLock<=0&&this.fireEvent(Df.REFRESH)},_fireRowCountChanged:function(){this._eventLock<=0?this.fireEvent(Df.ROW_COUNT_CHANGED):this._countLock++},_fireRowInserting:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(Df.ROW_INSERTING,a,b):!0},_fireRowInserted:function(a){this._eventLock<=0&&(this.fireEvent(Df.ROW_INSERTED,a),this.fireEvent(Df.DATA_CHANGED))},_fireRowsInserted:function(a,b){this._eventLock<=0&&(this.fireEvent(Df.ROWS_INSERTED,a,b),this.fireEvent(Df.DATA_CHANGED))},_fireRowRemoving:function(a){return this._eventLock<=0?this.fireConfirmEvent(Df.ROW_REMOVING,a):!0},_fireRowRemoved:function(a){this._eventLock<=0&&(this.fireEvent(Df.ROW_REMOVED,a),this.fireEvent(Df.DATA_CHANGED))},_fireRowsRemoving:function(a){return this._eventLock<=0?this.fireConfirmEvent(Df.ROWS_REMOVING,a):!0},_fireRowsRemoved:function(a){this._eventLock<=0&&(this.fireEvent(Df.ROWS_REMOVED,a),this.fireEvent(Df.DATA_CHANGED))},_fireRowUpdating:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(Df.ROW_UPDATING,a,b):!0},_fireRowUpdated:function(a){this._eventLock<=0&&(this.fireEvent(Df.ROW_UPDATED,a),this.fireEvent(Df.DATA_CHANGED))},_fireRowsUpdated:function(a,b){this._eventLock<=0&&(this.fireEvent(Df.ROWS_UPDATED,a,b),this.fireEvent(Df.DATA_CHANGED))},_fireRowMoving:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(Df.ROW_MOVING,a,b):!0},_fireRowMoved:function(a,b){this._eventLock<=0&&this.fireEvent(Df.ROW_MOVED,a,b)},_fireRowsMoving:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(Df.ROWS_MOVING,a,b,c):!0},_fireRowsMoved:function(a,b,c){this._eventLock<=0&&this.fireEvent(Df.ROWS_MOVED,a,b,c)},fireValueChanging:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(Df.VALUE_CHANGING,a,b,c):!0},_fireValueChanged:function(a,b){this._eventLock<=0&&(this.fireEvent(Df.VALUE_CHANGED,a,b),this.fireEvent(Df.DATA_CHANGED))},_fireRowStateChanged:function(a){this._eventLock<=0&&this.fireEvent(Df.STATE_CHANGED,a)},_fireRowStatesChanged:function(a){this._eventLock<=0&&this.fireEvent(Df.STATES_CHANGED,a)},_fireRowStatesCleared:function(){this._eventLock<=0&&this.fireEvent(Df.STATES_CLEARED)}}));Df.DISPOSED="onDataProvderDisposed",Df.RESET="onDataProviderReset",Df.REFRESH="onDataProviderRefresh",Df.REFRESH_CLIENT="onDataProviderRefreshClient",Df.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",Df.ROW_INSERTING="onDataProviderRowInserting",Df.ROW_INSERTED="onDataProviderRowInserted",Df.ROWS_INSERTED="onDataProviderRowsInserted",Df.ROW_REMOVING="onDataProviderRowRemoving",Df.ROW_REMOVED="onDataProviderRowRemoved",Df.ROWS_REMOVING="onDataProviderRowsRemoving",Df.ROWS_REMOVED="onDataProviderRowsRemoved",Df.ROW_UPDATING="onDataProviderRowUpdating",Df.ROW_UPDATED="onDataProviderRowUpdated",Df.ROWS_UPDATED="onDataProviderRowsUpdated",Df.ROW_MOVING="onDataProviderRowMoving",Df.ROW_MOVED="onDataProviderRowMoved",Df.ROWS_MOVING="onDataProviderRowsMoving",Df.ROWS_MOVED="onDataProviderRowsMoved",Df.VALUE_CHANGING="onDataProviderValueChanging",Df.VALUE_CHANGED="onDataProviderValueChanged",Df.DATA_CHANGED="onDataProviderDataChanged",Df.STATE_CHANGED="onDataProviderStateChanged",Df.STATES_CHANGED="onDataProviderStatesChanged",Df.STATES_CLEARED="onDataProviderStatesCleared";var Ef=Df.prototype,Ff=Xa("DataProviderObserver",null,{init:function(){this._super()},onDataProvderDisposed:function(a){},onDataProviderReset:function(a){},onDataProviderRefresh:function(a){},onDataProviderRefreshClient:function(a){},onDataProviderRowCountChanged:function(a,b){},onDataProviderRowInserting:function(a,b,c){return!0},onDataProviderRowInserted:function(a,b){},onDataProviderRowsInserted:function(a,b,c){},onDataProviderRowRemoving:function(a,b){return!0},onDataProviderRowRemoved:function(a,b){},onDataProviderRowsRemoving:function(a,b){return!0},onDataProviderRowsRemoved:function(a,b){},onDataProviderRowUpdating:function(a,b,c){return!0},onDataProviderRowUpdated:function(a,b){},onDataProviderRowsUpdated:function(a,b,c){},onDataProviderRowMoving:function(a,b,c){return!0},onDataProviderRowMoved:function(a,b,c){},onDataProviderRowsMoving:function(a,b,c,d){return!0},onDataProviderRowsMoved:function(a,b,c,d){},onDataProviderValueChanging:function(a,b,c,d){return!0},onDataProviderValueChanged:function(a,b,c){},onDataProviderStateChanged:function(a,b){},onDataProviderStatesChanged:function(a,b){},onDataProviderStatesCleared:function(a){}}),Gf=Xa("DataFilterRuntime",wc,{init:function(){this._super(),this._provider=null,this._fieldCount=0,this._row=-1,this._values=null},prepare:function(a){this._provider=a,this._fieldCount=a?a.fieldCount():0},setRow:function(a,b){this._row=a,this._values=b},isIdentifier:function(a){return a=a.toLowerCase(),Gf.IDENTS.hasOwnProperty(a)?Cm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(a){case Cm.ID_ROW:return this._item.index()}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);switch(a){case Cm.ID_VALUE:case Cm.ID_VALUES:return this._values[b]}throw new da("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b,c){switch(a){case Cm.ID_VALUE:case Cm.ID_VALUES:var d=this.$_getField(b,c);return this._values[d]}throw new da("Invalid identifier indexer: "+a)},$_getField:function(a,b){var c=b?this._provider.getFieldIndexC(a):this._provider.getFieldIndex(a);if(0>c||c>=this._fieldCount)throw new da("Data field is not exits:"+a);return c}},{ID_ROW:0,ID_VALUE:1,ID_VALUES:2},function(a){a.IDENTS={row:a.ID_ROW,value:a.ID_VALUE,values:a.ID_VALUES}}),Hf=Xa("DataFilter",null,{init:function(a,b){this._super(),this._runtime=a,this._exproNode=null,this._active=!1,this.setCriteria(b)},criteria:null,active:!0,setCriteria:function(a){a!=this._criteria&&(this._criteria=a,a?this._exprNode=vc.Default.parse(a,Hf.CAPITAL_INDEXERS):this._exprNode=null)},select:function(a,b){return this._exprNode?(this._runtime.setRow(a,b),this._exprNode.evaluate(this._runtime)):!0}},{CAPITAL_INDEXERS:["value","values","len"]}),If=Xa("DataFilterCollection",null,{init:function(a,b,c){this._super(),this._runtime=a,this._isOr=!1,this.load(b),c&&this.setFilterMode(c)},filterMode:"and",setFilterMode:function(a){var b=a?a.toLocaleLowerCase():a;b!=this._filterMode&&(this._filterMode=b,this._isOr=this._filterMode==If.FILTER_OR)},load:function(a){if(!s(a)&&a&&(a=[a]),this._filters=[],a)for(var b=0,c=a.length;c>b;b++){var d=null,e=a[b];e&&("string"==typeof e?d=new Hf(this._runtime,e):e.criteria&&(d=new Hf(this._runtime,e.criteria))),d&&this._filters.push(d)}},prepare:function(a){this._runtime.prepare(a)},select:function(a,b){var c,d=this._filters,e=d.length;if(this._isOr){for(c=0;e>c;c++)if(1==d[c].select(a,b))return!0;return!1}for(c=0;e>c;c++)if(0==d[c].select(a,b))return!1;return!0}},{FILTER_AND:"and",FILTER_OR:"or"}),Jf={csvToArray:function(a,b,c,d,e,f){c=arguments.length>2?c:0,d=arguments.length>3?d:-1,f=arguments.length>5?f:",";var g=null;if(b){var h,i,j,k=b.split("\r\n");for(1==k.length&&(k=b.split("\n")),1==k.length&&(k=b.split("\r")),h=k.length-1;h>=0&&(i=k[h],i=i?i.trim():null,!(i&&i.length>0));h--)k.pop();if(j=k.length,j>0&&(c=Math.max(0,c),0>d&&(d=j),d=Math.min(j-c,d),d>0)){var l,m,n,o=a.getFields(),p=o.length,q=p>0;if(g=new Array(d),e)for(l=0;d>l;l++){m=k[l+c],n=Kf(m,f),q&&n.length>p&&n.splice(n.length,p-n.length);for(var h=0;p>h;h++)n[h]=o[h].readValue(n[h]);g[l]=n}else for(l=0;d>l;l++){m=k[l+c],n=m.split(f),q&&n.length>p&&n.splice(n.length,p-n.length);for(var h=0;p>h;h++)n[h]=o[h].readValue(n[h]);g[l]=n}}}return g},xmlToRow:function(a,b,c){var d,e,f=a.childNodes,g=b.length,h=new Array(g);for(d=0,e=f.length;e>d;d++){var i,j=f[d];(i=c.indexOf(j.tagName))>=0&&(h[i]=b[i].readValue(j.nodeValue))}for(d=0;g>d;d++)void 0===h[d]&&(h[d]=b[d].readValue($(a,c[d])));return h},xmlToArray:function(a,b,c,d){c=arguments.length>2?c:0,d=arguments.length>3?d:-1;var e=null,f=Jf.xmlToRow,g=b?b.length:0;if(g&&(c=Math.max(0,c),0>d&&(d=g),d=Math.min(g-c,d))){var h=a.getFields(),i=a.getOrgFieldNames();h.length;e=new Array(d);for(var j=0;d>j;j++){var k=b[j+c],l=f(k,h,i);e[j]=l}}return e}},Kf=function(a,b){var c=[];if(a&&a.length>0){for(var d,e,f=0,g=-1,h=-1,i=!1,j=!1,k=a.length,l=null,m=0;k>m;m++)d=a.charAt(m),d==b?i||(e=m-f,0>=e?l="":h==m-1&&g==f?(l=a.substring(g+1,h),j&&(l=l.replace('""','"'))):l=a.substring(f,m),c.push(l),i=j=!1,f=m+1):'"'==d&&(i?0>h?(h=m,i=!1):h==m-1&&(j=!0,i=!0,h=-1):(g=m,h=-1,i=!0));k>f&&(h==k-1&&g==f?(l=a.substring(g+1,h),j&&(l=l.replace('""','"'))):l=a.substring(f,k),c.push(l))}return c},Lf=function(a){this.field=a,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN};Lf.prototype.clear=function(){this.count=0,this.sum=this.max=this.min=this.avg=this.vars=NaN};var Mf=Xa("LocalDataProvider",Df,{init:function(){Ef.init.call(this),this._points=[],this._nextPoint=0,this._values=[],this._rowIds=[],this._rowStates=[],this._orgValues=null,this._needRestore=!1,this._deletedCount=0,this._nextRowId=0,this.calculateRuntime()},getRowId:function(a){return this._rowIds[a]},addRow:function(a){var b=this.rowCount();return this.insertRow(this._values.length,a)?b:-1},rowCount:function(){return this._values.length},isSummarized:function(){return!0},deletedCount:function(){return this._deletedCount},getOptions:function(){return this._super()},setOptions:function(a){this._super(a)},internalInsertField:function(a,b){if(a=this._super(a,b),a>=0){var c,d,e=this._values.length;for(c=0;e>c;c++)d=this._values[c],d&&d.splice(a,0,void 0);if(this._orgValues)for(e=Math.min(e,this._orgValues.length),c=0;e>c;c++)d=this._orgValues[c],d&&d.splice(a,0,void 0)}return a},internalClearFields:function(){Ef.internalClearFields.call(this),this.$_clearRows()},hasData:function(a){return a>=0&&a<this._values.length&&void 0!==this._values[a]},setRowCount:function(a,b,c,d){if(this._checkClientState()){b=arguments.length>1?b:!1,c=arguments.length>2?c:null,d=arguments.length>3?d:"none";var e=this._values,f=e.length,g=Math.max(0,a);if(g!=f){var h,i,j,k,l,m,n=this._rowIds,o=this._rowStates;if(this.refreshFieldFormats(),e.length=n.length=o.length=g,this._orgValues&&this._orgValues.length>g&&(this._orgValues.length=g),g>f&&(b||c)){if(l=this._fields.length,m=c,!s(m)&&m&&p(m)&&(m=this.objectToRow(m)),m&&m.length<1&&(m=null),b||m){var q,r=m?Math.min(m.length,l):0;for(h=f;g>h;h++){if(k=[],b)for(i=0;l>i;i++)j=this._fields[i],k[i]=void 0!==j._defaultValue?j._defaultValue:j._nullValue;if(r>0)for(i=0;r>i;i++)q=m[i],void 0!==q&&(k[i]=this._fields[i].readValue(q));e[h]=k}}}else if(f>g&&this._deletedCount>0)for(h=f-1;h>=g;h--)(o[h]==je.DELETED||o[h]==je.CREATE_AND_DELETED)&&this._deletedCount--,o[h]=je.NONE;for(d=this.isCheckStates()&&d?d:je.NONE,h=f;g>h;h++)o[h]=d,n[h]=this._nextRowId++;this.tags().setRowCount(g),this._fireRefresh(),this._fireRowCountChanged()}}},$_clearRows:function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.tags().clearRows()},clearRows:function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged())},setRows:function(a,b,c){if(this._checkClientState()&&(b=arguments.length>1?b:0,c=arguments.length>2?c:-1,0!=c)){var d=m();k(">>>>>> set rows..."+d),this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var e,f,g,h,i,j,l=this.isCheckStates(),n=this._filters;if(a&&(e=a.length)>0&&e>b)if(b=Math.max(0,b),c=0>c?e:Math.min(c,e-b),n){for(this._values.length=this._rowIds.length=this._rowStates.length=c,n.prepare(this),f=e,h=g=0,i=b;f>i&&c>h;i++)j=a[i],s(j)||(j=this.objectToRow(j)),n.select(g++,j)&&this._internalSetRow(h++,j,l);this._values.length=this._rowIds.length=this._rowStates.length=h}else if(f=Math.min(e,b+c),f>b)for(this._values.length=this._rowIds.length=this._rowStates.length=f-b,h=0,i=b;f>i;i++)j=a[i],s(j)||(j=this.objectToRow(j)),this._internalSetRow(h++,j,l)}finally{this.endUpdate(!1)}this.tags().setRows(),this._fireRefresh(),this._fireRowCountChanged()}},setXmlRows:function(a,b,c){this._checkClientState()&&(b=arguments.length>1?b:0,c=arguments.length>2?c:-1,0!=c&&(a=Jf.xmlToArray(this,a,b,c),this.setRows(a)))},addRows:function(a,b,c,d){b=arguments.length>1?b:0,c=arguments.length>2?c:-1,d=arguments.length>3?d:!1,this.insertRows(this.rowCount(),a,b,c,d)},appendRows:function(a,b,c,d){b=arguments.length>1?b:0,c=arguments.length>2?c:-1,d=arguments.length>3?d:!1,this.insertRows(this.rowCount(),a,b,c,d)},insertRows:function(a,b,c,d,e){c=arguments.length>2?c:0,d=arguments.length>3?d:-1,e=arguments.length>4?e:!1;var f;if(b&&!((f=b.length)<1)){var g,h,i,j;if(d=0>d?f:Math.min(f,d),0!=d){if(this._checkClientState(),0>a||a>this._values.length)throw new RangeError("row is out of bounds:"+a);if(this.refreshFieldFormats(),c=Math.max(0,c),h=Math.min(f,c+d),e)for(i=a,g=c;h>g;g++)this._fireRowInserting(i)&&(j=b[g],s(j)||(j=this.objectToRow(j)),this._internalInsertRow(i,j),this.tags().insertRow(i),this._fireRowInserted(i),this._fireRowCountChanged(),i++);else{for(i=a,g=c;h>g;g++,i++)j=b[g],Ga(j)||(j=this.objectToRow(j)),this._internalInsertRow(i,j);this.tags().insertRows(a,d=h-c),this._fireRowsInserted(a,d),this._fireRowCountChanged()}}}},appendXmlRows:function(a,b,c,d){this.insertXmlRows(this.rowCount(),a,b,c,d)},insertXmlRows:function(a,b,c,d,e){this._checkClientState()&&(c=arguments.length>2?c:0,d=arguments.length>3?d:-1,b=Jf.xmlToArray(this,b,c,d),this.insertRows(a,b,c,d,e))},updateRows:function(a,b,c,d,e){this.$_updateRows(a,b,c,d,!1,e)},updateStrictRows:function(a,b,c,d,e){this.$_updateRows(a,b,c,d,!0,e)},$_updateRows:function(a,b,c,d,e,f){if(this._checkClientState()){c=arguments.length>2?c:0,d=arguments.length>3?d:-1,f=arguments.length>4?f:!1;var g;if(b&&!((g=b.length)<1)&&(d=0>d?g:Math.min(g,d),0!=d)){this.refreshFieldFormats();var h,i,j,k,l=this.rowCount();if(c=Math.max(0,c),j=Math.min(g,c+d),!(c>=j))if(f)for(i=a,h=c;j>h&&!(i>=l);h++,i++)this._fireRowUpdating(i)&&(k=b[h],this._internalUpdateRow(i,k,e,!0),this.tags().updateRow(i),this._fireRowUpdated(i));else{var m=[];for(i=a,h=c;j>h&&!(i>=l);h++,i++)this._rowStates[i]==je.NONE&&m.push(i),k=b[h],this._internalUpdateRow(i,k,e,!1);m.length>0&&this._fireRowStatesChanged(m),this.tags().updateRows(a,d=j-c),this._fireRowsUpdated(a,d)}}}},updateXmlRows:function(a,b,c,d,e){this._checkClientState()&&(b=Jf.xmlToArray(this,b,c,d),this.updateRows(a,b,c,d,e))},getValue:function(a,b){this._checkRowIndex(a),this._checkFieldIndex(b);var c=this._values[a];return c?c[b]:ta},setValue:function(a,b,c){if(!this._checkClientState())return!1;this._checkRowIndex(a),this._checkFieldIndex(b);var d=this._fields[b],e=this._rowStates[a];if(!d._updatable&&(e==je.NONE||e==je.UPDATED))return!1;var f=this._values[a],g=d.readValue(c);if(f&&d.equalValues(g,f[b]))return!1;this.refreshFieldFormat(d);var h,i=this.isCheckStates()&&(e==je.NONE||!e);return f||(this._values[a]=f=[]),i&&this._orgValues&&(h=f.concat()),f[b]=g,this.$_internalCalculateValues(f,a),i?(h&&(this._orgValues[a]=h),this._changeRowState(a,je.UPDATED,!0)):this._needRestore&&this.$_restoreState(a),this.tags().setValue(a,b),this._fireValueChanged(a,b),!0},getRow:function(a){this._checkRowIndex(a);var b=this._values[a];return b?b.slice():[]},$_getRowObject:function(a,b){var c={},d=this._values[a];if(d)for(var e=0;b>e;e++){var f=this.getOrgFieldName(e);c[f]=d[e]}return c},getRowObject:function(a){return this._checkRowIndex(a),this.$_getRowObject(a,this.fieldCount())},getRows:function(a,b){a=arguments.length>0?a:0,b=arguments.length>1?b:-1;var c=this._values.length,d=Math.max(0,a),e=0>b?c-1:Math.min(c-1,b);if(d>=c||d>e)return[];var f,g=e-d+1,h=new Array(g);for(f=0;g>f;f++)h[f]=this._values[f+d]||[];return h},getRowObjects:function(a,b){a=arguments.length>0?a:0,b=arguments.length>1?b:-1;var c=this._values.length,d=Math.max(0,a),e=0>b?c-1:Math.min(c-1,b);if(d>=c||d>e)return[];for(var f=this.fieldCount(),g=e-d+1,h=new Array(g),i=0;g>i;i++)h[i]=this.$_getRowObject(i+d,f);return h},getOutputObjects:function(a,b,c){var d=this.getRowObjects(b,c);return a&&this.$_createOutputRows(d,a,b),d},getOutputObject:function(a,b){var c=this.getRowObject(b);return a&&this.$_createOutputRows([c],a),c},getColumn:function(a,b,c){b=arguments.length>1?b:0,c=arguments.length>2?c:-1,this._checkFieldIndex(a);var d=this._values.length;if(c=0>c?d-1:Math.min(d-1,c),b=Math.max(0,b),b>=d||b>c)return null;for(var e=new Array(c-b+1),f=b;c>=f;f++){var g=this._values[f];e[f-b]=g&&g[a]}return e},hasData:function(a){return a>=0&&a<this._values.length?this._values[a]!==ta:!1},updateRow:function(a,b){
return this.$_updateRow(a,b,!1)},updateStrictRow:function(a,b){return this.$_updateRow(a,b,!0)},$_updateRow:function(a,b,c){return this._checkClientState()?(this._checkRowIndex(a),this.refreshFieldFormats(),b&&this._fireRowUpdating(a)?(this._internalUpdateRow(a,b,c,!0),this.tags().updateRow(a),this._fireRowUpdated(a),!0):!1):void 0},insertRow:function(a,b){if(!this._checkClientState())return!1;if(0>a||a>this._values.length)throw new RangeError("row is out of bounds:"+a);return this.refreshFieldFormats(),b&&this._fireRowInserting(a,b)?(Ga(b)||(b=this.objectToRow(b)),this._internalInsertRow(a,b),this.tags().insertRow(a),this._fireRowInserted(a),this._fireRowCountChanged(),!0):!1},appendRow:function(a){var b=this.rowCount();return this.insertRow(this._values.length,a)?b:-1},$_deleteRow:function(a){if(this._fireRowRemoving(a)){var b=this._rowStates[a];return this._internalRemoveRow(a),je.isDeleted(b)&&this._deletedCount--,this.tags().removeRow(a),this._fireRowRemoved(a),this._fireRowCountChanged(),!0}return!1},removeRow:function(a){if(this._checkClientState()){if(this._checkRowIndex(a),this._softDeleting&&this._checkStates){var b=this._rowStates[a];switch(b){case je.CREATED:this._deleteCreated?this.$_deleteRow(a):this._changeRowState(a,je.CREATE_AND_DELETED,!0,!0,!0);break;case je.DELETED:case je.CREATE_AND_DELETED:break;default:this._changeRowState(a,je.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(a)}},removeRows:function(a,b){if(this._checkClientState()){var c,d,e,f,g,h=this.isDeleteCreated();if(a&&!((d=a.length)<1)){if(this._softDeleting&&this._checkStates){var e,i=b?null:[];for(c=d;c--;){switch(f=a[c],this._checkRowIndex(f),e=!1,g=this._rowStates[f]){case je.CREATED:h||(e=this._changeRowState(f,je.CREATE_AND_DELETED,b,!1,!0),a.splice(c,1));break;case je.DELETED:case je.CREATE_AND_DELETED:a.splice(c,1);break;default:e=this._changeRowState(f,je.DELETED,b,!1,!0),a.splice(c,1)}i&&e&&i.push(f)}b||i&&i.length>0&&this._fireRowStatesChanged(i)}if((d=a.length)>0)if(d>1&&a.sort(function(a,b){return a-b}),b)for(c=d;c--;)f=a[c],this._checkRowIndex(f),this.$_deleteRow(f);else if(this._fireRowsRemoving(a)){for(c=d;c--;)f=a[c],this._checkRowIndex(f),g=this._rowStates[f],this._internalRemoveRow(f),je.isDeleted(g)&&this._deletedCount--;this.tags().removeRows(a),this._fireRowsRemoved(a),this._fireRowCountChanged()}}}},moveRow:function(a,b){this._checkClientState()&&a!=b&&(this._checkRowIndex(a),this._checkRowIndex(b),this._fireRowMoving(a,b)&&(this._internalMoveRow(a,b),this.tags().moveRow(a,b),this._fireRowMoved(a,b)))},moveRows:function(a,b,c){this._checkClientState()&&(1>b||a==c||(this._checkRowIndex(a),this._checkRowIndex(c),this._fireRowsMoving(a,b,c)&&(this._internalMoveRows(a,b,c),this.tags().moveRows(a,b,c),this._fireRowsMoved(a,b,c))))},getRowState:function(a){return this._checkRowIndex(a),this._rowStates[a]||je.NONE},$_checkDeleted:function(a,b){je.isDeleted(b)?this._deletedCount++:je.isDeleted(a)&&!je.isDeleted(b)&&this._deletedCount--},setRowState:function(a,b,c){this._checkClientState()&&(this._checkRowIndex(a),this._orgValues?this._changeRowStateEx(a,b,!0,c):this._changeRowState(a,b,!0,c))},setRowStates:function(a,b,c,d){if(this._checkClientState()){var e,f,g,h,i,j;if(a&&!((f=a.length)<1))if(d)for(e=0;f>e;e++)g=a[e],this._checkRowIndex(g),this._changeRowStateEx(g,b,!0,c);else{for(h=[],i=this._rowStates,e=0;f>e;e++)g=a[e],this._checkRowIndex(g),j=i[g],b!=j&&(i[g]=b,h.push(g),this.$_checkDeleted(j,b),this._orgValues&&this.$_prepareOrgValues(g,j,b));h.length>0&&this._fireRowStatesChanged(h)}}},clearRowStates:function(a,b){if(this._checkClientState()){b=arguments.length>1?b:!1;var c,d,e=this._rowStates,f=[];for(c=e.length;c--;)switch(d=e[c]){case je.CREATE_AND_DELETED:case je.DELETED:a?(b?this.$_deleteRow(c):(this._internalRemoveRow(c),this._deletedCount--),f.push(c)):(this._changeRowState(c,je.NONE,b),this._deletedCount--);break;default:this._changeRowState(c,je.NONE,b)}this.$_resetOrgValues(),b||(f.length>0&&(this._fireRowsRemoved(f),this._fireRowCountChanged()),this._fireRowStatesCleared())}},getStateRows:function(a){var b,c,d,e=[];if(a)for(b=0,c=this._rowStates.length;c>b;b++)d=this._rowStates[b],d==a&&e.push(b);return e},getAllStateRows:function(){var a,b,c,d={},e=d.created=[],f=d.updated=[],g=d.deleted=[],h=d.createAndDeleted=[];for(a=0,b=this._rowStates.length;b>a;a++)c=this._rowStates[a],c===je.CREATED?e.push(a):c===je.UPDATED?f.push(a):c===je.DELETED?g.push(a):c===je.CREATE_AND_DELETED&&h.push(a);return d},getRowStateCount:function(a){var b,c,d=a?a.length:0,e=this._rowStates.length,f=0;if(d&&e)if(d>1)for(b=0;e>b;b++)c=this._rowStates[b],a.indexOf(c)>=0&&f++;else for(c=a[0],b=0;e>b;b++)this._rowStates[b]===c&&f++;return f},$_restoreState:function(a){var b=this._rowStates[a];if(b===je.UPDATED){var c=this._orgValues[a];if(c){for(var d=this._values[a],e=this.isStrictRestore(),f=0,g=this._fields.length;g>f;f++){var h=d.length>f?d[f]:void 0,i=c.length>f?c[f]:void 0;if(e){if(!this._fields[f].equalValues(h,i))return!1}else if(!this._fields[f].sameValues(h,i))return!1}return this._rowStates[a]=je.NONE,!0}}return!1},restoreUpdatedStates:function(a){if(this._orgValues&&this._checkClientState()){var b,c,d,e=[];if(s(a))for(b=0,c=a.length;c>b;b++)d=a[b],d>=0&&d<this._values.length&&this.$_restoreState(d)&&e.push(d);else if(a)d=a,d>=0&&d<this._values.length&&this.$_restoreState(d)&&e.push(d);else for(b=0,c=this._values.length;c>b;b++)this.$_restoreState(b)&&e.push(b);e.length>0&&this._fireRowStatesChanged(e)}},$_restoreRow:function(a){var b=this._rowStates[a];if(b===je.UPDATED){var c=this._orgValues[a];if(c){for(var d=this._values[a],e=0,f=Math.min(c.length,this._fields.length);f>e;e++)d[e]=c[e];return this._rowStates[a]=je.NONE,!0}}return!1},restoreUpdatedRows:function(a){if(this._orgValues&&this._checkClientState()){var b,c,d,e=[];if(s(a))for(b=0,c=a.length;c>b;b++)d=a[b],d>=0&&d<this._values.length&&this.$_restoreRow(d)&&e.push(d);else if(a||0==a)d=a,d>=0&&d<this._values.length&&this.$_restoreRow(d)&&e.push(d);else for(b=0,c=this._values.length;c>b;b++)this.$_restoreRow(b)&&e.push(b);e.length>0&&this._fireRowStatesChanged(e)}},getUpdatedCells:function(a){var b=this.restoreMode();if(!this._orgValues||b!=ke.AUTO&&b!=ke.EXPLICIT)return null;if(null==a?a=this.getStateRows(je.UPDATED):s(a)||"number"==typeof a&&(a=[a]),!s(a))return null;for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=f>=0&&this._orgValues&&f<this._orgValues.length?this._orgValues[f]:null;if(g){for(var h=this._values[f],i=this.isStrictRestore(),j=[],k=0,e=this._fields.length;e>k;k++){var l=h.length>k?h[k]:void 0,m=g.length>k?g[k]:void 0;this._fields[k].isCalculated()||(i?this._fields[k].equalValues(l,m)||j.push({fieldName:this.getOrgFieldName(k),oldValue:g[k],newValue:h[k]}):this._fields[k].sameValues(l,m)||j.push({fieldName:this.getOrgFieldName(k),oldValue:g[k],newValue:h[k]}))}j.length>0&&c.push({__rowId:f,updatedCells:j})}}return c},findRow:function(a,b){if(!a||a.length<1||!b||b.length<a.length)return-1;var c,d,e,f,g,h,i=[],j=[],k=this._values;for(e=a.length,c=0;e>c;c++)d="string"==typeof a[c]?this.getFieldIndex(a[c]):Number(a[c]),d>=0&&d<this.fieldCount()&&i.indexOf(d)<0&&(i.push(d),j.push(b[c]));for(g=i.length,c=0;g>c;c++)i[c]=this._fields[i[c]];for(e=k.length,c=0;e>c;c++){for(f=k[c],h=!0,d=0;g>d;d++)if(!i[d].equalValues(j[d],f[d])){h=!1;break}if(h)return c}return-1},savePoint:function(a){if(this._checkClientState()){a=arguments.length>0?arguments:!0;var b,c,d,e,f,g=this._values,h=this._fields.length;if(h>0&&g&&(c=g.length)>0){for(e=new Array(c),b=0;c>b;b++)d=g[b],d&&(d=d.concat()),e[b]=d;return f=a?this._rowStates.concat():null,b=this._nextPoint++,this._points.push({id:b,data:e,states:f}),b}return-1}},rollback:function(a){if(this._checkClientState())for(var b=this._points.length-1;b>=0;b--){var c=this._points[b];if(c.id==a){this.$_removeSavePoints(b+1),this.setRows(c.data);var d=c.states;d&&(this._rowStates=d.concat());break}}},$_removeSavePoints:function(a){for(var b,c=this._points,d=c.length-1;d>=a;d--)b=c[d],b.data=null,c.pop()},clearSavePoints:function(){this.$_removeSavePoints(0)},getSavePoints:function(){for(var a=[],b=0,c=this._points.length;c>b;b++)a.push(this._points[b].id);return a},canUpdateRow:function(a){return!0},canAppendRow:function(){return!0},canInsertRow:function(a){return!0},canDeleteRow:function(a){return!0},$_getSortedRows:function(a){var b,c=new Array(this._values.length);switch(this.getField(a).dataType()){case ie.NUMBER:b=this.compareNumbers;break;case ie.DATETIME:b=this.compareDates;break;case ie.BOOLEAN:b=this.compareBools;break;default:b=this.compareValues}for(var d=c.length;d--;)c[d]=d;return this.$_sortRows(c,a,b.bind(this),0,c.length-1),c},getDistinctValues:function(a,b){b=arguments.length>1?b:-1,this._checkFieldIndex(a);var c=[];if(0>b&&(b=this._values.length),b>0){var d,e,f,g=this.getField(a).dataType()==ie.NUMBER,h=this.$_getSortedRows(a),i=this._values[h[0]];for(c.push(i?i[a]:void 0),d=1,e=h.length;e>d&&(this.equalValues(a,h[d-1],h[d])||(i=this._values[h[d]],f=i?i[a]:void 0,-1!=c.indexOf(f)||g&&isNaN(f)||c.push(f),!(c.length>=b)));d++);}return c},compareValues:function(a,b,c){var d=this._values[b],e=this._values[c];if(d===e)return 0;var f=d?d[a]:null,g=e?e[a]:null;return f===ta||null===f?g===ta||null===g?0:-1:g===ta||null===g?1:f>g?1:g>f?-1:0},compareTexts:function(a,b,c){var d=this._values[b],e=this._values[c];if(d===e)return 0;var f=d?d[a]:null,g=e?e[a]:null;return f===ta||null===f?g===ta||null===g?0:-1:g===ta||null===g?1:(f=String(f).toLocaleLowerCase(),g=String(g).toLocaleLowerCase(),f>g?1:g>f?-1:0)},compareNumbers:function(a,b,c){var d=this._values[b],e=this._values[c];if(d===e)return 0;var f=d?d[a]:NaN,g=e?e[a]:NaN;return isNaN(f)?isNaN(g)?0:-1:isNaN(g)?1:f>g?1:g>f?-1:0},compareDates:function(a,b,c){var d=this._values[b],e=this._values[c];if(d===e)return 0;var f=d?d[a]:null,g=e?e[a]:null;return f instanceof Date?g instanceof Date?f>g?1:g>f?-1:0:1:g instanceof Date?-1:0},compareBools:function(a,b,c){var d=this._values[b],e=this._values[c];if(d===e)return 0;var f=d?Boolean(d[a]):!1,g=e?Boolean(e[a]):!1;return f&&!g?1:!f&&g?-1:0},summarize:function(a,b){if(null==a)return!1;a.clear();var c=this.rowCount();if(1>c)return!1;var d,e,f,g=0,h=a.field,i=0,j=NaN,k=NaN;for(d=0;c>d;)if(e=this._values[d++],f=e?e[h]:NaN,!isNaN(f)){i=j=k=f,g++;break}for(;c>d;)e=this._values[d++],f=e?e[h]:NaN,isNaN(f)||(i+=f,j>f&&(j=f),f>k&&(k=f),g++);if(a.count=c,g>0)if(a.sum=i,a.min=j,a.max=k,a.avg=i/c,b){var l=0,m=a.avg;for(d=0;c>d;d++)e=this._values[d],f=e?e[h]:NaN,isNaN(f)||(l+=Math.pow(f-m,2));a.varsp=l/c,a.vars=l/(c-1)}else a.varsp=NaN,a.vars=NaN;return!0},summarizeRange:function(a,b,c){if(null==a||null==b)return!1;a.clear();var d=b.length;if(1>d)return!1;var e,f,g,h,i=0,j=a.field,k=0,l=NaN;for(max=NaN,e=0;d>e;)if(f=b[e++],g=this._values[f],h=g?g[j]:NaN,!isNaN(h)){k=l=max=h,i++;break}for(;d>e;)f=b[e++],g=this._values[f],h=g?g[j]:NaN,isNaN(h)||(k+=h,l>h&&(l=h),h>max&&(max=h),i++);if(a.count=d,i>0)if(a.sum=k,a.min=l,a.max=max,a.avg=k/d,c){var m=0,n=a.avg;for(e=0;d>e;e++)f=b[e],g=this._values[f],h=g?g[j]:NaN,isNaN(h)||(m+=Math.pow(h-n,2));a.varsp=m/d,a.vars=m/(d-1)}else a.varsp=NaN,a.vars=NaN;return!0},_doFieldsReset:function(){this.$_clearRows(),this._super()},exportToJson:function(){},exportToCsv:function(){for(var a=this.rowCount(),b=this.fieldCount(),c="",d=0;a>d;d++){var e=this._values[d],f="";if(e)for(var g=0;b>g;g++)f+=e[g],b-1>g&&(f+=",");c+=f,a-1>d&&(c+="\r\n")}return c},exportToXml:function(){},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(a,b){this.$_resetOrgValues()},copyRows:function(a,b,c,d){this._checkRowIndex(a);var e=this._values.length;if(b=Math.max(0,Math.min(b,e-a)),!(1>b||c>e)){for(var f=[],g=0;e>g;g++){for(var h=this._values[g+a],i=[],j=0,k=this._fields.length;k>j;j++){var l=h[j];this._fields[j].dataType()==ie.DATE?i[j]=typeof l==Date?new Date(l):l:i[j]=l}f.push(i)}var m=this._checkStates;d&&(this._checkStates=!1);try{this.insertRows(c,f)}finally{this._checkStates=m}}},_checkRowIndex:function(a){if(0>a||a>=this._values.length)throw new RangeError("row is out of bounds: "+a)},$_resetOrgValues:function(){var a=this.restoreMode();this._orgValues=this.isCheckStates()&&a!=ke.NONE?[]:null,this._needRestore=this._orgValues&&a==ke.AUTO},_arrayToRow:function(a,b){var c,d=Math.min(a?a.length:0,this._fields.length),e=new Array(d);for(c=0;d>c;c++)e[c]=this._fields[c].readValue(a[c]);return this.$_internalCalculateValues(e,b),e},_internalInsertRow:function(a,b){var c=this._arrayToRow(b,a),d=a==this._values.length;d?(this._values.push(c),this._rowIds.push(this._nextRowId++)):(this._values.splice(a,0,c),this._rowIds.splice(a,0,this._nextRowId++)),d?this._rowStates.push(this.isCheckStates()?je.CREATED:je.NONE):(this._rowStates.splice(a,0,this.isCheckStates()?je.CREATED:je.NONE),this._orgValues&&this._orgValues.splice(a,0,void 0))},_internalSetRow:function(a,b,c){var d=this._arrayToRow(b,a);this._values[a]=d,this._rowIds[a]=this._nextRowId++,this.isCheckStates()&&(this._rowStates[a]=je.NONE)},_xmlToRow:function(a){},_internalInsertXmlRow:function(a,b,c){},_internalSetXmlRow:function(a,b){},_internalUpdateRow:function(a,b,c,d){var e,f,g,h,i=this._fields,j=s(b),k=Math.min(i.length,j?b.length:i.length),l=this._values[a],m=this._rowStates[a],n=this.isCheckStates()&&(m==je.NONE||!m);l||(this._values[a]=l=[]),n&&this._orgValues&&(g=l.concat());var o=!1;for(e=0;k>e;e++)h=i[e],(h._updatable||m==je.CREATED||m==je.CREATE_AND_DELETED)&&(j||b.hasOwnProperty(h.orgFieldName()))&&(f=j?b[e]:b[h.orgFieldName()],c&&f===ta||(o=this._needRestore?o||(c?!h.equalValues(l[e],h.readValue(f)):!h.sameValues(l[e],h.readValue(f))):!0,l[e]=h.readValue(f)));o&&this.$_internalCalculateValues(l,a),n&&o?(g&&(this._orgValues[a]=g),this._changeRowState(a,je.UPDATED,d)):this._needRestore&&this.$_restoreState(a)},_internalUpdateXmlRow:function(a,b,c){},_internalRemoveRow:function(a){this._values.splice(a,1),this._rowIds.splice(a,1),this._orgValues&&this._orgValues.length>a&&this._orgValues.splice(a,1),this._rowStates.splice(a,1)},_internalMoveRow:function(a,b){var c=this._values[a],d=this._rowIds[a],e=this._rowStates[a];this._values.splice(a,1),this._rowIds.splice(a,1),this._rowStates.splice(a,1),this._values.splice(b,0,c),this._rowIds.splice(b,0,d),this._rowStates.splice(b,0,e),this._orgValues&&this._orgValues.length>a&&(c=this._orgValues[a],this._orgValues.splice(a,1),this._orgValues.splice(b,0,c))},_internalMoveRows:function(a,b,c){for(var d=this._values.splice(a,b),e=this._rowIds.splice(a,b),f=this._rowStates.splice(a,b),g=0,h=d.length;h>g;g++)this._values.splice(c+g,0,d[g]),this._rowIds.splice(c+g,0,e[g]),this._rowStates.splice(c+g,0,f[g]);this._orgValues&&this._orgValues.length>a&&(d=this._orgValues.splice(a,b),this._orgValues.splice(c+g,0,d[g]))},_changeRowState:function(a,b,c,d,e){if(this.isCheckStates()||d){var f=this._rowStates[a];if(b=b||je.NONE,b!=f)return this._rowStates[a]=b,e&&(!je.isDeleted(f)&&je.isDeleted(b)?this._deletedCount++:je.isDeleted(f)&&!je.isDeleted(b)&&this._deletedCount--),c&&this._fireRowStateChanged(a),!0}return!1},$_prepareOrgValues:function(a,b,c){c==je.UPDATED?this._orgValues[a]=this._values[a]?this._values[a].concat():[]:b==je.UPDATED&&this._orgValues[a]&&(this._orgValues[a]=void 0)},_changeRowStateEx:function(a,b,c,d,e){var f=this._rowStates[a];return this._changeRowState(a,b,!1,d,e)?(this._orgValues&&this.$_prepareOrgValues(a,f,b),c&&this._fireRowStateChanged(a),!0):!1}}),Nf=Xa("DataPath",null,{init:function(){Ya.init.call(this)}},{extractJson:function(a,b){var c=a;if(b=b&&b.trim(b))for(var d=b.split("."),e=0;e<d.length;e++){var f=d[e]&&d[e].trim();if(f){var g=f.indexOf("["),h=f.lastIndexOf("]");if(g>0&&h>g){var i=f.substring(0,g),j="$"!=i?c[i]:c;if(s(j)){i=f.substring(g+1,h);var k=parseInt(i);c=k>=0&&k<j.length?j[k]:null}else c=null}else"$"!=f&&(c=c[f]);if(!c)break}}return s(c)?c:null},extractXml:function(a,b){var c=null;if(b=b&&b.trim())for(var d=b.split("."),e=0;e<d.length;e++){var f=d[e]&&d[e].trim();if(f){var g=f.indexOf("["),h=f.lastIndexOf("]");if(g>0&&h>g){var i,j=f.substring(0,g);c=c?Z(c[0],j):Z(a,j),c&&(j=f.substring(g+1,h),i=parseInt(j),c=c[i])}else c=c?Z(c[0],f):Z(a,f);if(!c)break}}return c}}),Of=(Nf.prototype,Q({SET:"set",APPEND:"append",INSERT:"insert",UPDATE:"update"})),Pf=function(a){if(this.fillMode=Of.SET,this.fillPos=0,this.count=-1,this.rootArray=!0,this.rows="row",this.start=0,this.delimiter=",",this.quoted=!1,this.parentId=0,this.childrenField=null,this.treeField=null,this.iconField=null,this.needSorting=!1,a){a.hasOwnProperty("append")&&(this.fillMode=Of.APPEND),a.hasOwnProperty("fillMode")&&(this.fillMode=a.fillMode),a.hasOwnProperty("fillPos")&&(this.fillPos=a.fillPos),a.hasOwnProperty("count")&&(this.count=a.count),a.hasOwnProperty("rootArray")&&(this.rootArray=a.rootArray),a.hasOwnProperty("rows")&&(this.rows=a.rows),a.hasOwnProperty("start")&&(this.start=a.start),a.hasOwnProperty("delimiter")&&(this.delimiter=a.delimiter),a.hasOwnProperty("quoted")&&(this.quoted=a.quoted);for(var b in a)void 0!==a[b]&&(this[b]=a[b]);this.parentId=a.parentId||a.parent,this.childrenField=a.childrenField||a.children,this.treeField=a.treeField||a.tree,this.iconField=a.iconField||a.icon,this.needSorting=a.needSorting||a.sorting}},Qf=Xa("DataLoader",null,{init:function(a){Ya.init.call(this),this._provider=a},load:function(a,b,c){if(c=new Pf(c),this.$_checkEmpty(b,c))return 0;switch(this.$_prepareLoad(b,c),a=a&&a.toLowerCase()){case"json":return this.$_loadJson(b,c);case"xml":return this.$_loadXml(b,c);case"csv":return this.$_loadCsv(b,c)}return 0},$_loadJson:function(a,b){"string"==typeof a&&(a=JSON.parse(a));var c=null;if(b.rootArray&&(c=t(a)),c||(c=Nf.extractJson(a,b.rows)),c){var d=b.fillPos,e=b.start,f=b.count;switch(b.fillMode){case Of.APPEND:this._provider.addRows(c,e,f);break;case Of.INSERT:this._provider.insertRows(d,c,e,f);break;case Of.UPDATE:this._provider.updateRows(d,c,e,f);break;case Of.SET:default:this._provider.setRows(c,e,f)}return c.length}return this.$_fillEmpty(b),0},$_loadXml:function(a,b){if("string"==typeof a&&(a=X(a)),a&&a.documentElement){var c=b.fillPos,d=b.start,e=b.count,f=b.rows,g=Nf.extractXml(a.documentElement,f);switch(b.fillMode){case Of.APPEND:this._provider.appendXmlRows(g,d,e);break;case Of.INSERT:this._provider.insertXmlRows(c,g,d,e);break;case Of.UPDATE:this._provider.updateXmlRows(c,g,d,e);break;case Of.SET:default:this._provider.setXmlRows(g,d,e)}return g.length}return this.$_fillEmpty(b),0},$_loadCsv:function(a,b){var c=b.fillPos,d=b.start,e=b.count,f=b.quoted,g=b.delimiter,h=Jf.csvToArray(this._provider,a,d,e,f,g);if(h&&(e=h.length)>0){switch(b.fillMode){case Of.APPEND:this._provider.addRows(h,0,e);break;case Of.INSERT:this._provider.insertRows(c,h,0,e);break;case Of.UPDATE:this._provider.updateRows(c,h,0,e);break;case Of.SET:default:this._provider.setRows(h,0,e)}return h.length}return this.$_fillEmpty(b),0},$_fillEmpty:function(a){a.fillMode===Of.SET&&this._provider.setRows(null)},$_checkEmpty:function(a,b){return a?!1:(this.$_fillEmpty(b),!0)},$_prepareLoad:function(a){var b=null;a.filters&&(b=new If(this._provider.filterRuntime(),a.filters),a.filterMode&&b.setFilterMode(a.filterMode))}}),Rf=1,Sf=4,Tf=16,Uf=32,Vf=0,Wf=Xa("GridItem",null,{init:function(){this._super(!0),this._id=Vf++,this._index=-1,this._parent=null,this._extents=0},id:function(){return this._id},index:function(){return this._index},parent:function(){return this._parent},parentIndex:function(){return this._parent?this._parent._index:-1},root:function(){for(var a=this;a.level()>1;)a=a.parent();return a},childIndex:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent.level()+1},isLeaf:function(){return!0},isVisible:function(){return this._parent&&this._index>=0},displayLevel:function(){return this.level()},provider:function(){return this._parent.provider()},dataSource:function(){return this._parent.dataSource()},dataRow:function(){return-1},dataId:function(){return-1},rowState:function(){var a,b=this.dataRow();return b>=0?(a=this.dataSource(),a?a.getRowState(b):je.NONE):je.NONE},itemState:function(){return me.NORMAL},isChecked:function(){return 0!=(this._extents&Rf)},setChecked:function(a){this._parent.provider().checkItem(this,a)},$_setChecked:function(a){this._extents=a?this._extents|Rf:this._extents&~Rf},isCheckable:function(){return 0==(this._extents&Sf)},setCheckable:function(a){this._parent.provider().setCheckable(this,a)},$_setCheckable:function(a){this._extents=a?this._extents&~Sf:this._extents|Sf},isEditable:function(){return!1},isReadOnly:function(){return 0!=(this._extents&EXT_READONLY)},setReadOnly:function(a){this._extents=a?this._extents|EXT_READONLY:this._extents&~EXT_READONLY},isResizable:function(){return!1},getAncestor:function(a){if(a<this.level()){for(var b=this._parent;b.level()>a;)b=b._parent;return b}return null},getAncestors:function(){var a=null,b=this._parent;if(b){a=[];do a.push(b),b=b._parent;while(b)}return a},isDescendantOf:function(a){if(a){for(var b=this._parent;b&&b!=a;)b=b._parent;return b===a}return!1},getData:function(a){var b=this.dataSource(),c=this instanceof tj?this.firstItem().dataRow():this instanceof sj?this.parent().firstItem().dataRow():this.dataRow();return b?b.getValue(c,a):ta},setData:function(a,b){var c=this.dataSource();c&&c.setValue(dataRow,a,b)},getRowData:function(){var a=this.dataRow();if(a>=0){var b=this.dataSource();if(b)return b.getRow(a)}return null},getRowObject:function(){var a=this.dataSource();return a?a.getRowObject(dataRow):null},canEdit:function(){return!1},makeVisible:function(){this._parent.setExpanded(!0),this._parent.makeVisible()},isMerged:function(){return!1},setIndex:function(a){this._index=a}}),Xf=Xa("GridRow",Wf,{init:function(a){this._super(),this._dataRow=a,this._displayLevel=-1},getDataRow:function(){return this._dataRow},dataRow:function(){return this._dataRow},dataId:function(){return this.dataSource().getRowId(this._dataRow)},isEditable:function(){return!0},isResizable:function(){return!0},displayLevel:function(){return this._displayLevel>=0?this._displayLevel:this.level()},canEdit:function(){return!0},getData:function(a){return this.dataSource().getValue(this._dataRow,a)},setData:function(a,b){this.dataSource().setValue(this._dataRow,a,b)}}),Yf=Xa("GroupItem",Wf,{init:function(){this._super(),this._children=[],this._descendantCount=0,this._summaries=null,this._rows=null},expanded:!1,count:function(){return this._children.length},children:function(){return this._children.slice()},setExpanded:function(a,b,c){(a!=this._expanded||c)&&(a?this.provider().expand(this,b,c):this.provider().collapse(this,b))},isCollapsed:function(){return!this.isExpanded()},footer:function(){return null},first:function(){return this._children.length>0?this._children[0]:null},last:function(){var a=this._children.length;return a>0?this._children[a-1]:null},firstItem:function(){if(this._children.length>0){var a=this._children[0];return a instanceof Yf?a.firstItem():a}return null},lastItem:function(){if(this._children.length>0){var a=this._children[this._children.length-1];return a instanceof Yf?a.lastItem():a}return null},descendantCount:function(){return this._descendantCount},firstVisibleItem:function(){for(var a=0,b=this._children.length;b>a;a++){var c=this._children[a];if(c.isVisible())return c}return null},isExpandable:function(){return!0},isCollapsable:function(){return!0},getItem:function(a){if(0>a||a>=this._children.length)throw new RangeError("index is invalid: "+a);return this._children[a]},itemOfRow:function(a){for(var b=this._children.length;b--;)if(this._children[b].dataRow()==a)return this._children[b];return null},indexOf:function(a){var b,c=this._children.length;for(b=0;c>b;b++)if(this._children[b]==a)return b;return-1},isDescendant:function(a){if(a&&a!==this){for(var b=a._parent;b&&b!=this;)b=b._parent;return b===this}return!1},getDescendants:function(a){function b(c,d){var e,f,g,h=c.count();for(e=0;h>e;e++)d.push(f=c.getItem(e)),g=ab(f,Yf),!g||a&&!g.isExpanded()||b(g,d)}if((!a||this._expanded)&&this._children&&this._children.length>0){var c=[];return b(this,c),c}return null},clear:function(){this._summaries=null,this._children.splice(0,this._children.length)},insert:function(a,b){this._addChild(b,a)},add:function(a){this._addChild(a,-1)},addAll:function(a){this._addChildren(a)},remove:function(a){var b=this.indexOf(a);b>=0&&(this._children.splice(b,1),a instanceof Wf&&(a._parent=null))},setItem:function(a,b){if(a&&b&&a!=b){var c=this._removeChild(a);this._insertChild(c,b),b instanceof Wf&&(b._index=a.index())}},getNumber:function(a){var b=this.$_getSummary(a);return b instanceof Lf?b.count:b?b.length:this._descendantCount},getSum:function(a){var b=this.$_getSummary(a);if(b instanceof Lf)return b.sum;if(b){var c,d,e=this.dataSource(),f=b.length,g=0;for(d=0;f>d;d++)c=e.getValue(b[d],a),isNaN(c)||(g+=c);return g}return NaN},getMax:function(a){var b=this.$_getSummary(a);if(b instanceof Lf)return b.max;if(b){var c,d,e,f=this.dataSource(),g=b.length;if(g>1){c=NaN,e=0;do c=f.getValue(b[e++],a);while(isNaN(c)&&g>e);for(;g>e;)d=f.getValue(b[e++],a),!isNaN(d)&&d>c&&(c=d);return c}if(1==g)return c=f.getValue(b[0],a)}return NaN},getMin:function(a){var b=this.$_getSummary(a);if(b instanceof Lf)return b.min;if(b){var c,d,e,f=this.dataSource(),g=b.length;if(g>1){c=NaN,e=0;do c=f.getValue(b[e++],a);while(isNaN(c)&&g>e);for(;g>e;)d=f.getValue(b[e++],a),!isNaN(d)&&c>d&&(c=d);return c}if(1==g)return c=f.getValue(b[0],a)}return NaN},getAvg:function(a){var b=this.$_getSummary(a);if(b instanceof Lf)return b.avg;if(b){var c,d,e=this.dataSource(),f=b.length;if(f>1){for(c=0,d=0;f>d;d++)c+=e.getValue(b[d],a);return c/f}if(1==f)return c=e.getValue(b[0],a)}return NaN},getVar:function(a,b){var c=this.$_getSummary(a);if(c instanceof Lf)return b=c.vars;if(c&&this.summaryMode()==Fe.STATISTICAL){var d,e,f,g=this.dataSource(),h=c.length;if(h>1){for(d=0,e=0;h>e;e++)d+=g.getValue(c[e],a);for(f=d/h,d=0,e=0;h>e;e++)d+=Math.pow(g.getValue(c[e],a)-f,2);return d/=h-b}if(1==h)return 0}return NaN},getStdev:function(a,b){var c=this.$_getSummary(a);if(c instanceof Lf)return 0==b?Math.sqrt(c.varsp):Math.sqrt(c.vars);if(c&&this.summaryMode()==Fe.STATISTICAL){var d,e,f,g=this.dataSource(),h=c.length;if(h>1){for(d=0,e=0;h>e;e++)d+=g.getValue(c[e],a);for(f=d/h,d=0,e=0;h>e;e++)d+=Math.pow(g.getValue(c[e],a)-f,2);return d=Math.sqrt(d/(h-b))}if(1==h)return 0}return NaN},summaryMode:function(){return this.provider().summaryMode()},_setExpanded:function(a){this._expanded=a},_incDescendants:function(a){this._descendantCount+=a},_insertChild:function(a,b){this._children.splice(a,0,b),b instanceof Wf&&(b._parent=this)},_addChild:function(a,b){a&&this.indexOf(a)<0&&(0>b?this._children.push(a):this._children.splice(b,0,a),a._parent=this)},_addChildren:function(a){var b;if(a&&(b=a.length)>0){var c,d;for(c=0;b>c;c++)d=a[c],d&&this.indexOf(d)<0&&(d._parent=this,this._children.push(d))}},_removeChild:function(a){var b=this.indexOf(a);return b>=0&&(this._children.splice(b,1),a instanceof Wf&&(a._parent=null)),b},attachItem:function(a){a&&(a._parent=this)},detachItem:function(a){a&&item_parent==this&&(a._parent=null)},_exchangeItems:function(a,b){if(0>a||a>=this._children.length)throw new RangeError("index1 is out of range: "+a);if(0>b||b>=this._children.length)throw new RangeError("index2 is out of range: "+b);if(a!==b){var c=this._children[a];this._children[a]=this._children[b],this._children[b]=c}},_moveChild:function(a,b){var c=this._children.length;if(0>a||a>=c)throw new RangeError("index is out of range: "+a);var d=Math.min(Math.max(a+b,0),c-1),e=this._children[a];if(0>b)for(var f=a;f>d;f--)this._children[f]=this._children[f-1];else for(var f=a;d>f;f++)this._children[f]=this._children[f+1];this._children[d]=e},_changeParent:function(a,b,c){var d=this._parent;d.remove(this),a._addChild(this,b),c&&a.setExpanded(!0)},$_getRows:function(){var a=[];return this.$_collectRows(this,a),a},$_collectRows:function(a,b){var c,d,e=a.count();for(c=0;e>c;c++)if(d=a.getItem(c),d instanceof Yf)this.$_collectRows(d,b);else{var f=d.dataRow();f>=0&&b.push(f)}},$_getSummary:function(a){var b=ab(this.dataSource(),Df);if(!b)return null;null==this._summaries&&(this._summaries={});var c=this._summaries?this._summaries[a]:null;return c||b.canSummarize(a)&&(c=this.$_summarize(a,b),c&&(this._summaries[a]=c)),c},$_summarize:function(a,b){var c=3,d=this.summaryMode();if(d!=Fe.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>c&&b.canSummarize(a)){var e=new Lf(a);return b.summarizeRange(e,this._rows,d==Fe.STATISTICAL),e}return this._rows}return null}}),Zf=Xa("GroupItemImpl",Yf,{init:function(a){this._super(),this._groupField=a,this._footer=null,this._header=null},groupField:function(){return this._groupField},footer:function(){return this._footer},_addChild:function(a,b){this._super(a,b),a instanceof $f&&(this._footer=a)}}),$f=Xa("GroupFooter",Wf,{init:function(){this._super()},expandable:!1,displayLevel:function(){return this._expandable?this.level()-1:this.level()}}),_f=Xa("RootItem",Zf,{init:function(a){this._super(-1),this._provider=a},provider:function(){return this._provider},level:function(){return 0},isExpanded:function(){return!1},isLeaf:function(){return!1},isVisible:function(){return!0},dataSource:function(){return this._provider.dataSource()},isExpandable:function(){return!1},isCollapsable:function(){return!1}}),ag=Xa("ItemProvider",bb,{init:function(a){this._super(),this._indexing=a,this._rootItem=this._createRootItem(),this._eventLock=0},hideDeleted:!1,dataSource:function(){_a()},itemCount:function(){_a()},getItem:function(a){_a()},getItems:function(a,b){_a()},attachItem:function(a){a&&(a._parent=this._rootItem)},refreshItems:function(){_a()},getItemsByIndices:function(a){var b=[];if(a)for(var c=0,d=a.length;d>c;c++){var e=this.getItem(a[c]);e&&b.push(e)}return b},getIndexOfRow:function(a){var b=this.getItemOfRow(a);return b?b.index():-1},getIndicesOfRows:function(a){var b=[],c=a?a.length:0;if(c)for(var d=0;c>d;d++){var e=this.getItemOfRow(a[d]);b.push(e?e.index():-1)}return b},getItemOfRow:function(a){_a()},getItemsByRows:function(a){var b,c,d=[],e=a?a.length:0;for(b=0;e>b;b++)c=this.getItemOfRow(a[b]),c&&d.push(c);return d},exchange:function(a,b){_a()},setCheckable:function(a,b){a&&b!=a.isCheckable()&&(a.$_setCheckable(b),this._fireCheckableChanged(a))},_clearChecked:function(){for(var a=0,b=this.itemCount();b>a;a++)this.getItem(a).$_setChecked(!1)},checkItem:function(a,b,c){if(a){var d=a.isChecked();c?(this._clearChecked(),b&&a.$_setChecked(!0),b!=d&&this._fireItemChecked(a),this._fireRefreshClient()):b!=d&&(a.$_setChecked(b),this._fireItemChecked(a))}},checkItems:function(a,b){if(a&&a.length>0){for(var c=0,d=a.length;d>c;c++){var e=a[c];e instanceof Wf&&e.$_setChecked(b)}this._fireItemsChecked(a,b)}},checkAll:function(a,b,c){var d,e,f=this.itemCount();if(c)for(d=0;f>d;d++)e=this.getItem(d),e.isCheckable()&&e.$_setChecked(a);else for(d=0;f>d;d++)this.getItem(d).$_setChecked(a);this._fireItemAllChecked(a)},_setCheckItem:function(a,b){a.$_setChecked(b)},_clearDisplayLevels:function(){},hasCellStyle:function(){return!1},setCellStyle:function(a,b,c){},setCellStyles:function(a,b,c){},clearCellStyles:function(){},removeCellStyle:function(a){},getCellStyle:function(a,b){return null},canUpdate:function(a,b){if(a){var c=a.dataRow(),d=this.dataSource(),e=me.isInserting(a.itemState());return(c>=0||e)&&d&&(e||d.canUpdateRow(c))&&d.canUpdateField(c,b)}return!1},canAppend:function(){var a=this.dataSource();return a&&a.canAppendRow()},canInsert:function(a){if(a){var b=a.dataRow(),c=this.dataSource();return c&&c.canInsertRow(b)}return!1},canDelete:function(a){if(a){var b=a.dataRow(),c=this.dataSource();return b>=0&&c&&c.canDeleteRow(b)}return!1},getAllItems:function(){_a()},findItem:function(a,b,c,d,e){_a()},getSum:function(a){return NaN},getMax:function(a){return NaN},getMin:function(a){
return NaN},getAvg:function(a){return NaN},getVar:function(a){return NaN},getStdev:function(a){return NaN},isIndexing:function(){return this._indexing},_createRootItem:function(){return new _f(this)},_resetItemIndicies:function(a){if(this._indexing)for(var b=a,c=this.itemCount();c>b;b++)this.getItem(b)._index=b},_setExpanded:function(a,b){a._setExpanded(b)},_resetItemIndex:function(a){var b=this.getItem(a);b&&(b._index=a)},_incDescendents:function(a,b){a._descendantCount+=b,a.parent()&&this._incDescendents(a.parent(),b)},_copyExtents:function(a,b){a instanceof Wf&&b instanceof Wf&&(b._extents=a._extents)},_fireReset:function(){this._eventLock<=0&&this.fireEvent(ag.RESET)},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(ag.REFRESH)},_fireRefreshClient:function(){this._eventLock<=0&&this.fireEvent(ag.REFRESH_CLIENT)},_fireItemInserted:function(a){this._eventLock<=0&&this.fireEvent(ag.ITEM_INSERTED,a)},_fireItemDeleted:function(a){this._eventLock<=0&&this.fireEvent(ag.ITEM_DELETED,a)},_fireItemUpdated:function(a){this._eventLock<=0&&this.fireEvent(ag.ITEM_UPDATED,a)},_fireCheckableChanged:function(a){this._eventLock<=0&&this.fireEvent(ag.CHECKABLE_CHANGED,a)},_fireItemChecked:function(a){this._eventLock<=0&&this.fireEvent(ag.ITEM_CHECKED,a)},_fireItemsChecked:function(a,b){this._eventLock<=0&&this.fireEvent(ag.ITEMS_CHECKED,a,b)},_fireItemAllChecked:function(a){this._eventLock<=0&&this.fireEvent(ag.ITEM_ALL_CHECKED,a)},_fireRowStateChanged:function(a){this._eventLock<=0&&this.fireEvent(ag.ROW_STATE_CHANGED,a)},_fireRowStatesChanged:function(a){this._eventLock<=0&&this.fireEvent(ag.ROW_STATES_CHANGED,a)},_fireRowStatesCleared:function(){this._eventLock<=0&&this.fireEvent(ag.ROW_STATES_CLEARED)},_fireSort:function(a,b,c){this._eventLock<=0&&this.fireEvent(ag.SORT,a,b,c)},_fireSorted:function(){this._eventLock<=0&&this.fireEvent(ag.SORTED)},_fireFilterAdded:function(a,b){this._eventLock<=0&&this.fireEvent(ag.FILTER_ADDED,a,b)},_fireFilterRemoved:function(a,b){this._eventLock<=0&&this.fireEvent(ag.FILTER_REMOVED,a,b)},_fireFilterCleared:function(a){this._eventLock<=0&&this.fireEvent(ag.FILTER_CLEARED,a)},_fireFilterAllCleared:function(){this._eventLock<=0&&this.fireEvent(ag.FILTER_ALL_CLEARED)},_fireFiltered:function(){this._eventLock<=0&&this.fireEvent(ag.FILTERED)}});ag.RESET="onItemProviderReset",ag.REFRESH="onItemProviderRefresh",ag.REFRESH_CLIENT="onItemProviderRefreshClient",ag.ITEM_INSERTED="onItemProviderItemInserted",ag.ITEM_DELETED="onItemProviderItemDeleted",ag.ITEM_UPDATED="onItemProviderItemUpdated",ag.CHECKABLE_CHANGED="onItemProviderCheckableChanged",ag.ITEM_CHECKED="onItemProviderItemChecked",ag.ITEMS_CHECKED="onItemProviderItemsChecked",ag.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",ag.ROW_STATE_CHANGED="onItemProviderRowStateChanged",ag.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",ag.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",ag.SORT="onItemProviderSort",ag.SORTED="onItemProviderSorted",ag.FILTER_ADDED="onItemProviderFilterAdded",ag.FILTER_REMOVED="onItemProviderFilterRemoved",ag.FILTER_CLEARED="onItemProviderFilterCleared",ag.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",ag.FILTERED="onItemProviderFiltered";var bg=Xa("CellStyleMap",vf,{init:function(a){this._super(),this._owner=a,this._styleMap=[]},isEmpty:function(){return 0==this._styleMap.length&&!this._styleMap[-1]},setCellStyle:function(a,b,c){if(0>b)this._styleMap[a]=c;else{var d,e=this._styleMap[a];if(e)if(s(e))e[b]=c;else{var f,g=this._owner.dataSource().fieldCount();for(d=[],f=0;g>f;f++)d[f]=e;this._styleMap[a]=d}d=this._styleMap[a],d||(d=[]),d[b]=c,this._styleMap[a]=d}},setCellStyles:function(a,b,c){function d(b,c,d,e){var f,g,h,i,j,k=d.length,l=Math.min(e.length,c.fieldCount());for(f=0;k>f;f++)if(j=d[f],s(j))for(g=0;l>g;g++)h=e[g],h>=0&&(i=a.getStyle(j[h]),i&&b.setCellStyle(f,g,i))}function e(b,c,d){for(var e=0,f=c.length;f>e;e++){var g=c[e];if(g)for(var h in d){var i=d[h],j=a.getStyle(g[h]);j&&b.setCellStyle(e,i,j)}}}if(b&&!(b.length<1)&&c){var f,g,h,i=this._owner.dataSource(),j=i.fieldCount(),k=c;if(s(k)){for(k=k.concat(),h=Math.min(j,k.length),f=0;h>f;f++)g=parseInt(k[f]),isNaN(g)||0>g?k[f]=-1:k[f]=g;d(this,i,b,k)}else{k={};for(var l in c)g=parseInt(c[l]),isNaN(g)&&(g=i.getFieldIndex(c[l])),g>=0&&j>g&&(k[l]=g);e(this,b,k)}}},removeCellStyle:function(a){for(var b=0,c=this._styleMap.length;c>b;b++){var d=this._styleMap[b];if(s(d))for(var e=d.length-1;e>=0;e--)d[e]===a&&(d[e]=null);else this._styleMap[b]===a&&delete this._styleMap[b]}},clearCellStyles:function(){this._styleMap=[]},checkCellStyle:function(a,b){var c=this._styleMap[a];return s(c)?!!c[b]:!!c},getCellStyle:function(a,b){var c=this._styleMap[a];return s(c)?c[b]:c},connect:function(a){},disconnect:function(){},clearRows:function(){this._styleMap=[]},setRows:function(){this._owner.dataSource()&&(this._styleMap.length=Math.min(this._styleMap.length,this._owner.dataSource().rowCount()))},setRowCount:function(a){this._styleMap.length=a},insertRow:function(a){this._styleMap.splice(a,0,null)},insertRows:function(a,b){for(var c=0;b>c;c++)this._styleMap.splice(a,0,null)},removeRow:function(a){this._styleMap.splice(a,1)},removeRows:function(a){for(var b=a.length-1;b>=0;b--)this._styleMap.splice(a[b],1)},updateRow:function(){},updateRows:function(a,b){},setValue:function(a,b){},moveRow:function(a,b){var c=this._styleMap.splice(a,1);this._styleMap.splice(b,c[0])},moveRows:function(a,b,c){for(var d=this._styleMap.splice(a,b),e=0;b>e;e++)this._styleMap.splice(c+e,0,d[e])}}),cg=Xa("ItemCheckableTag",null,{init:function(a,b){this._super(),this._owner=a,this._exprNode=vc.Default.parse(b,["value","values"]),this._runtime=new Lm},connect:function(a){this._runtime.setDataSource(a)},disconnect:function(){},clearRows:function(){cg.clearCheckables(this._owner)},setRows:function(){for(var a=this._owner.itemCount();a--;)this.$_setCheckable(this._owner.getItem(a))},insertRow:function(a){this.$_setCheckable(a)},insertRows:function(a,b){for(var c=0;b>c;c++){var d=this._owner.getItemOfRow(a+c);d instanceof Wf&&this.$_setCheckable(d)}},updateRow:function(a){this.$_setCheckable(a)},updateRows:function(a,b){for(var c=0;b>c;c++){var d=this._owner.getItemOfRow(a+c);d instanceof Wf&&this.$_setCheckable(d)}},changeStates:function(a){if(a)for(var b=a.length;b--;){var c=this._owner.getItemOfRow(a[b]);c instanceof Wf&&this.$_setCheckable(c)}},$_setCheckable:function(a){this._runtime.setItem(a),a.$_setCheckable(this._exprNode.evaluate(this._runtime))}},{clearCheckables:function(a){for(var b=a.itemCount();b--;)a.getItem(b).$_setCheckable(!0)}}),dg=Xa("DefaultItemProvider",ag,{init:function(a){this._super(a),this._dataSource=null,this._rows=[],this._filteredItems=[],this._pageItems=[],this._sorteditems=[],this._pubItems=this._items=this._rows,this._distinctRows=[],this._cellStyles=new bg(this),this._fixedCount=0,this._fixedSorting=!1,this._maxItemCount=0,this._itemCount=0,this._pubCount=0,this._filtered=!1,this._hideDeleted=!1,this._filters=[],this._filterRuntime=new Hm,this._filterLock=0,this._fixedFiltering=!1,this._sorted=!1,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._sorter=null,this._paging=!1,this._pagingSource=ne.ROWS,this._pageSize=10,this._pageCount=-1,this._pageStartIndex=-1,this._currPage=0,this._pageStart=0,this._summaryMode=Fe.AGGREGATE,this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null},hideDeleted:!1,setHideDeleted:function(a){a!=this._hideDeleted&&(this._hideDeleted=a,this.$_buildItems(),this._fireRefresh())},isFiltered:function(){return this._filtered},isSorted:function(){return this._sorted},isPaging:function(){return this._paging},pageStartIndex:function(){return this._pageStart},sorter:function(){return this._sorter||this._defSorter},setSorter:function(a){this._sorter=a},setSummaryMode:function(a){a!=this._summaryMode&&(this._summaryMode=a,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},sortMode:re.AUTO,filterMode:ve.AUTO,checkableExpression:function(){return this._checkableExpression},setCheckableExpression:function(a){a!=this._checkableExpression&&(this._checkableExpression=a,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),a&&(this._checkableTag=new cg(this,a),this._dataSource&&this._checkableTag.connect(this._dataSource)))},getFieldDomain:function(a){var b,c=this._rows,d=c.length,e=[],f=ta,g=ta;for(b=0;d>b;b++)f=this._dataSource.getValue(b,a),f!=g&&e.indexOf(f)<0&&e.push(f),g=f;return e},beginFilter:function(){this._filterLock++},endFilter:function(a){a=arguments.length>0?a:!0,this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&a&&this.applyFilters())},hasFilter:function(a){var b=this._filters[a];return b&&b.length>0},addFilter:function(a,b){if(a>=0){this._fireFilterAdded(a,b);var c=this._filters[a];c||(c=[],this._filters[a]=c);var d=new Pg(b);return c.push(d),this.applyFilters(),d}},removeFilter:function(a,b){if(this._filtered&&this._filters[a]){this._fireFilterRemoved(a,b);var c=this._filters[a],d=c.indexOf(b);d>=0&&(c.splice(d,1),this.applyFilters())}},clearFilters:function(a){if(this._filtered&&this._filters[a]){this._fireFilterCleared(a);var b=this._filters[a];b.length>0&&(b.length=0,delete this._filters[a],this.applyFilters())}},clearAllFilters:function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},hasFilters:function(){var a,b,c=this._filters.length;for(a=0;c>a;a++)if(b=this._filters[a],b&&b.length>0)return!0;return!1},applyFilters:function(a){if(a=arguments.length>0?a:!0,!(this._filterLock>0)){this.$_buildItems();try{a&&this._fireRefresh()}finally{this._fireFiltered()}}},orderBy:function(a,b,c,d){d=arguments.length>3?d:!0,this._fireSort(a,b,c),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var e=a?a.length:0,f=b?b.length:0,g=c?c.length:0,h=0;e>h;h++)this._sortFields.push(a[h]),f>h?this._sortDirections.push(b[h]):f>0?this._sortDirections.push(b[f-1]):this._sortDirections.push(te.ASCENDING),g>h?this._sortCases.push(c[h]):g>0?this._sortCases.push(c[g-1]):this._sortCases.push(ue.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{d&&this._fireRefresh()}finally{this._fireSorted()}},getSortFields:function(){return this._sortFields.slice()},getSortDirections:function(){return this._sortDirections.slice()},getSortCases:function(){return this._sortCases.concat()},setPaging:function(a,b,c,d){b=arguments.length>1?b:10,c=arguments.length>2?c:-1,b=Math.max(b,1),c=Math.max(c,-1),(a!=this._paging||b!=this._pageSize||c!=this._pageCount||d!=this._pagingSource)&&(this._currPage=0,this._paging=a,this._pagingSource=d,this._pageSize=b,this._pageCount=c,this.$_buildItems(),this._fireRefresh())},getPage:function(){return this._paging?this._currPage:-1},page:function(){return this._paging?this._currPage:-1},setPage:function(a,b){a=isNaN(a)?0:a,b=arguments.length>0?b:-1,this._paging&&(a=Math.max(0,Math.min(this.pageCount()-1,a)),b=Math.max(-1,b),(a!=this._currPage||b!=this._pageStartIndex)&&(this._currPage=a,this._pageStartIndex=b,this.$_buildPage(),this._fireRefresh()))},pageCount:function(){return this._paging?this._pageCount>=0?this._pageCount:Na((this._dataSource.rowCount()+this._pageSize-1)/this._pageSize):0},setPageCount:function(a){this._paging&&(a=Math.max(-1,a),a!=this._pageCount&&(this._pageCount=a,this.$_buildPage(),this._fireRefresh()))},getCheckedRows:function(){var a,b,c=this.itemCount(),d=[];for(a=0;c>a;a++)b=this._pubItems[a],b.isChecked()&&d.push(b.dataRow());return d},resetCheckables:function(){for(var a=this._rows.length;a--;)this._rows[a].$_setCheckable(!0);this._fireRefresh()},applyCheckables:function(){this._checkableTag?this._checkableTag.setRows():cg.clearCheckables(this),this._fireRefresh()},dataSource:function(){return this._dataSource},setDataSource:function(a){a!==this._dataSource&&(this.$_clearRows(),this._dataSource&&(this._dataSource.removeTag(this._cellStyles),this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this)),this._dataSource=a,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.addTag(this._cellStyles)),this.$_resetSummary(),this._fireReset())},itemCount:function(){return this._pubCount},fixedCount:function(){return this._fixedCount},maxItemCount:function(){return this._maxItemCount},setMaxItemCount:function(a){a=Math.max(0,a),a!=this._maxItemCount&&(this._maxItemCount=a,this.refreshItems())},hideDeleted:function(){return this._hideDeleted},setHideDeleted:function(a){a!=this._hideDeleted&&(this._hideDeleted=a,this.$_buildItems(),this._fireRefresh())},getItem:function(a){return 0>a||a>=this._pubCount?null:this._pubItems[a]},getItems:function(a,b){return this._pubItems.slice(a,a+b)},getIndexOfRow:function(a){return a>=0&&a<this._rows.length?this._rows[a]._index:-1},getItemOfRow:function(a){if(a>=0&&a<this._rows.length){var b=this._rows[a];return b._index>=0?b:null}return null},refreshItems:function(){this.$_clearRows(),this.$_buildRows(),this._fireRefresh()},setFixed:function(a,b,c){a=Math.max(0,a),(a!=this._fixedCount||b!=this._fixedSorting||c!=this._filtering)&&(this._fixedCount=a,this._fixedSorting=b,this._fixedFiltering=c,this.$_buildItems(),this._fireRefresh())},exchange:function(a,b){if(a!=b&&!this._sorted&&!this._filtered){if(0>a||a>=this._rows.length)throw new Error("index1 is out of bounds: "+a);if(0>b||b>=this._rows.length)throw new Error("index2 is out of bounds: "+a);var c=this._rows[a];this._rows[a]=this._rows[b],this._rows[b]=c}},clearDisplayLevels:function(){var a,b=this._rows,c=b.length;for(a=0;c>a;a++)b[a]._displayLevel=-1},getAllItems:function(){return this._pubItems.slice()},hasCellStyle:function(){return!this._cellStyles.isEmpty()},setCellStyle:function(a,b,c){this._cellStyles.setCellStyle(a,b,c)},setCellStyles:function(a,b,c){this._cellStyles.setCellStyles(a,b,c)},removeCellStyle:function(a){this._cellStyles.removeCellStyle(a)},clearCellStyles:function(){this._cellStyles.clearCellStyles()},checkCellStyle:function(a,b){return this._cellStyles.checkCellStyle(a,b)},getCellStyle:function(a,b){return this._cellStyles.getCellStyle(a,b)},getNumber:function(a){var b=this.$_getSummary(a);return b?b.count:this.itemCount()},getSum:function(a){var b=this.$_getSummary(a);return b?b.sum:NaN},getMax:function(a){var b=this.$_getSummary(a);return b?b.max:NaN},getMin:function(a){var b=this.$_getSummary(a);return b?b.min:NaN},getAvg:function(a){var b=this.$_getSummary(a);return b?b.avg:NaN},getVar:function(a){var b=this.$_getSummary(a);return b?b.vars:NaN},getVarp:function(a){var b=this.$_getSummary(a);return b?b.varsp:NaN},getStdev:function(a){var b=this.$_getSummary(a);return b?Math.sqrt(b.vars):NaN},getStdevp:function(a){var b=this.$_getSummary(a);return b?Math.sqrt(b.varsp):NaN},$_clearRows:function(){this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems=null,this._pubItems=this._rows,this.$_clearDistincts()},$_clearIndicies:function(){for(var a=this._rows.length;a--;)this._rows[a]._index=-1},$_clearDistincts:function(){for(var a=this._distinctRows.length;a--;)this._distinctRows[a]=null;this._distinctRows.length=0},$_checkFiltered:function(){return this._dataSource?(this._filters.length=this._dataSource.fieldCount(),this.hasFilters()||this._hideDeleted&&this._dataSource.deletedCount()>0):!1},$_select:function(a,b,c){for(var d=a.length,e=0;d>e;e++)if(a[e].select(this._filterRuntime,b,c))return!0;return!1},$_checkSorted:function(){for(var a=this._sortFields.length-1;a>=0;a--)this._sortFields[a]>this._dataSource.fieldCount()&&(this._sortFields.splice(a,1),this._sortDirections.splice(a,1),this._sortCases.splice(a,1));return this._sortFields&&this._sortFields.length>0},$_buildRows:function(){var a=this._dataSource;if(a){var b=m();k(">>>>>> B U I L D I T E M S... "+b),this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=a.rowCount(),!this._filtered&&!this._paging&&this.maxItemCount()>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount())),this._rows=new Array(this._rowCount);for(var c=0,d=this._rows.length;d>c;c++)this._rows[c]=this.$_createRow(c);this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),k("####### B U I L D I T E M S: "+(m()-b))}},$_resetCounts:function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},$_buildItems:function(a,b){var c,d,e,f,g=this.maxItemCount()>0?this.maxItemCount():this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this._hideDeleted)for(c=0;c<this._rowCount;c++)e=this._rows[c],f=this._dataSource.getRowState(this._rows[c]._dataRow),je.isDeleted(f)?e._index=-1:e._index=0;else for(c=0;c<this._rowCount;c++)this._rows[c]._index=0;var h,i,j=this.fixedCount(),k=j>0&&!this._fixedFiltering,l=this._rows.length;if(!a)for(var c=0,m=this._filters.length;m>c;c++)if(h=this._filters[c])for(i=0;i<h.length;i++)h[i].prepare(this._filterRuntime,this._dataSource);for(this._paging||(l=Math.min(l,g)),d=0,c=0;c<this._rowCount&&l>d;c++)if(e=this._rows[c],e._index>=0)if(a||k&&j>d)this._filteredItems.push(e),d++;else{for(var n=!0,o=0,m=this._filters.length;m>o;o++)if(h=this._filters[o],h&&!this.$_select(h,e,o)){n=!1;break}n&&(this._filteredItems.push(e),d++)}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}if(this._sorted){if(b){var p=this._sortedItems;for(c=p.length;c--;)p[c]._index<0&&p.splice(c,1)}else this.$_sortRows();this._pubItems=this._sortedItems}this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},$_buildPageItems:function(){var a=this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items;this._pageItems.length=0;for(var b=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,c=a.length,d=this.maxItemCount()>0?this.maxItemCount():c,e=Math.min(this._pageSize,d);c>b&&e>0;b++,e--)this._pageItems.push(a[b]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},$_buildPage:function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},$_sortRows:function(){var a=this._items.length;this._sortedItems=this._items.concat(),this._fixedCount>0&&!this._fixedSorting?this.$_sort(0,this._fixedCount,a-1):this.$_sort(0,0,a-1)},$_sort:function(a,b,c){var d=Fa();this.$_sortLevel(a,b,c),d=Fa()-d,Ea("### DefaultItemProvider.sort in "+d+" ms.")},$_sortLevel:function(a,b,c){if(!(b>=c)){var d=this._dataSource,e=this._sortFields[a],f=d.getField(e);if(f){var g,h=this._sortDirections[a]!=te.DESCENDING,i=this._sortCases[a]==ue.INSENSITIVE,j=f.dataType(),k=f._comparer?f._comparer:d.getDataComparer(f.index());if(!k)switch(j){case ie.DATETIME:case ie.NUMBER:k=d.compareNumbers.bind(d);break;case ie.BOOLEAN:k=d.compareBools.bind(d);break;default:k=i?d.compareTexts.bind(d):d.compareValues.bind(d)}if(g=j==ie.TEXT&&i?d.equalTexts.bind(d):d.equalValues.bind(d),this.$_sortRange(e,h,i,k,b,c,a+1==this._sortFields.length),a+1<this._sortFields.length){for(var l=b,m=l,n=this._sortedItems;c>l;)l++,g(e,n[l]._dataRow,n[l-1]._dataRow)||(this.$_sortLevel(a+1,m,l-1),m=l);c>m&&this.$_sortLevel(a+1,m,c)}}}},$_sortRange:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n=this._sortedItems;do{h=e,i=f,j=Ma((e+f)/2),k=n[j]._dataRow;do{if(b){for(;i>=h&&(l=n[h]._dataRow,m=d(a,k,l),0==m&&g&&(m=k-l),!(0>=m));)h++;for(;i>=h&&(l=n[i]._dataRow,m=d(a,k,l),0==m&&g&&(m=k-l),!(m>=0));)i--}else{for(;i>=h&&(l=n[h]._dataRow,m=d(a,k,l),0==m&&g&&(m=l-k),!(m>=0));)h++;for(;i>=h&&(l=n[i]._dataRow,m=d(a,k,l),0==m&&g&&(m=l-k),!(0>=m));)i--}if(i>=h){if(h!=i){var o=n[h];n[h]=n[i],n[i]=o}h++,i--}}while(i>=h);i>e&&this.$_sortRange(a,b,c,d,e,i,g),e=h}while(f>e)},$_createRow:function(a){var b=new Xf(a);return this.attachItem(b),b},$_createAllRow:function(){for(var a=0;a<this._rowCount;a++)this._rows[a]||(this._rows[a]=this.$_createRow(a))},$_resetSummary:function(){this._summaryMap=[]},$_clearSummary:function(){if(this._summaryMap)for(var a=this._summaryMap.length-1;a>=0;a--)this._summaryMap[a]&&this._summaryMap[a].clear()},$_getSummary:function(a){var b=this._summaryMap[a];if(!b){var c=this._dataSource;c&&c.canSummarize(a)&&(b=new Lf(a),this._summaryMap[a]=b)}return b&&0==b.count&&this.itemCount()>0&&this.$_summarize(b),b},$_summarize:function(a){var b=this._dataSource;if(b)if(this._filtered){for(var c=this._items.length,d=new Array(c),e=0;c>e;e++)d[e]=this._pubItems[e]._dataRow;b.summarizeRange(a,d,this._summaryMode==Fe.STATISTICAL)}else b.summarize(a,this._summaryMode==Fe.STATISTICAL)},$_needSort:function(){return this._sorted&&this._sortMode==re.AUTO},$_needFilter:function(){return this._filtered&&this._filterMode==ve.AUTO},onDataProviderDisposed:function(a){a.removeTag(this._cellStyles),this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(),this.$_resetSummary(),this._fireReset(),this.setDataSource(null)},onDataProviderReset:function(a){this.$_clearRows(),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},onDataProviderRefresh:function(a){this.refreshItems()},onDataProviderRefreshClient:function(a){this._fireRefreshClient()},onDataProviderRowCountChanged:function(a,b){this._fireRefreshClient()},onDataProviderRowInserting:function(a,b,c){return!0},onDataProviderRowInserted:function(a,b){var c,d,e=this._rows,f=b<e.length?e[b]:null;c=this.$_createRow(b),e.splice(b,0,c);for(var g=b,h=e.length;h>g;g++)e[g]._dataRow=g;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():(this._filtered&&(d=this._filteredItems,b=Math.max(0,f?d.indexOf(f):d.length),d.splice(b,0,c)),this._sorted&&(d=this._sortedItems,b=Math.max(0,f?d.indexOf(f):d.length),d.splice(b,0,c)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:b)),this._checkableTag&&this._checkableTag.insertRow(c),this._fireItemInserted(c)},onDataProviderRowsInserted:function(a,b,c){if(!(0>c)){var d,e,f,g=this._rows,h=b<g.length?g[b]:null,i=[];for(d=0;c>d;d++)i.push(e=this.$_createRow(b+d)),g.splice(b+d,0,e);var j=g.length;for(d=b;j>d;d++)g[d]._dataRow=d;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered)for(f=this._filteredItems,b=Math.max(0,h?f.indexOf(h):f.length),d=0;d<i.length;d++)f.splice(b+d,0,i[d]);if(this._sorted)for(f=this._sortedItems,b=Math.max(0,h?f.indexOf(h):f.length),d=0;d<i.length;d++)f.splice(b+d,0,i[d]);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(b)}this._checkableTag&&this._checkableTag.insertRows(b,c),this._fireRefresh()}},onDataProviderRowRemoving:function(a,b){return!0},$_silentRemoveRow:function(a){var b,c;this._filtered&&(b=this._filteredItems,c=b.indexOf(a),c>=0&&b.splice(c,1)),this._sorted&&(b=this._sortedItems,c=b.indexOf(a),c>=0&&b.splice(c,1)),this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},onDataProviderRowRemoved:function(a,b){var c=this._rows,d=c[b];c.splice(b,1);for(var e=c.length-1;e>=b;e--)c[e]._dataRow=e;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(d),this._fireItemDeleted(d)},onDataProviderRowsRemoving:function(a,b){return!0},$_silentRemoveRows:function(a){var b,c,d,e;if(this._filtered)for(c=this._filteredItems,b=0;b<a.length;b++)d=a[b],e=c.indexOf(d),e>=0&&c.splice(e,1);if(this._sorted)for(c=this._sortedItems,b=0;b<a.length;b++)d=a[b],e=c.indexOf(d),e>=0&&c.splice(e,1);this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},onDataProviderRowsRemoved:function(a,b){if(b&&!(b.length<1)){b.length>1&&b.sort(function(a,b){return a-b});var c,d=this._rows,e=b[0],f=[];for(c=b.length-1;c>=0;c--)f.push(d[b[c]]),d.splice(b[c],1);for(c=this._rows.length-1;c>=e;c--)d[c]._dataRow=c;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(f),this._fireRefresh()}},onDataProviderRowUpdating:function(a,b,c){return!0},onDataProviderRowUpdated:function(a,b){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[b]),this._fireItemUpdated(this._rows[b])},onDataProviderRowsUpdated:function(a,b,c){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(b,c),this._fireRefresh()},onDataProviderValueChanging:function(a,b,c,d){return!0},onDataProviderValueChanged:function(a,b,c){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(this._rows[b]),this._fireItemUpdated(this._rows[b])},onDataProviderRowMoving:function(a,b,c){return!0},onDataProviderRowMoved:function(a,b,c){var d=this._rows,e=d.length;b=Math.min(b,c);for(var f=b;e>f;f++)d[f]._dataRow=f;(this._sorted||this._paging)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},onDataProviderRowsMoving:function(a,b,c,d){return!0},onDataProviderRowsMoved:function(a,b,c,d){this.refreshItems()},onDataProviderStateChanged:function(a,b){if(this._hideDeleted){var c=this._rows[b];je.isDeleted(c.rowState())&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_buildItems(!0,!0),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(this._rows[b]),this._fireRowStateChanged(this._rows[b])},onDataProviderStatesChanged:function(a,b){if(this._hideDeleted){var c,d,e,f=!1;for(c=0,d=b.length;d>c;c++)if(e=b[c],e=this._rows[e],je.isDeleted(e.rowState())){f=!0;break}f&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_buildItems(!0,!0),this._fireRefresh())}this._checkableTag&&this._checkableTag.changeStates(b),this._fireRowStatesChanged(this.getItemsByRows(b))},onDataProviderStatesCleared:function(a){this._fireRowStatesCleared()}}),eg=Xa("ProxyItemProvider",ag,{init:function(a,b){this._super(b),this._initialize(),this.setSource(a)},source:null,setSource:function(a){a!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=a,this._source&&(this._populateItems(),this._source.addListener(this)))},dataSource:function(){return this._source?this._source.dataSource():null},fixedCount:function(){return this._source?this._source.fixedCount():0},maxItemCount:function(){return this._source?this._source.maxItemCount():0},setMaxItemCount:function(a){this._source&&this._source.setMaxItemCount(a)},setFixed:function(a,b,c){this._source&&this._source.setFixed(a,b,c)},getIndexOfRow:function(a){return this._source?this._source.getIndexOfRow(a):-1},getItemOfRow:function(a){return this._source?this._source.getItemOfRow(a):null},refreshItems:function(){this._source&&this._source.refreshItems()},_clearDisplayLevels:function(){this._source&&this._source._clearDisplayLevels()},setCellStyle:function(a,b,c){this._source&&this._source.setCellStyle(a,b,c)},removeCellStyle:function(a){this._source&&this._source.removeCellStyle(a)},clearCellStyles:function(){this._source&&this._source.clearCellStyles()},_initialize:function(){},_clearItems:function(){},_populateItems:function(){this._resetItemIndicies(0)},onItemProviderReset:function(a){this._populateItems(),this._fireReset()},onItemProviderRefresh:function(a){this._populateItems(),this._fireRefresh()},onItemProviderRefreshClient:function(a){this._fireRefreshClient()},onItemProviderItemInserted:function(a,b){this._resetItemIndicies(0),this._fireItemInserted(b)},onItemProviderItemDeleted:function(a,b){this._resetItemIndicies(0),this._fireItemDeleted(b)},onItemProviderItemUpdated:function(a,b){this._resetItemIndicies(0),this._fireItemUpdated(b)},onItemProviderCheckableChanged:function(a,b){this._fireCheckableChanged(b)},onItemProviderItemChecked:function(a,b){this._fireItemChecked(b)},onItemProviderItemsChecked:function(a,b,c){this._fireItemsChecked(b,c)},onItemProviderItemAllChecked:function(a,b){this._fireItemAllChecked(b)},onItemProviderRowStateChanged:function(a,b){this._fireRowStateChanged(b)},onItemProviderRowStatesChanged:function(a,b){this._fireRowStatesChanged(b)},onItemProviderRowStatesCleared:function(a){this._fireRowStatesCleared()},onItemProviderFilterAdded:function(a,b,c){},onItemProviderFilterRemoved:function(a,b,c){},onItemProviderFilterCleared:function(a,b){},onItemProviderFilterAllCleared:function(a){},onItemProviderFiltered:function(a){},onItemProviderSort:function(a,b,c){},onItemProviderSorted:function(a){}}),fg=function(a){var b=a,c=0,d=[],e=[],f=function(a,c,d,e){var g,h,i,j;if(e&&a instanceof Yf&&a._setExpanded(!0),b.isMergeMode()){for(a instanceof _f||b.expandedAdornments()!=Ce.HEADER&&b.expandedAdornments()!=Ce.BOTH||c.push(a),g=0,h=a.count();h>g;g++)if(i=a.getItem(g),i instanceof Yf)if(j=i,d||j.isExpanded())f(j,c,d,e);else switch(b.collapsedAdornments()){case Ce.BOTH:c.push(j),j.footer&&c.push(j.footer());break;case Ce.FOOTER:c.push(j.footer());break;case Ce.HEADER:default:c.push(j)}else i!=a.footer()&&c.push(i);a instanceof _f||b.expandedAdornments()!=Ce.FOOTER&&b.expandedAdornments()!=Ce.BOTH||c.push(a.footer())}else{for(a instanceof _f||c.push(a),g=0,h=a.count();h>g;g++)if(i=a.getItem(g),i instanceof Yf)if(j=i,d||j.isExpanded())f(j,c,d,e);else switch(b.collapsedAdornments()){case Ce.HEADER:c.push(j);break;case Ce.BOTH:default:c.push(j),j.footer()&&c.push(j.footer())}else i instanceof $f||c.push(i);a instanceof _f||b.expandedAdornments()==Ce.BOTH&&c.push(a.footer())}},g=function(a,g,h){var i;if(a instanceof _f)i=c;else if(b.isMergeMode()){switch(b.collapsedAdornments()){case Ce.BOTH:i=a.index(),d.splice(i,2);break;case Ce.FOOTER:i=a.footer().index(),d.splice(i,1);break;case Ce.HEADER:default:i=a.index(),d.splice(i,1)}h&&(a._index=-1)}else{i=a.index(),d.splice(i,1);var j=b.collapsedAdornments();(j==Ce.BOTH||j==Ce.FOOTER)&&d.splice(i,1)}e.splice(0,e.length),f(a,e,g,h);for(var k=0,l=e.length;l>k;k++)d.splice(i+k,0,e[k])},h=function(a){var b=a.index();if(b>=0)return b;for(var c=0,d=a.count();d>c;c++){var e=a.getItem(c);if(e.index()>=0)return e.index();var f=ab(e,Yf);if(f&&(b=h(f),b>=0))return b}return-1};this.provider=function(){return b},this.count=function(){return d.length},this.fixedCount=function(){return c},this.getItems=function(){return d.slice()},this.getItem=function(a){return d[a]},this.clear=function(){for(var b=0,c=d.length;c>b;b++)d[b]._parent=a._rootItem;d.splice(0,d.length)},this.expand=function(a,b,c){return c=arguments.length>2?c:!0,g(a,b,c),!0},this.collapse=function(a,c){var e,f;if(a instanceof Yf&&a._setExpanded(!1),b.isMergeMode()){for(e=a.index(),e>=0?(d.splice(e,1),a._index=-1):e=h(a);e<d.length&&(f=d[e],f.isDescendantOf(a));)d.splice(e,1),f._index=-1,c&&f instanceof Yf&&f._setExpanded(!1);switch(b.collapsedAdornments()){case Ce.BOTH:a._index=e,d.splice(e,0,a),d.splice(e+1,0,a.footer());break;case Ce.FOOTER:d.splice(e,0,a.footer());break;case Ce.HEADER:default:a._index=e,d.splice(e,0,a)}}else switch(e=a.index(),b.collapsedAdornments()){case Ce.HEADER:for(e++;e<d.length&&d[e].level()>a.level();)f=d[e],d.splice(e,1),c&&f instanceof Yf&&f._setExpanded(!1);break;case Ce.BOTH:default:for(e++;e<d.length&&d[e].level()>a.level()&&d[e]!=a.footer();)f=d[e],d.splice(e,1),c&&f instanceof Yf&&f._setExpanded(!1);(e>=d.length||d[e]!=a.footer())&&(f=d[e],d.splice(e,0,a.footer()),c&&f instanceof Yf&&f._setExpanded(!1))}return!0},this.getNext=function(a){return null!=a&&a.isVisible()&&a.index()<this.count()-1?d[a.index()+1]:null},this.getPrior=function(a){return null!=a&&a.isVisible()&&a.index()>0?d[a.index()-1]:null},this._clearAndInit=function(a,b){if(this.clear(),a){c=Math.min(b,a.itemCount());for(var e=0;c>e;e++)d.push(a.getItem(e));
}else c=0},this._resetIndices=function(a){a=arguments.length>0?a:0;var b,c=d.length;for(b=a;c>b;b++)d[b]._index=b}},gg=function(a,b){this.level=0,this.startIndex=a,this.endIndex=b,this.children=[]},hg=Xa("GroupedItemProvider",eg,{init:function(a,b){this._visibleItems=null,this._rootItem=null,this._groupFields=null,this._groupSorting=!1,this._sortDirection=te.ASCENDING,this._summarizing=!1,this._grouped=!1,this._editItem=null,this._super(a,b)},treeMode:!1,expandedAdornments:Ce.BOTH,collapsedAdornments:Ce.HEADER,expandWhenGrouping:!1,mergeMode:!1,summaryMode:Fe.AGGREGATE,isGrouped:function(){return this._grouped},groupCount:function(){return this._groupFields?this._groupFields.length:0},setExpandedAdornments:function(a){a!=this._expandedAdornments&&(this._expandedAdornments=a,this.isGrouped()&&(this._populateItems(),this._fireRefresh()))},setCollapsedAdornments:function(a){a!=this._collapsedAdornments&&(this._collapsedAdornments=a,this.isGrouped()&&(this._populateItems(),this._fireRefresh()))},setMergeMode:function(a){a!=this._mergeMode&&(this._mergeMode=a,a||this._clearDisplayLevels(),this._populateItems(),this._fireRefresh())},setSummaryMode:function(a){a!=this._summaryMode&&(this._summaryMode=a,this._populateItems(),this._fireRefresh())},canGrouping:function(a){return this._fireGrouping(a)},groupBy:function(a){this.groupByMode(a,this._mergeMode)},groupByMode:function(a,b){this._mergeMode=b,this._groupFields=a?a.concat():null,b||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this._fireGrouped()}},isGroupedField:function(a){if(this._groupFields)for(var b=this._groupFields.length;b--;)if(this._groupFields[b]==a)return!0;return!1},getGroupLevel:function(a){if(this._groupFields&&a>=0)for(var b=this._groupFields.length;b--;)if(this._groupFields[b]==a)return b+1;return 0},getGroupedFields:function(){return this._groupFields?this._groupFields.concat():null},expand:function(a,b,c){if(a&&(!a.isExpanded()||c)&&(this._fireExpand(a),a.isExpanded()&&this._visibleItems.collapse(a,!1),this._visibleItems.expand(a,b))){this._resetItemIndicies(a.index);try{this._fireRefresh()}finally{this._fireExpanded(a)}}},collapse:function(a,b){if(a&&a.isExpanded()&&(this._fireCollapse(a),this._visibleItems.collapse(a,b))){this._resetItemIndicies(a.index);try{this._fireRefresh()}finally{this._fireCollapsed(a)}}},itemCount:function(){return this._grouped?this._visibleItems.count():this.source().itemCount()},getItem:function(a){return this.isGrouped()?a>=0&&a<this._visibleItems.count()?this._visibleItems.getItem(a):null:this.source().getItem(a)},getItems:function(a,b){if(this.isGrouped()){var c,d,e=[],f=Math.min(this._visibleItems.count(),a+b-1);for(c=a;f>c;c++)d=this._visibleItems.getItem(c),e.push(d);return e}return this.source().getItems(a,b)},getAllItems:function(){if(this.isGrouped()){var a=new fg(this);return a.expand(this._rootItem,!0,!1),a.getItems()}return this.source()?this.source().getAllItems():null},getIndexOfRow:function(a){if(this.isGrouped()){for(var b=0,c=this._visibleItems.count();c>b;b++)if(this._visibleItems.getItem(b).dataRow()==a)return b;return-1}return this.source().getIndexOfRow(a)},getItemOfRow:function(a){if(this.isGrouped()){for(var b=0,c=this._visibleItems.count();c>b;b++){var d=this._visibleItems.getItem(b);if(d.dataRow()==a)return d}return null}return this.source().getItemOfRow(a)},setFixed:function(a,b,c){this._super(a,b,c)},_initialize:function(){this._super(),this._visibleItems=new fg(this),this._rootItem=new _f(this)},_clearItems:function(){this._visibleItems.clear(),this._rootItem.clear()},_saveExpand:function(a,b){for(var c=0,d=a._children.length;d>c;c++){var e=a._children[c];if(e instanceof Zf||e instanceof tj){var f=e.firstItem().dataRow(),g=e._groupField;if(f>=0&&g>=0){var h=this.dataSource().getValue(f,g);b[h]={expanded:e._expanded,children:[]},this._saveExpand(e,b[h].children)}}}},_restoreExpand:function(a,b){for(var c=0,d=a._children.length;d>c;c++){var e=a._children[c];if(e instanceof Zf||e instanceof tj){var f=e.firstItem().dataRow(),g=e._groupField;if(f>=0&&g>=0){var h=this.dataSource().getValue(f,g);b[h]&&(e._setExpanded(b[h].expanded),this._restoreExpand(e,b[h].children))}}}},_restoreExpand2:function(a,b){for(var c=0,d=a._children.length;d>c;c++){var e=a._children[c];if(e instanceof Zf||e instanceof tj){var f=e.firstItem().dataRow(),g=e._groupField;if(f>=0&&g>=0){var h=this.dataSource().getValue(f,g);b[h]&&(e.setExpanded(b[h].expanded,!0,!1),this._restoreExpand2(e,b[h].children))}}}},_populateItems:function(a){var b={};if(a&&this._rootItem&&this._saveExpand(this._rootItem,b),this._clearItems(),this.source()){if(this._groupFields){for(var c=this._groupFields.length-1;c>=0;c--)this._groupFields[c]>=this.dataSource().fieldCount()&&this._groupFields.splice(c,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;var d=this.source().itemCount();this._grouped&&d>0&&(this._buildGroupItems(d),a&&this._restoreExpand(this._rootItem,b),this.$_resetVisibleItems())}},_resetItemIndicies:function(a){this.isIndexing()&&this.isGrouped()?this._visibleItems._resetIndices(a):this._super(a)},$_checkChildren:function(a,b,c){var d,e,f=a.count();for(d=0;f>d;d++)e=ab(a.getItem(d),Wf),e&&(c?e.isCheckable()&&e.$_setChecked(b):e.$_setChecked(b)),e instanceof Yf&&this.$_checkChildren(e,b,c)},_clearChecked:function(){this.isGrouped()?this.$_checkChildren(this._rootItem,!1,!1):this._super(),this._editItem&&this._editItem.$_setChecked(!1)},checkAll:function(a,b,c){if(this._editItem&&(c?this._editItem.isCheckable()&&this._editItem.$_setChecked(a):this._editItem.$_setChecked(a)),b||!this.isGrouped())this._super(a,b,c);else{var d,e=this._visibleItems.fixedCount();if(e>0)if(c)for(d=e;d--;){var f=this.getItem(d);f.isCheckable()&&f.$_setChecked(a)}else for(d=e;d--;)this.getItem(d).$_setChecked(a);this.$_checkChildren(this._rootItem,a,c),this._fireItemAllChecked(a)}},findItem:function(a,b,c,d,e){var f=this.dataSource();if(!f)return-1;var g=this.itemCount();if(1>g)return-1;var h=Math.min(a.length,b.length);if(1>h)return-1;var i,j,k,l,m=!c||c.allFields,n=c&&c.caseSensitive,o=c&&c.partialMatch;for(d=Math.max(0,d),e=Math.min(g-1,e),i=d;e>=i;i++){if(j=this.$_getItem(i),k=j.dataRow()>=0)for(l=0;h>l;l++){if(k=cb(b[l],j.getData(a[l]),n,o),k&&!m)return i;if(!k&&m)break}if(k)return i}return-1},findCell:function(a,b,c,d,e,f){var g=this.dataSource();if(!g)return null;var h=this.itemCount();if(1>h)return null;var i,j,k,l,m=c&&c.caseSensitive,n=c&&c.partialMatch,o=this.dataSource().fieldCount(),p=a.length;for(d=Math.max(0,d),e=Math.min(h-1,e),f=Math.max(0,f),f>=a.length&&(d++,f=0),i=d;e>=i;i++)if(j=this.$_getItem(i),j.dataRow()>=0)for(l=i>d?0:f;p>l;l++){var q=a[l];if(q>=0&&o>q&&(k=cb(b,j.getData(q),m,n))){var r={itemIndex:i,fieldIndex:q,searchFieldIndex:l};return r}}return null},onItemProviderReset:function(a){this._super(a)},onItemProviderRefresh:function(a){this._super(a)},onItemProviderItemInserted:function(a,b){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),this._super(a,b))},onItemProviderItemDeleted:function(a,b){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),this._super(a,b))},onItemProviderItemUpdated:function(a,b){this.isGrouped()?(this._populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),this._super(a,b))},$_getItem:function(a){return this._grouped?this._visibleItems.getItem(a):this.source().getItem(a)},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this.source(),this.fixedCount()),this.source()&&this.source().itemCount()>this._visibleItems.fixedCount()&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(0)},_buildGroupItems:function(a){if(a>this.fixedCount()){var b=new gg(this.fixedCount(),a-1);this._buildGroups(b,this.source(),this._groupFields),this._buildItems(this._rootItem,b,this._groupFields),this.isMergeMode()&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this._rootItem))}},$_resetDisplayLevels:function(a){var b,c,d,e=a.count();for(b=0;e>b;b++)c=ab(a.getItem(b),Yf),c&&(d=ab(c.firstItem,Xf),d&&d._displayLevel<0&&(d._displayLevel=c.level),this.$_resetDisplayLevels(c))},_buildGroups:function(a,b,c){if(!(c.length<=a.level)){var d=a.startIndex,e=a.endIndex;if(!(d>e)){var f=a.level+1,g=c[a.level],h=this.dataSource().getField(g),i=new gg(d,d);i.level=f,a.children.push(i);for(var j=b.getItem(d).getData(g),k=d+1;e>=k;k++){var l=b.getItem(k).getData(g);h.equalValues(l,j)||(i&&(i.endIndex=k-1),i=new gg(k,k),i.level=f,a.children.push(i)),j=l}i&&(i.endIndex=e);var m=a.children.length;for(k=0;m>k;k++)this._buildGroups(a.children[k],b,c)}}},_buildItems:function(a,b,c){var d=this.isMergeMode(),e=b.children.length;if(e>0)for(var f=c[b.level],g=0;e>g;g++){var h=d?new tj(f):new Zf(f);h._setExpanded(this.isExpandWhenGrouping()),a.add(h),this._buildItems(h,b.children[g],c)}else{var i=b.endIndex-b.startIndex+1,j=this.source().getItems(b.startIndex,i);a.addAll(j),this._incDescendents(a,i)}var k=a.level();if(k>0){var l=d?new sj:new $f;a.add(l)}},_setEditItem:function(a){this._editItem=a},_fireGrouping:function(a){return this.fireConfirmEvent(hg.GROUPING,a)},_fireGrouped:function(a){this.fireEvent(hg.GROUPED)},_fireExpand:function(a){this.fireEvent(hg.EXPAND,a)},_fireExpanded:function(a){this.fireEvent(hg.EXPANDED,a)},_fireCollapse:function(a){this.fireEvent(hg.COLLAPSE,a)},_fireCollapsed:function(a){this.fireEvent(hg.COLLAPSED,a)}});hg.GROUPING="onGroupedItemProviderGrouping",hg.GROUPED="onGroupedItemProviderGrouped",hg.EXPAND="onGroupedItemProviderExpand",hg.EXPANDED="onGroupedItemProviderExpanded",hg.COLLAPSE="onGroupedItemProviderCollapse",hg.COLLAPSED="onGroupedItemProviderCollapsed";var ig=Xa("EditItem",Xf,{init:function(a,b,c,d,e){this._super(d),this._target=b,a.attachItem(this),this._index=c,this._state=e,this._values=[],this._displayLevel=b?b.displayLevel():0,this._started=!1,this._checkDiff=!1,this._strictDiff=!1},values:null,values_:function(){return this._values.concat()},setValues:function(a){var b,c,d,e,f,g=this.provider(),h=this.dataSource(),i=h.fieldCount();if(s(a))for(i=Math.min(i,a.length),b=0;i>b;b++)d=h.getField(b),e=this._values[b],f=d.readValue(a[b]),this._values[b]=f,this._started&&!d.equalValues(e,f)&&g._editItemCellUpdated(this,b,e,f);else if(a)for(b=0;i>b;b++)c=h.getOrgFieldName(b),a.hasOwnProperty(c)&&(d=h.getField(b),e=this._values[b],f=d.readValue(a[c]),this._values[b]=f,this._started&&!d.equalValues(e,f)&&g._editItemCellUpdated(this,b,e,f))},beginEdit:function(a,b){this._started=!0,this._checkDiff=a,this._strictDiff=b},setValue:function(a,b){var c=this.dataSource();if(0>a&&a>=c.fieldCount())throw new RangeError("field index is out of bounds: "+a);var d=c.getField(a),e=this._values[a];b=d.readValue(b),this._values[a]=b,this._started&&!d.equalValues(e,b)&&this.provider()._editItemCellUpdated(this,a,e,b)},itemState:function(){return this._state},getData:function(a){if(0>a&&a>=this.dataSource().fieldCount())throw new RangeError("field index is out of bounds: "+a);return this._values[a]},setData:function(a,b){var c=this.dataSource();if(0>a&&a>=c.fieldCount)throw new RangeError("field index is out of bounds: "+a);var d=c.getField(a),e=this._values[a];b=d.readValue(b);var f=!this._checkDiff;f||(f=this._strictDiff?!d.equalValues(e,b):!d.sameValues(e,b)),f&&(this._values[a]=b,this.provider()._editItemCellUpdated(this,a,e,b),this.provider()._editItemCellEdited(this,a))},getRowData:function(){return this._values.concat()},getRowObject:function(){var a=this.dataSource();if(a){var b,c,d=a.fieldCount(),e={};for(b=0;d>b;b++)c=a.getOrgFieldName(b),e[c]=this._values[b];return e}return null},_clearDisplayLevels:function(){var a,b=this._rows.length;for(a=0;b>a;a++)this._rows[a]._displayLevel=-1}}),jg=Xa("EditableItemProvider",eg,{init:function(a,b){this._super(a,b),this._orgItem=null,this._editingItem=null,this._editingState=me.NORMAL,this._insertMode=0,this._modified=!1,this._commiting=!1,this._saveDs=null,a&&(this._saveDs=a.dataSource())&&this._saveDs.registerClient(this)},isDataEditing:function(){return this.isEditing()},cancelDataEditing:function(){this.isEditing()&&this._fireCancelRequest()},commitDataEditing:function(){this.isEditing()&&this._fireCommitRequest()},editingItem:function(){return this._commiting||this.isEditing()?this._editingItem:null},edit:function(a){if(this.isEditing())return!0;if(a)try{return this._beginUpdate(a),!0}catch(b){throw this.cancel(),b}return!1},editData:function(a,b,c){var d;if(a&&(d=this.dataSource())&&b>=0&&b<d.fieldCount()){if(!this.isEditing())try{return this._beginUpdate(a),!0}catch(e){throw this.cancel(),e}this._editingItem.setData(b,c)}return!1},append:function(a){if(!this.isEditing())try{return this._beginAppend(a),!0}catch(b){throw this.cancel(),b}return!1},insert:function(a,b,c,d){if(!this.isEditing())try{return this._beginInsert(a,b,c,d),!0}catch(e){throw this.cancel(),e}return!1},remove:function(a){},removeAll:function(a){},getRemovableRows:function(a){return null},removeRows:function(a){},cancel:function(){this.isEditing()&&this._cancelEdit()},commit:function(){if(this.isEditing()){this._commiting=!0;try{var a=this.dataSource();if(a){if(this._editingState==me.UPDATING&&this.isCheckDiff()){var b,c=this._editingItem.values(),d=c.length,e=!1,f=this.isStrictDiff();for(b=0;d>b;b++)if(f){if(!a.getField(b).equalValues(this._orgItem.getData(b),c[b])){e=!0;break}}else if(!a.getField(b).sameValues(this._orgItem.getData(b),c[b])){e=!0;break}if(!e)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},isEditing:function(a){return me.isEditing(this._editingState)&&(!a||a===this._editingItem)},isEdited:function(a){return me.isEditing(this._editingState)&&(!a||a===this._editingItem)&&this._modified},checkDiff:!1,checkCellDiff:!1,strictDiff:!1,isUpdating:function(){return this._editingState==me.UPDATING},isInserting:function(){return this._editingState==me.INSERTING},isAppending:function(){return this._editingState==me.APPENDING},isDataEditing:function(){return this.isEditing()},cancelDataEditing:function(){},commitDataEditing:function(){},setDiffs:function(a,b,c){this._checkDiff=a,this._checkCellDiff=b,this._strictDiff=c},itemCount:function(){return this.source().itemCount()},onItemProviderReset:function(a){this._super(a);var b=this.dataSource();b!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=b,this._saveDs&&this._saveDs.registerClient(this))},onItemProviderRefresh:function(a){this._super(a)},onItemProviderRefreshClient:function(a){this._super(a)},onItemProviderItemInserted:function(a,b){this._super(a,b)},onItemProviderItemRemoved:function(a,b){this._super(a,b)},onItemProviderItemUpdated:function(a,b){this._super(a,b)},_checkEditing:function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},_checkNotEditing:function(){if(this.isEditing())throw new Error("itemProvider is already editing")},_beginUpdate:function(a){if(!a)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(a),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._orgItem=a,this._editingState=me.UPDATING,this._fireUpdateStarted(this._editingItem))},_doBeginUpdate:function(a){return null},_beginAppend:function(a){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(a),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._editingState=me.APPENDING,this._fireAppendStarted(this._editingItem))},_doBeginAppend:function(a){return null},_beginInsert:function(a,b,c,d){if(!a)throw"item is null";this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(a,b,c,d),this._editingItem.beginEdit(this.isCheckCellDiff(),this.isStrictDiff()),this._editingItem&&(this._editingState=me.INSERTING,this._resetItemIndicies(0),this._fireInsertStarted(this._editingItem))},_doBeginInsert:function(a,b){return null},_cancelEdit:function(){this._checkEditing();var a=this._editingState;try{this._editingState=me.NORMAL,this._doCancelEdit(a,this._orgItem)}catch(b){throw this._editingState=a,b}this._modified=!1,this._fireCanceled()},_doCancelEdit:function(a,b){a==me.INSERTING&&this._resetItemIndicies(0)},_updateEditingRow:function(a){return!1},_insertEditingRow:function(a){return!1},_updateEditingRow:function(a){return!1},_insertEditingRow:function(a){return!1},_commitEdit:function(){this._checkEditing();var a=this.dataSource();if(!a)throw new Error("data provier is null");try{this._fireItemCommitting(this._editingItem)}catch(b){alert(b.message)}var c=this._editingState,d=!1;if(this.isUpdating())try{this._editingState=me.NORMAL,d=this._doCompleteUpdate(this._orgItem)}catch(b){throw this._editingState=c,b}else try{this._editingState=me.NORMAL,d=this._doCompleteInsert(c==me.APPENDING)}catch(b){throw this._editingState=c,b}return d?(this._modified=!1,this._doCommitEdit(c,this._orgItem),this._fireCommitted(this._editingItem)):this._editingState=c,d},_doCommitEdit:function(a,b){return!1},_editItemCellEdited:function(a,b){a&&this.isEditing(a)&&(this._modified=!0,this._fireItemCellEdited(a,b))},_editItemCellUpdated:function(a,b,c,d){this.isEditing(a)&&(this._modified=!0,this._fireItemCellUpdated(a,b,c,d))},_fireUpdateStarted:function(a){this._eventLock<=0&&this.fireEvent(jg.UPDATE_STARTED,a)},_fireAppendStarted:function(a){this._eventLock<=0&&this.fireEvent(jg.APPEND_STARTED,a)},_fireInsertStarted:function(a){this._eventLock<=0&&this.fireEvent(jg.INSERT_STARTED,a)},_fireItemCellEdited:function(a,b){this._eventLock<=0&&this.fireEvent(jg.CELL_EDITED,a,b)},_fireItemCellUpdated:function(a,b,c,d){this._eventLock<=0&&this.fireEvent(jg.CELL_UPDATED,a,b,c,d)},_fireItemCommitting:function(a){this._eventLock<=0&&this.fireEvent(jg.COMMITTING,a)},_fireCommitted:function(a){this._eventLock<=0&&this.fireEvent(jg.COMMITTED,a)},_fireCanceled:function(){this._eventLock<=0&&this.fireEvent(jg.CANCELED)},_fireCommitRequest:function(){this._eventLock<=0&&this.fireEvent(jg.COMMIT_REQUEST)},_fireCancelRequest:function(){this._eventLock<=0&&this.fireEvent(jg.CANCEL_REQUEST)}});jg.UPDATE_STARTED="onItemEditUpdateStarted",jg.APPEND_STARTED="onItemEditAppendStarted",jg.INSERT_STARTED="onItemEditInsertStarted",jg.CELL_EDITED="onItemEditCellEdited",jg.CELL_UPDATED="onItemEditCellUpdated",jg.COMMITTING="onItemEditCommitting",jg.COMMITTED="onItemEditCommitted",jg.CANCELED="onItemEditCanceled",jg.COMMIT_REQUEST="onItemEditCommitRequest",jg.CANCEL_REQUEST="onItemEditCancelRequest";var kg=Xa("EditableItemProviderImpl",jg,{init:function(a,b){this._super(a,b),this._insertRow=-1},itemCount:function(){var a=this.source().itemCount();return this.isInserting()||this.isAppending()?a+1:a},getItem:function(a){return this.isEditing()&&this._editingItem.index()==a?this._editingItem:this.isInserting()&&a>this._editingItem.index()?this.source().getItem(a-1):this.source().getItem(a)},_doBeginUpdate:function(a){return this._editingItem=this._createEditItem(a,me.UPDATING,null),this._editingItem},_doBeginAppend:function(a){return this._editingItem=this._createEditItem(null,me.APPENDING,a),this._editingItem},_doBeginInsert:function(a,b,c,d){return this._editingItem=this._createEditItem(a,me.INSERTING,b,c,d),this._editingItem},_doCancelEdit:function(a,b){this._super(a,b)},_doCommitEdit:function(a,b){this._super(a,b)},_doCompleteUpdate:function(a){var b=this.dataSource();if(b){var c=this._editingItem;return this._copyExtents(c,a),b.updateRow(c.dataRow(),c.values())}return!1},_doCompleteInsert:function(a){var b=!1,c=this.dataSource();if(c){var d=this._editingItem,e=a?c.rowCount():Math.max(0,this._insertRow),f=d.values();if(b=c.insertRow(e,f)){var g=this.getItemOfRow(e);this._copyExtents(d,g)}}return b},remove:function(a){var b=this.dataSource();if(a&&!this.isEditing(a)&&b){var c=a.dataRow();c>=0&&b.removeRow(c)}},removeAll:function(a){if(a&&0!=a.length){var b=this.dataSource();if(b){var c,d=a.length;if(d>1){for(var e=[],f=0;d>f;f++)c=this.getItem(a[f]).dataRow(),c>=0&&e.push(c);e.length>1?b.removeRows(e):1==e.length&&b.removeRow(e[0])}else 1==d&&(c=this.getItem(a[0]).dataRow(),c>=0&&b.removeRow())}}},revert:function(a){if(a instanceof Wf||(a=this.getItem(a)),a){var b=this.dataSource();if(b){var c=a.dataRow(),d=b.getRowState(c);d==je.DELETED?b.setRowState(c,je.NONE):d==je.CREATE_AND_DELETED&&b.setRowState(c,je.CREATED)}}},revertAll:function(a){if(a&&0!=a.length){var b=this.dataSource();if(b)for(var c=a.length;c--;){var d=this.getItem(a[c]);if(d){var e=d.dataRow(),f=b.getRowState(e);f==je.DELETED?b.setRowState(e,je.NONE):f==je.CREATE_AND_DELETED&&b.setRowState(e,je.CREATED)}}}},getRemovableRows:function(a){if(!a||0==a.length)return null;for(var b=[],c=0,d=a.length;d>c;c++){var e=this.getItem(a[c]).dataRow();e>=0&&b.push(e)}return b},removeRows:function(a){a&&(a.length>1?this.dataSource().removeRows(a):this.dataSource().removeRow(a[0]))},_createEditItem:function(a,b,c){var d=this.dataSource();if(!d)return null;var e,f=null,g=d.fieldCount();switch(b){case me.UPDATING:for(f=new ig(this,a,a.index(),a.dataRow(),b),e=0;g>e;e++)f.setValue(e,a.getData(e));this._copyExtents(a,f);break;case me.INSERTING:case me.APPENDING:if(f=b==me.APPENDING?new ig(this,null,this.itemCount(),-1,b):new ig(this,a,a.index(),-1,b),b==me.INSERTING){var h=a.dataRow();if(-1>=h){for(var i=this._source._visibleItems,j=a;(j=i.getNext(j))&&!(j instanceof Xf););this._insertRow=j?j.dataRow():this.dataSource().rowCount()}else this._insertRow=h}if(c)for(e=0;g>e;e++)c.length>e&&f.setValue(e,c[e])}return f}}),lg=Xa("GridItemProvider",kg,{init:function(a){this._super(null,a),this._groupSorting=!0,this._groupSortDirection=te.ASCENDING,this._groupSortCase=ue.SENSITIVE,this._itemProvider=new dg(!1),this._itemProvider.addListener(this),this._groupedProvider=new hg(this._itemProvider,!1),this.setSource(this._groupedProvider),this._summarizer=new ef(this._itemProvider)},isHideDeleted:function(){return this._itemProvider.hideDeleted()},setHideDeleted:function(a){this._itemProvider.setHideDeleted(a)},setSummaryMode:function(a){this._itemProvider.setSummaryMode(a)},setRowGroupSummaryMode:function(a){this._groupedProvider.setSummaryMode(a)},setMergeMode:function(a){this._groupedProvider.setMergeMode(a)},sortMode:function(){return this._itemProvider.sortMode()},setSortMode:function(a){this._itemProvider.setSortMode(a)},filterMode:function(a){return this._itemProvider.filterMode()},setFilterMode:function(a){this._itemProvider.setFilterMode(a)},isGrouped:function(){return this._groupedProvider.isGrouped()},groupLevels:function(){return this._groupedProvider.groupCount()},groupByFields:function(){return this._groupedProvider.getGroupedFields()},summarizer:function(){return this._summarizer},canGrouping:function(a){return this._fireGrouping(a)},setDataSource:function(a){this._itemProvider.setDataSource(a)},getFieldDomain:function(a){this._itemProvider.getFieldDomain(a)},isFiltered:function(a){this._itemProvider.hasFilter(a)},addFilter:function(a,b){this._itemProvider.addFilter(a,b)},removeFilter:function(a,b){this._itemProvider.removeFilter(b)},clearFilters:function(a){this._itemProvider.clearFilters(a)},clearAllFilters:function(){this._itemProvider.clearAllFilters()},beginFiltering:function(){this._itemProvider.beginFilter()},endFiltering:function(){this._itemProvider.endFilter()},setHideDeletedRows:function(a){this._itemProvider.setHideDeleted(a)},orderBy:function(a,b,c){if(this._groupedProvider.isGrouped()){var d,e,f,g,h,i,j=b?b.length:0,k=c?c.length:0,l=this._groupedProvider.getGroupedFields(),m=this._itemProvider.getSortDirections(),n=this._itemProvider.getSortCases(),o=[];for(d=0,e=l.length;e>d;d++)o.push(l[d]);for(d=0,e=a.length;e>d;d++)f=a[d],g=o.indexOf(f),h=j>d?b[d]:j>0?b[j-1]:te.ASCENDING,i=k>d?c[d]:k>0?c[k-1]:ue.SENSITIVE,0>g?(o.push(f),m[o.length-1]=h,n[o.length-1]=i):(m[g]=h,n[g]=i);l=o,this._itemProvider.orderBy(l,m,n)}else this._itemProvider.orderBy(a,b,c)},getSortFields:function(){return this._itemProvider.getSortFields()},getSortDirections:function(){return this._itemProvider.getSortDirections()},getSortCases:function(){return this._itemProvider.getSortCases()},groupBy:function(a,b,c,d){(a&&!(a.length<1)||this._groupedProvider.isGrouped())&&this._groupedProvider.canGrouping(a)&&(this._groupSorting=b,this._groupSortDirection=c,this._groupSortCase=d||ue.SENSITIVE,b&&this._itemProvider.orderBy(a,[c],[d],!1),this._groupedProvider.groupBy(a))},groupByMode:function(a,b){this._groupSorting&&this._itemProvider.orderBy(a,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(a)&&this._groupedProvider.groupByMode(a,b)},addGroupBy:function(a,b){var c,d=[this._groupSortDirection];this._groupedProvider.groupCount()<1?c=[b]:(c=this._groupedProvider.getGroupedFields(),c.splice(a,0,b)),this._groupedProvider.canGrouping(c)&&(this._groupSorting&&this._itemProvider.orderBy(c,d,null,!1),this._groupedProvider.groupBy(c))},removeGroupBy:function(a,b){if(this._groupedProvider.isGrouped()){var c,d=-1,e=this._groupedProvider.getGroupedFields(),f=e.length,g=0;for(c=f-1;c>=0;c--)if(g++,e[c]==a){d=c;break}if(d>=0){if(e.splice(d,b?g:1),!this._groupedProvider.canGrouping(e))return;this._groupSorting&&this._itemProvider.orderBy(e,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(e)}else{if(!this._groupedProvider.canGrouping(null))return;this._groupSorting&&this._itemProvider.orderBy(null,null,null,!1)}}},isGrouped:function(){return this._groupedProvider.isGrouped()},isMergedRowGrouped:function(){return this._groupedProvider.isGrouped()&&this._groupedProvider.isMergeMode()},getGroupLevels:function(){return this._groupedProvider.groupCount()},isGroupedField:function(a){return this._groupedProvider.isGroupedField(a)},getGroupLevel:function(a){return this._groupedProvider.getGroupLevel(a)},getGroupByFieldCount:function(){return this._groupedProvider.groupCount()},setExpandWhenGrouping:function(a){this._groupedProvider.setExpandWhenGrouping(a)},setGroupedStyle:function(a,b){this._groupedProvider.setExpandedAdornments(a),this._groupedProvider.setCollapsedAdornments(b)},expand:function(a,b,c){this._groupedProvider.expand(a,b,c)},collapse:function(a,b){this._groupedProvider.collapse(a,b)},setPaging:function(a,b,c,d){this._itemProvider.setPaging(a,b,c,d)},page:function(){return this._itemProvider.page()},setPage:function(a,b){this._itemProvider.setPage(a,b)},pageCount:function(){return this._itemProvider.pageCount()},setPageCount:function(a){this._itemProvider.setPageCount(a)},getDisplayItemIndex:function(a){return this._itemProvider.isPaging()?a.index()+this._itemProvider.pageStartIndex():a.index()},setExpandWhenGrouping:function(a){this._groupedProvider.setExpandWhenGrouping(a)},getCheckedRows:function(){return this._itemProvider.getCheckedRows()},setCheckableExpression:function(a){this._itemProvider.setCheckableExpression(a)},resetCheckables:function(){this._itemProvider.resetCheckables()},applyCheckables:function(){this._itemProvider.applyCheckables()},dataSource:function(){return this._itemProvider.dataSource()},setDataSource:function(a){this._itemProvider.setDataSource(a)},getAllItems:function(){return this._groupedProvider.getAllItems()},findItem:function(a,b,c,d,e){return this._groupedProvider.findItem(a,b,c,d,e)},findCell:function(a,b,c,d,e,f){return this._groupedProvider.findCell(a,b,c,d,e,f)},checkItem:function(a,b,c){this._groupedProvider.checkItem(a,b,c)},checkAll:function(a,b,c){this._groupedProvider.checkAll(a,b,c)},hasCellStyle:function(){return this._itemProvider.hasCellStyle()},setCellStyle:function(a,b,c){this._itemProvider.setCellStyle(a,b,c)},setCellStyles:function(a,b,c){this._itemProvider.setCellStyles(a,b,c)},clearCellStyles:function(){this._itemProvider.clearCellStyles()},removeCellStyle:function(a){this._itemProvider.removeCellStyle(a)},getCellStyle:function(a,b){return this._itemProvider.getCellStyle(a,b)},checkCellStyle:function(a,b){return this._itemProvider.checkCellStyle(a,b)},getItemOfRow:function(a){return this._itemProvider.getItemOfRow(a)},_doBeginUpdate:function(a){var b=this._super(a);return this._groupedProvider._setEditItem(b),b},_doBeginAppend:function(a){var b=this._super(a);return this._groupedProvider._setEditItem(b),b},_doBeginInsert:function(a,b,c,d){var e=this._super(a,b,c,d);return this._groupedProvider._setEditItem(e),e},_doCancelEdit:function(a,b){this._super(a,b),this._groupedProvider._setEditItem(null)},_doCommitEdit:function(a,b){this._super(a,b),this._groupedProvider._setEditItem(null)},onGroupedItemProviderGrouping:function(a,b){return this.fireConfirmEvent(hg.GROUPING,b)},onGroupedItemProviderGrouped:function(a){this.fireEvent(hg.GROUPED)},onGroupedItemProviderExpand:function(a,b){this.fireEvent(hg.EXPAND,b)},onGroupedItemProviderExpanded:function(a,b){this.fireEvent(hg.EXPANDED,b)},onGroupedItemProviderCollapse:function(a,b){this.fireEvent(hg.COLLAPSE,b)},onGroupedItemProviderCollapsed:function(a,b){this.fireEvent(hg.COLLAPSED,b)},onItemProviderFilterAdded:function(a,b,c){this._fireFilterAdded(b,c)},onItemProviderFilterRemoved:function(a,b,c){this._fireFilterRemoved(b,c)},onItemProviderFilterCleared:function(a,b){this._fireFilterCleared(b)},onItemProviderFilterAllCleared:function(a){this._fireFilterAllCleared()},onItemProviderFiltered:function(a){this._fireFiltered(ag.FILTERED)},onItemProviderSort:function(a,b,c){this._fireSort(b,c)},onItemProviderSorted:function(a){this._fireSorted()}}),mg=new RegExp("\\s*,\\s*"),ng=Xa("VisualStyles",bb,{init:function(a,b,c,d){this._super(!0),this._owner=a,this._name=b,this._parent=null,this._sysDefault=null,this._values=[],this._updateLock=0,this._font=null,d!==ta&&(this._fireEvents=d),c&&this.extend(c)},assign:function(a){this._super(a);for(var b=ng.STYLE_NAMES,c=Object.keys(b),d=0,e=c.length;e>d;d++){var f="_"+c[d];this[f]=a[f]}this._values=a._values.slice()},copy:function(a){for(var b=ng.STYLE_NAMES,c=Object.keys(b),d=0,e=c.length;e>d;d++){var f="_"+c[d];!this[f]&&a[f]&&(this[f]=a[f],this._values[b[c[d]]]=!0)}},noProxy:function(){},name:null,parent:null,sysDefault:null,fireEvents:!0,setParent:function(a,b){return a!==this._parent&&(this._parent=a,(b===ta||b)&&this._fireEvents&&this.changed(ng.STYLE_ALL)),this},setSysDefault:function(a,b){a!==this._sysDefault&&(this._sysDefault=a,(b===ta||b)&&this._fireEvents&&this.changed(ng.STYLE_ALL))},setParentAndDefault:function(a,b){this._parent=a,this._sysDefault=b},background:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.BACKGROUND]&&a===this._background||(this._background=a,this._values[ng.BACKGROUND]=!0,this._fireEvents&&this.changed(ng.BACKGROUND))):this._values[ng.BACKGROUND]&&(delete this._background,this._values[ng.BACKGROUND]=!1,this._fireEvents&&this.changed(ng.BACKGROUND))):this.searchStyles(ng.BACKGROUND)._background},selectedBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.SELECTED_BACKGROUND]&&a===this._selectedBackground||(this._selectedBackground=a,this._values[ng.SELECTED_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.SELECTED_BACKGROUND))):this._values[ng.SELECTED_BACKGROUND]&&(delete this._selectedBackground,this._values[ng.SELECTED_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.SELECTED_BACKGROUND))):this.searchStyles(ng.SELECTED_BACKGROUND)._selectedBackground},inactiveBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.INACTIVE_BACKGROUND]&&a===this._inactiveBackground||(this._inactiveBackground=a,this._values[ng.INACTIVE_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.INACTIVE_BACKGROUND))):this._values[ng.INACTIVE_BACKGROUND]&&(delete this._inactiveBackground,this._values[ng.INACTIVE_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.INACTIVE_BACKGROUND))):this.searchStyles(ng.INACTIVE_BACKGROUND)._inactiveBackground},border:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),
this._values[ng.BORDER]&&a===this._border||(this._border=a,this._values[ng.BORDER]=!0,this._fireEvents&&this.changed(ng.BORDER))):this._values[ng.BORDER]&&(delete this._border,this._values[ng.BORDER]=!1,this._fireEvents&&this.changed(ng.BORDER))):this.searchStyles(ng.BORDER)._border},borderLeft:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.BORDER_LEFT]&&a===this._borderLeft||(this._borderLeft=a,this._values[ng.BORDER_LEFT]=!0,this._fireEvents&&this.changed(ng.BORDER_LEFT))):this._values[ng.BORDER_LEFT]&&(delete this._borderLeft,this._values[ng.BORDER_LEFT]=!1,this._fireEvents&&this.changed(ng.BORDER_LEFT))):this.searchStyles(ng.BORDER_LEFT)._borderLeft},borderLeftWidth:function(a){var b=this.borderLeft();return b?b.width():0},borderRight:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.BORDER_RIGHT]&&a===this._borderRight||(this._borderRight=a,this._values[ng.BORDER_RIGHT]=!0,this._fireEvents&&this.changed(ng.BORDER_RIGHT))):this._values[ng.BORDER_RIGHT]&&(delete this._borderRight,this._values[ng.BORDER_RIGHT]=!1,this._fireEvents&&this.changed(ng.BORDER_RIGHT))):this.searchStyles(ng.BORDER_RIGHT)._borderRight},borderRightWidth:function(a){var b=this.borderRight();return b?b.width():0},borderTop:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.BORDER_TOP]&&a===this._borderTop||(this._borderTop=a,this._values[ng.BORDER_TOP]=!0,this._fireEvents&&this.changed(ng.BORDER_TOP))):this._values[ng.BORDER_TOP]&&(delete this._borderTop,this._values[ng.BORDER_TOP]=!1,this._fireEvents&&this.changed(ng.BORDER_TOP))):this.searchStyles(ng.BORDER_TOP)._borderTop},borderTopWidth:function(a){var b=this.borderTop();return b?b.width():0},borderBottom:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.BORDER_BOTTOM]&&a===this._borderBottom||(this._borderBottom=a,this._values[ng.BORDER_BOTTOM]=!0,this._fireEvents&&this.changed(ng.BORDER_BOTTOM))):this._values[ng.BORDER_BOTTOM]&&(delete this._borderBottom,this._values[ng.BORDER_BOTTOM]=!1,this._fireEvents&&this.changed(ng.BORDER_BOTTOM))):this.searchStyles(ng.BORDER_BOTTOM)._borderBottom},borderBottomWidth:function(a){var b=this.borderBottom();return b?b.width():0},line:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.LINE]&&a===this._line||(this._line=a,this._values[ng.LINE]=!0,this._fireEvents&&this.changed(ng.LINE))):this._values[ng.LINE]&&(delete this._line,this._values[ng.LINE]=!1,this._fireEvents&&this.changed(ng.LINE))):this.searchStyles(ng.LINE)._line},renderer:function(a){return arguments.length>0?void(a!==ta?this._values[ng.RENDERER]&&a===this._renderer||(this._renderer=a,this._values[ng.RENDERER]=!0,this._fireEvents&&this.changed(ng.RENDERER)):this._values[ng.RENDERER]&&(delete this._renderer,this._values[ng.RENDERER]=!1,this._fireEvents&&this.changed(ng.RENDERER))):this.searchStyles(ng.RENDERER)._renderer},fontName:function(a){return arguments.length>0?void(a!==ta?this._values[ng.FONT_FAMILY]&&a===this._fontFamily||(this._fontFamily=a,this._values[ng.FONT_FAMILY]=!0,this._fireEvents&&this.changed(ng.FONT_FAMILY)):this._values[ng.FONT_FAMILY]&&(delete this._fontFamily,this._values[ng.FONT_FAMILY]=!1,this._fireEvents&&this.changed(ng.FONT_FAMILY))):this.searchStyles(ng.FONT_FAMILY)._fontFamily},fontFamily:function(a){return arguments.length>0?void(a!==ta?this._values[ng.FONT_FAMILY]&&a===this._fontFamily||(this._fontFamily=a,this._values[ng.FONT_FAMILY]=!0,this._fireEvents&&this.changed(ng.FONT_FAMILY)):this._values[ng.FONT_FAMILY]&&(delete this._fontFamily,this._values[ng.FONT_FAMILY]=!1,this._fireEvents&&this.changed(ng.FONT_FAMILY))):this.searchStyles(ng.FONT_FAMILY)._fontFamily},fontSize:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.FONT_SIZE]&&a===this._fontSize||(this._fontSize=a,this._values[ng.FONT_SIZE]=!0,this._fireEvents&&this.changed(ng.FONT_SIZE))):this._values[ng.FONT_SIZE]&&(delete this._fontSize,this._values[ng.FONT_SIZE]=!1,this._fireEvents&&this.changed(ng.FONT_SIZE))):this.searchStyles(ng.FONT_SIZE)._fontSize},fontBold:function(a){return arguments.length>0?void(a!==ta?(a=a&&"false"!==a,this._values[ng.FONT_BOLD]&&a===this._fontBold||(this._fontBold=a,this._values[ng.FONT_BOLD]=!0,this._fireEvents&&this.changed(ng.FONT_BOLD))):this._values[ng.FONT_BOLD]&&(delete this._fontBold,this._values[ng.FONT_BOLD]=!1,this._fireEvents&&this.changed(ng.FONT_BOLD))):this.searchStyles(ng.FONT_BOLD)._fontBold},fontItalic:function(a){return arguments.length>0?void(a!==ta?(a=a&&"false"!==a,this._values[ng.FONT_ITALIC]&&a===this._fontItalic||(this._fontItalic=a,this._values[ng.FONT_ITALIC]=!0,this._fireEvents&&this.changed(ng.FONT_ITALIC))):this._values[ng.FONT_ITALIC]&&(delete this._fontItalic,this._values[ng.FONT_ITALIC]=!1,this._fireEvents&&this.changed(ng.FONT_ITALIC))):this.searchStyles(ng.FONT_ITALIC)._fontItalic},fontUnderline:function(a){return arguments.length>0?void(a!==ta?(a=a&&"false"!==a,this._values[ng.FONT_UNDERLINE]&&a===this._fontUnderline||(this._fontUnderline=a,this._values[ng.FONT_UNDERLINE]=!0,this._fireEvents&&this.changed(ng.FONT_UNDERLINE))):this._values[ng.FONT_UNDERLINE]&&(delete this._fontUnderline,this._values[ng.FONT_UNDERLINE]=!1,this._fireEvents&&this.changed(ng.FONT_UNDERLINE))):this.searchStyles(ng.FONT_UNDERLINE)._fontUnderline},fontLinethrough:function(a){return arguments.length>0?void(a!==ta?(a=a&&"false"!==a,this._values[ng.FONT_LINETHROUGH]&&a===this._fontLinethrough||(this._fontLinethrough=a,this._values[ng.FONT_LINETHROUGH]=!0,this._fireEvents&&this.changed(ng.FONT_LINETHROUGH))):this._values[ng.FONT_LINETHROUGH]&&(delete this._fontLinethrough,this._values[ng.FONT_LINETHROUGH]=!1,this._fireEvents&&this.changed(ng.FONT_LINETHROUGH))):this.searchStyles(ng.FONT_LINETHROUGH)._fontLinethrough},textWrap:function(a){return arguments.length>0?void(a!==ta?this._values[ng.TEXT_WRAP]&&a===this._textWrap||(this._textWrap=a,this._values[ng.TEXT_WRAP]=!0,this._fireEvents&&this.changed(ng.TEXT_WRAP)):this._values[ng.TEXT_WRAP]&&(delete this._textWrap,this._values[ng.TEXT_WRAP]=!1,this._fireEvents&&this.changed(ng.TEXT_WRAP))):this.searchStyles(ng.TEXT_WRAP)._textWrap},foreground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.FOREGROUND]&&a===this._foreground||(this._foreground=a,this._values[ng.FOREGROUND]=!0,this._fireEvents&&this.changed(ng.FOREGROUND))):this._values[ng.FOREGROUND]&&(delete this._foreground,this._values[ng.FOREGROUND]=!1,this._fireEvents&&this.changed(ng.FOREGROUND))):this.searchStyles(ng.FOREGROUND)._foreground},selectedForeground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.SELECTED_FOREGROUND]&&a===this._selectedForeground||(this._selectedForeground=a,this._values[ng.SELECTED_FOREGROUND]=!0,this._fireEvents&&this.changed(ng.SELECTED_FOREGROUND))):this._values[ng.SELECTED_FOREGROUND]&&(delete this._selectedForeground,this._values[ng.SELECTED_FOREGROUND]=!1,this._fireEvents&&this.changed(ng.SELECTED_FOREGROUND))):this.searchStyles(ng.SELECTED_FOREGROUND)._selectedForeground},inactiveForeground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.INACTIVE_FOREGROUND]&&a===this._inactiveForeground||(this._inactiveForeground=a,this._values[ng.INACTIVE_FOREGROUND]=!0,this._fireEvents&&this.changed(ng.INACTIVE_FOREGROUND))):this._values[ng.INACTIVE_FOREGROUND]&&(delete this._inactiveForeground,this._values[ng.INACTIVE_FOREGROUND]=!1,this._fireEvents&&this.changed(ng.INACTIVE_FOREGROUND))):this.searchStyles(ng.INACTIVE_FOREGROUND)._inactiveForeground},textAlignment:function(a){return arguments.length>0?void(a!==ta?this._values[ng.TEXT_ALIGNMENT]&&a===this._textAlignment||(this._textAlignment=a,this._values[ng.TEXT_ALIGNMENT]=!0,this._fireEvents&&this.changed(ng.TEXT_ALIGNMENT)):this._values[ng.TEXT_ALIGNMENT]&&(delete this._textAlignment,this._values[ng.TEXT_ALIGNMENT]=!1,this._fireEvents&&this.changed(ng.TEXT_ALIGNMENT))):this.searchStyles(ng.TEXT_ALIGNMENT)._textAlignment},lineAlignment:function(a){return arguments.length>0?void(a!==ta?this._values[ng.LINE_ALIGNMENT]&&a===this._lineAlignment||(this._lineAlignment=a,this._values[ng.LINE_ALIGNMENT]=!0,this._fireEvents&&this.changed(ng.LINE_ALIGNMENT)):this._values[ng.LINE_ALIGNMENT]&&(delete this._lineAlignment,this._values[ng.LINE_ALIGNMENT]=!1,this._fireEvents&&this.changed(ng.LINE_ALIGNMENT))):this.searchStyles(ng.LINE_ALIGNMENT)._lineAlignment},numberFormat:function(a){return arguments.length>0?void(a!==ta?this._values[ng.NUMBER_FORMAT]&&a===this._numberFormat||(this._numberFormat=a,this._values[ng.NUMBER_FORMAT]=!0,this._fireEvents&&this.changed(ng.NUMBER_FORMAT)):this._values[ng.NUMBER_FORMAT]&&(delete this._numberFormat,this._values[ng.NUMBER_FORMAT]=!1,this._fireEvents&&this.changed(ng.NUMBER_FORMAT))):this.searchStyles(ng.NUMBER_FORMAT)._numberFormat},datetimeFormat:function(a){return arguments.length>0?void(a!==ta?this._values[ng.DATETIME_FORMAT]&&a===this._datetimeFormat||(this._datetimeFormat=a,this._values[ng.DATETIME_FORMAT]=!0,this._fireEvents&&this.changed(ng.DATETIME_FORMAT)):this._values[ng.DATETIME_FORMAT]&&(delete this._datetimeFormat,this._values[ng.DATETIME_FORMAT]=!1,this._fireEvents&&this.changed(ng.DATETIME_FORMAT))):this.searchStyles(ng.DATETIME_FORMAT)._datetimeFormat},booleanFormat:function(a){return arguments.length>0?void(a!==ta?this._values[ng.BOOLEAN_FORMAT]&&a===this._booleanFormat||(this._booleanFormat=a,this._values[ng.BOOLEAN_FORMAT]=!0,this._fireEvents&&this.changed(ng.BOOLEAN_FORMAT)):this._values[ng.BOOLEAN_FORMAT]&&(delete this._booleanFormat,this._values[ng.BOOLEAN_FORMAT]=!1,this._fireEvents&&this.changed(ng.BOOLEAN_FORMAT))):this.searchStyles(ng.BOOLEAN_FORMAT)._booleanFormat},prefix:function(a){return arguments.length>0?void(a!==ta?this._values[ng.PREFIX]&&a===this._prefix||(this._prefix=a,this._values[ng.PREFIX]=!0,this._fireEvents&&this.changed(ng.PREFIX)):this._values[ng.PREFIX]&&(delete this._prefix,this._values[ng.PREFIX]=!1,this._fireEvents&&this.changed(ng.PREFIX))):this.searchStyles(ng.PREFIX)._prefix},suffix:function(a){return arguments.length>0?void(a!==ta?this._values[ng.SUFFIX]&&a===this._suffix||(this._suffix=a,this._values[ng.SUFFIX]=!0,this._fireEvents&&this.changed(ng.SUFFIX)):this._values[ng.SUFFIX]&&(delete this._suffix,this._values[ng.SUFFIX]=!1,this._fireEvents&&this.changed(ng.SUFFIX))):this.searchStyles(ng.SUFFIX)._suffix},paddingLeft:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.PADDING_LEFT]&&a===this._paddingLeft||(this._paddingLeft=a,this._values[ng.PADDING_LEFT]=!0,this._fireEvents&&this.changed(ng.PADDING_LEFT))):this._values[ng.PADDING_LEFT]&&(delete this._paddingLeft,this._values[ng.PADDING_LEFT]=!1,this._fireEvents&&this.changed(ng.PADDING_LEFT))):this.searchStyles(ng.PADDING_LEFT)._paddingLeft},paddingRight:function(a){return arguments.length>0?void(a!==ta?this._values[ng.PADDING_RIGHT]&&a===this._paddingRight||(a=parseInt(a),this._paddingRight=a,this._values[ng.PADDING_RIGHT]=!0,this._fireEvents&&this.changed(ng.PADDING_RIGHT)):this._values[ng.PADDING_RIGHT]&&(delete this._paddingRight,this._values[ng.PADDING_RIGHT]=!1,this._fireEvents&&this.changed(ng.PADDING_RIGHT))):this.searchStyles(ng.PADDING_RIGHT)._paddingRight},paddingTop:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.PADDING_TOP]&&a===this._paddingTop||(this._paddingTop=a,this._values[ng.PADDING_TOP]=!0,this._fireEvents&&this.changed(ng.PADDING_TOP))):this._values[ng.PADDING_TOP]&&(delete this._paddingTop,this._values[ng.PADDING_TOP]=!1,this._fireEvents&&this.changed(ng.PADDING_TOP))):this.searchStyles(ng.PADDING_TOP)._paddingTop},paddingBottom:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.PADDING_BOTTOM]&&a===this._paddingBottom||(this._paddingBottom=a,this._values[ng.PADDING_BOTTOM]=!0,this._fireEvents&&this.changed(ng.PADDING_BOTTOM))):this._values[ng.PADDING_BOTTOM]&&(delete this._paddingBottom,this._values[ng.PADDING_BOTTOM]=!1,this._fireEvents&&this.changed(ng.PADDING_BOTTOM))):this.searchStyles(ng.PADDING_BOTTOM)._paddingBottom},paddingHorz:function(a){return this.paddingLeft()+this.paddingRight()},paddingVert:function(a){return this.paddingTop()+this.paddingBottom()},iconIndex:function(a){return arguments.length>0?void(a!==ta?this._values[ng.ICON_INDEX]&&a===this._iconIndex||(this._iconIndex=a,this._values[ng.ICON_INDEX]=!0,this._fireEvents&&this.changed(ng.ICON_INDEX)):this._values[ng.ICON_INDEX]&&(delete this._iconIndex,this._values[ng.ICON_INDEX]=!1,this._fireEvents&&this.changed(ng.ICON_INDEX))):this.searchStyles(ng.ICON_INDEX)._iconIndex},iconLocation:function(a){return arguments.length>0?void(a!==ta?this._values[ng.ICON_LOCATION]&&a===this._iconLocation||(this._iconLocation=a,this._values[ng.ICON_LOCATION]=!0,this._fireEvents&&this.changed(ng.ICON_LOCATION)):this._values[ng.ICON_LOCATION]&&(delete this._iconLocation,this._values[ng.ICON_LOCATION]=!1,this._fireEvents&&this.changed(ng.ICON_LOCATION))):this.searchStyles(ng.ICON_LOCATION)._iconLocation},iconAlignment:function(a){return arguments.length>0?void(a!==ta?this._values[ng.ICON_ALIGNMENT]&&a===this._iconAlignment||(this._iconAlignment=a,this._values[ng.ICON_ALIGNMENT]=!0,this._fireEvents&&this.changed(ng.ICON_ALIGNMENT)):this._values[ng.ICON_ALIGNMENT]&&(delete this._iconAlignment,this._values[ng.ICON_ALIGNMENT]=!1,this._fireEvents&&this.changed(ng.ICON_ALIGNMENT))):this.searchStyles(ng.ICON_ALIGNMENT)._iconAlignment},iconOffset:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.ICON_OFFSET]&&a===this._iconOffset||(this._iconOffset=a,this._values[ng.ICON_OFFSET]=!0,this._fireEvents&&this.changed(ng.ICON_OFFSET))):this._values[ng.ICON_OFFSET]&&(delete this._iconOffset,this._values[ng.ICON_OFFSET]=!1,this._fireEvents&&this.changed(ng.ICON_OFFSET))):this.searchStyles(ng.ICON_OFFSET)._iconOffset},iconPadding:function(a){return arguments.length>0?void(a!==ta?(a=parseInt(a),this._values[ng.ICON_PADDING]&&a===this._iconPadding||(this._iconPadding=a,this._values[ng.ICON_PADDING]=!0,this._fireEvents&&this.changed(ng.ICON_PADDING))):this._values[ng.ICON_PADDING]&&(delete this._iconPadding,this._values[ng.ICON_PADDING]=!1,this._fireEvents&&this.changed(ng.ICON_PADDING))):this.searchStyles(ng.ICON_PADDING)._iconPadding},contentFit:function(a){return arguments.length>0?void(a!==ta?this._values[ng.CONTENT_FIT]&&a===this._contentFit||(this._contentFit=a,this._values[ng.CONTENT_FIT]=!0,this._fireEvents&&this.changed(ng.CONTENT_FIT)):this._values[ng.CONTENT_FIT]&&(delete this._contentFit,this._values[ng.CONTENT_FIT]=!1,this._fireEvents&&this.changed(ng.CONTENT_FIT))):this.searchStyles(ng.CONTENT_FIT)._contentFit},selectionDisplay:function(a){return arguments.length>0?void(a!==ta?this._values[ng.SELECTION_DISPLAY]&&a===this._selectionDisplay||(this._selectionDisplay=a,this._values[ng.SELECTION_DISPLAY]=!0,this._fireEvents&&this.changed(ng.SELECTION_DISPLAY)):this._values[ng.SELECTION_DISPLAY]&&(delete this._selectionDisplay,this._values[ng.SELECTION_DISPLAY]=!1,this._fireEvents&&this.changed(ng.SELECTION_DISPLAY))):this.searchStyles(ng.SELECTION_DISPLAY)._selectionDisplay},hoveredMaskBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.HOVERED_MASK_BACKGROUND]&&a===this._hoveredMaskBackground||(this._hoveredMaskBackground=a,this._values[ng.HOVERED_MASK_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.HOVERED_MASK_BACKGROUND))):this._values[ng.HOVERED_MASK_BACKGROUND]&&(delete this._hoveredMaskBackground,this._values[ng.HOVERED_MASK_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.HOVERED_MASK_BACKGROUND))):this.searchStyles(ng.HOVERED_MASK_BACKGROUND)._hoveredMaskBackground},hoveredMaskBorder:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.HOVERED_MASK_BORDER]&&a===this._hoveredMaskBorder||(this._hoveredMaskBorder=a,this._values[ng.HOVERED_MASK_BORDER]=!0,this._fireEvents&&this.changed(ng.HOVERED_MASK_BORDER))):this._values[ng.HOVERED_MASK_BORDER]&&(delete this._hoveredMaskBorder,this._values[ng.HOVERED_MASK_BORDER]=!1,this._fireEvents&&this.changed(ng.HOVERED_MASK_BORDER))):this.searchStyles(ng.HOVERED_MASK_BORDER)._hoveredMaskBorder},hoveredBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.HOVERED_BACKGROUND]&&a===this._hoveredBackground||(this._hoveredBackground=a,this._values[ng.HOVERED_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.HOVERED_BACKGROUND))):this._values[ng.HOVERED_BACKGROUND]&&(delete this._hoveredBackground,this._values[ng.HOVERED_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.HOVERED_BACKGROUND))):this.searchStyles(ng.HOVERED_BACKGROUND)._hoveredBackground},hoveredForeground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.HOVERED_FOREGROUND]&&a===this._hoveredForeground||(this._hoveredForeground=a,this._values[ng.HOVERED_FOREGROUND]=!0,this._fireEvents&&this.changed(ng.HOVERED_FOREGROUND))):this._values[ng.HOVERED_FOREGROUND]&&(delete this._hoveredForeground,this._values[ng.HOVERED_FOREGROUND]=!1,this._fireEvents&&this.changed(ng.HOVERED_FOREGROUND))):this.searchStyles(ng.HOVERED_FOREGROUND)._hoveredForeground},figureBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.FIGURE_BACKGROUND]&&a===this._figureBackground||(this._figureBackground=a,this._values[ng.FIGURE_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.FIGURE_BACKGROUND))):this._values[ng.FIGURE_BACKGROUND]&&(delete this._figureBackground,this._values[ng.FIGURE_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.FIGURE_BACKGROUND))):this.searchStyles(ng.FIGURE_BACKGROUND)._figureBackground},figureInactiveBackground:function(a){return arguments.length>0?void(a!==ta?(a=this.getFill(a),this._values[ng.FIGURE_INACTIVE_BACKGROUND]&&a===this._figureInactiveBackground||(this._figureInactiveBackground=a,this._values[ng.FIGURE_INACTIVE_BACKGROUND]=!0,this._fireEvents&&this.changed(ng.FIGURE_INACTIVE_BACKGROUND))):this._values[ng.FIGURE_INACTIVE_BACKGROUND]&&(delete this._figureInactiveBackground,this._values[ng.FIGURE_INACTIVE_BACKGROUND]=!1,this._fireEvents&&this.changed(ng.FIGURE_INACTIVE_BACKGROUND))):this.searchStyles(ng.FIGURE_INACTIVE_BACKGROUND)._figureInactiveBackground},figureBorder:function(a){return arguments.length>0?void(a!==ta?(a=this.getStroke(a),this._values[ng.FIGURE_BORDER]&&a===this._figureBorder||(this._figureBorder=a,this._values[ng.FIGURE_BORDER]=!0,this._fireEvents&&this.changed(ng.FIGURE_BORDER))):this._values[ng.FIGURE_BORDER]&&(delete this._figureBorder,this._values[ng.FIGURE_BORDER]=!1,this._fireEvents&&this.changed(ng.FIGURE_BORDER))):this.searchStyles(ng.FIGURE_BORDER)._figureBorder},figureSize:function(a){return arguments.length>0?void(a!==ta?this._values[ng.FIGURE_SIZE]&&a===this._figureSize||(this._figureSize=ng.getDimension(a),this._values[ng.FIGURE_SIZE]=!0,this._fireEvents&&this.changed(ng.FIGURE_SIZE)):this._values[ng.FIGURE_SIZE]&&(delete this._figureSize,this._values[ng.FIGURE_SIZE]=!1,this._fireEvents&&this.changed(ng.FIGURE_SIZE))):this.searchStyles(ng.FIGURE_SIZE)._figureSize},figureName:function(a){return arguments.length>0?void(a!==ta?this._values[ng.FIGURE_NAME]&&a===this._figureName||(this._figureName=a,this._values[ng.FIGURE_NAME]=!0,this._fireEvents&&this.changed(ng.FIGURE_NAME)):this._values[ng.FIGURE_NAME]&&(delete this._figureName,this._values[ng.FIGURE_NAME]=!1,this._fireEvents&&this.changed(ng.FIGURE_NAME))):this.searchStyles(ng.FIGURE_NAME)._figureName},figureState:function(a){return arguments.length>0?void(a!==ta?this._values[ng.FIGURE_STATE]&&a===this._figureState||(this._figureState=a,this._values[ng.FIGURE_STATE]=!0,this._fireEvents&&this.changed(ng.FIGURE_STATE)):this._values[ng.FIGURE_STATE]&&(delete this._figureState,this._values[ng.FIGURE_STATE]=!1,this._fireEvents&&this.changed(ng.FIGURE_STATE))):this.searchStyles(ng.FIGURE_STATE)._figureState},font:function(a){if(!(arguments.length>0)){var b=[],c=this.fontSize();this.fontItalic()&&b.push("italic"),this.fontBold()&&b.push("bold"),b.push(c+"px");var d;return(d=this.fontFamily())&&b.push(d),h=b.join(" "),{font:h,size:c,underline:this.fontUnderline()}}if(a=a&&a.trim()){var e=a.split(mg),f=e.length;f>0&&e[0]&&this.fontFamily(e[0]),f>1&&e[1]&&this.fontSize(e[1]);var g,h;for(g=2;f>g;g++)if(h=e[g])switch(h=h.toLowerCase()){case"bold":this.fontBold(!0);break;case"italic":this.fontItalic(!0);break;case"underline":this.fontUnderline(!0);break;case"linethrough":case"line-through":this.fontLinethrough(!0)}}},beginUpdate:function(){this._updateLock++},endUpdate:function(a){a=arguments.length>0?a:!0,this._updateLock--,0==this._updateLock&&this._fireEvents&&this.changed(ng.STYLE_ALL,a)},hasValue:function(a){return"string"==typeof a?this._values[ng.STYLE_NAMES[a]]:this._values[a]},getValue:function(a){return this["_"+a]},clearValues:function(){this._values=[]},extend:function(a,b){b=arguments.length>1?b:!0,this.beginUpdate();try{if(a instanceof ng){var c=a._values;c[ng.BACKGROUND]&&this.background(a._background),c[ng.SELECTED_BACKGROUND]&&this.selectedBackground(a._selectedBackground),c[ng.INACTIVE_BACKGROUND]&&this.inactiveBackground(a._inactiveBackground),c[ng.BORDER]&&this.border(a._border),c[ng.BORDER_LEFT]&&this.borderLeft(a._borderLeft),c[ng.BORDER_RIGHT]&&this.borderRight(a._borderRight),c[ng.BORDER_TOP]&&this.borderTop(a._borderTop),c[ng.BORDER_BOTTOM]&&this.borderBottom(a._borderBottom),c[ng.LINE]&&this.line(a._line),c[ng.RENDERER]&&this.renderer(a._renderer),c[ng.FONT_FAMILY]&&this.fontFamily(a._fontFamily),c[ng.FONT_SIZE]&&this.fontSize(a._fontSize),c[ng.FONT_BOLD]&&this.fontBold(a._fontBold),c[ng.FONT_ITALIC]&&this.fontItalic(a._fontItalic),c[ng.FONT_UNDERLINE]&&this.fontUnderline(a._fontUnderline),c[ng.FONT_LINETHROUGH]&&this.fontLinethrough(a._fontLinethrough),c[ng.TEXT_WRAP]&&this.textWrap(a._textWrap),c[ng.FOREGROUND]&&this.foreground(a._foreground),c[ng.SELECTED_FOREGROUND]&&this.selectedForeground(a._selectedForeground),c[ng.INACTIVE_FOREGROUND]&&this.inactiveForeground(a._inactiveForeground),c[ng.TEXT_ALIGNMENT]&&this.textAlignment(a._textAlignment),c[ng.LINE_ALIGNMENT]&&this.lineAlignment(a._lineAlignment),c[ng.NUMBER_FORMAT]&&this.numberFormat(a._numberFormat),c[ng.DATETIME_FORMAT]&&this.datetimeFormat(a._datetimeFormat),c[ng.BOOLEAN_FORMAT]&&this.booleanFormat(a._booleanFormat),c[ng.PREFIX]&&this.prefix(a._prefix),c[ng.SUFFIX]&&this.suffix(a._suffix),c[ng.PADDING_LEFT]&&this.paddingLeft(a._paddingLeft),c[ng.PADDING_RIGHT]&&this.paddingRight(a._paddingRight),c[ng.PADDING_TOP]&&this.paddingTop(a._paddingTop),c[ng.PADDING_BOTTOM]&&this.paddingBottom(a._paddingBottom),c[ng.ICON_INDEX]&&this.iconIndex(a._iconIndex),c[ng.ICON_LOCATION]&&this.iconLocation(a._iconLocation),c[ng.ICON_ALIGNMENT]&&this.iconAlignment(a._iconAlignment),c[ng.ICON_OFFSET]&&this.iconOffset(a._iconOffset),c[ng.ICON_PADDING]&&this.iconPadding(a._iconPadding),c[ng.CONTENT_FIT]&&this.contentFit(a._contentFit),c[ng.SELECTION_DISPLAY]&&this.selectionDisplay(a._selectionDisplay),c[ng.HOVERED_MASK_BACKGROUND]&&this.hoveredMaskBackground(a._hoveredMaskBackground),c[ng.HOVERED_MASK_BORDER]&&this.hoveredMaskBorder(a._hoveredMaskBorder),c[ng.HOVERED_BACKGROUND]&&this.hoveredBackground(a._hoveredBackground),c[ng.HOVERED_FOREGROUND]&&this.hoveredForeground(a._hoveredForeground),c[ng.FIGURE_BACKGROUND]&&this.figureBackground(a._figureBackground),c[ng.FIGURE_INACTIVE_BACKGROUND]&&this.figureInactiveBackground(a._figureInactiveBackground),c[ng.FIGURE_BORDER]&&this.figureBorder(a._figureBorder),c[ng.FIGURE_SIZE]&&this.figureSize(a._figureSize),c[ng.FIGURE_NAME]&&this.figureName(a._figureName),c[ng.FIGURE_STATE]&&this.figureState(a._figureState)}else if(a){var d=a.padding;void 0!==d&&(this.paddingLeft(d),this.paddingRight(d),this.paddingTop(d),this.paddingBottom(d));for(var e in a){var f=this[e];f instanceof Function&&f.call(this,a[e])}}}finally{this.endUpdate(b)}},toProxy:function(){return{name:this._name,background:ng.getFillText(this.background()),selectedBackground:ng.getFillText(this.selectedBackground()),inactiveBackground:ng.getFillText(this.inactiveBackground()),border:ng.getStrokeText(this.border()),borderLeft:ng.getStrokeText(this.borderLeft()),borderRight:ng.getStrokeText(this.borderRight()),borderTop:ng.getStrokeText(this.borderTop()),borderBottom:ng.getStrokeText(this.borderBottom()),line:ng.getStrokeText(this.line()),renderer:this.renderer(),fontFamily:this.fontFamily(),fontSize:this.fontSize(),fontBold:this.fontBold(),fontItalic:this.fontItalic(),fontUnderline:this.fontUnderline(),fontLinethrough:this.fontLinethrough(),textWrap:this.textWrap(),foreground:ng.getFillText(this.foreground()),selectedForeground:ng.getFillText(this.selectedForeground()),inactiveForeground:ng.getFillText(this.inactiveForeground()),textAlignment:this.textAlignment(),lineAlignment:this.lineAlignment(),numberFormat:this.numberFormat(),datetimeFormat:this.datetimeFormat(),booleanFormat:this.booleanFormat(),prefix:this.prefix(),suffix:this.suffix(),paddingLeft:this.paddingLeft(),paddingRight:this.paddingRight(),paddingTop:this.paddingTop(),paddingBottom:this.paddingBottom(),iconIndex:this.iconIndex(),iconLocation:this.iconLocation(),iconAlignment:this.iconAlignment(),iconOffset:this.iconOffset(),iconPadding:this.iconPadding(),contentFit:this.contentFit(),selectionDisplay:this.selectionDisplay(),hoveredMaskBackground:ng.getFillText(this.hoveredMaskBackground()),hoveredMaskBorder:ng.getStrokeText(this.hoveredMaskBorder()),hoveredForeground:ng.getFillText(this.hoveredForeground()),figureBackground:ng.getFillText(this.figureBackground()),figureInactiveBackground:ng.getFillText(this.figureInactiveBackground()),figureBorder:ng.getStrokeText(this.figureBorder()),figureSize:ng.getDimensionText(this.figureSize()),figureName:this.figureName(),figureState:this.figureState()}},applyPaddings:function(a){var b;return a.x+=b=this.paddingLeft(),a.width-=b+this.paddingRight(),a.y+=b=this.paddingTop(),a.height-=b+this.paddingBottom(),a},searchStyles:function(a){if(this._values[a])return this;for(var b=this._parent;b;){if(b._values[a])return b;b=b._parent}if(this._sysDefault&&this._sysDefault._values[a])return this._sysDefault;for(var b=this._parent;b;){if(b._sysDefault&&b._sysDefault._values[a])return b._sysDefault;b=b._parent}return ng.Default},changed:function(a,b){b=arguments.length>1?b:!0,0==this._updateLock&&b&&(this._owner&&this._owner.stylesChanged?this._owner.stylesChanged(a):this.fireEvent(ng.CHANGED,a))},getFill:function(a){return ng.getFill(a)},getStroke:function(a){return ng.getStroke(a)}},{STYLE_ALL:-1,VISIBILITY:0,BACKGROUND:1,SELECTED_BACKGROUND:2,INACTIVE_BACKGROUND:3,FOREGROUND:4,SELECTED_FOREGROUND:5,INACTIVE_FOREGROUND:6,BORDER:10,BORDER_LEFT:11,BORDER_RIGHT:12,BORDER_TOP:13,BORDER_BOTTOM:14,LINE:15,RENDERER:16,TEXT_ALIGNMENT:20,LINE_ALIGNMENT:21,NUMBER_FORMAT:22,DATETIME_FORMAT:23,BOOLEAN_FORMAT:24,PREFIX:25,SUFFIX:26,FONT:30,FONT_FAMILY:31,FONT_SIZE:32,FONT_BOLD:33,FONT_ITALIC:34,FONT_UNDERLINE:35,FONT_LINETHROUGH:36,TEXT_WRAP:37,PADDING_LEFT:40,PADDING_RIGHT:41,PADDING_TOP:42,PADDING_BOTTOM:43,ICON_INDEX:44,ICON_LOCATION:45,ICON_ALIGNMENT:46,ICON_OFFSET:47,ICON_PADDING:48,CONTENT_FIT:49,SELECTION_DISPLAY:50,HOVERED_MASK_BACKGROUND:51,HOVERED_MASK_BORDER:52,HOVERED_BACKGROUND:53,HOVERED_FOREGROUND:54,FIGURE_BACKGROUND:55,FIGURE_INACTIVE_BACKGROUND:56,FIGURE_BORDER:57,FIGURE_SIZE:58,FIGURE_NAME:59,FIGURE_STATE:60,getFill:function(a){if("string"==typeof a){var b=a.trim().toLowerCase();a=0==b.indexOf("linear")?new Ad(b):0==b.indexOf("radial")?new Bd(b):0==b.indexOf("glass")?new Cd(b):new yd(b)}return a},getFillText:function(a){return a?a.toText():null},getStroke:function(a){if("string"==typeof a){var b=a.trim().split(",");a=new Dd(b[0],b[1])}return a},getStrokeText:function(a){return a?a.toText():null},getFont:function(a){var b,c,d=[],e=String(a),f=Gd;if(e){b=e.toLowerCase().split(mg),c=b.length;var g=null,h=!1,i=!1;c>0&&b[0]&&(g=b[0]),c>1&&b[1]&&(f=Number(b[1]));for(var j=2;c>j;j++)if(e=b[j])switch(e=e.toLowerCase()){case"bold":h=!0;break;case"italic":i=!0}i&&d.push("italic"),h&&d.push("bold"),d.push(f+"px"),g&&d.push(g)}return e=d.join(" "),{font:e,size:f}},getDimension:function(a){return a instanceof Xe||(a=new Xe(a)),a},getDimensionText:function(a){return a?a.toString():null}},function(a){function b(a){a._background=yd.WHITE,a._selectedBackground=yd.DKGRAY,a._inactiveBackground=yd.LTGRAY,a._border=null,a._borderLeft=null,a._borderRight=null,a._borderTop=null,a._borderBottom=null,a._line=null,a._fontFamily="Tahoma",a._fontSize=12,a._fontBold=!1,a._fontItalic=!1,a._fontUnderline=!1,a._fontLinethrough=!1,a._textWrap=Me.NONE,a._foreground=yd.BLACK,a._selectedForeground=yd.WHITE,a._inactiveForeground=yd.GRAY,a._textAlignment=Ne.CENTER,a._lineAlignment=Ne.CENTER,a._numberFormat=null,a._datetimeFormat=null,a._booleanFormat=null,a._prefix=null,a._suffix=null,a._paddingLeft=0,a._paddingRight=0,a._paddingTop=0,a._paddingBottom=0,a._iconIndex=0,a._iconLocation=Oe.LEFT,a._iconAlignment=Ne.CENTER,a._iconOffset=0,a._iconPadding=2,a._contentFit=Pe.AUTO,a._selectionDisplay=Qe.MASK,a._hoveredMaskBackground=new yd(525505271),a._hoveredMaskBorder=new Dd(861049591),a._hoveredBackground=null,a._hoveredForeground=null,a._figureBackground=new yd(4278224896),a._figureInactiveBackground=yd.LTGRAY,a._figureBorder=null,a._figureSize=null,a._figureName=null,a._figureState=null}a.Default=new a(null,"defaultStyles"),b(a.Default),a.STYLE_NAMES={background:a.BACKGROUND,selectedBackground:a.SELECTED_BACKGROUND,inactiveBackground:a.INACTIVE_BACKGROUND,border:a.BORDER,borderLeft:a.BORDER_LEFT,borderRight:a.BORDER_RIGHT,borderTop:a.BORDER_TOP,borderBottom:a.BORDER_BOTTOM,line:a.LINE,renderer:a.RENDERER,fontFamily:a.FONT_FAMILY,fontSize:a.FONT_SIZE,fontBold:a.FONT_BOLD,fontItalic:a.FONT_ITALIC,fontUnderline:a.FONT_UNDERLINE,fontLinethrough:a.FONT_LINETHROUGH,textWrap:a.TEXT_WRAP,foreground:a.FOREGROUND,selectedForeground:a.SELECTED_FOREGROUND,inactiveForeground:a.INACTIVE_FOREGROUND,textAlignment:a.TEXT_ALIGNMENT,lineAlignment:a.LINE_ALIGNMENT,numberFormat:a.NUMBER_FORMAT,datetimeFormat:a.DATETIME_FORMAT,booleanFormat:a.BOOLEAN_FORMAT,prefix:a.PREFIX,suffix:a.SUFFIX,paddingLeft:a.PADDING_LEFT,paddingRight:a.PADDING_RIGHT,paddingTop:a.PADDING_TOP,paddingBottom:a.PADDING_BOTTOM,iconIndex:a.ICON_INDEX,iconLocation:a.ICON_LOCATION,iconAlignment:a.ICON_ALIGNMENT,iconOffset:a.ICON_OFFSET,iconPadding:a.ICON_PADDING,contentFit:a.CONTENT_FIT,selectionDisplay:a.SELECTION_DISPLAY,hoveredMaskBackground:a.HOVERED_MASK_BACKGROUND,hoveredMaskBorder:a.HOVERED_MASK_BORDER,hoveredBackground:a.HOVERED_BACKGROUND,hoveredForeground:a.HOVERED_FOREGROUND,figureBackground:a.FIGURE_BACKGROUND,figureInactiveBackground:a.FIGURE_INACTIVE_BACKGROUND,figureBorder:a.FIGURE_BORDER,figureSize:a.FIGURE_SIZE,figureName:a.FIGURE_NAME,figureState:a.FIGURE_STATE}});ng.CHANGED="onVisualStylesChanged";var og=Xa("GridStyleSheet",null,{init:function(){this._super(),this._grid=new ng(null,og.DEFAULT,null,!1),this._panel=new ng(null,og.PANEL,null,!1),this._body=new ng(null,og.BODY,null,!1),this._bodyEmpty=new ng(null,og.BODY_EMPTY,null,!1),this._fixed=new ng(null,og.FIXED,null,!1),this._fixedColBar=new ng(null,og.FIXED_COLBAR,null,!1),this._fixedRowBar=new ng(null,og.FIXED_ROWBAR,null,!1),this._header=new ng(null,og.HEADER,null,!1),this._headerGroup=new ng(null,og.HEADER_GROUP,null,!1),this._headerSub=new ng(null,og.HEADER_SUB,null,!1),this._headerSummary=new ng(null,og.HEADER_SUMMARY,null,!1),this._footer=new ng(null,og.FOOTER,null,!1),this._footerGroup=new ng(null,og.FOOTER_GROUP,null,!1),this._rowGroupHead=new ng(null,og.ROWGROUP_HEAD,null,!1),this._rowGroupFoot=new ng(null,og.ROWGROUP_FOOT,null,!1),this._rowGroupSummary=new ng(null,og.ROWGROUP_SUMMARY,null,!1),
this._rowGroupHeader=new ng(null,og.ROWGROUP_HEADER,null,!1),this._rowGroupFooter=new ng(null,og.ROWGROUP_FOOTER,null,!1),this._rowGroupPanel=new ng(null,og.ROWGROUP_PANEL,null,!1),this._rowGroupBar=new ng(null,og.ROWGROUP_BAR,null,!1),this._rowGroupHeaderBar=new ng(null,og.ROWGROUP_HEADER_BAR,null,!1),this._rowGroupFooterBar=new ng(null,og.ROWGROUP_FOOTER_BAR,null,!1),this._indicator=new ng(null,og.INDICATOR,null,!1),this._indicatorHead=new ng(null,og.INDICATOR_HEAD,null,!1),this._indicatorFoot=new ng(null,og.INDICATOR_FOOT,null,!1),this._indicatorSum=new ng(null,og.INDICATOR_SUM,null,!1),this._checkBar=new ng(null,og.CHECKBAR,null,!1),this._checkBarHead=new ng(null,og.CHECKBAR_HEAD,null,!1),this._checkBarFoot=new ng(null,og.CHECKBAR_FOOT,null,!1),this._checkBarSum=new ng(null,og.CHECKBAR_SUM,null,!1),this._stateBar=new ng(null,og.STATEBAR,null,!1),this._stateBarHead=new ng(null,og.STATEBAR_HEAD,null,!1),this._stateBarFoot=new ng(null,og.STATEBAR_FOOT,null,!1),this._stateBarSum=new ng(null,og.STATEBAR_SUM,null,!1),this._selection=new ng(null,og.SELECTION,null,!1),this._treeExpander=new ng(null,og.TREE_EXPANDER,null,!1),this._fixedTreeExpander=new ng(null,og.FIXED_TREE_EXPANDER,null,!1)},getGrid:function(){return this._grid},getPanel:function(){return this._panel},getBody:function(){return this._body},getBodyEmpty:function(){return this._bodyEmpty},getFixed:function(){return this._fixed},getFixedColBar:function(){return this._fixedColBar},getFixedRowBar:function(){return this._fixedRowBar},getHeader:function(){return this._header},getHeaderGroup:function(){return this._headerGroup},getHeaderSub:function(){return this._headerSub},getHeaderSummary:function(){return this._headerSummary},getFooter:function(){return this._footer},getFooterGroup:function(){return this._footerGroup},getRowGroupHead:function(){return this._rowGroupHead},getRowGroupFoot:function(){return this._rowGroupFoot},getRowGroupSummary:function(){return this._rowGroupSummary},getRowGroupHeader:function(){return this._rowGroupHeader},getRowGroupFooter:function(){return this._rowGroupFooter},getRowGroupPanel:function(){return this._rowGroupPanel},getRowGroupBar:function(){return this._rowGroupBar},getRowGroupHeaderBar:function(){return this._rowGroupHeaderBar},getRowGroupFooterBar:function(){return this._rowGroupFooterBar},getIndicator:function(){return this._indicator},getIndicatorHead:function(){return this._indicatorHead},getIndicatorFoot:function(){return this._indicatorFoot},getIndicatorSum:function(){return this._indicatorSum},getCheckBar:function(){return this._checkBar},getCheckBarHead:function(){return this._checkBarHead},getCheckBarFoot:function(){return this._checkBarFoot},getCheckBarSum:function(){return this._checkBarSum},getStateBar:function(){return this._stateBar},getStateBarHead:function(){return this._stateBarHead},getStateBarFoot:function(){return this._stateBarFoot},getStateBarSum:function(){return this._stateBarSum},getSelection:function(){return this._selection},getTreeExpander:function(){return this._treeExpander},getFixedTreeExpander:function(){return this._fixedTreeExpander},grid:function(){return this._grid},panel:function(){return this._panel},body:function(){return this._body},bodyEmpty:function(){return this._bodyEmpty},fixed:function(){return this._fixed},fixedColBar:function(){return this._fixedColBar},fixedRowBar:function(){return this._fixedRowBar},header:function(){return this._header},headerGroup:function(){return this._headerGroup},headerSub:function(){return this._headerSub},headerSummary:function(){return this._headerSummary},footer:function(){return this._footer},footerGroup:function(){return this._footerGroup},rowGroupHead:function(){return this._rowGroupHead},rowGroupFoot:function(){return this._rowGroupFoot},rowGroupSummary:function(){return this._rowGroupSummary},rowGroupHeader:function(){return this._rowGroupHeader},rowGroupFooter:function(){return this._rowGroupFooter},rowGroupPanel:function(){return this._rowGroupPanel},rowGroupBar:function(){return this._rowGroupBar},rowGroupHeaderBar:function(){return this._rowGroupHeaderBar},rowGroupFooterBar:function(){return this._rowGroupFooterBar},indicator:function(){return this._indicator},indicatorHead:function(){return this._indicatorHead},indicatorFoot:function(){return this._indicatorFoot},indicatorSum:function(){return this._indicatorSum},checkBar:function(){return this._checkBar},checkBarHead:function(){return this._checkBarHead},checkBarFoot:function(){return this._checkBarFoot},checkBarSum:function(){return this._checkBarSum},stateBar:function(){return this._stateBar},stateBarHead:function(){return this._stateBarHead},stateBarFoot:function(){return this._stateBarFoot},stateBarSum:function(){return this._stateBarSum},selection:function(){return this._selection},treeExpander:function(){return this._treeExpander},fixedTreeExpander:function(){return this._fixedTreeExpander}},{DEFAULT:"default",GRID:"grid",PANEL:"panel",BODY:"body",BODY_EMPTY:"body.empty",FIXED:"fixed",FIXED_COLBAR:"fixed.colBar",FIXED_ROWBAR:"fixed.rowBar",HEADER:"header",HEADER_GROUP:"header.group",HEADER_SUB:"header.sub",HEADER_SUMMARY:"header.summary",FOOTER:"footer",FOOTER_GROUP:"footer.group",ROWGROUP_HEADER:"rowGroup.header",ROWGROUP_FOOTER:"rowGroup.footer",ROWGROUP_HEAD:"rowGroup.head",ROWGROUP_FOOT:"rowGroup.foot",ROWGROUP_SUMMARY:"rowGroup.summary",ROWGROUP_BAR:"rowGroup.bar",ROWGROUP_HEADER_BAR:"rowGroup.headerBar",ROWGROUP_FOOTER_BAR:"rowGroup.footerBar",ROWGROUP_PANEL:"rowGroup.panel",ROWGROUP_LEVELS:"rowGroup.levels",INDICATOR:"indicator",INDICATOR_HEAD:"indicator.head",INDICATOR_FOOT:"indicator.foot",INDICATOR_SUMMARY:"indicator.summary",CHECKBAR:"checkBar",CHECKBAR_HEAD:"checkBar.head",CHECKBAR_FOOT:"checkBar.foot",CHECKBAR_SUMMARY:"checkBar.summary",STATEBAR:"stateBar",STATEBAR_HEAD:"stateBar.head",STATEBAR_FOOT:"stateBar.foot",STATEBAR_SUMMARY:"stateBar.summary",SELECTION:"selection",TREE_EXPANDER:"tree.expander",FIXED_TREE_EXPANDER:"fixed.tree.expander",clearStyles:function(a){a.beginUpdate();try{a.styles().clearValues(),a.panel().styles().clearValues(),a.body()().styles()().clearValues(),a.body().emptyStyles().clearValues(),a.fixedOptions().styles().clearValues(),a.fixedOptions().colBarStyles().clearValues(),a.fixedOptions().rowBarStyles().clearValues(),a.header().styles().clearValues(),a.header().groupStyles().clearValues(),a.header().subStyles().clearValues(),a.header().summary().styles().clearValues(),a.footer().styles().clearValues(),a.footer().groupStyles().clearValues(),a.rowGroup().headStyles().clearValues(),a.rowGroup().footStyles().clearValues(),a.rowGroup().summaryStyles().clearValues(),a.rowGroup().headerStyles().clearValues(),a.rowGroup().footerStyles().clearValues(),a.rowGroup().panelStyles().clearValues(),a.rowGroup().barStyles().clearValues(),a.rowGroup().headerBarStyles().clearValues(),a.rowGroup().footerBarStyles().clearValues(),a.indicator().styles().clearValues(),a.indicator().headStyles().clearValues(),a.indicator().footStyles().clearValues(),a.indicator().summaryStyles().clearValues(),a.checkBar().styles().clearValues(),a.checkBar().headStyles().clearValues(),a.checkBar().footStyles().clearValues(),a.checkBar().summaryStyles().clearValues(),a.stateBar().styles().clearValues(),a.stateBar().headStyles().clearValues(),a.stateBar().footStyles().clearValues(),a.stateBar().summaryStyles().clearValues(),a.selectOptions().maskStyles().clearValues(),a instanceof po&&a.treeOptions().expanderStyles().clearValues()}finally{a.endUpdate()}}});og.Default=function(){var a=m(),b=new og,c=b._grid;return c.background(yd.WHITE),c.foreground(yd.BLACK),c.border(new Dd(4289374890)),c.borderLeft(null),c.borderTop(null),c.borderRight(null),c.borderBottom(null),c.inactiveBackground(yd.LTGRAY),c.fontFamily("Tahoma"),c.fontSize(12),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.CENTER),c.iconLocation(Oe.LEFT),c.iconAlignment(Ne.CENTER),c.iconPadding(2),c.contentFit(Pe.AUTO),c.figureBackground(yd.BLACK),c=b._panel,c.background(new yd(4291611852)),c.foreground(yd.BLACK),c.borderRight(new Dd(4286019447)),c.borderBottom(new Dd(4286019447)),c.paddingLeft(8),c.paddingTop(4),c.paddingBottom(5),c.paddingRight(2),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.CENTER),c=b._body,c.background(yd.WHITE),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(new Dd(4291611852)),c.borderBottom(c.borderRight()),c.line(Dd.DKGRAY),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.CENTER),c.iconLocation(Oe.LEFT),c.iconAlignment(Ne.CENTER),c.iconPadding(2),c.contentFit(Pe.AUTO),c.figureInactiveBackground(yd.LTGRAY),c=b._bodyEmpty,c.background(new yd(4294506744)),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(new Dd(4288256409)),c.borderBottom(c.borderRight()),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.fontSize(14),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.NEAR),c=b._fixed,c.background(yd.LTGRAY),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(new Dd(4288256409)),c.borderBottom(c.borderRight()),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.CENTER),c.figureInactiveBackground(yd.LTGRAY),c=b._fixedColBar,c.background(yd.LTGRAY),c.borderRight(new Dd(4288256409)),c.borderBottom(c.borderRight()),c=b._fixedRowBar,c.background(yd.LTGRAY),c.borderRight(new Dd(4288256409)),c.borderBottom(c.borderRight()),c=b._header,c.background(new Ad("linear #ffffff #cccccc 90")),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c.textWrap(Me.NORMAL),c.hoveredBackground(yd.LTGRAY),c=b._headerGroup,c.background(new Ad("linear #ffffff #aaaaaa 90")),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c.textWrap(Me.NORMAL),c=b._headerSub,c.foreground(yd.BLACK),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c.textWrap(Me.NORMAL),c=b._headerSummary,c.background(new yd(4293848814)),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(1),c.paddingBottom(2),c.textAlignment(Ne.FAR),c.lineAlignment(Ne.CENTER),c=b._footer,c.background(new yd(4293848814)),c.foreground(yd.BLACK),c.borderLeft(null),c.borderBottom(null),c.borderRight(Dd.GRAY),c.borderTop(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(2),c.paddingBottom(1),c.textAlignment(Ne.FAR),c.lineAlignment(Ne.CENTER),c=b._footerGroup,c.background(new yd(4293848814)),c.foreground(yd.BLACK),c.borderLeft(null),c.borderBottom(null),c.borderRight(Dd.GRAY),c.borderTop(Dd.GRAY),c.paddingTop(2),c.paddingBottom(1),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.FAR),c.lineAlignment(Ne.CENTER),c=b._rowGroupHeader,c.background(yd.GRAY),c.foreground(yd.WHITE),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.DKGRAY),c.borderBottom(Dd.DKGRAY),c.paddingTop(2),c.paddingBottom(2),c.paddingLeft(2),c.paddingRight(2),c.textAlignment(Ne.NEAR),c.lineAlignment(Ne.CENTER),c.figureBackground(yd.WHITE),c=b._rowGroupFooter,c.background(new yd(4292730333)),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(2),c.paddingBottom(2),c.textAlignment(Ne.FAR),c.lineAlignment(Ne.CENTER),c.figureBackground(yd.GRAY),c=b._rowGroupPanel,c.background(new Ad("linear #ffffff #cccccc 90")),c.foreground(yd.BLACK),c.border(Dd.DKGRAY),c.line(new Dd(4281545523,1)),c.paddingLeft(1),c.paddingRight(1),c.paddingTop(1),c.paddingBottom(1),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c=b._rowGroupBar,c.borderLeft(null),c.borderRight(Dd.DKGRAY),c.borderTop(null),c.borderBottom(null),c=b._rowGroupHeaderBar,c.borderLeft(null),c.borderRight(null),c.borderTop(null),c.borderBottom(null),c=b._rowGroupFooterBar,c.borderLeft(null),c.borderRight(null),c.borderTop(null),c.borderBottom(Dd.GRAY),c=b._indicator,c.background(new Ad("linear #e5e5e5 #ffffff 180")),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(2),c.paddingBottom(2),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c.hoveredBackground(yd.LTGRAY),c.selectedBackground(yd.LTGRAY),c.selectedForeground(yd.RED),c.figureBackground(yd.BLACK),c=b._checkBar,c.background(yd.WHITE),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(2),c.paddingBottom(2),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c.figureBackground(new yd(4283782485)),c.figureSize(new Xe(12)),c=b._checkBarHead,c.figureBackground(new yd(4283782485)),c.figureInactiveBackground(yd.LTGRAY),c.figureSize(new Xe(12)),c=b._stateBar,c.background(yd.WHITE),c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(Dd.GRAY),c.borderBottom(Dd.GRAY),c.paddingLeft(2),c.paddingRight(2),c.paddingTop(2),c.paddingBottom(2),c.textAlignment(Ne.CENTER),c.lineAlignment(Ne.CENTER),c=b._selection,c.background(new yd(790532351)),c.border(new Dd(1595838719,2)),c=b._treeExpander,c.foreground(yd.BLACK),c.borderLeft(null),c.borderTop(null),c.borderRight(null),c.borderBottom(new Dd(4291611852)),c.paddingTop(0),c.paddingBottom(0),c.paddingLeft(0),c.paddingRight(2),c.figureBackground(yd.GRAY),c.figureSize(new Xe(9)),c.line(Dd.GRAY),a=m()-a,Ea("init default style sheet: "+a+" msecs."),b}();var pg="grid",qg="panel",rg="body",sg="fixed",tg="header",ug="footer",vg="rowGroup",wg="indicator",xg="rowHeader",yg="checkBar",zg="statusBar",Ag="stateBar",Bg="selection",Cg="mobileSelection",Dg="tree",Eg=Xa("StylesArchiver",null,{init:function(){this._super()},loadGridStyles:function(a,b){this._loadGrid(a,b)},loadGrid:function(a,b){},saveGrid:function(a){},loadStyles:function(a,b){},saveStyles:function(a){}},{applyStyles:function(a,b,c){c=arguments.length>2?c:!0,a&&b&&b.extend(a,c)},deserialize:function(a,b){function c(b,c){if(c&&a&&a.hasOwnProperty(b)){var d=a[b];if(d)return c.extend(d),!0}return!1}function d(b,c,d){var e=a[b][c];return e?(d.extend(e),!0):!1}var e,f,g,h,i,j,k;c(pg,b.styles()),c(qg,b.panel().styles());var l=b.body();if(c(rg,l.styles())){if(d(rg,"empty",l.emptyStyles()),j=a[rg].dynamicStyles){for(e=b.body().dynamicStyles().owner(),f=[],k=0;k<j.length;k++)g=j[k],s(g.criteria)?(h=new Ig(e),h.setCriteria(g.criteria),s(g.styles)?h.setStyles(g.styles):h.setStyles([g.styles]),f.push(h)):(i=new Hg(e),i.setCriteria(g.criteria),i.setStyles(g.styles),f.push(i));l.setDynamicStyles(f)}if(j=a[rg].cellDynamicStyles){for(e=l.cellDynamicStyles().owner(),f=[],k=0;k<j.length;k++)g=j[k],s(g.criteria)?(h=new Ig(e),h.setCriteria(g.criteria),s(g.styles)?h.setStyles(g.styles):h.setStyles([g.styles]),f.push(h)):(i=new Hg(e),i.setCriteria(g.criteria),i.setStyles(g.styles),f.push(i));l.setCellDynamicStyles(f)}}var m=b.fixedOptions();c(sg,m.styles())&&(d(sg,"colBar",m.colBarStyles()),d(sg,"rowBar",m.rowBarStyles()));var n=b.header();c(tg,n.styles())&&(d(tg,"group",n.groupStyles()),d(tg,"sub",n.subStyles()),d(tg,"summary",n.summary().styles()));var o=b.footer();if(c(ug,o.styles())&&d(ug,"group",o.groupStyles()),a&&a.hasOwnProperty(vg)){var p=b.rowGroup();d(vg,"header",p.headerStyles()),d(vg,"footer",p.footerStyles()),d(vg,"head",p.headStyles()),d(vg,"foot",p.footStyles()),d(vg,"summary",p.summaryStyles()),d(vg,"headerBar",p.headerBarStyles()),d(vg,"footerBar",p.footerBarStyles()),d(vg,"bar",p.barStyles()),d(vg,"panel",p.panelStyles());var q=a[vg].rowGroupLevels;if(q)for(k=0;k<Math.min(q.length,p.levelCount);k++){j=q[k];var r=p.getLevel(k);j.header&&r.headerStyles().extend(j.header),j.footer&&r.footerStyles().extend(j.footer),j.headerBar&&r.headerBarStyles().extend(j.headerBar),j.footerBar&&r.footerBarStyles().extend(j.footerBar),j.bar&&r.barStyles().extend(j.bar)}}var t=b.indicator();c(xg,t.styles())?(d(xg,"head",t.headStyles()),d(xg,"foot",t.footStyles()),d(xg,"summary",t.summaryStyles())):c(wg,t.styles())&&(d(wg,"head",t.headStyles()),d(wg,"foot",t.footStyles()),d(wg,"summary",t.summaryStyles()));var u=b.checkBar();c(yg,u.styles())&&(d(yg,"head",u.headStyles()),d(yg,"foot",u.footStyles()),d(yg,"summary",u.summaryStyles()));var v=b.stateBar();if(c(zg,v.styles())&&(d(zg,"head",v.headStyles()),d(zg,"foot",v.footStyles()),d(zg,"summary",v.summaryStyles())),c(Ag,v.styles())&&(d(Ag,"head",v.headStyles()),d(Ag,"foot",v.footStyles()),d(Ag,"summary",v.summaryStyles())),gb()?c(Cg,b.selectOptions().mobileStyles()):c(Bg,b.selectOptions().maskStyles()),po){var w=ab(b,po);w&&a&&a.hasOwnProperty(Dg)&&d(Dg,"expander",w.treeOptions().expanderStyles())}}}),Fg=Xa("DynamicStyleOwner",null,{init:function(a){if(this._super(),a&&a.hasOwnProperty("capitalIndexers")){var b=a.capitalIndexers;b&&(this._capitalIndexers=b.concat())}},capitalIndexers:function(){return this._capitalIndexers},parseValue:function(a,b){}}),Gg=Xa("DynamicStyle",null,{init:function(a){this._super(),Ra(null!=a,"owner is null"),this._owner=a,this._body=!0,this._fixed=!0},owner:function(){return this._owner},apply:function(a,b){},_setOwner:function(a){this._owner=a},_changed:function(){}}),Hg=Xa("DynamicStyleImpl",Gg,{init:function(a,b){this._super(a),this._exprNode=null,this._styleMap={},b&&(b.hasOwnProperty("criteria")&&this.setCriteria(b.criteria),b.hasOwnProperty("styles")&&this.setStyles(b.styles))},criteria:null,styles:null,setCriteria:function(a){var b=a?a.toString():null;b!=this._criteria&&(this._criteria=b,this.$_buildExpression(),this._changed())},setStyles:function(a){a!=this._styles&&(this._styles=a,this.$_buildStyles(),this._changed())},check:function(a){return this._exprNode&&this._exprNode.evaluate(a)},apply:function(a,b){if(this._exprNode&&this._exprNode.evaluate(a)){var c;for(var d in this._styleMap)c=b[d],c&&c.call(b,this._styleMap[d])}},$_buildExpression:function(){this._criteria?(this._exprNode=vc.Default.parse(this._criteria,this._owner?this._owner.capitalIndexers():null),null==this._exprNode&&(this._exprNode=Vb.Default)):this._exprNode=Vb.Default},$_buildStyles:function(){if(this._styleMap={},"string"==typeof this._styles)for(var a=this._styles.split(";"),b=0,c=a.length;c>b;b++){var d=a[b],e=d.split("=");e.length>1?this._styleMap[e[0]]=e[1]:this._styleMap[e[0]]=ta}else if(this._styles)for(var f in this._styles)this._styleMap[f]=this._styles[f]}}),Ig=Xa("DynamicStyleCase",Gg,{init:function(a,b){this._super(a),this._exprNodes=[],this._stylesMap=[],b&&(b.hasOwnProperty("criteria")&&this.setCriteria(b.criteria),b.hasOwnProperty("styles")&&this.setStyles(b.styles))},criteria:null,styles:null,setCriteria:function(a){a!=this._criteria&&(this._criteria=a,this.$_buildExpressions(),this._changed())},setStyles:function(a){a!=this._styles&&(this._styles=a,this.$_buildStyles(),this._changed())},check:function(a){for(var b=0,c=this._exprNodes.length;c>b;b++){var d=this._exprNodes[b];if(d&&d.evaluate(a))return!0}return!1},apply:function(a,b){for(var c=0,d=this._exprNodes.length;d>c;c++){var e=this._exprNodes[c];if(e&&e.evaluate(a)){var f=this._stylesMap[c];for(var g in f){var h=f[g];h!==ta&&b[g](h)}break}}},$_buildExpressions:function(){var a,b=this.owner();if(this._exprNodes=[],s(this._criteria)&&(a=this._criteria.length)>0)for(var c=0;a>c;c++){var d=this._criteria[c];if(d){var e=vc.Default.parse(d,b?b.capitalIndexers():null);null==e&&(e=Vb.Default),this._exprNodes.push(e)}else this._exprNodes.push(Vb.Default)}},$_buildStyles:function(){if(this._stylesMap=[],s(this._styles))for(var a=0,b=this._exprNodes.length;b>a;a++){var c=this._styles.length>a?this._styles[a]:this._styles[b-1],d=c.split(";"),e={};this._stylesMap.push(e);for(var f=0;f<d.length;f++){var g=d[f],h=g.split(/\s*=/);h.length>1?e[h[0]]=h[1]:e[h[0]]=null}}}}),Jg=Xa("DynamicStyleCollection",null,{init:function(a){this._super(),this._owner=a,this._items=[]},owner:function(){return this._owner},count:function(){return this._items.length},getItem:function(a){return this._items[a]},clear:function(){this._items=[]},add:function(a){var b=this.$_createStyle(a);b&&this._items.indexOf(b)<0&&this._items.push(b)},setItems:function(a){if(this._items=[],a){if(a instanceof Jg&&(a=a.toArray()),!s(a))return;var b,c,d=a.length;for(b=0;d>b;b++)c=this.$_createStyle(a[b]),c&&this._items.push(c)}},prepare:function(){},checkStyle:function(a){for(var b=0,c=this._items.length;c>b;b++){var d=this._items[b];if(d.check(a))return!0}return!1},applyCheck:function(a,b,c){a&&b&&c&&this.applyInternalNormal(a,b,c)},applyInternalNormal:function(a,b,c){for(var d=0,e=this._items.length;e>d;d++){var f=this._items[d];f.apply(a,b)}},applyInternalUserMode:function(a,b,c){try{for(var d=0,e=this._items.length;e>d;d++){var f=this._items[d];f.apply(a,b)}}catch(g){}},toArray:function(){return this._items.concat()},$_createStyle:function(a){var b=null;if(a instanceof Gg)a._owner=this._owner,b=a;else if(s(a.criteria)){var c;s(a.styles)?(c=new Ig(this._owner),c.setCriteria(a.criteria),c.setStyles(a.styles),b=c):(c=new Ig(this._owner),c.setCriteria(a.criteria),c.setStyles([a.styles]),b=c)}else if(a&&a.criteria){var d=new Hg(this._owner);d.setCriteria(a.criteria),d.setStyles(a.styles),b=d}return b}}),Kg=new ng,Lg=["readOnly","editable","button","popupMenu"],Mg=Xa("DataCellStyle",null,{init:function(a,b){this._super(),this._id=a,this._styles=Kg,this._props=null,this.assign(b)},id:function(){return this._id},isEditable:function(){return this._props?this._props.editable:void 0},isReadOnly:function(){return this._props?this._props.readOnly:void 0},isWritable:function(){if(this._props){var a=this._props.editable;if(void 0!==a&&!a)return!1;if(a=this._props.readOnly)return!1}return!0},button:function(){return this._props&&this._props.button},popupMenu:function(){return this._props&&this._props.popupMenu},setStyles:function(a){a!=this._styles&&(a?(this._styles===Kg&&(this._styles=new ng(null,null,!1)),this._styles.clearValues(),this._styles.extend(a,!1,!1)):this._styles=Kg)},assignTo:function(a){a&&a.extend(this._styles,!1,!1)},calcWritable:function(a,b){var c=this._props;if(c){if(void 0!==c.editable&&(a=c.editable,!a))return!1;if(void 0!==c.readOnly&&(b=c.readOnly))return!1}return a&&!b},assign:function(a){a&&(this.setStyles(a instanceof Mg?a._styles:a),this.$_assignProps(a,Lg))},$_assignProps:function(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];void 0!==a[e]&&(this._props=this._props||{},this._props[e]=a[e])}}}),Ng=Xa("DataCellStyleCollection",bb,{init:function(a){this._super(),this._owner=a,this._styles={},this._dirtyLock=0},getStyle:function(a){return this._styles[a]},get:function(a){return this._styles[a]},clear:function(){this._styles={},this._dirtyLock<=0&&this._owner&&this._owner.dataCellStylesCleared()},add:function(a,b){a&&b&&!this._styles[a]&&(this._styles[a]=new Mg(a,b),this._owner&&this._owner.dataCellStyleAdded(a,this._dirtyLock<=0))},set:function(a,b){if(a){var c=this._styles[a];b?c?(c.assign(b),this._owner&&this._owner.dataCellStyleChanged(a,this._dirtyLock<=0)):(this._styles[a]=new Mg(a,b),this._owner&&this._owner.dataCellStyleAdded(a,this._dirtyLock<=0)):c&&(delete this._styles[a],this._owner&&this._owner.dataCellStyleRemoved(a,c,this._dirtyLock<=0))}},beginUpdate:function(){this._dirtyLock++},endUpdate:function(a){this._dirtyLock>0&&(this._dirtyLock=Math.max(this._dirtyLock-1,0),0==this._dirtyLock&&a&&this._owner&&this._owner.dataCellStyleChanged(null,!0))},load:function(a){}}),Og=Xa("ColumnFilter",bb,{init:function(a){this._super(),this.setCriteria(a)},name:null,criteria:null,text:null,description:null,active:!1,hidden:!1,propertyChanged:function(a,b){this._changed()},toString:function(){return this._text||this._name},_changed:function(){this.fireEvent(Og.CHANGED)}});Og.CHANGED="onColumnFilterChanged";var Pg=Xa("ColumnFilterRun",Og,{init:function(a){this._super(a),this._exprNode=null,this.$_parse()},prepare:function(a,b){a.setDataSource(b)},select:function(a,b,c){return this._exprNode?(a.setData(b,c),this._exprNode.evaluate(a)):!0},setCriteria:function(a){a!=this._criteria&&(this._criteria=a,this.$_parse())},$_parse:function(){this._criteria?this._exprNode=vc.Default.parse(this._criteria,null):this._exprNode=null}}),Qg=Xa("ColumnFilterCollection",bb,{init:function(a){this._super(),this._column=a,this._items=[],this._names={},this._updating=!1},count:function(){return this._items.length},activeCount:function(){var a,b=0;for(a=this._items.length;a--;)this._items[a].isActive()&&b++;return b},items:function(){return this._items.slice()},isVisible:function(){for(var a=this._items.length;a--;)if(!this._items[a].isHidden())return!0;return!1},getItemAt:function(a){if(0>a||a>=this._items.length)throw new Error("Invalid index: "+a);return this._items[a]},getItem:function(a){return this._names[a]||null},getItemIndex:function(a){for(var b=this._items.length-1;b>=0;b--)if(this._items[b]._name==a)return b;return-1},getActiveItems:function(a){for(var b=[],c=this._items.length-1;c>=0;c--)this._items[c].isActive()==a&&b.push(this._items[c]);return b},assign:function(a){if(a!==this){var b=this.clear(!1);if(a){var c,d,e,f=t(a);for(f||(f=[a]),d=f.length,c=0;d>c;c++)a=f[c],a&&a.name&&(this.$_checkName(a.name),e=new Og,e.assign(a),this._items.push(e),this._names[a.name]=e,e.addListener(this))}(b||this.count()>0)&&this._changed(null)}},clear:function(a){a=arguments.length>0?a:!0;var b=this._items.length;if(b>0){for(var c=0;b>c;c++)this._items[c].removeListener(this);return this._items.length=0,this._names={},a&&this._changed(null),!0}return!1},add:function(a){var b=ab(a,Og);b?this._items.indexOf(b)<0&&b.name()&&this.$_checkName(b.name):a&&a.name&&(this.$_checkName(a.name),b=new Og,b.assign(a)),this._items.push(b),this._names[b.name]=b,b.addListener(this),this._changed(null)},addItems:function(a,b){if(!s(a)&&a&&(a=[a]),a&&a.length>0){var c,d,e,f=0,g=a.length;for(c=0;g>c;c++)e=ab(a[c],Og),e?this._items.indexOf(a[c])<0&&e.name()&&(b||this.$_checkName(e.name())):a[c]&&a[c].name&&(b||this.$_checkName(a[c].name),e=new Og,e.assign(a[c])),d=this.getItemIndex(e.name()),d>=0?(this._items[d]&&this._items[d].removeListener(this),this._items[d]=e):this._items.push(e),e.addListener(this),this._names[e.name()]=e,f++;f>0&&this._changed(null)}},remove:function(a){if(a){var b,c;for(b=this._items.length-1;b>=0;b--)if(c=this._items[b],c.name()==a)return this._items.splice(b,1),delete this._names[c.name()],c.removeListener(this),this._changed(null),!0;return!1}},removeItems:function(a){if(s(a)){var b,c,d,e=0;for(b=a.length-1;b>=0;b--)c=this.getItemIndex(a[b]),c>=0&&(d=this._items[c],this._items.splice(c,1),delete this._names[d.name()],d.removeListener(this),e++);e>0&&this._changed(null)}},activateItems:function(a,b){if(s(a)){var c,d,e=0;this._updating=!0;try{for(c=a.length-1;c>=0;c--)d=this._names[a[c]],d&&d.isActive()!=b&&(d.setActive(b),e++)}finally{this._updating=!1}e>0&&this._changed(null)}},activateAll:function(a){this._updating=!0;try{var b,c,d=this._items.length,e=!1;for(b=0;d>b;b++)c=this._items[b],c.isActive()!=a&&(c.setActive(a),e=!0)}finally{this._updating=!1}e&&this._changed(null)},toggleItems:function(a){if(a){var b,c,d=0;this._updating=!0;try{for(b=a.length-1;b>=0;b--)c=this._names[a[b]],c&&(c.setActive(!c.isActive()),d++)}finally{this._updating=!1}d>0&&this._changed(null)}},toggleAll:function(){this._updating=!0;try{var a,b,c=this._items.length,d=!1;for(a=0;c>a;a++)b=this._items[a],b.setActive(!b.isActive()),d=!0}finally{this._updating=!1}d&&this._changed(null)},$_checkName:function(a){if(this._names.hasOwnProperty(a))throw new Error("Column filter already existes: "+a)},_changed:function(a){this._updating||this.fireEvent(Og.CHANGED,a)},onColumnFilterChanged:function(a){this._changed(a)}}),Rg=Xa("ColumnFilterSelector",bb,{init:function(a){this._super(),this._container=a,this._eltActions=null,this._eltAll=null,this._eltItems=null,this._column=null,this._showing=!1,this._x=0,this._y=0,this._globalMouseHandler=function(a){for(var b=a.target;b;){if(b==this._element)return;b=b.parentNode}this.hide()}.bind(this)},closeWhenClick:!1,column:function(){return this._column},isOpened:function(){return this._element&&this._container.contains(this._element)},show:function(a,b){if(this.hide(),a){this._showing=!0;try{b=b||a.grid().filteringOptions().selector(),this._closeWhenClick=b.isCloseWhenClick(),this.$_show(a,b)}finally{this._showing=!1}}},$_show:function(a,b){var c=this;this._element=this._initControl();var d=this._element;if(d&&!d.parentNode){var e,f,g=a.grid(),h=a.boundsByContainer(),i=g.width()-10,j=g.height()-10;d.style.position="absolute",d.style["float"]="none",d.style.overflow="hidden",d.style.zIndex=3e3,d.style.background="rgb(233, 233, 233)",d.style.border="1px solid rgb(200, 200, 200)",d.style.boxShadow="rgba(0, 0, 0, 0.8) 1px 2px 5px",d.style.fontFamily="Tahoma",d.style.fontStyle="normal",d.style.fontVariant="normal",d.style.fontWeight="normal",d.style.fontSize="10pt",d.style.padding="4px",this._column=a.index().column(),this.$_clearActions();var k=this.$_buildActions(this._column);this.$_clearItems();var l=this.$_buildItems(this._column);e=parseFloat(b.getMinWidth(i)),!isNaN(e)&&e>0&&(d.style.minWidth=e+"px"),e=parseFloat(b.getMaxWidth(i)),!isNaN(e)&&e>0?d.style.maxWidth=Math.min(e,i)+"px":d.style.maxWidth=i+"px",e=parseFloat(b.getMinHeight(j)),!isNaN(e)&&e>0&&(d.style.minHeight=e+"px"),e=parseFloat(b.getMaxHeight(j)),!isNaN(e)&&e>0?d.style.maxHeight=Math.min(e,j)+"px":d.style.maxHeight=j+"px",this._eltAll.style.visibility=l?"":"collapse",this._eltAll.style.height=l?"":"0px",this._container.appendChild(d),f=d.getBoundingClientRect(),this._eltItems.style.height=f.height-this._eltActions.offsetHeight-this._eltAll.offsetHeight-8+"px",this._eltItems.offsetWidth>this._eltItems.clientWidth&&(d.style.width=f.width+this._eltItems.offsetWidth-this._eltItems.clientWidth+"px"),e=h.right()-f.width,d.style.left=(this._x=Math.max(0,e))+"px";var m=h.bottom();j+=10,m+f.height>=j&&(m=Math.max(0,j-f.height-3)),d.style.top=(this._y=m)+"px",k&&!l?(this.hide(),k.click(h.x,this._y)):this._column.hasFilterAction()||l?setTimeout(function(){ia.addEventListener("mousedown",c._globalMouseHandler)},0):this.hide()}},hide:function(){var a=this._element;a&&a.parentNode&&(ia.removeEventListener("mousedown",this._globalMouseHandler),this._container.removeChild(a))},_initControl:function(){var a=ja.createElement("div");a.onkeydown=function(a){27==a.keyCode&&this.hide()}.bind(this);var b=this._eltActions=ja.createElement("div");b.style["float"]="none",b.style.overflow="auto",a.appendChild(b),b=this._eltAll=ja.createElement("div"),b.style["float"]="none",b.style.backgroundColor="#333",b.style.color="#fff";var c=ja.createElement("input");c.id="$columnFilter_all_"+Rg.$_checkId++,c.type="checkbox",c.tabIndex=-1,c.onclick=function(a){this._column.activateAllFilters(a.target.checked),this.$_refreshItems()}.bind(this),b.appendChild(c);var d=ja.createElement("label");d.htmlFor=c.id,d.innerHTML="All",b.appendChild(d);var e=ja.createElement("hr");return e.style.height="1px",e.style.border="0px",e.style.margin="2px",e.style.color="#777",e.style.backgroundColor="#777",b.appendChild(e),a.appendChild(b),b=this._eltItems=ja.createElement("div"),b.style["float"]="none",b.style.overflow="auto",a.appendChild(b),a},_disableSelection:function(a){"undefined"!=typeof a.onselectstart?a.onselectstart=function(){return!1}:"undefined"!=typeof a.style.MozUserSelect?a.style.MozUserSelect="none":a.onmousedown=function(){return!1}},$_clearActions:function(){for(var a=this._eltActions;a.lastChild;)a.removeChild(a.lastChild)},$_buildActions:function(a){var b=a.filterActions(),c=b.length,d=this;
this._eltActions.style.paddingBottom=c?"4px":"0px";for(var e=0;c>e;e++){var f=b[e],g=ja.createElement("div");g.container=this,g.action=f,g.style["float"]="none",g.style.whiteSpace="nowrap",g.style.cursor="pointer",this._disableSelection(g),this._eltActions.appendChild(g),g.onclick=function(a){var b=this._currDiv=a.currentTarget,c=b.action;b.container.hide(),c&&c.click(d._x,d._y),d._closeWhenClick&&d.hide()},g.onmouseover=function(a){var b=this._currDiv=a.currentTarget;b.style.textDecoration="underline"},g.onmouseout=function(a){var b=this._currDiv=a.currentTarget;b.style.textDecoration="none"};var h=ja.createElement("input");h.id="$columnAction_item_"+Rg.$_checkId++,h.type="checkbox",h.tabIndex=-1,h.checked=!1,h.action=f,h.style.visibility="hidden",g.check=h,g.appendChild(h);var i=ja.createElement("span");i.innerHTML=f.displayText(),i.title=f.description(),g.appendChild(i)}return 1==c?b[0]:null},$_clearItems:function(){for(var a=this._eltItems;a.lastChild;)a.removeChild(a.lastChild)},$_buildItems:function(a){for(var b=a.filters(),c=!1,d=this,e=0,f=b.length;f>e;e++){var g=b[e];if(!g.isHidden()){var h=ja.createElement("div");h.style["float"]="none",h.style.whiteSpace="nowrap",this._disableSelection(h),this._eltItems.appendChild(h),h.onmouseover=function(a){var b=this._currDiv=a.currentTarget;b.style.textDecoration="underline"},h.onmouseout=function(a){var b=this._currDiv=a.currentTarget;b.style.textDecoration="none"};var i=ja.createElement("input");i.id="$columnFilter_item_"+Rg.$_checkId++,i.type="checkbox",i.tabIndex=-1,i.checked=g.isActive(),i.filter=g,i.onclick=function(a){var b=a.target,c=b.filter;c.setActive(b.checked),d._closeWhenClick&&d.hide()},h.check=i,h.appendChild(i);var j=ja.createElement("label");j.htmlFor=i.id,j.innerHTML=g.toString(),h.appendChild(j),c=!0}}return c},$_refreshItems:function(){for(var a=this._eltItems.children,b=0,c=a.length;c>b;b++){var d=a[b];d.check.checked=d.check.filter.isActive()}},_changed:function(){this.fireEvent(Og.CHANGED)}},{$_checkId:0});Rg.CHANGED="onColumnFilterSelectorChanged";var Sg=Xa("ColumnFilterAction",bb,{init:function(a,b){this._super(),this._column=a,this._name=b},name:null,text:null,description:null,column:function(){return this._column},displayText:function(){return this._text||this._name},click:function(a,b){this._column&&this._column.$_filterActionClick(this,a,b)}}),Tg=Xa("ToastOptions",null,{init:function(a){this._super(),a&&this.assign(a)},message:null,visible:!0,styles:null,setStyles:function(a){a?(this._styles||(this._styles=new ng),this._styles.extend(a)):this._styles=null},assign:function(a){"string"==typeof a?(this._message=a,this._message&&(this._visible=!0)):"boolean"==typeof a?this._visible=Boolean(a):this._super(a)},proxy:function(){var a=this._super();return this._styles&&(a.styles=this._styles.toProxy()),a}}),Ug=Xa("ToastView",bb,{init:function(a){this._super(),this._container=a,this._span=null,this._element=this._createElement(),this._showing=!1},minWidth:0,maxWidth:0,dropDownCount:8,show:function(a){this._showing=!0;try{this.$_show(a)}finally{this._showing=!1}},$_show:function(a){var b=a.message();if(b){var c=this._element;if(c){var d=this._span;d.innerHTML=b,c.style.position="absolute",c.style.overflow="hidden",c.style.zIndex=3e3;var e,f,g,h,i,j,k,l,m,n,o,p,q,r=a.styles();r&&(e=r.background(),f=r.foreground(),g=r.border(),h=r.figureBackground(),i=r.fontFamily(),j=r.fontItalic()?"italic":"noramal",fontWidth=r.fontBold()?"bold":"normal",m=r.fontUnderline()?"underline":"",n=r.paddingLeft(),o=r.paddingRight(),p=r.paddingTop(),q=r.paddingBottom()),e?c.style.background=e.css():Xc?new yd("rgba(33, 33, 33, 0.8)").applyToCss(c.style):c.style.background="rgba(33, 33, 33, 0.8)",f?c.style.color=f.css():c.style.color="rgb(255, 255, 255)",g?c.style.border=g.css():c.style.border="1px solid rgb(200, 200, 200)",h?c.style.boxShadow=h.css()+" 1px 2px 5px":c.style.boxShadow="rgb(0, 0, 0, 0.8) 1px 2px 5px",c.style.fontFamily=i?i:"Tahoma",c.style.fontStyle=j?j:"normal",c.style.fontWeight=k?k:"normal",c.style.fontSize=l?l+"pt":"16pt",c.style.paddingTop=p?p+"px":"8px",c.style.paddingBottom=q?q+"px":"8px",c.style.paddingLeft=n?n+"px":"16px",c.style.paddingRight=o?o+"px":"16px",m&&(c.style.textDecoration=m),this._container._container.appendChild(c);var s=c.getBoundingClientRect2(),t=s.width+10,u=s.height+10,v=new kd;v.width=this._container.width(),v.height=this._container.height(),c.style.left=(v.width-t)/2+"px",c.style.top=(v.height-u)/2+"px"}}},hide:function(){var a=this._element;a&&a.parentNode&&this._container._container.removeChild(a)},_createElement:function(){var a=ja.createElement("div");return a.onkeydown=function(a){27==a.keyCode&&this.hide()}.bind(this),this._disableSelection(a),this._span=ja.createElement("span"),a.appendChild(this._span),this._disableSelection(this._span),a},_disableSelection:function(a){"undefined"!=typeof a.onselectstart?a.onselectstart=function(){return!1}:"undefined"!=typeof a.style.MozUserSelect?a.style.MozUserSelect="none":a.onmousedown=function(){return!1}}},{$_labelId:0}),Vg=Xa("ToastManager",null,{init:function(a){this._super(),this._container=a.container(),this._toast=null,this._active=!1},isVisible:function(){return this._active},show:function(a,b,c){return(!this._active||b)&&(this.close(),a=a instanceof Tg?a:a?new Tg(a):null,a&&a.isVisible())?(this._toast||(this._toast=new Ug(this._container)),this._toast.show(a),this._active=!0,void(c&&setTimeout(function(){try{c()}finally{this.close()}}.bind(this),0))):void(c&&c())},close:function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)}}),Wg=Xa("ToolTipOptions",null,{init:function(a){this._super(),this._styles=new ng,a&&this.assign(a)},message:null,visible:!0,styles:null,setStyles:function(a){a!=this._styles&&this._styles.extend(a,!1)},assign:function(a){"string"==typeof a?(this._message=a,this._message&&(this._visible=!0)):"boolean"==typeof a?this._visible=Boolean(a):this._super(a)}}),Xg=Xa("ToolTipView",bb,{init:function(a){this._super(),this._container=a,this._span=null,this._element=this._createElement(),this._showing=!1},minWidth:0,maxWidth:0,dropDownCount:8,show:function(a,b,c){this._showing=!0;try{this.$_show(a,b,c)}finally{this._showing=!1}},$_show:function(a,b,c){var d=this._container.gridView(),e=a.message()+"";if(e){var f=this._element;if(f){var g=this._span;g.innerHTML=e.replace(/\n/g,"<br>"),f.style.position="absolute",f.style.left=b+"px",f.style.top=c+"px",f.style.overflow="hidden",f.style.zIndex=3e3,f.style.background=a.styles().background().color().value(),f.style.color="rgb(100, 100, 100)",f.style.border="1px solid rgb(100, 100, 100)",f.style.borderRadius="4px",f.style.boxShadow="5px 5px 5px rgba(100, 100, 100, 0.8)",f.style.fontFamily="Tahoma",f.style.fontStyle="normal",f.style.fontVariant="normal",f.style.fontWeight="normal",f.style.fontSize="10pt",f.style.padding="2px",f.style.visibility="hidden",f.style.whiteSpace="nowrap",this._container._container.appendChild(f);var h=f.getBoundingClientRect(),i=this._container._container.getBoundingClientRect();f.style.left=h.right>i.right?Math.max(i.right-h.width-i.left-2,0)+"px":f.style.left,f.style.top=h.bottom>i.bottom?Math.max(c-h.height-d._layoutManager.$_calcItemHeight(d,d.delegate(),0),0)+"px":f.style.top,f.style.visibility="visible"}}},hide:function(){var a=this._element;a&&a.parentNode&&this._container._container.removeChild(a)},_createElement:function(){var a=ja.createElement("div");return a.onkeydown=function(a){27==a.keyCode&&this.hide()}.bind(this),this._disableSelection(a),this._span=ja.createElement("span"),a.appendChild(this._span),this._disableSelection(this._span),a},_disableSelection:function(a){"undefined"!=typeof a.onselectstart?a.onselectstart=function(){return!1}:"undefined"!=typeof a.style.MozUserSelect?a.style.MozUserSelect="none":a.onmousedown=function(){return!1}}},{$_labelId:0}),Yg=Xa("ToolTipManager",null,{init:function(a){this._super(),this._container=a.container(),this._tipView=null,this._active=!1},isVisible:function(){return this._active},show:function(a,b,c){this._active||(this.close(),a=a instanceof Wg?a:a?new Wg(a):null,a&&a.isVisible()&&(this._tipView||(this._tipView=new Xg(this._container)),this._tipView.show(a,b,c),this._active=!0))},close:function(){this._active&&(this._tipView&&this._tipView.hide(),this._active=!1)}});ze.$_levels={error:1,warning:2,info:3,ignore:4},ze.compare=function(a,b){return ze.$_levels[a]-ze.$_levels[b]};var Zg=function(a,b,c,d){this.level=a,this.message=b,this.column=c,this.userMessage=d,S.call(this,b)};Zg.prototype=new S,Zg.prototype.toString=function(){return"Validation failed["+this.level+"]: "+this.message};var $g=Xa("EditValidation",null,{init:function(a){this._super(),this._name=a},name:null,active:!0,mode:Re.ALWAYS,level:ze.ERROR,criteria:null,message:null,description:null,setCriteria:function(a){a!=this._criteria&&(this._criteria=a,a?this._exprNode=vc.Default.parse(a,$g.CAPITAL_INDEXERS):this._exprNode=null)},validate:function(a){if(this._exprNode&&!this._exprNode.evaluate(a)){var b=this._message||this._description||this._name||this._criteria;throw new Zg(this._level,b,null,this._message)}}},{CAPITAL_INDEXERS:["value","values"]}),_g=Xa("EditValidationCollection",null,{init:function(){this._super(),this._items=[]},count:function(){return this._items.length},items_:function(){return this._items.slice()},setItems:function(a){this.assign(a)},clear:function(){this._items=[]},addAll:function(a){if(a&&a.length>0)for(var b=0,c=a.length;c>b;b++)this._items.push(a[b])},assign:function(a){if(a!==this&&(this.clear(),a)){s(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++){var d=new $g;d.assign(a[b]),this._items.push(d)}}},validate:function(a,b,c,d){for(var e=0;e<this._items.length;e++){var f=this._items[e];if(f.isActive()&&(f.mode()==a||f.mode()==Re.ALWAYS))try{f.validate(b)}catch(g){if(!c||ze.compare(f.level(),d)<0)throw g instanceof Zg?(g.level=f.level(),g):new Zg(f.level(),g)}}}}),ah=Xa("DataRowValidationRuntime",wc,{init:function(){this._super(),this._item=null,this._dataSource=null,this._fieldCount=null},item:null,setItem:function(a){this._item=a,this._dataSource=this._item.dataSource(),this._fieldCount=this._dataSource?this._dataSource.fieldCount():0},isIdentifier:function(a){if(a=a.toLowerCase(),ah.IDENTS.hasOwnProperty(a)){var b=ah.IDENTS[a];return b}return this._super(a)},evaluateIdentifier:function(a){switch(a){case ah.ID_ROW:return this._item.index();case ah.ID_DATA_ROW:return this._item.dataRow();case ah.ID_CHECKED:return this._item.isChecked()}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);switch(a){case ah.ID_VALUE:case ah.ID_VALUES:return this._item.getData(b)}throw new da("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b,c){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exists:"+b);switch(a){case ah.ID_VALUE:case ah.ID_VALUES:return this._item.getData(d)}throw new da("Invalid identifier indexer: "+a)}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4},function(a){a.IDENTS={row:a.ID_ROW,datarow:a.ID_DATA_ROW,checekd:a.ID_CHECKED,value:a.ID_VALUE,values:a.ID_VALUES}}),bh=Xa("DataCellValidationRuntime",wc,{init:function(){this._super(),this._index=null,this._value=null},setIndex:function(a){this._index=a,this._value=this._index.item().getData(this._index.column().dataIndex())},isIdentifier:function(a){if(a=a.toLowerCase(),bh.IDENTS.hasOwnProperty(a)){var b=bh.IDENTS[a];return b}return this._super(a)},evaluateIdentifier:function(a){switch(a){case bh.ID_VALUE:return this._value;case bh.ID_ROW:return this._index.I();case bh.ID_DATA_ROW:return this._index.item().dataRow();case bh.ID_INDEX:return this._index.column().index();case bh.ID_FIELD:return this._index.column().dataIndex();case bh.ID_CHECKED:var b=this._index.item();return b?b.isChecked():!1;case bh.ID_TAG:return this._index.column().tag();case bh.ID_BASE:var c=this._index.dataColumn().baseIndex();return c>=0?this._index.item().getData(c):ta}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){throw new da("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b,c){throw new da("Invalid identifier indexer: "+a)}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_TAG:6,ID_BASE:7},function(a){a.IDENTS={value:a.ID_VALUE,row:a.ID_VAID_ROWLUE,datarow:a.ID_DATA_ROW,index:a.ID_INDEX,field:a.ID_FIELD,checked:a.ID_CHECKED,tag:a.ID_TAG,base:a.ID_BASE}}),ch=Xa("ValidationManager",null,{init:function(a){this._super(),this._owner=a},owner:function(){return this._owner},hasRowValidation:function(){return this._owner.validations()&&this._owner.validations().count()>0},validateCell:function(a,b){this.$_validateCell(a,b,!0,this._owner.editOptions().commitLevel())},validateRow:function(a,b,c){var d=this._owner.editOptions().commitLevel();if(!c)for(var e=this._owner.getDataColumns(),f=0,g=e.length;g>f;f++){var h=e[f],i=Ye.temp(this._owner,a.index(),h);this.$_validateCell(i,b,!0,d)}var j=this._owner.validations();if(j&&j.count()>0){var k=this._owner.rowValidationRuntime();k.setItem(a),j.validate(b?Re.INSERT:Re.UPDATE,k,!1,d)}},$_validateCell:function(a,b,c,d){var e=ab(a.dataColumn(),rk);if(e){var f=a.item().getData(e.dataIndex());if(e.isRequired()){var g=e.grid(),h=g&&g.dataSource()&&g.dataSource().getField(e.dataIndex());if(h&&h.isEmpty(f)){var d=e.requiredLevel()||ze.ERROR,i=e.requiredMessage()||"Value is required: "+e.fieldName();throw new Zg(d,i,e,e.requiredMessage())}}var j=e.validations();if(j&&j.count()>0){var k=this._owner.columnValidationRuntime();k.setIndex(a);try{j.validate(b?Re.INSERT:Re.UPDATE,k,c,d)}catch(l){throw l instanceof Zg&&(l.column=e),l}}}}}),dh=Xa("LookupSource",bb,{init:function(a){this._super(),this._id=a},id:function(){return this._id},clear:function(){},load:function(a){},exists:function(){return!1},fill:function(a,b){},fillRows:function(a){},add:function(a,b){},addRow:function(a){},lookup:function(){return void 0},getDomain:function(){return null},getTextDomain:function(){return null},_changed:function(){this.fireEvent(dh.CHANGED)}});dh.CHANGED="onLookupSourceChanged";var eh=Xa("LookupSourceProvider",bb,{init:function(a){this._super(),this._id=a},getSource:function(a){return null},_changed:function(){this.fireEvent(eh.CHANGED)}});eh.CHANGED="onLookupSourceProviderChanged";var fh=Xa("LocalLookupSourceProvider",eh,{init:function(a){this._super(),this._sources={},a&&this.load(a)},load:function(a){if(a!==this){if(this._sources={},s(a))for(var b=0,c=a.length;c>b;b++)this.$_add(a[b]);else a&&this.$_add(a);this._changed()}},add:function(a){var b=this.$_add(a);return b&&this._changed(),b},remove:function(a){this.$_remove(a)&&this._changed()},getSource:function(a){return this._sources[a]},$_createSource:function(a){var b=null;if(a){var c=a.type;c=c?c.toLowerCase():null;var d=new gh(a.id,a.levels,a.ordered);d.fill(a.keys,a.values),b=d}return b},$_add:function(a){if(a&&a.id&&this._sources[a.id]!==a){var b=this.$_createSource(a);if(b)return this.$_remove(a.id),this._sources[a.id]=b,b.addListener(this),b}return null},$_remove:function(a){if(a){var b=this._sources[a];if(b)return b.removeListener(this),delete this._sources[a],!0}return!1},onLookupSourceChanged:function(a){this._changed()}}),gh=Xa("LookupTree",dh,{init:function(a,b,c){if(a=arguments.length>0?a:null,b=arguments.length>1?b:-1,c=arguments.length>2?c:!1,this._super(a),1>b)throw"LookupTable levels must be equals or greater than 1";this._levels=b,this._tree={},this._listMap=c?{}:null},clear:function(){this._tree={},this._changed()},load:function(a){},exists:function(a){var b;if(a&&(b=a.length)>0&&b<=this._levels){if(b=Math.min(b,this._levels)-1,b>0){for(var c,d=this._tree,e=0;b>e&&(c=a[e],d=d[c],d);e++);return null!=d&&d.hasOwnProperty(a[b])}return this._tree.hasOwnProperty(a[0])}return!1},fill:function(a,b){if(a&&a.length>0&&b&&b.length>0){for(var c=Math.min(a.length,b.length),d=0;c>d;d++){var e=a[d];s(e)||(e=[e]),this.$_add(e,b[d])}this._changed()}},fillRows:function(a){var b;if(a&&(b=a.length)>0){for(var c=0;b>c;c++)this.$_addRow(a[c]);this._changed()}},add:function(a,b){a&&(this.$_add(a,b),this._changed())},addRow:function(a){a&&(this.$_addRow(a),this._changed())},lookup:function(a){if(this._levels>1){var b,c,d=this._tree,e=this._levels-1;for(b=0;e>b&&(c=a[b],d=d[c],d);b++);return d?d[a[e]]:void 0}return this._tree[a]},getDomain:function(a){if(!a||a.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var b,c,d,e,f=[],g=[],h=this._tree;if(this._levels>1)for(c=a.length,b=0;c>b;b++)if(e=a[b],h=h[a[b]],!h)return{keys:f,values:g};if(this._listMap){var i=this._listMap[e];for(c=i.length,b=0;c>b;b++)f.push(i[b]),g.push(h[i[b]])}else for(d in h)f.push(d),g.push(h[d]);return{keys:f,values:g}},getTextDomain:function(a){var b,c,d=this.getDomain(a),a=d.keys,e=d.values;for(b=0,c=a.length;c>b;b++)a[b]=a[b]?String(a[b]):null,e[b]=e[b]?String(e[b]):null;return d},$_add:function(a,b){if(a){var c,d=this._levels,e=s(a)?a.length:1;if(d>e)throw Error("Keys length must be equals or greater than "+d);if(d>1){var f,g,h,i=this._tree;for(f=0,e=d-1;e>f;f++)g=a[f],h=i[g],h||(h={},i[g]=h),i=h;i[c=a[e]]=b}else this._tree[c=a]=b;if(this._listMap){var j=this._listMap[g];s(j)||(j=[],this._listMap[g]=j),j.push(c)}}},$_addRow:function(a){if(a){var b=a.length;if(b-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var c=a[this._levels];a=a.slice(0,this._levels),this.$_add(a,c)}}}),hh=Xa("GridObject",bb,{init:function(a){this._super(),this._grid=a,this._dirty=!1},owner:function(){return this._grid},isDirty:function(){return this._dirty},clean:function(){this._dirty&&(this._dirty=!1)},invalidate:function(){this._grid&&this._grid.invalidate()},refreshOwner:function(){this._grid&&this._grid.refreshView()},propertyChanged:function(a,b){this._changed()},_changed:function(){this._dirty||(this._dirty=!0,this._doChanged(),this.refreshOwner())},_doChanged:function(){}}),ih=hh.prototype,jh=Xa("VisualObject",hh,{init:function(a,b){this._super(a),this._styles=new ng(this,b)},stylesChanged:function(){this._changed()},visible:!0,styles:null,setStyles:function(a){a!==this._styles&&this._styles.extend(a)},_doChanged:function(){this._grid&&this._grid._visualObjectChanged(this)}}),kh=(jh.prototype,Xa("GridPanel",jh,{init:function(a){this._super(a,"panelStyles"),this.setVisible(!0)},minHeight:20,height:0,realHeight:0,proxy:function(){var a=this._super();return a.height=this._realHeight,delete a.realHeight,a}})),lh=Xa("HeaderSummary",jh,{init:function(a){this._super(a._grid,"headerSummaryStyles"),this._header=a,this._groupStyles=new ng(this),this._headStyles=new ng(this),this._cell=new Ah,this._headCell=new yh(this),this._runtime=new Em,this._runStyles=new ng(this,"runFooterStyles",null,!1),this.setVisible(!1)},title:null,groupStyles:null,headStyles:null,minHeight:Ua(23),height:Ta,realHeight:Ta,resizable:!1,mergeCells:null,setGroupStyles:function(a){a!==this._groupStyles&&this._groupStyles.extend(a)},setHeadStyles:function(a){a!==this._headStyles&&this._headStyles.extend(a)},header:function(){return this._header},setMergeCells:function(a){if(this._mergeCells=[],a instanceof Array)if(a[0]instanceof Array)for(var b=0,c=a.length;c>b;b++)this._mergeCells[b]=a[b].slice(0);else this._mergeCells[0]=a.slice(0);else this._mergeCells=null;this._headerSummaryMergeDirty=!0,this._changed()},getCell:function(a){var b=this._cell,c=a.column();if(b.setIndex(a),b.calculate(),c instanceof ak)b.setStyles(this._groupStyles);else{var d=c.header().summary(),e=d.dynamicStyles();if(e&&e.count()>0){var f=this._runStyles;f.clearValues(),f.setParent(d.styles()),this._runtime.setCell(b),e.applyInternal(this._runtime,f),b.setStyles(f)}else b.setStyles(d.styles())}return b},getHeadCell:function(){var a=this._headCell;return a.setStyles(this._headStyles),a},proxy:function(){var a=this._super();return a.height=this._realHeight,delete a.realHeight,a}}),mh=Xa("Header",jh,{init:function(a){this._super(a,"headerStyles"),this._summary=new lh(this),this._groupStyles=new ng(this,"headerGroupStyles"),this._subStyles=new ng(this,"headerSubSytles"),this._cell=new zh,this.setVisible(!0)},summary:null,groupStyles:null,subStyles:null,minHeight:Ua(23),height:Ta,realHeight:Ta,resizable:!1,sortable:!0,filterable:!0,subTextLocation:Le.LOWER,subTextGap:1,itemOffset:2,itemGap:2,imageList:null,showTooltip:!1,heightFill:Ue.DEFAULT,setSummary:function(a){a!==this._summary&&this._summary.assign(a)},setGroupStyles:function(a){a!==this._groupStyles&&this._groupStyles.extend(a)},setSubStyles:function(a){a!==this._subStyles&&this._subStyles.extend(a)},setSubTextLocation:function(a){a||(a=Le.LOWER),a!=this._subTextLocation&&(this._subTextLocation=a,this._changed())},getCell:function(a){var b,c=this._cell,d=a.column(),e=d.header();return c.setIndex(a),c.setStyles(e.styles()),c.setSubStyles(e.subStyles()),c.setText(e.displayText()),c.setSubText(e.subText()),c.setSubLocation((b=e.subTextLocation())?b:this._subTextLocation),c.setSubTextGap(void 0===(b=e.subTextGap())?this._subTextGap:b),c.setItemOffset(void 0===(b=e.itemOffset())?this._itemOffset:b),c.setItemGap(void 0===(b=e.itemGap())?this._itemGap:b),c.setImageList(this._imageList),c.setImageIndex(e.imageIndex()),c.setImageUrl(e.imageUrl()),c.setCheckLocation(e.checkLocation()),c.setImageLocation(e.imageLocation()),c.setChecked(d.isChecked()),c.setShowTooltip(e.isShowTooltip()),c.setTooltip(e.tooltip()),c},getGroupingCell:function(a){var b,c=this._cell,d=a.header();return c.setIndex(this._grid.getIndex(-1,a)),c.setStyles(this._grid.rowGroup().panelStyles()),c.setSubStyles(d.subStyles()),c.setText(d.displayText()),c.setSubText(d.subText()),c.setSubLocation((b=d.subTextLocation())?b:this._subTextLocation),c.setSubTextGap(void 0===(b=d.subTextGap())?this._subTextGap:b),c.setItemOffset(void 0===(b=d.itemOffset())?this._itemOffset:b),c.setItemGap(void 0===(b=d.itemGap())?this._itemGap:b),c.setImageList(this._imageList),c.setImageIndex(d.imageIndex()),c.setImageUrl(d.imageUrl()),c.setCheckLocation(d.checkLocation()),c.setImageLocation(d.imageLocation()),c.setChecked(a.isChecked()),c.setShowTooltip(d.isShowTooltip()),c.setTooltip(d.tooltip()),c},clean:function(){this._super(),this._summary.clean()},proxy:function(){var a=this._super();return a.height=this._realHeight,delete a.realHeight,a}}),nh=Xa("EditBar",jh,{init:function(a){this._super(a,"editBarStyles"),this._cell=new Ch,this.setVisible(!1)},minHeight:23,height:0,getCell:function(a){var b=this._cell;return b.setStyles(this._styles),b}}),oh=Xa("Footer",jh,{init:function(a){this._super(a,"footerStyles"),this._groupStyles=new ng(this),this._cell=new Bh,this._runtime=new Em,this._runStyles=new ng(this,"runFooterStyles",null,!1),this.setVisible(!0)},groupStyles:null,minHeight:Ua(23),height:Ta,realHeight:Ta,resizable:!1,mergeCells:null,setGroupStyles:function(a){a!==this._groupStyles&&this._groupStyles.extend(a)},setMergeCells:function(a){if(this._mergeCells=[],a instanceof Array)if(a[0]instanceof Array)for(var b=0,c=a.length;c>b;b++)this._mergeCells[b]=a[b].slice(0);else this._mergeCells[0]=a.slice(0);else this._mergeCells=null;this._footerMergeDirty=!0,this._changed()},getCell:function(a){var b=this._cell,c=a.column();if(b.setIndex(a),b.calculate(),c instanceof ak)b.setStyles(this._groupStyles);else{var d=c.footer(),e=d.dynamicStyles();if(e&&e.count()>0){var f=this._runStyles;f.clearValues(),f.setParent(d.styles()),this._runtime.setCell(b),e.applyInternal(this._runtime,f),b.setStyles(f)}else b.setStyles(d.styles())}return b},proxy:function(){var a=this._super();return a.height=this._realHeight,delete a.realHeight,a}}),ph=Xa("SectionObject",jh,{init:function(a,b){this._super(a,b),this._headStyles=new ng(this),this._footStyles=new ng(this),this._summaryStyles=new ng(this),this._headCell=new yh(this),this._footCell=new yh(this),this._sumCell=new yh(this),this.setVisible(!0)},headStyles:null,footStyles:null,summaryStyles:null,headText:null,footText:null,summaryText:null,headImageUrl:null,footImageUrl:null,summaryImageUrl:null,setHeadStyles:function(a){a!==this._headStyles&&this._headStyles.extend(a)},setFootStyles:function(a){a!==this._footStyles&&this._footStyles.extend(a)},setSummaryStyles:function(a){a!==this._summaryStyles&&this._summaryStyles.extend(a)},getCell:function(a){_a()},getHeadCell:function(){var a=this._headCell;return a.setStyles(this._headStyles),a},getFootCell:function(){var a=this._footCell;return a.setStyles(this._footStyles),a},getSumCell:function(){var a=this._sumCell;return a.setStyles(this._summaryStyles),a},setHeadImageUrl:function(a){a!=this._headImageUrl&&(this._headImageUrl=a,this._headImage=a?this._grid.getImage(a):null,this._changed())},setFootImageUrl:function(a){a!=this._footImageUrl&&(this._footImageUrl=a,this._footImage=a?this._grid.getImage(a):null,this._changed())},setSummaryImageUrl:function(a){a!=this._summaryImageUrl&&(this._summaryImageUrl=a,this._summaryImage=a?this._grid.getImage(a):null,this._changed())},headImage:function(){return this._headImage?this._headImage:this._headImage=this._headImageUrl?this._grid.getImage(this._headImageUrl):null},footImage:function(){return this._footImage?this._footImage:this._footImage=this._footImageUrl?this._grid.getImage(this._footImageUrl):null},summaryImage:function(){return this._summaryImage?this._summaryImage:this._summaryImage=this._summaryImageUrl?this._grid.getImage(this._summaryImageUrl):null}}),qh=Xa("Indicator",ph,{init:function(a){this._super(a,"indicatorStyles"),this._cell=new Dh(this)},displayValue:Ae.INDEX,zeroBase:!1,indexOffset:Ta,rowOffset:Ta,minWidth:Ua(40),maxWidth:Ta,width:Ta,realWidth:Ta,selectable:!0,getCell:function(a){var b=this._cell;b.setIndex(a),b.setStyles(this.styles());var c=a.item();if(c){var d=a.item().itemState();d==me.NORMAL&&this._grid.focusedIndex().I()==a.I()&&(d=me.FOCUSED),b.setItemState(d)}return b},proxy:function(){var a=this._super();return a.width=this._realWidth,delete a.realWidth,a}}),rh=Xa("StateBar",ph,{init:function(a){this._super(a,"stateBarStyles"),this._cell=new Eh,this._stateTexts={created:"C",updated:"U",deleted:"D",createAndDeleted:"X"}},width:Ua(20),mark:Te.DEFAULT,stateTexts:{},setStateTexts:function(a){if("object"==typeof a){for(var b in a)this._stateTexts.hasOwnProperty(b)&&(this._stateTexts[b]=a[b]);this._changed()}},getCell:function(a){var b=this._cell;return b.setIndex(a),b.setStyles(this.styles()),b}}),sh=Xa("CheckBar",ph,{init:function(a){this._super(a,"checkBarStyles"),this._cell=new Fh,this._allChecked=!1},width:Ua(20),exclusive:!1,showAll:!0,showGroup:!0,visibleOnly:!1,checkableOnly:!0,checkableExpression:null,getCell:function(a){var b=this._cell;return b.setIndex(a),b.setStyles(this.styles()),b}}),th=Xa("GridBody",jh,{init:function(a){this._super(a,"gridBodyStyles"),this._cellStyles=new ng(this,"",null,!1),this._runtimeStyles=new ng(this,"",null,!1),this._runtimeStyles2=new ng(null,"",null,!1),this._items=null,this._fixedStyles=null,this._bodyStyles=null,this._hasCellStyles=!1,this._emptyStyles=new ng(this,"",null,!1),this._dynamicStyles=new Jg({capitalIndexers:function(){return uh}}),this._cellDynamicStyles=new Jg({capitalIndexers:function(){return uh}}),this._rowStylesFirst=!1,this._fixedIgnoreDynamic=!1,this._fixedIgnoreColumn=!1,this._groupCell=new Gh,this._dataCell=new Ih,this._literalCell=new Jh,this._seriesCell=new Kh,this._mergedCell=new uj,this._dataSource=null,this._rowRuntime=new Cm,this._cellRuntime=new Dm,this._rowStylesOwner=new Fg({capitalIndexers:["value","values"]}),this._cellStylesOwner=new Fg({capitalIndexers:["value","values"]}),this._styleTargets={body:!0,fixed:!1},this._runBodyStyles=new ng(this,"runBodyStyles",null,!1)},emptyStyles:null,dynamicStyles:null,cellDynamicStyles:null,rowStylesFirst:!1,setEmptyStyles:function(a){a!==this._emptyStyles&&(this._emptyStyles.extend(a),this._grid&&this._grid.refreshView())},setDynamicStyles:function(a){this._dynamicStyles.setItems(a),this._grid&&this._grid.refreshView()},setCellDynamicStyles:function(a){this._cellDynamicStyles.setItems(a),this._grid&&this._grid.refreshView()},setRowStylesFirst:function(a){a!=this._rowStylesFirst&&(this._rowStylesFirst=a,this._grid&&this._grid.refreshView())},rowRuntime:function(){return this._rowRuntime},cellRunTime:function(){return this._cellRuntime},checkDynamicStyle:function(a,b){if(a.isFixed()&&this._fixedIgnoreDynamic)return!1;if(a._itemIndex<0)return!1;if(b=b?b:a.item(),this._rowRuntime.setItem(b),this._dynamicStyles.checkStyle(this._rowRuntime))return!0;var c=a.column(),d=a.dataColumn();if(d&&!c._ignoreDefaultDynamicStyles){var e=c instanceof tk?this._seriesCell:c instanceof Jh?this._literalCell:c instanceof ak?this._groupCell:this._dataCell;if(e.setIndex(a),this._cellRuntime.setCell(e),this.cellDynamicStyles().checkStyle(this._cellRuntime))return!0;if(d.dynamicStyles().checkStyle(this._cellRuntime))return!0;if(this._hasCellStyles&&this._items.checkCellStyle(b.dataRow(),d.dataIndex()))return!0}return!1},getCell:function(a,b,c){var d,e=a.column(),f=a.dataColumn(),g=a.isFixed(),h=b?this._mergedCell:e instanceof tk?this._seriesCell:e instanceof Jh?this._literalCell:e instanceof ak?this._groupCell:this._dataCell,i=this._rowStylesFirst?this._runBodyStyles:null,j=this._cellStyles;if(h.setIndex(a),d=this._runtimeStyles2,d.clearValues(),this._fixedIgnoreColumn&&g||d.assign(e._styles),i?d.setParent(i,!1):d.setParent(g?this._fixedStyles:this._bodyStyles,!1),j.clearValues(),j.setParent(d,!1),this._dataSource&&h!==this._groupCell){c=c?c:a.item();var k,l,m,n,o,p;if(g&&this._fixedIgnoreDynamic?n=o=p=0:(k=this._dynamicStyles,l=this._cellDynamicStyles,n=k.count(),f?(o=f._ignoreDefaultDynamicStyles?0:l.count(),m=f.dynamicStyles(),p=m.count()):(o=e._ignoreDefaultDynamicStyles?0:l.count(),p=0)),i?(this._styleTargets.body=!g,this._styleTargets.fixed=g,n>0&&(i.clearValues(),i.setParent(g?this._fixedStyles:this._bodyStyles,!1),this._rowRuntime.setItem(c),k.applyInternal(this._rowRuntime,i,this._styleTargets)),o>0||p>0?(d=this._runtimeStyles,d.clearValues(),d.setParent(j,!1),o>0&&(this._cellRuntime.setCell(h),l.applyInternal(this._cellRuntime,d,this._styleTargets)),p>0&&(this._cellRuntime.setCell(h),m.applyInternal(this._cellRuntime,d,this._styleTargets)),h.setStyles(d)):h.setStyles(j)):n>0||o>0||p>0?(d=this._runtimeStyles,d.clearValues(),d._parent=j,n>0&&(this._rowRuntime.setItem(c),k.applyInternal(this._rowRuntime,d)),o>0&&(this._cellRuntime.setCell(h),l.applyInternal(this._cellRuntime,d)),p>0&&(this._cellRuntime.setCell(h),m.applyInternal(this._cellRuntime,d)),h.setStyles(d)):h.setStyles(j),f&&this._hasCellStyles){var q=this._items.getCellStyle(c.dataRow(),f.dataIndex());h.setCellStyles(q)}else h.setCellStyles(null)}else h.setStyles(j);return f&&(this._grid.isItemEditing(c)?(h.setError(f.error()),h.setErrorLevel(f.errorLevel())):(h.setError(null),h.setErrorLevel(ze.IGNORE))),h._styles._sysDefault=g?this._fixedStyles._sysDefault:this._bodyStyles._sysDefault,h},getCellSimple:function(a,b){var c=a._column,d=b?this._mergedCell:c instanceof tk?this._seriesCell:c instanceof Jh?this._literalCell:c instanceof ak?this._groupCell:this._dataCell;return d.setIndex(a),d},addDynamicStyle:function(a,b){},_prepareUpdate:function(){var a=this._grid=this.owner();this._items=a.itemSource(),this._fixedStyles=a.fixedOptions().styles(),this._fixedIgnoreDynamic=a.fixedOptions().isIgnoreDynamicStyles(),this._fixedIgnoreColumn=a.fixedOptions().isIgnoreColumnStyles(),this._bodyStyles=this.styles(),this._hasCellStyles=this._items.hasCellStyle(),this._dataSource=a.dataSource(),this._rowRuntime.setDataSource(this._dataSource),this._cellRuntime.setDataSource(this._dataSource);var b=Jg.prototype;b.applyInternal=this._grid._userMode?b.applyInternalUserMode:b.applyInternalNormal}}),uh=["value","values"],vh=Xa("RowGroupLevel",null,{init:function(a){this._super(),this._headerStyles=new ng(this,"rowGroupLevelHeaderStyles"),
this._footerStyles=new ng(this,"rowGroupLevelFooterStyles"),this._barStyles=new ng(this,"rowGroupLevelBarStyles"),this._headerBarStyles=new ng(this,"rowGroupLevelHeaderBarStyles"),this._footerBarStyles=new ng(this,"rowGroupLevelFooterBarStyles"),a&&(a.footerStyles&&this._footerStyles.extend(a.footerStyles),a.headerStyles&&this._headerStyles.extend(a.headerStyles),a.barStyles&&this._barStyles.extend(a.barStyles),a.headerBarStyles&&this._headerBarStyles.extend(a.headerBarStyles),a.footerBarStyles&&this._footerBarStyles.extend(a.footerBarStyles))},headerStyles:function(){return this._headerStyles},footerStyles:function(){return this._footerStyles},barStyles:function(){return this._barStyles},headerBarStyles:function(){return this._headerBarStyles},footerBarStyles:function(){return this._footerBarStyles}}),wh=Xa("RowGroup",hh,{init:function(a){this._super(a),this._levels=[],this._headStyles=new ng(this,"rowGroupHead"),this._footStyles=new ng(this,"rowGroupFoot"),this._summaryStyles=new ng(this,"rowGroupSummary"),this._headerStyles=new ng(this,"rowGroupHeader"),this._footerStyles=new ng(this,"rowGroupFooter"),this._panelStyles=new ng(this,"rowGroupPanel"),this._barStyles=new ng(this,"rowGroupBar"),this._headerBarStyles=new ng(this,"rowGroupHeaderBar"),this._footerBarStyles=new ng(this,"rowGroupFooterBar"),this._headerCell=new Lh(this),this._footerCell=new Mh(this),this._barCell=new Nh,this._itemBarCell=new Oh,this._headCell=new Ph,this._footCell=new Qh,this._summaryCell=new Rh,this._footerRuntime=new Em,this._runtyles=new ng(this,"rowGroupRuntimeStyles",null,!1),this._headerExprStatement=new uf(this._headerStatement),this._statementRuntime=new Fm},levels:null,headerStyles:null,footerStyles:null,panelStyles:null,barStyles:null,headerBarStyles:null,footerBarStyles:null,headStyles:null,footStyles:null,summaryStyles:null,headerStatement:"${groupField}: ${groupValue} - ${rowCount} rows",levelIndent:20,headerOffset:-1,footerOffset:0,mergeMode:!1,mergeExpander:!0,expandedAdornments:Ce.BOTH,collapsedAdornments:Ce.HEADER,cellDisplay:De.MERGE,footerVisibility:Ee.MULTI_ROWS_ONLY,inheritsLevel:!0,imageLists:null,summaryMode:Fe.AGGREGATE,footerCellMerge:!1,footerStatement:null,levelCount:function(){return this._levels.length},levels_:function(){return this._levels.concat()},setLevels:function(a){if(this._levels=[],a)for(var b=0;b<a.length;b++){var c=a[b];c instanceof vh?this._levels.push(c):(c=new vh(c),this._levels.push(c))}this._changed()},setFooterStyles:function(a){a!=this._footerStyles&&this._footerStyles.extend(a)},setHeaderStatement:function(a){a!=this._headerStatement&&(this._headerStatement=a,this._headerExprStatement.setSource(a),this._changed())},setFooterStatement:function(a){a!=this._footerStatement&&(this._footerStatement=a,a?this._footerExprStatement?this._footerExprStatement.setSource(a):this._footerExprStatement=new uf(a):this._footerExprStatement=null,this._changed())},setMergeMode:function(a){a!=this._mergeMode&&(this._mergeMode=a,this.owner()&&(this.owner().$_rowGroupFooterMergeChanged(),this.owner().$_rowGroupMergeModeChanged()))},setFooterCellMerge:function(a){a!=this._footerCellMerge&&(this._footerCellMerge=a,this.owner()&&this.owner().$_rowGroupFooterMergeChanged(),this._changed())},setExpandedAdornments:function(a){a!=this._expandedAdornments&&(this._expandedAdornments=a,this.owner()&&this.owner().$_rowGroupAdornmentsChanged())},setCollapsedAdornments:function(a){a!=this._collapsedAdornments&&(this._collapsedAdornments=a,this.owner()&&this.owner().$_rowGroupAdornmentsChanged())},setSummaryMode:function(a){a!=this._summaryMode&&(this._summaryMode=a,this.owner()&&this.owner().$_groupSummaryModeChanged())},getLevel:function(a){var b=this._levels.length;return b>a?this._levels[a]:b>0&&this._inheritsLevel?this._levels[b-1]:null},getHeaderCell:function(a){var b=this.owner().getItem(a),c=this.getLevel(b.level()-1);return this._runtyles.clearValues(),c?this._runtyles.setParent(c.headerStyles(),!1):this._runtyles.setParent(this._headerStyles,!1),this._headerCell.setStyles(this._runtyles),this._headerCell.setIndex(Ye.temp(this.owner(),a)),this._headerCell},getFooterCell:function(a){var b=this.owner().getItem(a.I()),c=b.parent(),d=this.getLevel(c.level()-1),e=ab(a.column(),pk);if(e&&(this._runtyles.clearValues(),this._runtyles.extend(e.footer().styles()),this._runtyles.extend(e.footer().groupStyles())),d?this._runtyles.setParent(d.footerStyles(),!1):this._runtyles.setParent(this._footerStyles,!1),this._footerCell.setIndex(a),this._footerCell.calculate(),e){var f=e.footer().groupDynamicStyles();f&&f.count()>0&&(this._footerRuntime.setCell(this._footerCell),f.applyInternal(this._footerRuntime,this._runtyles))}return this._footerCell.setStyles(this._runtyles),this._footerCell},getBarCell:function(a){this._barCell.setLevel(a);var b=this.getLevel(a-1);return b?this._barCell.setStyles(b.barStyles()):this._barCell.setStyles(this._barStyles),this._barCell},getHeaderBarCell:function(a){this._itemBarCell.setIndex(a);var b=this.getLevel(a.item().level()-1);return b?this._itemBarCell.setStyles(b.headerBarStyles()):this._itemBarCell.setStyles(this._headerBarStyles),this._itemBarCell},getFooterBarCell:function(a){this._itemBarCell.setIndex(a);var b=a.item().parent(),c=this.getLevel(b.level()-1);return c?this._itemBarCell.setStyles(c.footerBarStyles()):this._itemBarCell.setStyles(this._footerBarStyles),this._itemBarCell},getHeadCell:function(a){return this._headCell.setStyles(this._headStyles),this._headCell},getFootCell:function(a){return this._footCell.setStyles(this._footStyles),this._footCell},getSummaryCell:function(a){return this._summaryCell.setStyles(this._summaryStyles),this._summaryCell},getHeaderText:function(a){return this._statementRuntime.setGrid(this.owner()),this._statementRuntime.setGroup(a),this._headerExprStatement.evaluate(this._statementRuntime)},getFooterText:function(a){return this._footerExprStatement?(this._statementRuntime.setGrid(this.owner()),this._statementRuntime.setGroup(a),this._footerExprStatement.evaluate(this._statementRuntime)):null}}),xh=Xa("GridCell",null,{init:function(a){this._super(),this._name=a,this._index=new Ye},styles:null,index:null,name:function(){return this._name},setIndex:function(a){this._index.assign(a)},getItem:function(){return this._index.item()},item:function(){return this._index.item()},error:function(){return null},errorLevel:function(){return ze.IGNORE}},{ERROR:"<<ERROR>>"}),yh=Xa("StyledCell",xh,{init:function(a){this._super(null),this._model=a},model:null,displayText:function(){return null},value:function(){return null}}),zh=Xa("HeaderCell",xh,{init:function(){this._super("headerCell")},subStyles:null,text:null,subText:null,subTextGap:1,subLocation:Le.LOWER,itemOffset:2,itemGap:2,imageList:null,imageIndex:-1,imageUrl:null,checkLocation:Ke.NONE,imageLocation:Ke.NONE,checked:!1,showTooltip:!0,tooltip:null}),Ah=Xa("HeaderSummaryCell",xh,{init:function(){this._super("headerSummaryCell"),this._value=NaN,this._error=null,this._errorDetail=null},displayText:function(){if(this._error)return xh.ERROR;var a,b=isNaN(this._value)?null:String(this._value);return!b&&(a=this.index().valueColumn())&&(b=a.header().summary().text()),b},value:function(){return this._value},level:function(){return 0},calculate:function(){var a=this.index().dataColumn(),b=a?a.grid():null;if(this._value=NaN,this._error=null,b&&a.dataIndex()>=0){var c=a.header().summary();if(b.summaryMode()!=Fe.NONE&&c.expression()&&b.rowCount()>0)try{var d=b.columnSummaryRuntime();d.setColumn(a,b.getSummarizer()),this._value=c.evaluate(d)}catch(e){this._error=e,this._errorDetail=e,Za(e)}else c._callback&&(this._value=c._callback(a.proxy()))}},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),Bh=Xa("FooterCell",xh,{init:function(){this._super("footerCell"),this._value=NaN,this._error=null,this._errorDetail=null},displayText:function(){if(this._error)return xh.ERROR;var a,b=isNaN(this._value)?null:String(this._value);return!b&&(a=this.index().valueColumn())&&(b=a.footer().text()),b},value:function(){return this._value},level:function(){return 0},calculate:function(){var a=this.index().dataColumn(),b=a?a.grid():null;if(this._value=NaN,this._error=null,b&&a.dataIndex()>=0){var c=a.footer();if(b.summaryMode()!=Fe.NONE&&c.expression()&&b.rowCount()>0)try{var d=b.columnSummaryRuntime();d.setColumn(a,b.getSummarizer()),this._value=c.evaluate(d)}catch(e){this._error=e,this._errorDetail=e,Za(e)}else c._callback&&(this._value=c._callback(a.proxy()))}},error:function(){return this._error},errorDetail:function(){return this._errorDetail}}),Ch=Xa("EditBarCell",xh,{init:function(){this._super("editBarCell")},displayText:function(){return null},value:function(){return null}}),Dh=Xa("IndicatorCell",xh,{init:function(a){this._super("indicatorCell"),this._indicator=a},indicator:null,itemState:me.NORMAL,displayText:function(){var a,b=this._indicator,c=this.index(),d=c.item(),e="";if(c.item())switch(b.displayValue()){case Ae.INDEX:a=b._grid.getIndicatorIndex(d),a>=0&&(a+=b.indexOffset(),b.isZeroBase()||a++,e=String(a));break;case Ae.ROW:a=c.dataRow(),a>=0&&(a+=b.rowOffset(),b.isZeroBase()||a++,e=String(a))}return e},value:function(){return null}}),Eh=Xa("StateBarCell",xh,{init:function(){this._super("stateBarCell")},displayText:function(){switch(this.item().rowState()){case je.CREATED:return"C";case je.UPDATED:return"U";case je.DELETED:return"D";case je.CREATE_AND_DELETED:return"CD";default:return""}},value:function(){return null}}),Fh=Xa("CheckBarCell",xh,{init:function(){this._super("checkBarCell")},displayText:function(){return this._index.dataRow()},value:function(){return ta}}),Gh=Xa("GroupCell",xh,{init:function(a){this._super(a)},setCellStyles:function(a){}}),Hh=Xa("ValueCell",xh,{init:function(a){this._super(a)},cellStyles:null,displayText:function(){return this.value()},value:function(){return ta},blankState:function(){return Ie.NONE},setCellStyles:function(a){this._cellStyles=a,a&&a.assignTo(this._styles)}}),Ih=Xa("DataCell",Hh,{init:function(a){this._super(a||"dataCell")},error:null,errorLevel:ze.IGNORE,error_:function(){return this._error},errorLevel_:function(){return this._errorLevel},displayText:function(){var a,b=this.index(),c=b.dataColumn(),d=b.item();if(c.isLookupDisplay()){var e=c.lookupSource();if(e){var f,g=c.lookupKeyFieldIds(),h=g.length,i=[];for(f=0;h>f;f++)i.push(d.getData(g[f]));a=e.lookup(i),a=void 0!==a?a:this.value()}else{var j=c.labelFieldIndex();a=j>=0?d.getData(j):c.getLookupLabel(this.value())}}else{a=this.value();var k,l;a&&(k=c.displayRegExp())&&(l=c.displayReplace())&&(a=a.replace(k,l))}return void 0===a||null===a?"":String(a)},value:function(){var a=this.index(),b=a.dataColumn(),c=b.dataIndex();return c>=0?a.item().getData(c):void 0},blankState:function(){var a=Ie.NONE,b=this.index(),c=b.dataColumn(),d=b.item();if(c&&c.isEqualBlank()&&c.isDataRoot()&&d.dataRow()>=0){var e=b.grid(),f=e.itemCount();if(f>1){var g=b.I(),h=c.dataIndex(),i=d.getData(h);if(g>0){var j,k,l,m=e.getItem(g-1);f-1>g?(l=e.getItem(g+1),m instanceof Xf?(j=m.getData(h),(i instanceof Date&&j instanceof Date?+i==+j:i==j)?l instanceof Xf?(k=l.getData(h),a=(k instanceof Date&&i instanceof Date?+k==+i:k==i)?Ie.BODY:Ie.TAIL):a=Ie.TAIL:l instanceof Xf&&(k=l.getData(h),(k instanceof Date&&i instanceof Date?+k==+i:k==i)&&(a=Ie.HEAD))):l instanceof Xf&&(k=l.getData(h),(k instanceof Date&&i instanceof Date?+k==+i:k==i)&&(a=Ie.HEAD))):m instanceof Xf&&(j=m.getData(h),(j instanceof Date&&i instanceof Date?+j==+i:j==i)&&(a=Ie.TAIL))}else l=e.getItem(g+1),l instanceof Xf&&(k=l.getData(h),(k instanceof Date&&i instanceof Date?+k==+i:k==i)&&(a=Ie.HEAD))}}return a},getTextFromItem:function(a){var b,c=this.index().dataColumn(),d=a.getData(c.dataIndex());if(c.isLookupDisplay()){var e=c.lookupSource();if(e){var f,g=c.lookupKeyFieldIds(),h=g.length,i=[];for(f=0;h>f;f++)i.push(a.getData(g[f]));b=e.lookup(i),b=void 0!==b?b:this.value()}else{var j=c.labelFieldIndex();b=j>=0?a.getData(j):c.getLookupLabel(d)}}else b=d;return void 0===b||null===b?"":String(b)}}),Jh=Xa("LiteralCell",Hh,{init:function(a){this._super(a||"literalCell")},displayText:function(){return this._index.column().value()},value:function(){return this._index.column().getValue()}}),Kh=Xa("SeriesCell",Hh,{init:function(a){this._super(a||"seriesCell")},displayText:function(){return null},value:function(){var a=this.index().column();if(a instanceof tk){var b,c=a.fields();if(c&&(b=c.length)>0){var d,e=this.item();for(vals=new Array(b),d=0;b>d;d++)c[d]>=0&&(vals[d]=e.getData(c[d]));return vals}}return[]}},{getText:function(a){return a?a.join(","):""}}),Lh=Xa("RowGroupHeaderCell",xh,{init:function(a){this._super("rowGroupHeaderCell"),this._rowGroup=a},displayText:function(){var a=ab(this.item(),Yf);return a?this._rowGroup.getHeaderText(a):""},value:function(){return null}}),Mh=Xa("RowGroupFooterCell",xh,{init:function(a){this._super("rowGroupFooterCell"),this._value=NaN,this._error=null,this._errorDetail=null,this._rowGroup=a},calculate:function(){this._value=NaN,this._error=null;try{this._value=Mh.$_getValue(this.item(),this.index().dataColumn())}catch(a){this._error=a,this._errorDetail=a,Za(a)}},displayText:function(){if(this._error)return xh.ERROR;var a=isNaN(this._value)?null:String(this._value);if(!a){var b,c=ab(this.item().parent(),Yf),d=this.index().valueColumn();c&&d&&d.grid().isGroupedColumn(d)&&(b=this._rowGroup.getFooterText(c))?a=b:d&&(a=d.footer().groupText())}return a},value:function(){return this._value},level:function(){return this.index().item().level()}},{$_getValue:function(a,b){if(b&&b.dataIndex()>=0){var c=b.footer(),d=a.parent();if(c.groupExpression()){var e=b.grid().rowGroupSummaryRuntime();e.setColumn(b,b.grid().getSummarizer()),e.setItem(d);var f=c.evaluateGroup(e);return f}return c._groupCallback?c._groupCallback(a._index,b.proxy()):void 0}return void 0},getValue:function(a,b){try{return Mh.$_getValue(a,b)}catch(c){return xh.ERROR}}}),Nh=Xa("RowGroupBarCell",xh,{init:function(a){this._super("rowGroupBarCell")},level:0,displayText:function(){return null},value:function(){return null}}),Oh=Xa("RowGroupItemBarCell",xh,{init:function(a){this._super("rowGroupItemBarCell")},displayText:function(){return null},value:function(){return null}}),Ph=Xa("RowGroupHeadCell",xh,{init:function(a){this._super("rowGroupHeadCell")},index:function(){return Ye.NULL},displayText:function(){return null},value:function(){return null}}),Qh=Xa("RowGroupFootCell",xh,{init:function(a){this._super("rowGroupFootCell")},displayText:function(){return null},value:function(){return null}}),Rh=Xa("RowGroupSummaryCell",xh,{init:function(a){this._super("rowGroupSummaryCell")},displayText:function(){return null},value:function(){return null}}),Sh=Xa("GridElement",Vd,{init:function(a,b){this._super(a,b),this._drawRect=new kd,this._recycling=!1},grid:function(){for(var a=this._parent;a;){if(a instanceof em)return a;a=a._parent}return null},measure:function(a,b,c){return this._doMeasure(a,b,c)},layoutContent:function(a){return this._doLayoutContent(a)},refresh:function(){this._doRefresh()},clip:function(a){this.getClientRect(this._drawRect),a.clipRect(this._drawRect)},_doDraw:function(a,b){b&&a.drawRectI(yd.WHITE,null,this._drawRect),this._doRender(a,this._drawRect)},_doDrawHtml:function(){this.getClientRect(this._drawRect),this._doRenderHtml(this._drawRect)},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){},_doRefresh:function(){},_doRender:function(a,b){},_doRenderHtml:function(a){},_drawStyledBorders:function(a,b,c){var d=c.borderLeftWidth(),e=c.borderTopWidth(),f=c.borderRightWidth(),g=c.borderBottomWidth();d&&(d/=2,a.drawLineI(c.borderLeft(),b.x+d,b.y,b.x+d,b.bottom())),e&&(e/=2,a.drawLineI(c.borderLeft(),b.x,b.y+e,b.right(),b.y+e)),f&&(f=(f+1)/2,a.drawLineI(c.borderLeft(),b.right()-f,b.y,b.right()-f,b.bottom())),g&&(g=(g+1)/2,a.drawLineI(c.borderLeft(),b.x,b.bottom()-g,b.right(),b.bottom()-g))},_drawStyledHtmlBorders:function(a){var b=a.borderLeft(),c=a.borderTop(),d=a.borderRight(),e=a.borderBottom();this._css.borderLeft=b?b.css():"",this._css.borderTop=c?c.css():"",this._css.borderRight=d?d.css():"",this._css.borderBottom=e?e.css():""}}),Th=(Sh.prototype,Xa("VisualObjectElement",Sh,{init:function(a,b,c){this._super(a,b),this._model=c,this._clipBounds=null,this._dom&&(this._dom.style.pointerEvents="none")},model:null,setClipBounds:function(a,b,c,d){var e=null,f=ab(a,kd);f?(e=this._clipBounds||new kd,e.x=Math.max(f.x,this._x),e.setRight(Math.min(f.right(),this.right())),e.y=Math.max(f.y,this._y),e.setBottom(Math.min(f.bottom(),this.bottom())),e.x-=this._x,e.y-=this._y):isNaN(a)||(e=this._clipBounds||new kd,e.x=Math.max(a,this._x),e.setRight(Math.min(a+c,this.right())),e.y=Math.max(b,this._y),e.setBottom(Math.min(b+d,this.bottom())),e.x-=this._x,e.y-=this._y),this._clipBounds=e},clip:function(a){this.getClientRect(this._drawRect),a.clipRect(this._clipBounds||this._drawRect)}})),Uh=(Th.prototype,Xa("EmptyGridElement",Sh,{init:function(a,b){this._super(a,b)},_doRender:function(a,b){var c=this.grid(),d=c.displayOptions().emptyMessage(),e=c._productName,f=c.body().emptyStyles().background();f&&a.drawRectI(f,null,b),(d||e)&&(b.inflate(-10,-10),d&&a.drawTextRect(null,yd.BLACK,d,b,id.LEFT,jd.TOP),e&&a.drawTextRect(null,yd.BLACK,e,b,id.LEFT,jd.BOTTOM))},_doRenderHtml:function(a){this._dom.style.background="#fff"}})),Vh=Xa("PanelElement",Th,{init:function(a,b){this._super(a,"panelView",b)},_doMeasure:function(a,b,c){return ld.create(b,this.model().minHeight())},_doRender:function(a,b){var c=this.model(),d=c.styles(),e=d.background();e&&a.drawRectI(e,null,b),this._drawStyledBorders(a,b,d)},_doRenderHtml:function(a){this._dom.style.background="#ddd"}}),Wh=Xa("HeaderElement",Th,{init:function(a,b,c,d){this._super(a,"headerView",b),this._fixed=c,this._rightFixed=d,this._cells={},this._focusedColumn=null},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},$_getChildAt:function(a,b,c,d){for(var e=0,f=a.childCount();f>e;e++){var g=a.getChild(e);if(g.isVisible()){if(d&&g instanceof si){var h=this.$_getChildAt(g,b-g.x(),c-g.y(),!0);if(h)return h}if(g.containsInBounds(b,c))return g}}return null},getCellAt:function(a,b,c){return this.$_getChildAt(this,a,b,c)},findCell:function(a){if(a){var b=a.root(),c=this._cells[b.$_hash];if(c&&c.isVisible())return b!=a&&(c=c.findCell(a)),c}return null},_doMeasure:function(a,b,c){return ld.create(b,this.model().minHeight())},_doRender:function(a,b){a.drawRectI(yd.WHITE,null,b);var c=this.grid().fixedOptions(),d=c.colBarWidth();if(d>0&&this.isFixed()){var e=c.colBarStyles(),f=e.background(),g=e.borderRight(),h=e.borderLeft();this.isRightFixed()?b.setRight(d):b.setLeft(b.right()-d),f&&a.drawRectI(f,null,b),g&&a.drawVertLineI(g,b.y,b.bottom(),b.right()-1),h&&this._rightFixed&&a.drawVertLineI(h,b.y,b.bottom(),b.x)}},_doRenderHtml:function(a){this._dom.style.background="#fff"},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},$_checkCell:function(a){var b=ab(a,vi);b&&b.setFocused(this._focusedColumn==b.index().column()),a instanceof wi&&this.$_refreshCells(a)},$_refreshCells:function(a){for(var b=0,c=a.childCount();c>b;b++)this.$_checkCell(a.getChild(b))},_doRefresh:function(){this._focusedColumn=this.grid().focusedIndex().column();for(var a in this._cells)this.$_checkCell(this._cells[a])},_prepareCells:function(a){var b=this.grid(),c=b.header();b.isColumnLayoutChanged(),this.hideAll();for(var d=a.firstCol(this._fixed,this._rightFixed),e=a.lastCol(this._fixed,this._rightFixed),f=d;e>=f;f++){var g=a.getColumn(f),h=this._cells[g.$_hash];h||(h=g instanceof ak?new wi(this._dom):new vi(b,this._dom),this._cells[g.$_hash]=h,this.addElement(h)),h.setVisible(!0);var i=Ye.temp(b,-1,g),j=c.getCell(i);h.updateCell(j)}},_layoutCells:function(a){for(var b=a.firstCol(this._fixed,this._rightFixed),c=a.lastCol(this._fixed,this._rightFixed),d=b;c>=d;d++){var e=this._cells[a.getColumn(d).$_hash],f=a.getColumnBounds(d);f.height=this.height(),e.setRect(f),e.layoutContent(a)}}}),Xh=Xa("HeaderSummaryElement",Th,{init:function(a,b,c,d){this._super(a,"headerSummaryView",b),this._fixed=c,this._rightFixed=d,this._cells={},this._mergeCells={}},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},findCell:function(a){if(a){var b=a.root(),c=this._cells[b.$_hash];if(c&&c.isVisible())return b!=a&&(c=c.findCell(a)),c}return null},_doMeasure:function(a,b,c){return ld.create(b,this.model().minHeight())},_doRender:function(a,b){a.drawRectI(yd.WHITE,null,b);var c,d,e,f,g=this.grid(),h=g.fixedOptions(),i=h.colBarWidth();this.isFixed()&&i>0&&(c=h.colBarStyles(),d=c.background(),e=c.borderRight(),f=c.borderLeft(),this.isRightFixed()?b.setRight(i):b.setLeft(b.right()-i),d&&a.drawRectI(d,null,b),e&&a.drawVertLine(e,b.y,b.bottom(),b.right()-1),f&&this._rightFixed&&a.drawVertLineI(f,b.y,b.bottom(),b.x))},_doRenderHtml:function(a){this._dom.style.background="#fff"},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doRefresh:function(){},_prepareCells:function(a){var b=this.grid(),c=b.header().summary(),d=b.headerSummaryMergeManager();d.count()>0;b.isColumnLayoutChanged(),this.hideAll();for(var e=a.firstCol(this._fixed,this._rightFixed),f=a.lastCol(this._fixed,this._rightFixed),g=e;f>=g;g++){var h=d.findRoom(g),i=h?a.getColumn(h.base()):a.getColumn(g),j=this._cells[i.$_hash];j||(j=i instanceof ak?new yi(this._dom):new xi(this._dom),this._cells[i.$_hash]=j,this.addElement(j)),j.setVisible(!0);var k=Ye.temp(b,-1,i),l=c.getCell(k);j.updateCell(l)}},_layoutCells:function(a){for(var b=a.firstCol(this._fixed,this._rightFixed),c=a.lastCol(this._fixed,this._rightFixed),d=(a.fixedColCount(),this.grid()),e=d.headerSummaryMergeManager(),f=b;c>=f;f++){var g=e.findRoom(f),h=g?a.getColumn(g.base()):a.getColumn(f),i=this._cells[h.$_hash],j=a.getColumnBounds(f);if(g){var k=a.getColumnBounds(g.start()),l=a.getColumnBounds(g.last());j.x=k.x,j.width=l.right()-j.x}j.height=this.height(),i.setRect(j),i.layoutContent(a)}}}),Yh=Xa("FooterElement",Th,{init:function(a,b,c,d){this._super(a,"footerView",b),this._fixed=c,this._rightFixed=d,this._cells={},this._mergeCells={}},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},findCell:function(a){if(a){var b=a.root(),c=this._cells[b.$_hash];if(c&&c.isVisible())return b!=a&&(c=c.findCell(a)),c}return null},_doMeasure:function(a,b,c){return ld.create(b,this.model().minHeight())},_doRender:function(a,b){a.drawRectI(yd.WHITE,null,b);var c=this.grid().fixedOptions(),d=c.colBarWidth();if(this.isFixed()&&d>0){var e=c.colBarStyles(),f=e.background(),g=e.borderRight(),h=e.borderLeft();this.isRightFixed()?b.setRight(d):b.setLeft(b.right()-d),f&&a.drawRectI(f,null,b),g&&a.drawVertLine(g,b.y,b.bottom(),b.right()-1),h&&this._rightFixed&&a.drawVertLineI(h,b.y,b.bottom(),b.x)}},_doRenderHtml:function(a){this._dom.style.background="#fff"},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doRefresh:function(){},_prepareCells:function(a){var b=this.grid();b.isColumnLayoutChanged(),this.hideAll();var c,d=a.firstCol(this._fixed,this._rightFixed),e=a.lastCol(this._fixed,this._rightFixed),f=b.footerMergeManager(),g=f.count()>0;for(c=d;e>=c;c++){var h=g&&f.findRoom(c);this._prepareCell(a,c,g,h)}if(g)for(var i=f.getRoomNames(),c=0;c<i.length;c++){var h=g&&f.getRoom(i[c]);h&&(d>h.base()&&d<=h.last()||e<h.base()&&e>=h.start())&&this._prepareCell(a,h.base(),!0,h)}},_prepareCell:function(a,b,c,d){var e=this.grid(),f=e.footer(),g=a.getColumn(b),h=this._cells[g.$_hash];h||(h=g instanceof ak?new Ai(this._dom):new zi(this._dom),this._cells[g.$_hash]=h,this.addElement(h)),h.setVisible(!c||!d||d.base()==b);var i=Ye.temp(e,-1,g),j=f.getCell(i);h.updateCell(j)},_layoutCells:function(a){var b,c,d,e,f,g=a.firstCol(this._fixed,this._rightFixed),h=a.lastCol(this._fixed,this._rightFixed),i=this.grid().footerMergeManager(),j=i.count()>0;for(b=g;h>=b;b++){if(e=a.getColumn(b),c=this._cells[e.$_hash],d=a.getColumnBounds(b),d.height=this.height(),j&&(f=i.findRoom(b))){var k=a.getColumnBounds(f.start()),l=a.getColumnBounds(f.last());d.x=k.x,d.width=l.right()-d.x}c.setRect(d),c.layoutContent(a)}if(j)for(var m=i.getRoomNames(),b=0;b<m.length;b++){var f=i.getRoom(m[b]);f&&(g>f.base()&&g<=f.last()||h<f.base()&&h>=f.start())&&(d=a.columnBounds(f.start()),d.height=this.height(),l=a.columnBounds(f.last()),d.width=l.right()-d.x,c=this._cells[a.getColumn(f.base()).$_hash],c.setRect(d),c.layoutContent(a))}}}),Zh=Xa("IndicatorElement",Th,{init:function(a,b){this._super(a,"IndicatorView",b),this._cells=[],this._fixedCount=0},refreshSelection:function(a){},_doMeasure:function(a,b,c){function d(a,b){var c=a.itemCount();if(0>=c)return 0;var d=new Array(String(c).length+1).join("8"),e=b.styles();return c=a.container().measureText(e.font(),d)}var a=this.grid(),e=this.model(),f=e.width();if(0>=f){f=d(a,e);var g=e.maxWidth();g>0&&f>g&&(f=g),f=Math.max(e.minWidth(),f)}return ld.create(f,c)},_doRender:function(a,b){var c=this.model(),d=c.styles(),e=d.background();e&&a.drawRectI(e,null,b),this._drawStyledBorders(a,b,d)},_doRenderHtml:function(a){var b=this.model(),c=b.styles(),d=c.background();this._css.background=d?d.css():null},_doLayoutContent:function(a){var b,c,d,e,f,g,h,i=this.grid(),j=this.model(),k=this.width(),l=a.topIndex();for(fixedItemCount=a.fixedItemCount(),itemCount=a.itemCount(),this._fixedCount=fixedItemCount;this.childCount()<fixedItemCount+itemCount;)b=this._cells.length>0?this._cells.pop():this._createCell(),this.addElement(b);for(;this.childCount()>fixedItemCount+itemCount;)b=this.removeElementAt(this.childCount()-1),b.validate(!0),this._cells.push(b);for(d=this.childCount(),c=0;d>c;c++)b=this.getChild(c),e=c<fixedItemCount?c:c+l,f=Ye.temp(i,e),g=j.getCell(f),b.updateCell(g),h=a.getItemBounds(c),h.x=0,h.width=k,b.setRect(h)},_doRefresh:function(){for(var a=this.grid(),b=a.indicator(),c=a.layoutManager(),d=c.fixedItemCount(),e=this.childCount(),f=0;e>f;f++){var g=d>f?f:f+c.topIndex(),h=Ye.temp(a,g),i=b.getCell(h),j=this.getChild(f);j.updateCell(i)}},_createCell:function(){return new Oi(this._dom)}}),$h=Xa("StateBarElement",Th,{init:function(a,b){this._super(a,"stateBarView",b),this._cells=[],this._fixedCount=0},refreshSelection:function(a){},_doMeasure:function(a,b,c){return ld.create(this.model().width(),c)},_doRender:function(a,b){var c=this.model(),d=c.styles(),e=d.background();e&&a.drawRectI(e,null,b),this._drawStyledBorders(a,b,d)},_doRenderHtml:function(a){var b=this.model(),c=b.styles(),d=c.background();this._css.background=d?d.css():null,this._drawStyledHtmlBorders(c)},_doLayoutContent:function(a){var b,c,d,e,f,g,h,i=this.grid(),j=this.model(),k=this.width(),l=a.topIndex();for(fixedItemCount=a.fixedItemCount(),itemCount=a.itemCount(),this._fixedCount=fixedItemCount;this.childCount()<fixedItemCount+itemCount;)b=this._cells.length>0?this._cells.pop():this._createCell(),this.addElement(b);for(;this.childCount()>fixedItemCount+itemCount;)b=this.removeElementAt(this.childCount()-1),b.validate(!0),this._cells.push(b);for(d=this.childCount(),c=0;d>c;c++)b=this.getChild(c),e=c<fixedItemCount?c:c+l,f=Ye.temp(i,e),g=j.getCell(f),b.updateCell(g),h=a.getItemBounds(c),h.x=0,h.width=k,b.setRect(h)},_doRefresh:function(){},_createCell:function(){return new Ri(this._dom)}}),_h=Xa("CheckBarElement",Th,{init:function(a,b){this._super(a,"checkBarView",b),this._cells=[],this._fixedCount=0},refreshSelection:function(a){},_doMeasure:function(a,b,c){return ld.create(this.model().width(),c)},_doRender:function(a,b){var c=this.model(),d=c.styles(),e=d.background();e&&a.drawRectI(e,null,b),this._drawStyledBorders(a,b,d)},_doRenderHtml:function(a){var b=this.model(),c=b.styles(),d=c.background();this._css.background=d?d.css():null,this._drawStyledHtmlBorders(c)},_doLayoutContent:function(a){var b,c,d,e,f,g,h,i=this.grid(),j=this.width(),k=this.model(),l=k.isExclusive(),m=k.isShowGroup(),n=a.topIndex(),o=a.fixedItemCount(),p=a.itemCount();for(this._fixedCount=o;this.childCount()<o+p;)b=this._cells.length>0?this._cells.pop():this._createCell(),this.addElement(b);for(;this.childCount()>o+p;)b=this.removeElementAt(this.childCount()-1),b.validate(!0),this._cells.push(b);for(d=this.childCount(),c=0;d>c;c++)e=o>c?c:c+n,f=Ye.temp(i,e),g=k.getCell(f),b=this.getChild(c),b.setMarkVisible(m||f.dataRow()>=0),b.setExclusive(l),b.updateCell(g),h=a.getItemBounds(c),h.x=0,h.width=j,b.setRect(h)},_doRefresh:function(){},_createCell:function(){return new Vi(this._dom)}}),ai=Xa("GridBodyElement",Th,{init:function(a,b,c,d){this._super(a,"gridBodyView",b),this._fixed=c,this._rightFixed=d,this._lineScrolled=!1,this._horzScrolling=!1,this._fixedCount=0,this._items=[],this._rowViews=[],this._fill=new yd(16777215)},empty:!1,isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},isLineScrolled:function(){return this._lineScrolled},checkResourceColumn:function(a,b){},checkResourceUse:function(a,b){},clearItems:function(){this._items=[]},addItem:function(a){this._items.indexOf(a)<0&&this._items.push(a)},findRowView:function(a){for(var b=0,c=this.childCount();c>b;b++){var d=this.getChild(b);if(d instanceof $i&&d.item().index()==a)return d}return null},findFirstRow:function(){var a=this.childCount();if(a>0){for(var b=null,c=1;a>c;c++){var d=this.getChild(c);d instanceof $i&&!b&&d.itemIndex()<b.itemIndex()&&(b=d)}return b}return null},_doMeasure:function(a,b,c){return{width:b,height:c}},_doRenderHtml:function(a){},_doLayoutContent:function(a){this._lineScrolled=0,this._super(a);var b,c,d,e,f,g,h,i=this._fixed,j=this._rightFixed,k=this.grid(),l=this.childCount(),m=this._items,n=m.length;for(b=0;l>b;b++)this.getChild(b)._recycling=!1;for(;this.childCount()<n;)c=m[this.childCount()],d=this.$_borrowView(c),this.addElement(d);for(;this.childCount()>n;)this.$_removeView(this.childCount()-1);for(this._fixedCount=a.fixedItemCount(),e=k.body().styles(),h=k.topIndex(),b=0;n>b;b++)c=m[b],d=this.getChild(b),d.updateElement(c,e),f=c.index(),f=f<this._fixedCount?f:f-h,g=a.itemBounds(f,i,j),d.setRect(g),d._recycling?a.isColumnMerged&&0!=this._lineScrolled&&(1>=b||b>=n-2)&&d.layoutContent(a):d.layoutContent(a)},_doRender:function(a,b){if(!this.isEmpty()){var c=this.grid(),d=c.fixedOptions(),e=d.colBarWidth();if(this.isFixed()&&e>0){this.isRightFixed()?b.setRight(e):b.setLeft(b.right()-e),b.height=c.layoutManager().fixedBounds().height;var f=d.colBarStyles(),g=f.background(),h=f.borderRight(),i=f.borderLeft();g&&a.drawRect(g,null,b),h&&a.drawVertLineI(h,b.y,b.bottom(),b.right()-1),i&&this._rightFixed&&a.drawVertLineI(i,b.y,b.bottom(),b.x)}}},_doRefresh:function(){},$_removeView:function(a){var b=this.removeElementAt(a);b.validate(!0),this._rowViews.push(b)},$_borrowView:function(a){var b=this._rowViews.pop();return b||(b=this.grid().delegate().borrowItemView(a,this._fixed,this._rightFixed)),Qa(null!=b,"view is null"),b._recycling=!1,b}}),bi=Xa("GridLinesElement",Xd,{init:function(a,b){this._super(a,"gridLinesView"),this._grid=b},_doDraw:function(a){var b=this._grid,c=b.layoutManager(),d=c.bodyBounds();d.setRight(d.right()+c.rfixedWidth());var e,f,g,h,i=c.footerBounds().y,j=Math.min(d.right(),c.gridBounds().right()),k=b.fixedOptions();if(c.fixedHeight()>0&&k.rowBarHeight()>0&&(e=Math.min(c.gridBounds().right(),d.right()),f=d.y+c.fixedHeight(),i>f)){if(g=k.rowBarStyles().background(),h=k.rowBarStyles().borderBottom(),g){var l=Math.min(k.rowBarHeight(),i-f);a.drawBoundsI(g,null,0,f,e,l)}f+=k.rowBarHeight()-1,i>f&&h&&h.width()>0&&a.drawLineI(h,0,f,e,f)}h=b.body().styles().line(),h&&h.width()>0&&(e=d.right(),f=d.bottom(),j>=e&&c.columnCount()+c.fixedColCount()>0&&a.drawLineI(h,e-1,0,e-1,f),b.itemCount()>0&&c.itemCount()==c.fullItemCount()&&i>f&&a.drawLineI(h,0,f-1,j,f-1))},_doRenderHtml:function(a){}}),ci=Xa("GridDebugElement",Xd,{init:function(a,b){this._super(a,"gridDebugView"),this._grid=b,this._drawRect=new kd,this._strokes={grid:Dd.RED,body:Dd.BLUE,
fixed:Dd.RED,nonfixed:Dd.GREEN}},gridBounds:!1,bodyBounds:!1,fixedBounds:!1,nonfixedBounds:!1,_doDraw:function(a,b){this.getClientRect(this._drawRect),this._doRender(a,this._drawRect)},_doRender:function(a,b){var c,d=this._grid.layoutManager();this._gridBounds&&(c=d.gridBounds(),a.drawRect(null,this._strokes.grid,c)),this._bodyBounds&&(c=d.bodyBounds(),Ea("### B O D Y: "+c.x+", "+c.width),a.drawRect(null,this._strokes.body,c)),this._fixedBounds&&(c=d.fixedBounds(),a.drawRect(null,this._strokes.fixed,c)),this._nonfixedBounds&&(c=d.nonfixedBounds(),a.drawRect(null,this._strokes.nonfixed,c))}}),di=Xa("HandleElement",Vd,{init:function(a,b,c){this._super(a,c),this._owner=b},clickable:!1,owner:function(){return this._owner},propertyChanged:function(a,b){this.invalidate()},hoverChanged:function(a){this.invalidate()}}),ei=Xa("CellHandle",di,{init:function(a,b,c){this._super(a,b,c)},cellView:function(){return this._owner}}),fi=Xa("HeaderCellHandle",ei,{init:function(a,b,c){this._super(a,b,c)}}),gi=8,hi=9,ii=Xa("HeaderSortHandle",fi,{init:function(a,b,c){this._super(b,c,"sortHandle"),this.setMouseEnabled(!1),this.setClickable(!1),this._grid=a,this._options=a.sortingOptions(),this._options._handleFill&&(this._fill=this._options._handleFill),this._options._handleNoneFill&&(this._noneFill=this._options._handleNoneFill),this._options._hoveredHandleFill&&(this._hoveredFill=this._options._hoveredHandleFill),this._options._hoveredHandleNoneFill&&(this._hoveredNoneFill=this._options._hoveredHandleNoneFill),this._options._handleBorderPen&&(this._border=this._options._handleBorderPen)},sortOrder:-1,sortDir:te.ASCENDING,fill:yd.GRAY,noneFill:yd.EMPTY,hoveredFill:yd.GRAY,hoveredNoneFill:yd.EMPTY,border:Dd.GRAY,_doDraw:function(a){if(this._options.visibility!=qe.HOVERED||this._owner.isHovered()){var b=this.getClientRect(),c=this.sortOrder();this._options.isImageHandle()?this.$_drawHandleImage(a,b,c):this.$_drawHandle(a,b,c)}},$_drawHandle:function(a,b,c){var d,e,f=b.width/2,g=(b.height-hi)/2;d=0>c||this.sortDir()==te.ASCENDING?[f,g,f-gi/2,g+hi-1,f+gi/2,g+hi-1,f,g]:[f-gi/2,g,f+gi/2,g,f,g+hi-1,f-gi/2,g],e=this.isHovered()?0>c?this._hoveredNoneFill:this._hoveredFill:0>c?this._noneFill:this._fill,a.drawPolygonArray(e,this._border,d)},$_drawHandleImage:function(a,b,c){var d,e=this.sortDir(),f=this.isHovered(),g=this._options.handleImages();if(d=0>c?f?g._hoveredNone:g._none:e==te.ASCENDING?f?g._hoveredAscending:g._ascending:f?g._hoveredDescending:g._descending){var h=this._grid.getImage(d),i=Math.min(h.width,b.width),j=Math.min(h.height,b.height);a.drawImage(h,(b.width-i)/2,(b.height-j)/2,i,j)}},isHovered:function(){return this._super()||this._owner&&this._owner.isHovered()}}),ji=10,ki=12,li=4,mi=Xa("HeaderFilterHandle",fi,{init:function(a,b,c){this._super(b,c,"filterHandle"),this.setClickable(!0),this._grid=a,this._options=a.filteringOptions(),this._options._handleFill&&(this._fill=this._options._handleFill),this._options._handleNoneFill&&(this._noneFill=this._options._handleNoneFill),this._options._hoveredHandleFill&&(this._hoveredFill=this._options._hoveredHandleFill),this._options._hoveredHandleNoneFill&&(this._hoveredNoneFill=this._options._hoveredHandleNoneFill),this._options._handleBorderPen&&(this._border=this._options._handleBorderPen)},fill:yd.GRAY,noneFill:yd.EMPTY,hoveredFill:yd.GRAY,hoveredNoneFill:yd.EMPTY,border:Dd.GRAY,isClickable:function(){return!0},_doDraw:function(a){var b=this.cellView();if(b){var c=b.index().dataColumn();c&&(this._options.isImageHandle()?this.$_drawHandleImage(a,this.clientRect(),c):this.$_drawHandle2(a,this.clientRect(),c))}},$_drawHandle2:function(a,b,c){var d,e=b.width/2,f=(b.height-ki)/2,g=[e-ji/2,f,e+ji/2,f,e,f+ki-li+2,e-ji/2,f],h=c.isFiltered();d=this.isHovered()?h?this._hoveredFill:this._hoveredNoneFill:h?this._fill:this._noneFill,a.drawPolygonArray(d,this._border,g),a.drawLineI(this._border,e-1,f+ki-li-1,e-1,f+ki+1),a.drawLineI(this._border,e,f+ki-li-1,e,f+ki+1)},$_drawHandleImage:function(a,b,c){var d,e=c.isFiltered(),f=this.isHovered(),g=this._options.handleImages();d=e?f?g._hoveredFill:g._fill:f?g._hoveredNone:g._none;var h=this._grid.getImage(d);if(h){var i=Math.min(h.width,b.width),j=Math.min(h.height,b.height);a.drawImage(h,(b.width-i)/2,(b.height-j)/2,i,j)}},setHovered:function(a){this._super(a)}}),ni=12,oi=Xa("HeaderCheckHandle",fi,{init:function(a,b,c){this._super(b,c,"checkHandle"),this.setClickable(!0),this._grid=a,this._options=a.columnHeaderOptions(),this._options._checkFill&&(this._fill=this._options._checkFill),this._options._checkNoneFill&&(this._noneFill=this._options._checkNoneFill),this._options._hoveredCheckFill&&(this._hoveredFill=this._options._hoveredCheckFill),this._options._hoveredCheckNoneFill&&(this._hoveredNoneFill=this._options._hoveredCheckNoneFill),this._options._checkBorderPen&&(this._border=this._options._checkBorderPen)},checked:!1,fill:yd.DKGRAY,noneFill:yd.EMPTY,hoveredFill:yd.DKGRAY,hoveredNoneFill:yd.EMPTY,border:Dd.GRAY,_doDraw:function(a){var b=this.getClientRect();this._options.isImageCheckHandle()?this.$_drawImageCheck(a,b):this.$_drawCheck(a,b)},$_drawCheck:function(a,b){var c=yd.WHITE;c&&a.drawRectI(c,this._border,b);var d=ni;a.drawBoundsI(null,this._border,b.x,b.y,d,d),b.y+=2;var c;c=this.isHovered()?this.isChecked()?this._hoveredFill:this._hoveredNoneFill:this.isChecked()?this._fill:this._noneFill,Ob(a,c,b,d-1)},$_drawImageCheck:function(a,b){var c,d=this.isChecked(),e=this.isHovered(),f=this._options.checkImages();c=d?e?f._hoveredFill:f._fill:e?f._hoveredNone:f._none;var g=this._grid.getImage(c);if(g){var h=Math.min(g.width,b.width),i=Math.min(g.height,b.height);a.drawImage(g,(b.width-h)/2,(b.height-i)/2,h,i)}},setHovered:function(a){this._super(a)}}),pi=Xa("HeaderImageHandle",fi,{init:function(a,b){this._super(a,b,"imageHandle"),this.setMouseEnabled(!1),this.setClickable(!1)},image:null,_doDraw:function(a){var b=this._image;b&&b.width>0&&b.height>0&&a.drawImage(b,0,0,b.width,b.height)}}),qi=Xa("DataCellExpandHandle",ei,{init:function(a,b){this._super(a,b,"dataCellExpandHandle")},expanded:!1,background:null,group:function(){var a=ab(this.cellView(),vj);return a?a.mergeRoom().group():null},isClickable:function(){return!0},_doDraw:function(a){var b=this.clientRect(),c=this._background||yd.DKGRAY;this.isExpanded()?Nb(a,b,9,c,yd.WHITE):Mb(a,b,9,c,yd.WHITE)}}),ri=Xa("CellElement",Sh,{init:function(a,b){this._super(a,b),this._grid=null,this._fixed=!1,this._recycling=!1,this._index=new Ye,this._renderRect=new kd,this._textAlign="near",this._lineAlign="middle"},background:yd.WHITE,foreground:yd.BLACK,font:null,border:null,borderLeft:null,borderTop:null,borderRight:null,borderBottom:null,paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0,line:null,figureBackground:yd.DKGRAY,figureInactiveBackground:yd.LTGRAY,figureBorder:null,figureSize:null,figureName:null,figureState:null,textAlignment:Ne.NEAR,lineAlignment:Ne.CENTER,textWrap:Me.NONE,pushed:!1,mouseEntered:!1,pressed:!1,clickable:!1,index:null,isFixed:function(){return this._fixed},setIndex:function(a){Ye.areEquals(this._index,a)||(this._index.assign(a),this.invalidate())},getItem:function(){return this._index.item()},item:function(){return this._index.item()},setTextAlignment:function(a){if(a!=this._textAlignment){switch(this._textAlignment=a,a){case Ne.FAR:this._textAlign="right";break;case Ne.NEAR:this._textAlign="left";break;default:this._textAlign="center"}this.invalidate()}},setLineAlignment:function(a){if(a!=this._lineAlignment){switch(this._lineAlignment=a,a){case Ne.FAR:this._lineAlign="bottom";break;case Ne.NEAR:this._lineAlign="top";break;default:this._lineAlign="middle"}this.invalidate()}},setFont:function(a){var b=this._font;a!=b&&(a&&b&&a.font==b.font&&a.size==b.size&&a.underline==b.underline||(this._font=a,this.invalidate()))},borderWidth:function(){return this._border?this._border.width():0},borderLeftWidth:function(){return this._borderLeft?this._borderLeft.width():0},borderRightWidth:function(){return this._borderRight?this._borderRight.width():0},borderHorzWidth:function(){return(this._borderLeft?this._borderLeft.width():0)+(this._borderRight?this._borderRight.width():0)},borderTopWidth:function(){return this._borderTop?this._borderTop.width():0},borderBottomWidth:function(){return this._borderBottom?this._borderBottom.width():0},borderVertWidth:function(){return(this._borderTop?this._borderTop.width():0)+(this._borderBottom?this._borderBottom.width():0)},paddingHorz:function(){return this._paddingLeft+this._paddingRight},paddingVert:function(){return this._paddingTop+this._paddingBottom},textAlign:function(){return this._textAlign},lineAlign:function(){return this._lineAlign},canHovering:function(a){return!0},setMouseEntered:function(a){a!=this._mouseEntered&&(this._mouseEntered=a,this.canHovering(a)&&(this._doLayoutHandles(),this.invalidate(!1,!0)))},setPressed:function(a){a!=this._pressed&&(this._pressed=a,this.invalidate(!1,!0))},updateCell:function(a){this._grid=this.grid(),this.setIndex(a.index()),this._doPrepareValue(a),this._doPrepareElement(a.styles()),this._doUpdateContent(a)},inflatePadding:function(a){return a.x+=this._paddingLeft,a.width-=this._paddingLeft+this._paddingRight,a.y+=this._paddingTop,a.height-=this._paddingTop+this._paddingBottom,a},deflatePadding:function(a){return a.x-=this._paddingLeft,a.width+=this._paddingLeft+this._paddingRight,a.y-=this._paddingTop,a.height+=this._paddingTop+this._paddingBottom,a},deflatePadding2:function(a){return a.x+=this._paddingLeft,a.width-=this._paddingLeft+this._paddingRight,a.y+=this._paddingTop,a.height-=this._paddingTop+this._paddingBottom,a},inflatePadding2:function(a){return a.x-=this._paddingLeft,a.width+=this._paddingLeft+this._paddingRight,a.y-=this._paddingTop,a.height+=this._paddingTop+this._paddingBottom,a},getButtonWidth:function(){return 0},propertyChanged:function(a,b){this.invalidate()},_doLayoutContent:function(a){this._doLayoutHandles()},_doRender:function(a,b){a.drawTextRect(null,yd.BLACK,"Cell:"+this._index.toString(),b,id.CENTER)},_doPrepareValue:function(a){},_doPrepareElement:function(a){this.setBackground(a.background()),this.setForeground(a.foreground()),this.setFont(a.font()),this.setBorder(a.border()),this.setBorderLeft(a.borderLeft()),this.setBorderTop(a.borderTop()),this.setBorderRight(a.borderRight()),this.setBorderBottom(a.borderBottom()),this.setPaddingLeft(a.paddingLeft()),this.setPaddingTop(a.paddingTop()),this.setPaddingRight(a.paddingRight()),this.setPaddingBottom(a.paddingBottom()),this.setLine(a.line()),this.setFigureBackground(a.figureBackground()),this.setFigureInactiveBackground(a.figureInactiveBackground()),this.setFigureBorder(a.figureBorder()),this.setFigureSize(a.figureSize()),this.setFigureName(a.figureName()),this.setFigureState(a.figureState()),this.setTextAlignment(a.textAlignment()),this.setLineAlignment(a.lineAlignment()),this.setTextWrap(a.textWrap())},_doUpdateContent:function(a){},_doLayoutHandles:function(){},_drawBorders:function(a,b){var c=this._borderLeft?this._borderLeft.width():0,d=this._borderTop?this._borderTop.width():0,e=this._borderRight?this._borderRight.width():0,f=this._borderBottom?this._borderBottom.width():0;c&&(c=Ma(c/2),a.drawVertLineI(this._borderLeft,b.y,b.bottom(),b.x+c)),d&&(d=Ma(d/2),a.drawHorzLineI(this._borderTop,b.x,b.right(),b.y+d)),e&&(e=Ma((e+1)/2),a.drawVertLineI(this._borderRight,b.y,b.bottom(),b.right()-e)),f&&(f=Ma((f+1)/2),a.drawHorzLineI(this._borderBottom,b.x,b.right(),b.bottom()-f))},_drawHtmlBorders:function(){this._css.borderLeft=this._borderLeft?this._borderLeft.css():"",this._css.borderTop=this._borderTop?this._borderTop.css():"",this._css.borderRight=this._borderRight?this._borderRight.css():"",this._css.borderBottom=this._borderBottom?this._borderBottom.css():""},_drawBordersWithBlank:function(a,b,c){var d=this._borderLeft?this._borderLeft.width():0,e=!this._borderTop||c!=Ie.NONE&&c!=Ie.HEAD?0:this._borderTop.width(),f=this._borderRight?this._borderRight.width():0,g=!this._borderBottom||c!=Ie.NONE&&c!=Ie.TAIL?0:this._borderBottom.width();d&&(d=Ma(d/2),a.drawVertLineI(this._borderLeft,b.y,b.bottom(),b.x+d)),e&&(e=Ma(e/2),a.drawHorzLineI(this._borderTop,b.x,b.right(),b.y+e)),f&&(f=Ma((f+1)/2),a.drawVertLineI(this._borderRight,b.y,b.bottom(),b.right()-f)),g&&(g=Ma((g+1)/2),a.drawHorzLineI(this._borderBottom,b.x,b.right(),b.bottom()-g))},_getRenderRect:function(a){var b=this._renderRect,c=this._borderLeft?Na((this._borderLeft.width()+1)/2):0,d=this._borderTop?Na((this._borderTop.width()+1)/2):0;return a?b.set(a.x+c,a.y+d,a.width-c-(this._borderRight?Na((this._borderRight.width()+1)/2):0),a.height-d-(this._borderBottom?Na((this._borderBottom.width()+1)/2):0)):b.set(c,d,this.width()-c-(this._borderRight?Na((this._borderRight.width()+1)/2):0),this.height()-d-(this._borderBottom?Na((this._borderBottom.width()+1)/2):0)),b}}),si=Xa("GroupCellElement",ri,{init:function(a,b){this._super(a,b),this._cells={},this._fill=new yd(4293980400)},focused:!1,group:function(){return ab(this._index.column(),ak)},findCell:function(a){var b,c,d=this.childCount();for(b=0;d>b;b++)if(c=this.getChild(b),c.isVisible()){if(c.index().column()===a)return c;if(c instanceof si&&(c=c.findCell(a)))return c}return null},getCellBounds:function(a,b){b?b.copy(a.bounds()):b=a.bounds();for(var c=this.index().column(),d=a.index().column().group(),e=a;d&&d!=c;)e=e.parent(),b.x+=e.x(),b.y+=e.y(),d=d.group();return b},$_getChild:function(a,b,c,d){var e,f,g,h=a.childCount();for(e=0;h>e;e++){if(f=a.getChild(e),d&&f instanceof si&&(g=this.$_getChild(f,b-f.x(),c-f.y(),d)))return g;if(f.containsInBounds(b,c))return f}return null},getCellAt:function(a,b,c){return this.$_getChild(this,a,b,c)},_updateCell:function(a){this._super(a),this._doUpdateGroup(a.index().column())},_doMeasure:function(a,b,c){return new ld(b,a.header().minHeight())},_doRender:function(a,b){this.childCount()<=0&&(a.drawRect(this._fill,null,b),this._drawBorders(a,b))},_doRenderHtml:function(a){this.childCount()<=0&&(this._css.background=this._fill?this._fill.css():null,this._drawHtmlBorders())},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doUpdateGroup:function(a){},_getCell:function(a){return this._cells[a.$_hash]},$_setCell:function(a,b){this._cells[a.$_hash]=b},_prepareCells:function(a){},_layoutCells:function(a){}},{getRootOf:function(a){var b=ab(a.parent(),si);if(!b)return null;for(;b;){var c=ab(b.parent(),si);if(!c)return b;b=c}return null}}),ti=Xa("ValueCellElement",ri,{init:function(a,b){this._super(a,b),this._numberFormatter=null,this._datetimeWriter=null,this._booleanFormatter=null},focused:!1,text:null,prefix:null,suffix:null,numberFormat:null,datetimeFormat:null,booleanFormat:null,setFocused:function(a){a!=this._focused&&(this._focused=a,this.invalidate())},setNumberFormat:function(a){a!=this._numberFormat&&(this._numberFormat=a,a?this._numberFormatter=new kb(a):this._numberFormatter=null,this.invalidate())},setDatetimeFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a,a?this._datetimeWriter=new Db(a):this._datetimeWriter=null,this.invalidate())},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?this._boolFormatter=new lb(a):this._boolFormatter=null,this.invalidate())},numberFormatter:function(){return this._numberFormatter},booleanFormatter:function(){return this._boolFormatter},datetimeWriter:function(){return this._datetimeWriter||Db.Default},_doPrepareValue:function(a){this._super(a);var b=a.styles();this.setNumberFormat(b.numberFormat()),this.setDatetimeFormat(b.datetimeFormat()),this.setBooleanFormat(b.booleanFormat()),this.setPrefix(b.prefix()),this.setSuffix(b.suffix())}}),ui=Xa("SelectableCellElement",ri,{init:function(a,b){this._super(a,b)},hoveredBackground:yd.WHITE,hoveredForeground:yd.BLACK,selectedBackground:yd.WHITE,selectedForeground:yd.BLACK,selected:!1,_doPrepareElement:function(a){this._super(a),this.setHoveredBackground(a.hoveredBackground()),this.setHoveredForeground(a.hoveredForeground()),this.setSelectedBackground(a.selectedBackground()),this.setSelectedForeground(a.selectedForeground())}}),vi=(new kd,Xa("HeaderCellElement",ui,{init:function(a,b){this._super(b,"headerCellView"),this._sortHandle=new ii(a,b,this),this._sortHandle.setVisible(!1),this.addElement(this._sortHandle),this._filterHandle=new mi(a,b,this),this._filterHandle.setVisible(!1),this.addElement(this._filterHandle),this._checkHandle=new oi(a,b,this),this._checkHandle.setVisible(!1),this.addElement(this._checkHandle),this._imageHandle=null,this._column=null,this._handleWidth=0},subFont:null,subForeground:null,subHoveredForeground:null,subSelectedForeground:null,subTextWrap:null,subTextAlignment:null,subLineAlignment:null,focused:!1,text:null,subText:null,subTextGap:1,showHandles:!0,checkLocation:Ke.NONE,imageLocation:Ke.NONE,subLocation:Le.LOWER,imageList:null,imageIndex:-1,imageUrl:null,itemOffset:2,itemGap:2,checked:!1,showTooltip:!0,tooltip:null,setSubFont:function(a){var b=this._subFont;a!=b&&(a&&b&&a.font==b.font&&a.size==b.size&&a.underline==b.underline||(this._subFont=a,this.invalidate()))},setSubTextAlignment:function(a){if(a!=this._subTextAlignment){switch(this._subTextAlignment=a,a){case Ne.FAR:this._subTextAlign="right";break;case Ne.NEAR:this._subTextAlign="left";break;default:this._subTextAlign="center"}this.invalidate()}},setSubLineAlignment:function(a){if(a!=this._subLineAlignment){switch(this._subLineAlignment=a,a){case Ne.FAR:this._subLineAlign="bottom";break;case Ne.NEAR:this._subLineAlign="top";break;default:this._subLineAlign="middle"}this.invalidate()}},column:function(){return this.index().C()},setFocused:function(a){a!=this._focused&&(this._focused=a,this._doLayoutHandles(),this.invalidate())},isHovered:function(){return this._super()||this._filterHandle.isHovered()||this._checkHandle.isHovered()},setHovered:function(a){this._super(a)},isClickable:function(){return!0},_doPrepareValue:function(a){this._super(a),this._column=this.index().column(),!this._column,this.setText(a.text());var b=a.subStyles();this.setSubFont(b.font()),this.setSubForeground(b.foreground()),this.setSubHoveredForeground(b.hoveredForeground()),this.setSubSelectedForeground(b.selectedForeground()),this.setSubTextAlignment(b.textAlignment()),this.setSubLineAlignment(b.lineAlignment()),this.setSubTextWrap(b.textWrap()),this.setSubText(a.subText()),this.setSubTextGap(a.subTextGap()),this.setSubLocation(a.subLocation()),this.setItemOffset(a.itemOffset()),this.setItemGap(a.itemGap()),this.setImageList(a.imageList()),this.setImageIndex(a.imageIndex()),this.setImageUrl(a.imageUrl()),this.setCheckLocation(a.checkLocation()),this.setImageLocation(a.imageLocation()),this.setChecked(a.isChecked()),this.setShowTooltip(a.isShowTooltip()),this.setTooltip(a.tooltip())},_doPrepareElement:function(a){this._super(a)},_doLayoutHandles:function(){var a=this.grid(),b=this._column;if(a&&b instanceof rk){var c=this._getRenderRect(null),d=c.right()-4,e=c.x,f=c.height;this._handleWidth=0,this.$_canFilterHandleVisible(a,b)?(this._filterHandle.setVisible(!0),this._filterHandle.setMouseEnabled(!0),this._filterHandle.setBounds(d-12,e,12,f),this._filterHandle.invalidate(),d-=12,this._handleWidth=12):this._filterHandle.setVisible(!1);var g=a.sortingOptions();this.$_canSortHandleVisible(g,b)?(this._sortHandle.setSortOrder(b.sortOrder()),this._sortHandle.setSortDir(b.sortDirection()),this._sortHandle.setVisible(!0),this._sortHandle.setBounds(d-11,e,11,f),this._sortHandle.invalidate(),this._handleWidth+=11):this._sortHandle.setVisible(!1),this._handleWidth+=this._handleWidth>0?4:0,this._checkHandle.setMouseEnabled(!0)}},$_renderEdgedItems:function(a,b){var c=this._checkLocation,d=this._imageLocation,e=this._checkHandle,f=this._imageHandle,g=0,h=ni;switch(c){case Ke.LEFT_EDGE:g=1;break;case Ke.RIGHT_EDGE:g=2;break;case Ke.TOP_EDGE:g=3;break;case Ke.BOTTOM_EDGE:g=4}if(g){switch(g){case 1:b.leftBy(this._itemOffset),e.setBounds(b.x,b.y+(b.height-h)/2,h,h),b.leftBy(h);break;case 2:b.rightBy(-this._itemOffset),e.setBoundsI(b.right()-h,b.y+(b.height-h)/2,h,h),b.rightBy(-h);break;case 3:b.topBy(this._itemOffset),e.setBoundsI(b.x+(b.width-h)/2,b.y,h,h),b.topBy(h);break;case 4:b.bottomBy(-this._itemOffset),e.setBoundsI(b.x+(b.width-h)/2,b.bottom()-h,h,h),b.bottomBy(-h)}e.setChecked(this._checked),e.setVisible(!0)}var i,j,k;if(d!=Ke.NONE)if(f||(f=this._imageHandle=new pi(this.$_dom,this),this.addElement(f)),i=this._imageUrl&&this.grid().getImage(this._imageUrl),i&&(j=i.width)>0&&(k=i.height)>0){var l=!1;switch(d){case Ke.LEFT_EDGE:1==g?b.leftBy(this._itemGap):b.leftBy(this._itemOffset),f.setBoundsI(b.x,b.y+(b.height-k)/2,j,k),b.leftBy(j),l=!0;break;case Ke.RIGHT_EDGE:2==c?b.rightBy(-this._itemGap):b.rightBy(-this._itemOffset),f.setBoundsI(b.right()-j,b.y+(b.height-k)/2,j,k),b.rightBy(-j),l=!0;break;case Ke.TOP_EDGE:3==c?b.topBy(this._itemGap):b.topBy(this._itemOffset),f.setBoundsI(b.x+(b.width-j)/2,b.y,j,k),b.topBy(k),l=!0;break;case Ke.BOTTOM_EDGE:4==c?b.bottomBy(-this._itemGap):b.bottomBy(-this._itemOffset),f.setBoundsI(b.x+(b.width-j)/2,b.bottom()-k,j,k),b.bottomBy(-k),l=!0}f.setImage(i),l&&f.setVisible(!0)}else i=null;return i},$_renderCenteredItems:function(a,b,c){var d,e,f,g,h,i=this._checkLocation,j=this._imageLocation,k=this._checkHandle,l=this._imageHandle,m=ni;if(c?(f=c.width,g=c.height):j=Ke.NONE,i==Ke.CENTER){if(j==Ke.NONE||l.isVisible())b.x+=(b.width-m)/2,b.y+=(b.height-m)/2;else{switch(l||(l=this._imageHandle=new pi(this.$_dom,this),this.addElement(l)),h=b.clone(),j){case Ke.RIGHT:case Ke.CENTER:b.x+=(b.width-m-f-this._itemGap)/2,b.y+=(b.height-m)/2,d=b.x+m+this._itemGap,e=h.y+(h.height-g)/2;break;case Ke.LEFT:b.x+=(b.width-m-f-this._itemGap)/2+f+this._itemGap,b.y+=(b.height-m)/2,d=b.x-this._itemGap-f,e=h.y+(h.height-g)/2;break;case Ke.TOP:b.x+=(b.width-m)/2,b.y+=(b.height-m-g-this._itemGap)/2+g+this._itemGap,d=h.x+(h.width-f)/2,e=b.y-this._itemGap-g;break;case Ke.BOTTOM:b.x+=(b.width-m)/2,b.y+=(b.height-m-g-this._itemGap)/2,d=h.x+(h.width-f)/2,e=b.y+m+this._itemGap}l.setBoundsI(d,e,f,g),l.setVisible(!0)}return k.setChecked(this._checked),k.setVisible(!0),k.setBoundsI(b.x,b.y,m,m),!0}if(j==Ke.CENTER){if(i==Ke.NONE||k&&k.isVisible())b.x+=(b.width-f)/2,b.y+=(b.height-g)/2;else{switch(h=b.clone(),i){case Ke.LEFT:case Ke.CENTER:b.x+=(b.width-f-m-this._itemGap)/2+f+this._itemGap,b.y+=(b.height-g)/2,d=b.x-this._itemGap-m,e=h.y+(h.height-m)/2;break;case Ke.RIGHT:b.x+=(b.width-f-m-this._itemGap)/2,b.y+=(b.height-g)/2,d=b.x+f+this._itemGap,e=h.y+(h.height-m)/2;break;case Ke.TOP:b.x+=(b.width-f)/2,b.y+=(b.height-g-m-this._itemGap)/2+m+this._itemGap,d=h.x+(h.width-m)/2,e=b.y-this._itemGap-m;break;case Ke.BOTTOM:b.x+=(b.width-f)/2,b.y+=(b.height-g-m-this._itemGap)/2,d=h.x+(h.width-m)/2,e=b.y+m+this._itemGap;break;case Ke.NONE:default:b.x+=(b.width-f)/2,b.y+=(b.height-g)/2}k.setChecked(this._checked),k.setVisible(!0),k.setBoundsI(d,e,m,m)}return l.setBoundsI(b.x,b.y,f,g),l.setVisible(!0),!0}return!1},$_calcTextRect:function(a,b,c){switch(c.wrap){case Me.EXPLICIT:return a.getExplicitTextRect(c.font,c.text,b.x,b.y,b.width,b.height,c.align,c.valign);case Me.NORMAL:return a.getWrapTextRect(c.font,c.text,b.x,b.y,b.width,b.height,c.align,c.valign);default:return a.getTextRect(c.font,c.text,b.x,b.y,b.width,b.height,c.align,c.valign)}},$_renderText:function(a,b,c){switch(c.wrap){case Me.EXPLICIT:a.drawTextBoundsExplicit(c.font,c.fill,c.text,b.x,b.y,b.width,b.height,c.align,c.valign);break;case Me.NORMAL:a.drawTextBoundsWrap(c.font,c.fill,c.text,b.x,b.y,b.width,b.height,c.align,c.valign);break;default:a.drawTextBounds(c.font,c.fill,c.text,b.x,b.y,b.width,b.height,c.align,c.valign)}},$_renderTexts:function(a,b,c,d,e){var f,g,h,i=this._checkHandle,j=this._imageHandle,k=i&&i.isVisible()?Ke.NONE:this._checkLocation,l=c&&!j.isVisible()?this._imageLocation:Ke.NONE,m=this._text,n=this._subText;m&&(d&&(h=this._hoveredForeground),!h&&e&&(h=this._selectedForeground),!h&&(h=this._foreground),f={text:m,font:this._font,fill:h,wrap:this._textWrap,align:this._textAlign,valign:this._lineAlign}),n&&(h=null,d&&(h=this._subHoveredForeground),!h&&e&&(h=this._subSelectedForeground),!h&&(h=this._subForeground),g={text:n,font:this._subFont,fill:h,wrap:this._subTextWrap,align:this._textAlign,valign:this._lineAlign});var o=this._itemGap,p=this._subTextGap,q=c?c.width:0,r=c?c.height:0,s=ni,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0;switch(k){case Ke.LEFT:t=s+o;break;case Ke.RIGHT:u=s+o;break;case Ke.TOP:v=s+o;break;case Ke.BOTTOM:w=s+o}switch(l){case Ke.LEFT:x=c.width+o;break;case Ke.RIGHT:y=c.width+o;break;case Ke.TOP:z=c.height+o;break;case Ke.BOTTOM:A=c.height+o}var B,C,D,E,F,G,H,I,J,K,L;if((m||n)&&(b.leftBy(t+x),b.rightBy(-u-y),b.topBy(v+z),b.bottomBy(-w-A),B=m&&this.$_calcTextRect(a,b,f),B&&B.width>b.width&&"center"==f.align&&"none"==f.wrap&&(f.align="near",B=this.$_calcTextRect(a,b,f)),C=n&&this.$_calcTextRect(a,b,g),C&&C.width>b.width&&"center"==g.align&&"none"==g.wrap&&(g.align="near",C=this.$_calcTextRect(a,b,g))),m&&n)switch(this._subLocation){case Le.LOWER:if((E=B.height+p+C.height)<=b.height){switch(f.valign){case"middle":E=b.y+(b.height-E)/2;break;case"bottom":E=b.bottom()-C.height-p-B.height;break;default:E=b.y}B.y=E,this.$_renderText(a,B,f),C.y=B.bottom()+p,this.$_renderText(a,C,g),F=B,H=B.height+C.height,D=Math.min(B.x,C.x),G=Math.max(B.right(),C.right())-D}else B.height<=b.height?(B.y=b.y,this.$_renderText(a,B,f),C.y=B.bottom()+p,this.$_renderText(a,C,g),F=b,H=b.height,D=Math.min(B.x,C.x),G=Math.max(B.right(),C.right())-D):(this.$_renderText(a,b,f),C=null,F=b,H=b.height,D=B.x,G=B.width);(t||u)&&(J=F.y+(H-s)/2),(x||y)&&(L=F.y+(H-r)/2),(v||w)&&(I=D+(G-s)/2),(z||A)&&(K=D+(G-q)/2);break;case Le.UPPER:if((E=B.height+p+C.height)<=b.height){switch(f.valign){case"middle":E=b.y+(b.height-E)/2;break;case"bottom":E=b.bottom()-C.height-p-B.height;break;default:E=b.y}C.y=E,this.$_renderText(a,C,g),B.y=C.bottom()+p,this.$_renderText(a,B,f),F=C,H=B.height+C.height,D=Math.min(B.x,C.x),G=Math.max(B.right(),C.right())-D}else B.height<=b.height?(B.y=b.bottom()-B.height,this.$_renderText(a,B,f),C.y=B.y-p-C.height,this.$_renderText(a,C,g),F=b,H=b.height,D=Math.min(B.x,C.x),G=Math.max(B.right(),C.right())-D):(this.$_renderText(a,B,f),C=null,F=b,H=b.height,D=B.x,G=B.width);(t||u)&&(J=F.y+(H-s)/2),(x||y)&&(L=F.y+(H-r)/2),(v||w)&&(I=D+(G-s)/2),(z||A)&&(K=D+(G-q)/2);break;case Le.RIGHT:if((D=B.width+p+C.width)<=b.width){switch(f.align){case"center":D=b.x+(b.width-D)/2;break;case"right":D=b.right()-C.width-p-B.width;break;default:D=b.x}B.x=D,this.$_renderText(a,B,f),C.x=B.right()+p,this.$_renderText(a,C,g),F=B,G=B.width+C.width,E=Math.min(B.y,C.y),H=Math.max(B.bottom(),C.bottom())-E}else B.width<=b.width?(B.x=b.x,this.$_renderText(a,B,f),C.x=B.right()+p,this.$_renderText(a,C,g),F=b,G=b.width,E=Math.min(B.y,C.y),H=Math.max(B.bottom(),C.bottom())-E):(this.$_renderText(a,b,f),F=b,G=b.width,E=B.y,H=B.height,C=null);(t||u)&&(J=E+(H-s)/2),(x||y)&&(L=E+(H-r)/2),(v||w)&&(I=F.x+(G-s)/2),(z||A)&&(K=F.x+(G-q)/2);break;case Le.LEFT:if((D=B.width+p+C.width)<=b.width){switch(f.align){case"center":D=b.x+(b.width-D)/2;break;case"right":D=b.right()-C.width-p-B.width;break;default:D=b.x}C.x=D,this.$_renderText(a,C,g),B.x=C.right()+p,this.$_renderText(a,B,f),F=b,E=Math.min(B.y,C.y),H=Math.max(B.bottom(),C.bottom())-E,G=B.width+C.width}else B.width<=b.width?(B.x=b.right()-B.width,this.$_renderText(a,B,f),C.x=B.x-p-C.width,this.$_renderText(a,C,g),F=b,G=b.width,E=Math.min(B.y,C.y),H=Math.max(B.bottom(),C.bottom())-E):(this.$_renderText(a,B,f),F=b,G=b.width,E=B.y,H=B.height,C=null);(t||u)&&(J=E+(H-s)/2),(x||y)&&(L=E+(H-r)/2),(v||w)&&(I=F.x+(G-s)/2),(z||A)&&(K=F.x+(G-q)/2);break;default:this.$_renderText(a,b,f)}else(m||n)&&(m?(this.$_renderText(a,b,f),b=B):(this.$_renderText(a,b,g),b=C),(t||u)&&(J=b.y+(b.height-s)/2),(x||y)&&(L=b.y+(b.height-r)/2),(v||w)&&(I=b.x+(b.width-s)/2),(z||A)&&(K=b.x+(b.width-q)/2));(t||x)&&(D=B&&C?Math.min(B.x,C.x):B?B.x:C?C.x:b.x,t&&x?(K=D-o-q,I=K-o-s):t?I=D-o-s:x&&(K=D-o-q)),u+y&&(D=B&&C?Math.max(B.right(),C.right()):B?B.right():C?C.right():b.right(),u&&y?(I=D+o,K=I+s+o):u?I=D+o:y&&(K=D+o)),(v||z)&&(E=B&&C?Math.min(B.y,C.y):B?B.y:C?C.y:b.y,v&&z?(L=E-o-r,J=L-o-s):v?J=E-o-s:z&&(L=E-o-r)),(w||A)&&(E=B&&C?Math.max(B.bottom(),C.bottom()):B?B.bottom():C?C.bottom():b.bottom(),w&&A?(J=E+o,L=J+s+o):w?J=E+o:A&&(L=E+o)),t+u+v+w>0&&(i.setChecked(this._checked),i.setVisible(!0),i.setBoundsI(I,J,s,s)),x+y+z+A>0&&(j.setImage(c),j.setVisible(!0),j.setBoundsI(K,L,q,r))},_doRender:function(a,b){var c,d=null,e=this.grid().itemCount(),f=this.isHovered();f&&(d=this.hoveredBackground()),!d&&(c=e>0&&(this.isFocused()||this.isSelected()))&&(d=this.selectedBackground()),d||(d=this.background()),d&&a.drawRect(d,null,b);var g=(this.text(),this.subText(),this._checkLocation,this._imageLocation,this._checkHandle),h=this._imageHandle;if(g&&g.setVisible(!1),h&&h.setVisible(!1),b.width-=this._handleWidth,this.deflatePadding2(b),b.width>0){var i=b.clone(),j=this.$_renderEdgedItems(a,i);this.$_renderCenteredItems(a,i,j)||this.$_renderTexts(a,i,j,f,c)}return this.inflatePadding2(b),b.width+=this._handleWidth,void this._drawBorders(a,b);var i},_doRenderHtml:function(a){var b,c=null,d=this.grid().itemCount(),e=this.isHovered();e&&(c=this.hoveredBackground()),!c&&(b=d>0&&(this.isFocused()||this.isSelected()))&&(c=this.selectedBackground()),c||(c=this.background()),this._css.clip=Jc.getClipRect(a),Vc?this.$_setCssFill(c):this._css.background=c?c.css():null;var f=this.text();if(f){var g=null;e&&(g=this.hoveredForeground()),g||(void 0===b&&(b=d>0&&(this.isFocused()||this.isSelected())),b&&(g=this.selectedForeground())),g||(g=this.foreground()),this.inflatePadding(a);var h=this.$_prepareSpan();Jc.renderTextBounds(h,this.font(),g,f,a.x,a.y,a.width,a.height,this.textAlign()),this.deflatePadding(a)}this._drawHtmlBorders()},$_canFilterHandleVisible:function(a,b){var c=this.isShowHandles()&&b&&b.hasFilters();if(c)switch(a.filteringOptions().handleVisibility()){case qe.HIDDEN:c=!1;break;case qe.HOVERED:c=this.isHovered()||a.isFilterSelecting(b)}return c},$_canSortHandleVisible:function(a,b){var c=this.isShowHandles()&&b;if(c)switch(a.handleVisibility()){case qe.VISIBLE:c=b.sortOrder()>=0;break;case qe.HOVERED:c=this.isHovered()&&b.sortOrder()>=0;break;case qe.HIDDEN:c=!1}return c},$_canCheckHandleVisible:function(a,b){var c=this.isShowHandles()&&b;if(c)switch(a.handleVisibility()){case qe.VISIBLE:c=b.sortOrder()>=0;break;case qe.HOVERED:c=this.isHovered();break;case qe.HIDDEN:c=!1}return c}})),wi=Xa("HeaderGroupCellElement",si,{init:function(a){this._super(a,"headerGroupCellView")},focused:!1,_prepareCells:function(a){var b=this.group();this.$_createCells(b),this._fillUnit=Na(this.height()/b.headerLevel());var c=!0;if(this._grid.header().heightFill()==Ue.FIXED){var d={levels:0,fixHeight:0};this.$_calculateFillLevel(b,d),this._fillLevels=d.levels,!b.parent().header()._notHeightFixed&&d.fixHeight<=this.height()-3*this._fillLevels&&(0!=d.levels||d.fixHeight==this.height())&&(c=!1,d.levels>0&&(this._fillUnit=Na((this.height()-d.fixHeight)/d.levels))),this.$_prepareHeight(b,c)}b.header()._notHeightFixed=c},_layoutCells:function(a){var b,c,d,e,f,g,h,i,j=new kd,k=this.group(),l=this.width(),m=this.height(),n=k.visibleCount(),o=k.header();if(o.isVisible()&&(b=this._getCell(k),b&&(j.set(0,0,l,m),j.height=o.fixedHeight()>0&&!o._notHeightFixed?o.fixedHeight():this._fillUnit,b.setRect(j))),!k.isHideChildHeaders())if(c=j.bottom(),k.isVertical())for(d=this._fillUnit,e=0;n>e;e++){f=k.getVisibleItem(e);var p=f.header();b=this._getCell(f),b&&(g=0,e==n-1?g=m-c:b instanceof wi?g=p._fillHeight>0?p._fillHeight:d*b.group().headerLevel():g+=p.fixedHeight()>0&&!o._notHeightFixed?p.fixedHeight():d,b.setBounds(0,c,l,g),b.layoutContent(a),c+=g,b instanceof wi&&b._layoutCells(a))}else for(h=0,e=0;n>e;e++)f=k.getVisibleItem(e),b=this._getCell(f),b&&(i=e==n-1?l-h:f.displayWidth(),b.setBounds(h,c,i,m-c),b.layoutContent(a),h+=i,b instanceof wi&&b._layoutCells(a))},$_calculateFillLevel:function(a,b){
var c=a.header();if(c.isVisible()&&(c.fixedHeight()>0?b.fixHeight+=c.fixedHeight():b.levels++),!a._hideChildHeaders){var d,e,f,g=a.visibleCount(),h=0,i=0;if(g>0)if(a.isHorizontal()){for(d=0;g>d;d++)if(f=a.getVisibleItem(d),f instanceof ak){var j={levels:0,fixHeight:0};this.$_calculateFillLevel(f,j),j.levels>h&&(h=j.levels,i=j.fixHeight)}else e=f.header().fixedHeight(),e>0&&(h=0,i=Math.max(i,e));0==i&&(h=1),b.levels+=h,b.fixHeight+=i}else for(d=0;g>d;d++)if(f=a.getVisibleItem(d),f instanceof ak){var j={levels:0,fixHeight:0};this.$_calculateFillLevel(f,j),b.levels+=j.levels,b.fixHeight+=j.fixHeight}else c=f.header(),e=f.header().fixedHeight(),e>0?b.fixHeight+=e:b.levels++}},$_prepareHeight:function(a,b){var c,d,e,f=a.visibleCount(),g=0;if(!a._hideChildHeaders&&f>0)if(a.isHorizontal()){var h=0;for(d=0;f>d;d++)if(e=a.getVisibleItem(d),e instanceof ak)g=Math.max(g,this.$_prepareHeight(e,b));else{var i=e.header().fixedHeight();i>0&&!b||h>0?(h=Math.max(h,i),g=Math.max(g,h)):g=Math.max(g,this._fillUnit)}}else for(d=0;f>d;d++)e=a.getVisibleItem(d),e instanceof ak?g+=this.$_prepareHeight(e,b):(c=e.header(),g+=c.fixedHeight()>0&&!b?c.fixedHeight():this._fillUnit);return c=a.header(),c.isVisible()&&(g+=c.fixedHeight()>0&&!b?c.fixedHeight():this._fillUnit),c._fillHeight=g},$_createCells:function(a){this.hideAll();var b,c,d,e,f,g=this.grid(),h=g.header(),i=a.header();if(i.isVisible()&&(d=this._getCell(a),d||(this.$_setCell(a,d=new vi(g,this._dom)),this.addElement(d)),d.setVisible(!0),e=h.getCell(Ye.temp(g,-1,a)),d.updateCell(e)),!a.isHideChildHeaders())for(b=0,f=a.visibleCount();f>b;b++)c=a.getVisibleItem(b),d=this._getCell(c),d||(d=c instanceof ak?new wi(this._dom):new vi(g,this._dom),this.$_setCell(c,d),this.addElement(d)),d.setVisible(!0),e=h.getCell(Ye.temp(g,-1,c)),d.updateCell(e),c instanceof ak&&d.$_createCells(c)}}),xi=Xa("SummaryCellElement",ti,{init:function(a){this._super(a,"summaryCellView"),this._value=NaN,this._error=null,this._errorDetail=null},text:null,column:function(){return this.index().C()},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},_doPrepareValue:function(a){this._super(a),this._value=a.value();var b,c=null,d=null;if(this._value!==ta){var e=Number(this._value);c=!isNaN(e)&&(b=this.numberFormatter())?b.format(e):this._value?this._value:a.displayText()}else c=a.displayText();null!=c&&((d=this.prefix())&&(c=d+c),(d=this.suffix())&&(c+=d)),this.setText(c),this._error=a.error()},_doPrepareElement:function(a){this._super(a)},_doLayoutHandles:function(){},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b);var d=this.text();d&&(this.inflatePadding(b),a.drawTextRect(this._font,this._foreground,d,b,this._textAlign),this.deflatePadding(b)),this._drawBorders(a,b)},_doRenderHtml:function(a){this._css.clip=Jc.getClipRect(a),Vc?this.$_setCssFill(fill):this._css.background=fill?fill.css():null;var b=this.text();if(b){var c=this.foreground();this.inflatePadding(a);var d=this.$_prepareSpan();Jc.renderTextBounds(d,this.font(),c,b,a.x,a.y,a.width,a.height,this.textAlign()),this.deflatePadding(a)}this._drawHtmlBorders()},canHovering:function(){return!1}}),yi=Xa("SummaryGroupCellElement",si,{init:function(a){this._super(a,"summaryGroupCellView")},_prepareCells:function(a){this.$_createCells(this.group())},_layoutCells:function(a){var b,c,d,e,f,g,h,i,j=this.group(),k=new kd,l=this.width(),m=this.height(),n=j.visibleCount();if(j.isVertical())for(e=k.bottom(),f=Na(m/this.childCount()),b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(c=0,b==n-1?c=m-e:i instanceof yi?c=f*i.group().dataLevel():c+=f,i.setBounds(0,e,l,c),i.layoutContent(a),e+=c,i instanceof yi&&i._layoutCells(a));else for(d=0,b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(g=b==n-1?l-d:h.displayWidth(),i.setBounds(d,0,g,m),i.layoutContent(a),d+=g,i instanceof yi&&i._layoutCells(a))},canHovering:function(){return!1},$_createCells:function(a){this.hideAll();var b,c,d,e,f,g=this.grid(),h=g.header().summary();for(b=0,c=a.visibleCount();c>b;b++)d=a.getVisibleItem(b),e=this._getCell(d),e||(e=d instanceof ak?new yi(this._dom):new xi(this._dom),this.$_setCell(d,e),this.addElement(e)),e.setVisible(!0),f=h.getCell(Ye.temp(g,-1,d)),e.updateCell(f),d instanceof ak&&e.$_createCells(d)}}),zi=Xa("FooterCellElement",ti,{init:function(a){this._super(a,"footerCellView"),this._value=NaN,this._error=null,this._errorDetail=null},text:null,column:function(){return this.index().C()},value:function(){return this._value},error:function(){return this._error},errorDetail:function(){return this._errorDetail},_doPrepareValue:function(a){this._super(a),this._value=a.value();var b,c=null,d=null;if(this._value!==ta){var e=Number(this._value);c=!isNaN(e)&&(b=this.numberFormatter())?b.format(e):this._value?this._value:a.displayText()}else c=a.displayText();null!=c&&((d=this.prefix())&&(c=d+c),(d=this.suffix())&&(c+=d)),this.setText(c),this._error=a.error()},_doPrepareElement:function(a){this._super(a)},_doLayoutHandles:function(){},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b);var d=this.text();d&&(this.inflatePadding(b),a.drawTextRect(this._font,this._foreground,d,b,this._textAlign),this.deflatePadding(b)),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();this._css.clip=Jc.getClipRect(a),Vc?this.$_setCssFill(b):this._css.background=b?b.css():null;var c=this.text();if(c){var d=this.foreground();this.inflatePadding(a);var e=this.$_prepareSpan();Jc.renderTextBounds(e,this.font(),d,c,a.x,a.y,a.width,a.height,this.textAlign()),this.deflatePadding(a)}this._drawHtmlBorders()},canHovering:function(){return!1}}),Ai=Xa("FooterGroupCellElement",si,{init:function(a){this._super(a,"fooerGroupCellView")},_prepareCells:function(a){this.$_createCells(this.group())},_layoutCells:function(a){var b,c,d,e,f,g,h,i,j=this.group(),k=new kd,l=this.width(),m=this.height(),n=j.visibleCount();if(j.isVertical())for(e=k.bottom(),f=Na(m/this.childCount()),b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(c=0,b==n-1?c=m-e:i instanceof Ai?c=f*i.group().dataLevel():c+=f,i.setBounds(0,e,l,c),i.layoutContent(a),e+=c,i instanceof Ai&&i._layoutCells(a));else for(d=0,b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(g=b==n-1?l-d:h.displayWidth(),i.setBounds(d,0,g,m),i.layoutContent(a),d+=g,i instanceof Ai&&i._layoutCells(a))},canHovering:function(){return!1},$_createCells:function(a){this.hideAll();var b,c,d,e,f,g=this.grid(),h=g.footer();for(b=0,c=a.visibleCount();c>b;b++)d=a.getVisibleItem(b),e=this._getCell(d),e||(e=d instanceof ak?new Ai(this._dom):new zi(this._dom),this.$_setCell(d,e),this.addElement(e)),e.setVisible(!0),f=h.getCell(Ye.temp(g,-1,d)),e.updateCell(f),d instanceof ak&&e.$_createCells(d)}}),Bi=Xa("GroupFooterCellElement",ti,{init:function(a){this._super(a,"groupFooterCellElement"),this._value=ta,this._error=null},text:null,textVisible:!0,value:function(){return this._value},error:function(){return this._error},_doPrepareValue:function(a){this._super(a),this._value=a.value();var b,c=null,d=null;if(this._value!==ta){var e=Number(this._value);c=!isNaN(e)&&(b=this.numberFormatter())?b.format(e):this._value}else c=a.displayText();null!=c&&((d=this.prefix())&&(c=d+c),(d=this.suffix())&&(c+=d)),this.setText(c),this._error=a.error()},_doPrepareElement:function(a){this._super(a)},_doLayoutHandles:function(){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b);var d=this.text();d&&this._textVisible&&(this.inflatePadding(b),a.drawTextRect(this._font,this._foreground,d,b,this._textAlign),this.deflatePadding(b)),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();this._css.clip=Jc.getClipRect(a),Vc?this.$_setCssFill(b):this._css.background=b?b.css():null;var c=this.text();if(c){this.inflatePadding(a);var d=this.$_prepareSpan();Jc.renderTextBounds(d,this._font,this._foreground,c,a.x,a.y,a.width,a.height,this._textAlign),this.deflatePadding(a)}this._drawHtmlBorders()},clip:function(a){this.getClientRect(this._drawRect);var b=this._drawRect.clone(),c=this.grid(),d=c.layoutManager(),e=d._nonfixedBounds,f=this.boundsBy();if(f.x<e.x&&!this._index._column.isFixed()){var g=e.x-f.x+c._x;b.leftBy(g)}f.right()>d._rfixedBounds.x&&!this._index._column.isRightFixed()&&b.rightBy(d._rfixedBounds.x-f.right()+1),a.clipRect(b)}}),Ci=Xa("GroupFooterGroupCellElement",si,{init:function(a){this._super(a,"groupFooterGroupCellView")},_prepareCells:function(a){this.$_createCells(this.group())},_layoutCells:function(a){var b,c,d,e,f,g,h,i,j=this.group(),k=new kd,l=this.width(),m=this.height(),n=j.visibleCount();if(j.isVertical())for(e=k.bottom(),f=Na(m/this.childCount()),b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(c=0,b==n-1?c=m-e:i instanceof Ci?c=f*i.group().dataLevel():c+=f,i.setBounds(0,e,l,c),e+=c),i instanceof Ci&&i._layoutCells(a);else for(d=0,b=0;n>b;b++)h=j.getVisibleItem(b),i=this._getCell(h),i&&(g=b==n-1?l-d:h.displayWidth(),i.setBounds(d,0,g,m),d+=g),i instanceof Ci&&i._layoutCells(a)},$_createCells:function(a){this.hideAll();var b,c,d,e,f,g=this.grid(),h=g.rowGroup();for(b=0,c=a.visibleCount();c>b;b++)d=a.getVisibleItem(b),e=this._getCell(d),e||(d instanceof pk?e=new Bi(this._dom):d instanceof ak&&(e=new Ci(this._dom)),this.$_setCell(d,e),e&&this.addElement(e)),e&&(e.setVisible(!0),f=h.getFooterCell(Ye.temp(g,this.index().I(),d)),e.updateCell(f)),d instanceof ak&&e.$_createCells(d)}}),Di=Xa("SectionHeadFootElement",ri,{init:function(a,b){this._super(a,b)},text:null,image:null,_renderCell:function(a,b){if(this._image){var c=Math.min(this._image.width,b.width),d=Math.min(this._image.height,b.height);a.drawImage(this._image,(b.width-c)/2,(b.height-d)/2,c,d)}else this._text&&(stroke=this.foreground(),stroke&&(this.inflatePadding(b),a.drawTextBoundsExplicit(this._font,stroke,this._text,b.x,b.y,b.width,b.height,this._textAlign,this._lineAlign),this.deflatePadding(b)))},_renderCellHtml:function(a){if(this._text&&(fill=this.background(),fill)){this.inflatePadding(a);var b=this.$_prepareSpan();Jc.renderTextBounds(b,this.font(),fill,this._text,a.x,a.y,a.width,a.height,this._textAlign),this.deflatePadding(a)}}}),Ei=Xa("IndicatorHeadElement",Di,{init:function(a){this._super(a,"indicatorHeadView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.indicator();this._text=c.headText(),this._image=c.headImage()},_doMeasure:function(a,b,c){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b),this._renderCell(a,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();b&&(this._css.background=b.css()),this._renderCellHtml(a),this._drawHtmlBorders()}}),Fi=Xa("IndicatorFootElement",Di,{init:function(a,b){this._super(a,b||"indicatorFootView")},renderer:null,_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.indicator();this._text=c.footText(),this._image=c.footImage()},_doMeasure:function(a,b,c){},_doRender:function(a,b){if(!this._renderer||this._text||this._image){var c=this.background();c&&a.drawRect(c,null,b),this._renderCell(a,b)}else this._renderer.render(this,a,b);this._drawBorders(a,b)},_doRenderHtml:function(a){if(this._renderer&&!this.text)this._renderer.renderHtml(this,a);else{var b=view.background();b&&(view._css.background=b.css()),this._renderCellHtml(a)}this._drawHtmlBorders()}}),Gi=Xa("FooterHeadRenderer",null,{init:function(){this._super()},render:function(a,b,c){var d=a.background();d&&b.drawRect(d,null,c),this.$_drawSigma(a,b,c)},renderHtml:function(a,b){var c=a.background();c&&(a._css.background=c.css())},$_drawSigma:function(a,b,c){var d=a.figureBackground();if(d){var e=11,f=11,g=c.x+(c.width-e)/2,h=c.y+(c.height-f)/2,i=[g+2,h+1,g+2,h+2.5,g+4,h+5,g+1,h+8.5,g+1,h+10,g+9,h+10,g+9,h+6.5,g+8,h+8.5,g+2,h+8.5,g+5,h+5,g+3,h+2.5,g+9,h+2.5,g+10,h+4.5,g+10,h+1];b.drawPolygonArray(d,null,i)}}}),Hi=Xa("IndicatorSummaryElement",Fi,{init:function(a){this._super(a,"indicatorSummaryView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.indicator();this._text=c.summaryText()||c.footText(),this._image=c.summaryImage()||c.footImage()}}),Ii=Xa("StateBarHeadElement",Di,{init:function(a){this._super(a,"stateBarHeadView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.stateBar();this._text=c.headText(),this._image=c.headImage()},_doMeasure:function(a,b,c){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b),this._renderCell(a,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();b&&(this._css.background=b.css()),this._renderCellHtml(a),this._drawHtmlBorders()}}),Ji=Xa("StateBarFootElement",Di,{init:function(a,b){this._super(a,b||"stateBarFootView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.stateBar();this._text=c.footText(),this._image=c.footImage()},_doMeasure:function(a,b,c){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b),this._renderCell(a,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();b&&(this._css.background=b.css()),this._renderCellHtml(a),this._drawHtmlBorders()}}),Ki=Xa("StateBarSummaryElement",Ji,{init:function(a){this._super(a,"stateBarSummaryView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.stateBar();this._text=c.summaryText()||c.footText(),this._image=c.summaryImage()||c.footImage()}}),Li=Xa("CheckBarHeadElement",Di,{init:function(a){this._super(a,"checkBarHeadView")},showCheck:!0,checked:!1,_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.checkBar();this.setShowCheck(c.isShowAll()&&!c.isExclusive()&&b.itemCount()>0),this._text=c.headText(),this._image=c.headImage(),b.itemCount()<=0&&this.setChecked(!1)},_doMeasure:function(a,b,c){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b),this.isShowCheck()?this.$_drawCheck(a,b):this._renderCell(a,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();if(b&&(this._css.background=b.css()),this.isShowCheck()){this._check||(this._check=document.createElement("input"),this._check.type="checkbox",this._check.style.position="absolute",this._check.style.padding="0px",this._check.style.margin="0px",this._dom.appendChild(this._check));var c=this._check.getBoundingClientRect2();this._check.style.left=a.x+this.paddingLeft()+(a.width-this.paddingHorz()-c.width)/2+"px",this._check.style.top=a.y+this.paddingTop()+(a.height-this.paddingVert()-c.height)/2+"px"}else this._renderCellHtml(a);this._drawHtmlBorders()},$_drawCheck:function(a,b){var c=this.isChecked()?this.figureBackground():this.figureInactiveBackground();if(c){var d=this.figureSize(),e=d?d.getDimension(b.height):12;Ob(a,c,b,e)}}}),Mi=Xa("CheckBarFootElement",Di,{init:function(a,b){this._super(a,b||"checkBarFootView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.checkBar();this._text=c.footText(),this._image=c.footImage()},_doMeasure:function(a,b,c){},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b),this._renderCell(a,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();this._css.background=b?b.css():null,this._renderCellHtml(a),this._drawHtmlBorders()}}),Ni=Xa("CheckBarSummaryElement",Mi,{init:function(a){this._super(a,"checkBarSummaryView")},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=b.checkBar();this._text=c.summaryText()||c.footText(),this._image=c.summaryImage()||c.footImage()}}),Oi=Xa("IndicatorCellElement",ui,{init:function(a){this._super(a,"indicatorCellView")},text:null,itemState:me.NORMAL,setItemState:function(a){a!=this._itemState&&(this._itemState=a,this.invalidate())},_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a),this.setItemState(a.itemState()),this.setText(a.displayText())},_doRender:function(a,b){var c=this.itemState(),d=null;if(this.isHovered()&&(d=this.hoveredBackground()),d||!this.isSelected()&&c==me.NORMAL||(d=this.selectedBackground()),d||(d=this.background()),d&&a.drawRect(d,null,b),d=this.figureBackground(),d&&c!=me.NORMAL)c==me.INSERTING||c==me.APPENDING?this.$_drawInsert(a,d,b):c==me.UPDATING?this.$_drawEdit(a,d,b):c==me.FOCUSED&&this.$_drawArrow(a,d,b);else{var e=this.text();e&&(d=null,this.isSelected()&&(d=this.selectedForeground()),!d&&this.isHovered()&&(d=this.hoveredForeground()),d||(d=this.foreground()),d&&(this.inflatePadding(b),a.drawTextRect(this._font,d,e,b,this._textAlign),this.deflatePadding(b)))}this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.itemState(),c=null;if(this.isHovered()&&(c=this.hoveredBackground()),c||!this.isSelected()&&b==me.NORMAL||(c=this.selectedBackground()),c||(c=this.background()),this._css.background=c?c.css():null,c=this.figureBackground(),c&&b!=me.NORMAL);else{var d=this.text();if(d&&c){this.inflatePadding(a);var e=this.$_prepareSpan();Jc.renderTextBounds(e,this.font(),c,d,a.x,a.y,a.width,a.height,this._textAlign),this.deflatePadding(a)}}this._drawHtmlBorders()},_hoveredChanged:function(){this.invalidate()},$_drawArrow:function(a,b,c){var d=11,e=11,f=c.x+(c.width-d)/2,g=c.y+(c.height-e)/2;a.drawPolygonArray(b,null,[f+4,g+2,f+7.5,g+5.5,f+4,g+9,f+5,g+10,f+9.5,g+5.5,f+5,g+1])},$_drawEdit:function(a,b,c){var d=11,e=11,f=c.x+(c.width-d)/2,g=c.y+(c.height-e)/2;a.drawPolygonArray(b,null,[f+9,g+0,f+3,g+6,f+3,g+8,f+5,g+8,f+11,g+2]),a.drawPolygonArray(b,null,[f+0,g+9,f+0,g+11,f+11,g+11,f+11,g+9])},$_drawInsert:function(a,b,c){var d=11,e=11,f=c.x+(c.width-d)/2,g=c.y+(c.height-e)/2;a.drawPolygonArray(b,null,[f+0,g+0,f+0,g+11,f+5,g+11,f+5,g+9,f+2,g+9,f+2,g+2,f+9,g+2,f+9,g+5,f+11,g+5,f+11,g+0]),a.drawPolygonArray(b,null,[f+7,g+5,f+7,g+7,f+5,g+7,f+5,g+9,f+7,g+9,f+7,g+11,f+9,g+11,f+9,g+9,f+11,g+9,f+11,g+7,f+9,g+7,f+9,g+5])}}),Pi=14,Qi=10,Ri=Xa("StateBarCellElement",ui,{init:function(a){this._super(a,"stateBarCellView")},rowState:je.NONE,mark:Te.DEFAULT,stateTexts:null,_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a),this.setRowState(a.index().item().rowState());var b=this.grid(),c=b.stateBar();this._mark=c.mark();var d=null;(d=c.stateTexts())&&this.setStateTexts(d)},_doRender:function(a,b){var c=this.rowState(),d=null;if(this.isHovered()&&(d=this.hoveredBackground()),d||(d=this.background()),d&&a.drawRect(d,null,b),c!=je.NONE)if(this._mark==Te.TEXT){var e=this._stateTexts[c];d=this.isHovered()?this.hoveredForeground():null,d||(d=this.foreground()),d&&(this.inflatePadding(b),a.drawTextRect(this._font,d,e,b,this._textAlign),this.deflatePadding(b))}else if(d=this.figureBackground()){var f=this._getRenderRect(b),g=this.figureSize(),h=g?g.getDimension(f.width):Pi,i=g?g.getDimension(f.width):Qi,j=(f.width-h)/2,k=(f.height-i)/2;switch(f.set(Na(j),Na(k),h,i),c){case je.CREATED:this.$_drawCreated(a,d,f);break;case je.DELETED:this.$_drawDeleted(a,d,f);break;case je.UPDATED:this.$_drawUpdated(a,d,f);break;case je.CREATE_AND_DELETED:this.$_drawCreateAndDeleted(a,d,f)}}this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.rowState(),c=null;if(this.isHovered()&&(c=this.hoveredBackground()),c||(c=this.background()),this._css.background=c?c.css():null,b!=je.NONE&&this._stateTexts){var d=this._stateTexts[b];if(c=this.background()){this.inflatePadding(a);var e=this.$_prepareSpan();Jc.renderTextBounds(e,this.font(),c,d,a.x,a.y,a.width,a.height,this._textAlign),this.deflatePadding(a)}}this._drawHtmlBorders()},$_drawCreated:function(a,b,c){var d=c.x,e=c.y,f=c.width,g=c.height,h=[d+6*f/Pi,e+0*g/Qi,d+6*f/Pi,e+2*g/Qi,d+4*f/Pi,e+2*g/Qi,d+4*f/Pi,e+4*g/Qi,d+6*f/Pi,e+4*g/Qi,d+6*f/Pi,e+6*g/Qi,d+8*f/Pi,e+6*g/Qi,d+8*f/Pi,e+4*g/Qi,d+10*f/Pi,e+4*g/Qi,d+10*f/Pi,e+2*g/Qi,d+8*f/Pi,e+2*g/Qi,d+8*f/Pi,e+0*g/Qi];a.drawPolygonArray(b,null,h),h=[d+1*f/Pi,e+9*g/Qi,d+1*f/Pi,e+10*g/Qi,d+13*f/Pi,e+10*g/Qi,d+13*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h)},$_drawUpdated:function(a,b,c){var d=c.x,e=c.y,f=c.width,g=c.height,h=[d+2*f/Pi,e+1*g/Qi,d+2*f/Pi,e+5*g/Qi,d+3*f/Pi,e+5*g/Qi,d+3*f/Pi,e+2*g/Qi,d+9*f/Pi,e+2*g/Qi,d+9*f/Pi,e+4*g/Qi,d+7*f/Pi,e+4*g/Qi,d+7*f/Pi,e+5*g/Qi,d+8*f/Pi,e+5*g/Qi,d+8*f/Pi,e+6*g/Qi,d+9*f/Pi,e+6*g/Qi,d+9*f/Pi,e+7*g/Qi,d+10*f/Pi,e+7*g/Qi,d+10*f/Pi,e+6*g/Qi,d+11*f/Pi,e+6*g/Qi,d+11*f/Pi,e+5*g/Qi,d+12*f/Pi,e+5*g/Qi,d+12*f/Pi,e+4*g/Qi,d+10*f/Pi,e+4*g/Qi,d+10*f/Pi,e+1*g/Qi];a.drawPolygonArray(b,null,h),h=[d+1*f/Pi,e+9*g/Qi,d+1*f/Pi,e+10*g/Qi,d+13*f/Pi,e+10*g/Qi,d+13*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h)},$_drawDeleted:function(a,b,c){var d=c.x,e=c.y,f=c.width,g=c.height,h=[d+4*f/Pi,e+2*g/Qi,d+4*f/Pi,e+4*g/Qi,d+10*f/Pi,e+4*g/Qi,d+10*f/Pi,e+2*g/Qi];a.drawPolygonArray(b,null,h),h=[d+0*f/Pi,e+9*g/Qi,d+0*f/Pi,e+10*g/Qi,d+2*f/Pi,e+10*g/Qi,d+2*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+3*f/Pi,e+9*g/Qi,d+3*f/Pi,e+10*g/Qi,d+5*f/Pi,e+10*g/Qi,d+5*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+6*f/Pi,e+9*g/Qi,d+6*f/Pi,e+10*g/Qi,d+8*f/Pi,e+10*g/Qi,d+8*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+9*f/Pi,e+9*g/Qi,d+9*f/Pi,e+10*g/Qi,d+11*f/Pi,e+10*g/Qi,d+11*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+12*f/Pi,e+9*g/Qi,d+12*f/Pi,e+10*g/Qi,d+14*f/Pi,e+10*g/Qi,d+14*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h)},$_drawCreateAndDeleted:function(a,b,c){var d=c.x,e=c.y,f=c.width,g=c.height,h=[d+3*f/Pi,e+0*g/Qi,d+3*f/Pi,e+2*g/Qi,d+1*f/Pi,e+2*g/Qi,d+1*f/Pi,e+3*g/Qi,d+3*f/Pi,e+3*g/Qi,d+3*f/Pi,e+5*g/Qi,d+4*f/Pi,e+5*g/Qi,d+4*f/Pi,e+3*g/Qi,d+6*f/Pi,e+3*g/Qi,d+6*f/Pi,e+2*g/Qi,d+4*f/Pi,e+2*g/Qi,d+4*f/Pi,e+0*g/Qi];a.drawPolygonArray(b,null,h),h=[d+7*f/Pi,e+2*g/Qi,d+7*f/Pi,e+4*g/Qi,d+13*f/Pi,e+4*g/Qi,d+13*f/Pi,e+2*g/Qi],a.drawPolygonArray(b,null,h),h=[d+0*f/Pi,e+9*g/Qi,d+0*f/Pi,e+10*g/Qi,d+2*f/Pi,e+10*g/Qi,d+2*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+3*f/Pi,e+9*g/Qi,d+3*f/Pi,e+10*g/Qi,d+5*f/Pi,e+10*g/Qi,d+5*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+6*f/Pi,e+9*g/Qi,d+6*f/Pi,e+10*g/Qi,d+8*f/Pi,e+10*g/Qi,d+8*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+9*f/Pi,e+9*g/Qi,d+9*f/Pi,e+10*g/Qi,d+11*f/Pi,e+10*g/Qi,d+11*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h),h=[d+12*f/Pi,e+9*g/Qi,d+12*f/Pi,e+10*g/Qi,d+14*f/Pi,e+10*g/Qi,d+14*f/Pi,e+9*g/Qi],a.drawPolygonArray(b,null,h)}}),Si=new Dd("rgba(170, 170, 170, 0.7)"),Ti=new yd(4293848814),Ui=new Dd("rgba(170, 170, 170, 0.35)"),Vi=Xa("CheckBarCellElement",ui,{init:function(a){this._super(a,"checkBarCellView")},markVisible:!0,exclusive:!1,checked:!1,checkable:!0,_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a);var b=a.index().item();this.setCheckable(b.isCheckable()),this.setChecked(b.isChecked())},_doRender:function(a,b){var c=null;this.isHovered()&&(c=this.hoveredBackground()),c||(c=this.background()),c&&a.drawRect(c,null,b),this._markVisible&&(this._exclusive?this.$_drawRadio(a,b):this.$_drawCheck(a,b)),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=null;this.isHovered()&&(b=this.hoveredBackground()),b||(b=this.background()),this._css.background=b?b.css():null,this._check||(this._check=document.createElement("input"),this._check.type="checkbox",this._check.style.position="absolute",this._check.style.padding="0px",this._check.style.margin="0px",this._dom.appendChild(this._check));var c=this._check.getBoundingClientRect2();this._check.checked=this.isChecked(),this._check.style.left=a.x+this.paddingLeft()+(a.width-this.paddingHorz()-c.width)/2+"px",this._check.style.top=a.y+this.paddingTop()+(a.height-this.paddingVert()-c.height)/2+"px",this._drawHtmlBorders()},$_drawCheck:function(a,b){b=this._getRenderRect(b);var c,d=this.figureSize()?this.figureSize().getDimension(b.height):12,e=Ma(d-2),f=Ma(b.x+(b.width-e)/2),g=Ma(b.y+(b.height-e)/2);this.isCheckable()?a.drawBoundsI(null,Si,f,g,e,e):a.drawBoundsI(Ti,Ui,f,g,e,e),this.isChecked()&&(c=this.figureBackground(),Ob(a,c,b,d))},$_drawRadio:function(a,b){b=this._getRenderRect(b);var c,d=this.figureSize()?this.figureSize().getDimension(b.height):12,e=(d-2)/2,f=b.x+b.width/2,g=b.y+b.height/2;this.isCheckable()?a.drawCircle(null,Si,f,g,e):a.drawCircle(Ti,Ui,f,g,e),this.isChecked()&&(e-=2,c=this.figureBackground(),a.drawCircle(c,null,f,g,e))}}),Wi=Xa("DataCellElement",ti,{init:function(a,b){this._super(a,b||"dataCellView"),this._dataColumn=null,this._cellStyles=null,this._error=null,this._errorLevel=ze.IGNORE,this._leftButtonsWidth=0,this._buttonWidth=0,this._editWidth=0,this._errorWidth=0,this._buttonHovered=!1,this._buttonPressed=!1,this._editButtonHovered=!1,this._editButtonPressed=!1,this._expandHandle=null},contentFit:Pe.NONE,iconIndex:0,iconLocation:Oe.NONE,iconAlignment:Ne.NEAR,iconOffset:0,iconPadding:0,writable:!0,renderer:null,text:null,value:ta,blankState:Ie.NONE,button:we.NONE,buttonVisibility:xe.DEFAULT,editButtonVisibility:xe.DEFAULT,expanderVisible:!1,innerIndex:-1,setInnerIndex:function(a){a!=this._innerIndex&&(this._innerIndex=a,this.$_resetButtonVisible(),this.invalidate())},mergeRoom:function(){return null},expanderVisible_:function(){return null!=this._expandHandle},setExpanderVisible:function(a){a!=this.isExpanderVisible()&&(this._expandHandle?(this.contains(this._expandHandle)&&this.removeChild(this._expandHandle),this._expandHandle=null):this._expandHandle=new qi(this._dom,this),this.invalidate())},group:function(){var a=this.mergeRoom();return a?a.group():this.index().item().parent()},layoutTreeContent:function(a){this._doLayoutHandles()},ptInCell:function(a,b){return a>this._leftButtonsWidth&&a<this.width()-this._buttonWidth-this._editWidth-this._errorWidth},ptInButton:function(a,b){var c=this._buttonWidth,d=this.width()-c;return c>0&&a>=d&&a<this.width()&&b>=0&&b<=this.height()?this.grid().delegate().getCellButtonRenderer(this.index()).hitTest(c,this.height(),a-d,b):!1},ptInEditButton:function(a,b){var c=this._editWidth,d=this.width()-c-this._buttonWidth;return c>0&&a>=d&&a<this.width()&&b>=0&&b<=this.height()?this.grid().delegate().getCellEditButtonRenderer(this.index()).hitTest(c,this.height(),a-d,b):!1},ptInDataButton:function(a,b){var c=this._renderer;return c&&c.isButton()?c.ptInButton(this,a,b):!1},setButtonState:function(a,b){(this._buttonHovered!=a||this._buttonPressed!=b)&&(this._buttonHovered=a,this._buttonPressed=b,this.invalidate())},setEditButtonState:function(a,b){(this._editButtonHovered!=a||this._editButtonPressed!=b)&&(this._editButtonHovered=a,this._editButtonPressed=b,this.invalidate())},getButtonsWidth:function(){return this._buttonWidth+this._editWidth+this._errorWidth-1},getValueOf:function(a){var b=this.index(),c=b.item(),d=c.dataSource(),e=d.getFieldIndex(a);return e>=0?c.getData(e):void 0},canHovering:function(a){if(a){if(this.button()!=we.NONE||this.$_editButtonWidth()>0||this._expandHandle||this._error)return!0}else if(this._leftButtonsWidth+this._buttonWidth+this._editWidth+this._errorWidth!=0)return!0;return!1},_hoveredChanged:function(){var a=this.renderer();a&&a.isClickable(this.index())&&(this._hovered?(this._fontUnderline=this._font.underline,this._font.underline=!0):this._font.underline=this._fontUnderline,this.invalidate())},_doLayoutHandles:function(){if(this._super(),this._expandHandle){var a=Wi.EXPANDER_SIZE;this._expandHandle.setBounds(2,2,a,a),this._expandHandle.setExpanded(this.group&&this.group()&&this.group().isExpanded()),this.contains(this._expandHandle)||(this.addElement(this._expandHandle),this._expandHandle.invalidate())}},_doPrepareValue:function(a){this._super(a),this._dataColumn=this._index.dataColumn(),this.setValue(a.value()),this._error=a.error(),this._errorLevel=a.errorLevel();var b=null,c=this._dataColumn;if(c)switch(c.valueType()){case ie.TEXT:b=a.displayText();break;case ie.NUMBER:var d=Number(this._value);b=isNaN(d)?c.nanText():this._numberFormatter?this._numberFormatter.format(d):a.displayText();break;case ie.DATETIME:b=this._value instanceof Date&&this.datetimeWriter()?this.datetimeWriter().getText(this._value):a.displayText();break;case ie.BOOLEAN:b=this._boolFormatter?this._boolFormatter.formatValue(this._value):a.displayText();break;default:b=a.displayText()}this.setText(b)},_doPrepareElement:function(a){this._super(a),this.setContentFit(a.contentFit()),this.setIconIndex(a.iconIndex()),this.setIconLocation(a.iconLocation()),this.setIconAlignment(a.iconAlignment()),this.setIconOffset(a.iconOffset()),this.setIconPadding(a.iconPadding());var b=null,c=a.renderer();c&&(b=this.grid().dataCellRenderers().getRenderer(c)),b||(b=this._index.column().rendererObj()),this.setRenderer(b)},_doUpdateContent:function(a){this._super(a);var b=this._dataColumn;if(this._cellStyles=a._cellStyles,this.setInnerIndex(-1),this.setBlankState(a.blankState()),b){var c=this._grid.$_editOptionsWritable;c&&(c=this._cellStyles?this._cellStyles.calcWritable(b.isEditable(),b.isReadOnly()):b.isWritable()&&(this._grid.$_fixedRowCount<1||this._grid.$_fixedRowEditable||this._index.itemIndex()>=this._grid.$_fixedRowCount)),this.setWritable(c),this.setButton(b.button()),this.setButtonVisibility(b.buttonVisibility()),this.setEditButtonVisibility(b.editButtonVisibility())}else this.setWritable(!1)},_doMeasure:function(a,b,c){var d=this.renderer().measure(a,this,b,c);return d.width+=this._borderLeft?this._borderLeft.width():0,d.width+=this._borderRight?this._borderRight.width():0,d},_doRender:function(a,b){a.drawRectI(yd.WHITE,null,b);var c=this._background;c&&a.drawRectI(c,null,b);var d=this._getRenderRect(b);this._leftButtonsWidth=d.height>3*Wi.EXPANDER_SIZE?0:this.$_leftButtonsWidth(),this._buttonWidth=this.$_buttonWidth(),this._editWidth=this.$_editButtonWidth(),this._errorWidth=this.$_errorWidth();var e=this._buttonWidth>0||this._editWidth>0||this._errorWidth>0;if(!this._renderer||this._blankState!=Ie.NONE&&this._blankState!=Ie.HEAD||(e||this._leftButtonsWidth>0?(d.leftBy(this._leftButtonsWidth),d.rightBy(-this._buttonWidth-this._editWidth-this._errorWidth),a.save(),a.clipRect(d),this._renderer.applyDynamicStyles(this),this._renderer.render(this,a,d),a.restore(),d.rightBy(this._buttonWidth+this._editWidth+this._errorWidth),d.leftBy(-this._leftButtonsWidth)):(this._renderer.applyDynamicStyles(this),this._renderer.render(this,a,d))),e){var f=d.clone();if(this._innerIndex>=0&&this._mergeRoom){var g=this.grid(),h=g.layoutManager().getItemRect(this._mergeRoom.headItem()+this._innerIndex-g.topIndex());f.y=h.y-this.topBy(g,0),f.height=h.height}this._buttonWidth>0&&(f.setLeft(f.right()-this._buttonWidth),this.$_drawButton(a,f)),this._editWidth>0&&(f.set(d.x,f.y,d.width,f.height),f.rightBy(-this._buttonWidth),f.setLeft(f.right()-this._editWidth),this.$_drawEditorButton(a,f)),this._errorWidth>0&&(f.set(d.x,f.y,d.width,f.height),f.rightBy(-this._buttonWidth-this._editWidth),f.setLeft(f.right()-this._errorWidth),this.$_drawError(a,f))}this._drawBordersWithBlank(a,b,this._blankState)},_doRenderHtml:function(a){var b=this._background;this._css.clip=Jc.getClipRect(a),Xc?this.$_setCssFill(b):this._css.background=b?b.css():null;var c=this._getRenderRect(a);this._leftButtonsWidth=this.$_leftButtonsWidth(),this._buttonWidth=this.$_buttonWidth(),this._editWidth=this.$_editButtonWidth(),this._errorWidth=this.$_errorWidth();var d=this._buttonWidth>0||this._editWidth>0||this._errorWidth>0;!this._renderer||this._blankState!=Ie.NONE&&this._blankState!=Ie.HEAD||(d||this._leftButtonsWidth>0?(c.leftBy(this._leftButtonsWidth),c.rightBy(-this._buttonWidth-this._editWidth-this._errorWidth),c.rightBy(this._buttonWidth+this._editWidth+this._errorWidth),c.leftBy(-this._leftButtonsWidth)):(this._renderer.applyDynamicStyles(this),this._renderer.renderHtml(this,c))),this._drawHtmlBorders()},$_leftButtonsWidth:function(){return this._expandHandle?16:0},_getButtonVisible:function(a){var b;switch(a){case xe.ALWAYS:b=!0;break;case xe.HIDDEN:b=!1;break;case xe.VISIBLE:b=this._focused;break;case xe.DEFAULT:default:b=this._focused||this._mouseEntered}return b},$_resetButtonVisible:function(){var a=this._dataColumn;a&&(this.setButton(a.button()),this.setButtonVisibility(a.buttonVisibility()),this.setEditButtonVisibility(a.editButtonVisibility()))},$_editButtonWidth:function(){var a=0;if(this._writable){var b=this.grid(),c=this._dataColumn;if(c&&b._delegate.hasEditorButton(this._index)){
var d=!1;if(Ye.areEquals(b.focusedIndex(),this._index)&&(editor=b.delegate().getCellEditor(this._index),d=editor?editor.isListing():!1),d||this._getButtonVisible(this._editButtonVisibility)){var e=b._delegate.getCellEditButtonRenderer(this._index);e&&(a=e.measure(this._index,0,this.height()).width)}}}return a},$_drawEditorButton:function(a,b){var c=this._grid._delegate.getCellEditButtonRenderer(this._index);c.render(this._index,a,b,this._editButtonHovered,this._editButtonPressed,this._focused)},$_buttonWidth:function(){var a,b,c,d=0,e=this.grid();if(this.button()!=we.NONE){a=this.isFocused(),b=this.index();var f=e.focusedIndex();this._innerIndex>0&&(f=f.clone(),f.incRow(-this._innerIndex));var g=Ye.areEquals(f,b);a?g||(this._focused=!1):g&&(this._focused=!0),this._getButtonVisible(this._buttonVisibility)&&(c=e.delegate().getCellButtonRenderer(b),c&&(d=c.measure(b,0,this.height()).width))}return d},getButtonWidth:function(){if(this.button()!=we.NONE){var a=this.index(),b=this.grid().delegate().getCellButtonRenderer(a);if(b)return b.measure(a,0,this.height()).width}return 0},$_drawButton:function(a,b){var c=this.grid().delegate().getCellButtonRenderer(this.index());c.render(this.index(),a,b,this._buttonHovered,this._buttonPressed,this._focused)},$_errorWidth:function(){if(this._error){var a=Wi.getErrorIcon(this.grid(),this._errorLevel);return a?a.width+4:0}return 0},$_drawError:function(a,b){var c,d,e=Wi.getErrorIcon(this.grid(),this._errorLevel);if(e&&(c=e.width)>0&&(d=e.height)>0){var f=Na(b.x+(b.width-c)/2),g=Na(b.y+(b.height-d)/2);a.drawImage(e,f,g,c,d)}}},{},function(a){var b={};a.getErrorIcon=function(a,c){var d=b[c];return d||(d=a.getImage(la+ma+"error_"+c+".png"),d&&(b[c]=d)),d}});Wi.EXPANDER_SIZE=12;var Xi=Xa("DataGroupCellElement",si,{init:function(a){this._super(a,"dataGroupCellView")},layoutTreeContent:function(a){this._layoutTreeCells(a)},_prepareCells:function(a){this.$_createCells(this.group())},_layoutCells:function(a){var b,c,d,e,f,g,h,i=this._width,j=this._height,k=this.group(),l=k.visibleCount();if(k.isVertical())for(h=0,b=0;l>b;b++)e=k.getVisibleItem(b),f=this._getCell(e),d=e.measuredHeight(),e._layoutRect.set(0,h,i,d),f.setBounds(0,h,i,d),h+=d,f instanceof Xi&&f._layoutCells(a);else for(g=0,d=j,b=0;l>b;b++)e=k.getVisibleItem(b),f=this._getCell(e),c=b==l-1?i-g:e.displayWidth(),e._layoutRect.set(g,0,c,d),f.setBounds(g,0,c,d),g+=c,f instanceof Xi&&f._layoutCells(a)},_layoutTreeCells:function(a){var b,c,d,e,f,g,h,i=this._width,j=this._height,k=this.group(),l=k.visibleCount();if(k.isVertical())for(h=0,b=0;l>b;b++)e=k.getVisibleItem(b),f=this._getCell(e),d=e.measuredHeight(),e._layoutRect.set(0,h,i,d),f.setBounds(0,h,i,d),h+=d,f instanceof Xi&&f._layoutTreeCells(a);else for(g=0,d=j,b=l-1;b>=0;b--)e=k.getVisibleItem(b),f=this._getCell(e),c=0==b?Math.max(0,i-g):Math.min(i,e.displayWidth()),g+=c,e._layoutRect.set(i-g,0,c,d),f.setBounds(i-g,0,c,d),f instanceof Xi&&f._layoutTreeCells(a)},$_createCells:function(a){this.hideAll();var b,c,d,e,f,a=this.group(),g=this.grid(),h=g.body(),i=this.index().I();for(b=0,c=a.visibleCount();c>b;b++)d=a.getVisibleItem(b),e=this._getCell(d),e||(e=d instanceof rk?new Wi(this._dom):d instanceof tk?new Yi(this._dom):new Xi(this._dom),this.$_setCell(d,e),this.addElement(e)),e.setVisible(!0),f=h.getCell(Ye.temp(g,i,d)),e.updateCell(f),e.setMouseEntered(!1),e instanceof Wi&&e.setFocused(!1),d instanceof ak&&e.$_createCells(d)}}),Yi=Xa("SeriesCellElement",Wi,{init:function(a,b){this._super(a,b||"seriesCellView"),this._values=null},_doPrepareValue:function(a){this._super(a)},value:function(){return this._values},setValue:function(a){W(a,this._values)||(this._values=a,this.invalidate())}}),Zi=Xa("ItemElement",Sh,{init:function(a,b){this._super(a,b),this._item=null},item:function(){return this._item},index:function(){return this._item.index()},itemIndex:function(){return this._item.index()},updateElement:function(a,b){this._item=a,this._doUpdateElement(b)},propertyChanged:function(a,b){this.invalidate()},_doLayoutContent:function(a){this._doLayoutHandles()},_doRender:function(a,b){},_doUpdateElement:function(a){}},{}),$i=Xa("RowElement",Zi,{init:function(a,b){this._super(a,b),this._cells={}},fixed:!1,rightFixed:!1,findCell:function(a){if(a){var b=a.root(),c=this._cells[b.$_hash];if(c&&c.isVisible())return b!=a&&(c=c.findCell(a)),c}return null},checkMerged:function(a){for(var b=a.firstCol(this._fixed,this.rightFixed),c=a.lastCol(this._fixed,this.rightFixed),d=b;c>=d;d++){var e=this._cells[a.getColumn(d).$_hash];e&&(a.getMergedCell(e.index())?e.setVisible(!1):e.setVisible(!0))}},_doUpdateElement:function(a){this._super(a)},_doMesasure:function(a,b,c){return{width:b,height:c}},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doRender:function(a,b){},_doRenderHtml:function(a){this._css.background="#fff"},_getCellView:function(a){return this._cells[a.$_hash]},_getFirstCell:function(a){var b=a.firstCol(this._fixed,this._rightFixed);return this._cells[a.getColumn(b).$_hash]},_clearChildren:function(){this.clear(),this._cells={}},_prepareCells:function(a){var b,c,d,e,f,g,h,i,j,k,l,m=this.grid(),n=m.body(),o=m.rowGroup(),p=(a.fixedColCount(),m.isHorzScrolling()),q=a.isColumnMerged(),r=o.isMergeExpander(),s=o.expandedAdornments()==Ce.BOTH;if(m.isColumnLayoutChanged()&&(this._clearChildren(),this._cells={}),p){for(var t in this._cells)this._cells[t]._recycling=!1;for(h=a.prevFirst(this._fixed,this._rightFixed),i=a.prevLast(this._fixed,this._rightFixed),b=h;i>b;b++)d=a.getColumn(b),f=this._cells[d.$_hash],f&&(f._recycling=!0)}for(this.hideAll(),h=a.firstCol(this._fixed,this._rightFixed),i=a.lastCol(this._fixed,this._rightFixed),b=h;i>=b;b++)d=a.getColumn(b),e=Ye.temp(m,this._item.index(),d),g=a.getMergedCell(e),g?(f=m.getCellView(m._mergeView,e),f&&f.setFocused(!1)):(j=n.getCell(e),f=this._cells[d.$_hash],f||(f=d instanceof ak?new Xi(this._dom):d instanceof tk?new Yi(this._dom):new Wi(this._dom),this._cells[d.$_hash]=f,this.addElement(f)),f.setVisible(!0),f instanceof Wi&&(k=!1,q&&r&&d instanceof rk&&d.isMergeGrouped()&&(l=this._item.parent(),c=l.count()-(s?0:1),k=c>1&&l.firstItem()==this._item),f.setExpanderVisible(k)),(!p||f._recycling)&&f.updateCell(j),f.setMouseEntered(!1),f instanceof Wi&&f.setFocused(!1))},_layoutCells:function(a){var b,c,d,e=this.grid().isHorzScrolling(),f=(a.fixedColCount(),a.firstCol(this._fixed,this._rightFixed)),g=a.lastCol(this._fixed,this._rightFixed);for(b=f;g>=b;b++)c=this._cells[a.getColumn(b).$_hash],c&&c.isVisible()&&(c._fixed=this._fixed,d=a.getColumnBounds(b),d.height=this.height(),c.index().column()._layoutRect.copy(d),c.setRect(d),e&&c._recycling||c.layoutContent(a))}},{}),_i=Xa("RowGroupBarCellElement",ri,{init:function(a,b){this._super(a,b)},level:0,_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._drawHtmlBorders()}}),aj=Xa("RowGroupBarElement",Xd,{init:function(a){this._super(a,"rowGroupBarView"),this._level=0,this._cells=[]},setLevel:function(a){this._level=a},$_checkCapacity:function(a){for(;this._cells.length<a;)this._cells.push(new _i(this._dom,"rowGroupBarCell"))},$_addCell:function(a,b,c,d,e){this.$_checkCapacity(b+1);var f=this._cells[b];f.setBounds(0,c,d,e),f.setLevel(this._level),this.addElement(f);var g=a.rowGroup().getBarCell(this._level);f.updateCell(g),f.invalidate()},$_isBarItem:function(a){return a instanceof Zf||a instanceof $f&&a.isExpandable()},layoutCells:function(a,b){this.clear();var c=this.container().gridView(),d=0,e=0,f=this.width(),g=this.height();if(b.fixedItemCount()>0&&(e=b.itemBounds(b.fixedItemCount()-1).bottom(),this.$_addCell(c,d,0,f,e),d++),!(e>=g)){var h=c.topIndex(),i=a.length;if(1>i)this.$_addCell(c,d,e,f,g-e);else{var j,k,l,m,n,o=a[0];for((o.level()<=this._level||o.displayLevel()<=this._level)&&(k=o.index(),l=b.itemBounds(k-h),k>c.topItem()&&(this.$_addCell(c,d,e,f,l.y-e),d++)),j=0;i-1>j;j++)o=a[j],!this.$_isBarItem(o)||o.level()!=this._level&&o.displayLevel()!=this._level||(m=a[j+1],n=m.index(),k=o.index(),l=b.itemBounds(k-h),k=l.bottom(),l=b.itemBounds(n-h),n=l.y,this.$_addCell(c,d,k,f,n-k),d++);j=i-1,o=a[j],this.$_isBarItem(o)&&(o.level()<=this._level||o.displayLevel()<=this._level)&&(k=o.index(),l=b.itemBounds(k-h),l.bottom()<this.y()+g&&this.$_addCell(c,d,l.bottom(),f,this.y()+g-l.bottom()))}}}}),bj=Xa("RowGroupExpandHandle",ei,{init:function(a,b){this._super(a,b,"rowGroupExpandHandle")},expanded:!1,background:null,isClickable:function(){return!0},_doDraw:function(a){var b=this.clientRect();this.isExpanded()?Qb(a,b,9,this.background()):Pb(a,b,9,this.background())},_doDrawHtml:function(){}}),cj=Xa("RowGroupExpanderElement",ri,{init:function(a,b){this._super(a,b),this._handle=new bj(a,this),this.addElement(this._handle)},setHandleVisible:function(a){this._handle.setVisible(a)},_doUpdateContent:function(a){this._super(a);var b=a.styles();this._handle.setBackground(b.figureBackground()),this._handle.setExpanded(a.index().item()instanceof Yf&&a.index().item().isExpanded())},_doLayoutContent:function(a){this._handle.setRect(this.clientRect())},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._drawHtmlBorders()}}),dj=Xa("RowGroupItemBarElement",Sh,{init:function(a,b){this._super(a,b),this._index=0,this._expander=new cj(a,"RowGroup expander"),this.addElement(this._expander)},setExpanderVisible:function(a){this._expander.setHandleVisible(a)},setIndex:function(a){this._index=a},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){var b=this.grid(),c=b.getItem(this._index),d=c instanceof Yf?b.rowGroup().getHeaderBarCell(Ye.temp(b,this._index)):b.rowGroup().getFooterBarCell(Ye.temp(b,this._index)),e=this._expander;e.updateCell(d),e.setRect(this.clientRect()),e.layoutContent(a)},_doRender:function(a,b){a.drawRectI(yd.WHITE,null,b)},_doRenderHtml:function(a){var b=yd.YELLOW;Xc?this.$_setCssFill(b):this._css.background=b?b.css():null}}),ej=Xa("RowGroupHeadCellElement",ri,{init:function(a,b){this._super(a,b)},_doUpdateContent:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,a.header().minHeight())},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._drawHtmlBorders()}}),fj=Xa("RowGroupFootCellElement",ri,{init:function(a,b){this._super(a,b)},_doUpdateContent:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,a.footer().minHeight())},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._drawHtmlBorders()}}),gj=Xa("RowGroupSummaryCellElement",ri,{init:function(a,b){this._super(a,b)},_doUpdateContent:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,a.header().summary().minHeight())},_doRender:function(a,b){var c=this.background();c&&a.drawRectI(c,null,b),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._drawHtmlBorders()}}),hj=Xa("RowGroupItemElement",Zi,{init:function(a,b){this._super(a,b)}}),ij=Xa("RowGroupHeaderCellElement",ri,{init:function(a){this._super(a,"rowGroupHeaderCellElement")},text:null,borderLeft:function(){return null},_doPrepareValue:function(a){this._super(a),this.setText(a.displayText())},_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,c)},_doRender:function(a,b){var c=this.background();c&&a.drawRect(c,null,b);var d=this._getRenderRect(b);d=this.inflatePadding(d),a.drawTextRect(this.font(),this.foreground(),this.text(),d,this.textAlign()),this._drawBorders(a,b)},_doRenderHtml:function(a){var b=this.background();Xc?this.$_setCssFill(b):this._css.background=b?b.css():null;var c=this.$_prepareSpan(),d=this.text(),e=this._getRenderRect(a);e=this.inflatePadding(e),Jc.renderTextBounds(c,this.font(),this.foreground(),d,a.x,a.y,a.width,a.height,this.textAlign()),this._drawHtmlBorders()}}),jj=Xa("RowGroupHeaderElement",hj,{init:function(a){this._super(a,"rowGroupHeaderView"),this._cellView=new ij(a),this.addElement(this._cellView)},cellView:function(){return this._cellView},_doUpdateElement:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this._cellView.updateCell(this.grid().rowGroup().getHeaderCell(this.index())),this._cellView.setBounds(0,0,this.width(),this.height())},_doRender:function(a,b){},_doRenderHtml:function(a){}}),kj=Xa("RowGroupFooterElement",hj,{init:function(a){this._super(a,"rowGroupFooterView"),this._fixed=!1,this._rightFixed=!1,this._cells={}},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},setFixed:function(a){this._fixed=a},setRightFixed:function(a){this._rightFixed=a},getCell:function(a){return null},_doUpdateElement:function(a){this._super(a);var b=this.item().parent();this._level=b.level()},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doRender:function(a,b){if(this.isFixed()){var c=this.grid().fixedOptions(),d=c.colBarStyles(),e=d.background(),f=d.borderRight(),g=d.borderLeft(),h=c.colBarWidth();if(this.isRightFixed()?b.setRight(h):b.setLeft(b.right()-h),e&&a.drawRectI(e,null,b),f){var i=b.right()-1;b.bottom();a.drawVertLineI(f,i.y,b.bottom(),b.x)}g&&this._rightFixed&&a.drawVertLineI(g,b.y,b.bottom(),b.x)}},_doDraw:function(a){},_doDrawHtml:function(a){},_prepareCells:function(a){var b,c=this.grid(),d=(this._rowGroup=c.rowGroup(),this.isFixed()),e=this.isRightFixed(),f=a.firstCol(d,e),g=a.lastCol(d,e),h=c.groupFooterMergeManager(),i=h.count()>0;for(c.isColumnLayoutChanged()&&(this.clear(),this._cells={}),this.hideAll(),b=f;g>=b;b++){var j=i&&h.findRoom(this._level,b);this._prepareCell(a,b,j)}if(i)for(var k=h.getRoomNames(this._level),b=0;b<k.length;b++){var j=h.getRoom(this._level,k[b]);j&&(f>j.base()&&f<=j.last()||g<j.base()&&g>=j.start())&&this._prepareCell(a,j.base(),j)}},_prepareCell:function(a,b,c){var d=this.grid(),e=this._rowGroup,f=a.getColumn(b),g=ab(this._cells[f.$_hash],ri);g||(g=f instanceof ak?new Ci(this._dom):new Bi(this._dom),this._cells[f.$_hash]=g,this.addElement(g)),g.setVisible(!c||c.base()==b),f instanceof pk&&g.setTextVisible(!c||c.base()==b);var h=Ye.temp(d,this.index(),f),i=e.getFooterCell(h);g.updateCell(i)},_layoutCells:function(a){var b,c,d,e,f,g=this.grid().leftPos(),h=this.height(),i=this.isFixed(),j=this.isRightFixed(),k=a.firstCol(i,j),l=a.lastCol(i,j),m=this.grid().groupFooterMergeManager(),n=m.count()>0;for(b=k;l>=b;b++)c=this._cells[a.getColumn(b).$_hash],d=a.columnBounds(b),d.height=h,n&&(p=m.findRoom(this._level,b))&&(e=a.columnBounds(p.start()),f=a.columnBounds(p.last()),d.width=f.right()-e.x,d.x=e.x),i||j||(d.x-=g),c.setRect(d),c.layoutContent(a);if(n)for(var o=m.getRoomNames(this._level),b=0;b<o.length;b++){var p=m.getRoom(this._level,o[b]);p&&(k>p.base()&&k<=p.last()||l<p.base()&&l>=p.start())&&(e=a.columnBounds(p.start()),d=e,f=a.columnBounds(p.last()),d.width=f.right()-e.x,d.height=h,i||j||(d.x-=g),c=this._cells[a.getColumn(p.base()).$_hash],c.setRect(d),c.layoutContent(a))}}}),lj=Xa("RowGroupElement",Th,{init:function(a,b){this._super(a,"rowGroupView",b),this._headElement=new Xd(a,"rowGroupHeadContainer"),this.addElement(this._headElement),this._bodyElement=new Xd(a,"rowGroupBodyContainer",!0),this.addElement(this._bodyElement),this._headerBarElement=new Xd(a,"rowGroupHeaderBarContainer"),this.addElement(this._headerBarElement),this._footerBarElement=new Xd(a,"rowGroupFooterBarContainer"),this.addElement(this._footerBarElement),this._barElement=new Xd(a,"rowGroupBarContainer"),this.addElement(this._barElement),this._footElement=new Xd(a,"rowGroupFootContainer"),this.addElement(this._footElement),this._summaryElement=new Xd(a,"rowGroupSummaryContainer"),this.addElement(this._summaryElement),this._headerBuff=[],this._footerBuff=[],this._fixedFooterBuff=[],this._rfixedFooterBuff=[],this._heads=[],this._foots=[],this._headerBars=[],this._footerBars=[],this._bars=[],this._headers=[],this._footers=[],this._fixedFooters=[],this._rfixedFooters=[],this._tmpItems=[],this._headerItems=[],this._footerItems=[],this._headerViews=[],this._footerViews=[],this._fixedFooterViews=[],this._rfixedFooterViews=[],this._headerBuff=[],this._footerBuff=[],this._fixedFooterBuff=[],this._heads=[],this._foots=[],this._summarys=[],this._headerBars=[],this._footerBars=[],this._bars=[],this._headers=[],this._footers=[],this._fixedFooters=[],this._tmpItems=[],this._headerItems=[],this._footerItems=[],this._headerViews=[],this._footerViews=[],this._fixedFooterViews=[],this.setWidth(200),this.setHeight(200)},model:function(){return this._model},levelCount:function(){return this.grid().layoutManager().rowGroupLevels()},barCount:function(){return this._bars.length},getBar:function(a){return Ra(a>=0&&a<this._bars.length,"rowgroup indicator index is invalid: "+a),this._bars[a]},clearBody:function(){this._headerItems=[],this._footerItems=[]},addHeader:function(a){this._headerItems.push(a)},addFooter:function(a){this._footerItems.push(a)},getCellView:function(a,b,c){var d,e,f,g=a.item(),h=this._bodyElement,i=h.childCount();if(g instanceof Yf||g instanceof $f)for(d=0;i>d;d++){if(e=ab(h.getChild(d),jj),e&&e.isVisible()&&e.index()==a.I())return e.cellView();if(f=ab(h.getChild(d),kj),f&&f._fixed==b&&f._rightFixed==c&&f.isVisible()&&f.index()==a.I())return f}return null},isLayer:function(){return!0},isClickable:function(){return!1},_doMeasure:function(a,b,c){return this._prepareHeads(),this._prepareFoots(),this._prepareSummarys(),this._prepareBars(),new ld(this.levelCount()*a.rowGroup().levelIndent(),c)},_doLayoutContent:function(a){var b,c,d,e,f,g,h,i=this.grid(),j=this.model(),k=j.levelIndent();this._headElement.setBounds(0,0,this.width(),a.headerBounds().height),this._layoutHeads(a);var l=a.footerBounds().height;for(this._footElement.setBounds(0,this.height()-l,this.width(),l),this._layoutFoots(a),this._summaryElement.setBounds(0,a.headerBounds().height,this.width(),a.summaryBounds().height),this._layoutSummarys(a),this._layoutBars(a),this._bodyElement.setBounds(0,a.headerBounds().height+a.summaryBounds().height,this.width(),this.height()-a.headerBounds().height-a.footerBounds().height-a.summaryBounds().height),this._layoutHeaders(a),this._prepareHeaderBars(),b=0,c=this._headerItems.length;c>b;b++)d=this._headerBars[b],e=this._headerItems[b],d.setIndex(e.index()),f=a.itemBounds(e.index()-i.topIndex()),f.setLeft((e.level()-1)*k),f.width=k,this._headerBarElement.addElement(d),d.setRect(f),d.setExpanderVisible(!0),d.layoutContent(a);for(this._layoutFooters(a),this._prepareFooterBars(),b=0,c=this._footerItems.length;c>b;b++)g=this._footerItems[b],g.displayLevel()<=a.rowGroupLevels()&&(d=this._footerBars[b],d.setIndex(g.index()),f=a.itemBounds(g.index()-i.topIndex()),f.setLeft((g.displayLevel()-1)*k),f.width=(a.rowGroupLevels()-g.displayLevel()+1)*k,this._footerBarElement.addElement(d),d.setRect(f),d.setExpanderVisible(g.isExpandable()),d.layoutContent(a));for(this._prepareBars(),b=0,c=a.rowGroupLevels();c>b;b++)h=this._bars[b],h.setBounds(b*k,0,k,this._barElement.height()),h.setLevel(b+1),this._barElement.addElement(h),this.$_collectItems(a,b+1),h.layoutCells(this._tmpItems,a)},_doDraw:function(a){},_doDrawHtml:function(){},_prepareHeads:function(){for(var a,b=this.levelCount();this._heads.length<b;)a=new ej(this._dom,"rowGroupHeadCell"),this._heads.push(a);for(;this._headElement.childCount()<b;)this._headElement.addElement(this._heads[this._headElement.childCount()]);for(;this._headElement.childCount()>b;)this._headElement.removeChildAt(this._headElement.childCount()-1)},_prepareFoots:function(){for(var a,b=this.levelCount();this._foots.length<b;)a=new fj(this._dom,"rowGroupFootCell"),this._foots.push(a);for(;this._footElement.childCount()<b;)this._footElement.addElement(this._foots[this._footElement.childCount()]);for(;this._footElement.childCount()>b;)this._footElement.removeChildAt(this._footElement.childCount()-1)},_prepareSummarys:function(){for(var a,b=this.levelCount();this._summarys.length<b;)a=new gj(this._dom,"rowGroupSummaryCell"),this._summarys.push(a);for(;this._summaryElement.childCount()<b;)this._summaryElement.addElement(this._summarys[this._summaryElement.childCount()]);for(;this._summaryElement.childCount()>b;)this._summaryElement.removeChildAt(this._summaryElement.childCount()-1)},_prepareHeaderBars:function(){var a;for(this._headerBarElement.clear();this._headerBars.length<this._headerItems.length;)a=new dj(this._dom,"rowGroupHeaderBar"),this._headerBars.push(a)},_prepareFooterBars:function(){var a;for(this._footerBarElement.clear();this._footerBars.length<this._footerItems.length;)a=new dj(this._dom,"rowGroupFooterBar"),this._footerBars.push(a)},$_collectItems:function(a,b){var c,d,e=this.grid(),f=e.topItem(),g=a.itemCount();for(this._tmpItems.splice(0,this._tmpItems.length),c=0;g>c;)d=e.getItem(c+f),d.displayLevel()<=b&&this._tmpItems.push(d),c++},_prepareBars:function(){var a,b=this.levelCount();for(this._barElement.clear();this._bars.length<b;)a=new aj(this._dom,"rowGroupBar"),this._bars.push(a)},$_removeHeaderView:function(a){var b=this._bodyElement.getChildIndex(a);b>=0&&(this._bodyElement.removeChildAt(b),a.validate(!0),this._headerBuff.push(a))},$_borrowHeaderView:function(a){var b;return b=this._headerBuff.length>0?this._headerBuff.pop():this.grid().delegate().borrowItemView(a,!1,!1),b.recycling=!1,b},_layoutHeaders:function(a){var b,c,d,e,f,g,h=this.grid(),i=this.model(),j=i.levelIndent(),k=this._headerViews.length;for(b=0;k>b;b++)this._headerViews[b].recycling=!1;for(;k<this._headerItems.length;)c=this.$_borrowHeaderView(this._headerItems[k++]),this._bodyElement.addElement(c),this._headerViews.push(c);for(;k>this._headerItems.length;)this.$_removeHeaderView(this._headerViews[--k]),this._headerViews.pop();for(b=0;k>b;b++)d=this._headerItems[b],c=this._headerViews[b],e=c.item!==d,c.updateElement(d,i.headerStyles()),f=a.itemBounds(d.index()-h.topIndex()),g=d.level()*j,f.setLeft(g),f.width=this.width()-g-h.leftPos(),c.setRect(f),(e||!c.recycling)&&c.layoutContent(a)},$_removeFooterView:function(a){var b=this._bodyElement.getChildIndex(a);b>=0&&(this._bodyElement.removeChildAt(b),a.validate(!0),this._footerBuff.push(a))},$_removeFixedFooterView:function(a){var b=this._bodyElement.getChildIndex(a);b>=0&&(this._bodyElement.removeChildAt(b),a.validate(!0),this._fixedFooterBuff.push(a))},$_removeRightFixedFooterView:function(a){var b=this._bodyElement.getChildIndex(a);b>=0&&(this._bodyElement.removeChildAt(b),a.validate(!0),this._rfixedFooterBuff.push(a))},$_borrowFooterView:function(a){var b;return b=this._footerBuff.length>0?this._footerBuff.pop():this.grid().delegate().borrowItemView(a,!1,!1),b.recycling=!1,b},$_borrowFixedFooterView:function(a){var b;return b=this._fixedFooterBuff.length>0?this._fixedFooterBuff.pop():this.grid().delegate().borrowItemView(a,!0,!1),b.recycling=!1,b},$_borrowRightFixedFooterView:function(a){var b;return b=this._fixedFooterBuff.length>0?this._fixedFooterBuff.pop():this.grid().delegate().borrowItemView(a,!0,!0),b.recycling=!1,b},_layoutFooters:function(a){var b,c,d,e,f,g,h,i=this.grid(),j=this.width(),k=this.model(),l=k.levelIndent();a.fixedColCount(),a.rfixedColCount(),this.levelCount(),i.rowGroup().isFooterCellMerge();for(b=this._footerViews.length,c=0;b>c;c++)this._footerViews[c].recycling=!1;for(;b<this._footerItems.length;)d=this.$_borrowFooterView(this._footerItems[b]),this._bodyElement.addElement(d),this._footerViews.push(d),b++;for(;b>this._footerItems.length;)b--,this.$_removeFooterView(this._footerViews[b]),this._footerViews.pop();for(c=0;b>c;c++)e=this._footerItems[c],d=this._footerViews[c],d._fixed=!1,f=d.item!==e,d.updateElement(e,k.footerStyles()),g=a.itemBounds(e.index()-i.topIndex()),h=a.rowGroupLevels()*l+a.fixedWidth(),g.setLeft(h),g.width=j-h-i.leftPos(),d.setRect(g),(f||!d.recycling)&&d.layoutContent(a);for(b=this._fixedFooterViews.length,c=0;b>c;c++)this._fixedFooterViews[c].recycling=!1;for(;b<this._footerItems.length;)d=this.$_borrowFixedFooterView(this._footerItems[b]),this._bodyElement.addElement(d),this._fixedFooterViews.push(d),b++;for(;b>this._footerItems.length;)b--,this.$_removeFixedFooterView(this._fixedFooterViews[b]),this._fixedFooterViews.pop();for(c=0;b>c;c++)e=this._footerItems[c],d=this._fixedFooterViews[c],d._fixed=!0,f=d.item!==e,d.updateElement(e,k.footerStyles()),g=a.itemBounds(e.index()-i.topIndex()),h=a.rowGroupLevels()*l,g.setLeft(h),g.width=a.fixedWidth()-i.fixedOptions().colBarWidth(),d.setRect(g),(f||!d.recycling)&&d.layoutContent(a);for(b=this._rfixedFooterViews.length,c=0;b>c;c++)this._rfixedFooterViews[c].recycling=!1;for(;b<this._footerItems.length;)d=this.$_borrowRightFixedFooterView(this._footerItems[b]),this._bodyElement.addElement(d),this._rfixedFooterViews.push(d),b++;for(;b>this._footerItems.length;)b--,this.$_removeRightFixedFooterView(this._rfixedFooterViews[b]),this._rfixedFooterViews.pop();i.fixedOptions().colBarWidth();for(c=0;b>c;c++)e=this._footerItems[c],d=this._rfixedFooterViews[c],d._fixed=!0,d._rightFixed=!0,f=d.item!==e,d.updateElement(e,k.footerStyles()),g=a.itemBounds(e.index()-i.topIndex()),h=a.rfixedLeft()-this._x,g.setLeft(h),g.width=a.rfixedWidth(),d.setRect(g),(f||!d.recycling)&&d.layoutContent(a)},_layoutHeads:function(a){for(var b=this.grid(),c=0,d=b.rowGroup().levelIndent(),e=a.headerBounds().height,f=0,g=this._headElement.childCount();g>f;f++){var h=this._heads[f];h.setBounds(c,0,d,e),c+=d;var i=b.rowGroup().getHeadCell(f+1);h.updateCell(i),h.layoutContent(a)}},_layoutFoots:function(a){for(var b=this.grid(),c=b.rowGroup(),d=0,e=c.levelIndent(),f=a.footerBounds().height,g=0,h=this._footElement.childCount();h>g;g++){var i=this._foots[g];i.setBounds(d,0,e,f),d+=e;var j=c.getFootCell(g+1);i.updateCell(j),i.layoutContent(a)}},_layoutSummarys:function(a){for(var b=this.grid(),c=b.rowGroup(),d=0,e=c.levelIndent(),f=a.summaryBounds().height,g=0,h=this._summaryElement.childCount();h>g;g++){var i=this._summarys[g];i.setBounds(d,0,e,f),d+=e;var j=c.getSummaryCell(g+1);i.updateCell(j),i.layoutContent(a)}},_layoutBars:function(a){var b=a.headerBounds().height+a.summaryBounds().height,c=this.grid().rowGroup().levelIndent()*a.rowGroupLevels(),d=a.indicatorBounds().height;this._barElement.setBounds(0,b,c,d),this._headerBarElement.setBounds(0,b,c,d),this._footerBarElement.setBounds(0,b,c,d)}}),mj=Xa("GridMergeRule",null,{init:function(){this._super()},parseInit:function(a,b,c,d,e){_a()},parseBounds:function(a,b,c,d,e){_a()}}),nj=Xa("RowGroupMergeRule",mj,{init:function(){this._super(),this._level=0,this._mergeMode=!1},parseInit:function(a,b,c,d,e){var f=a.itemCount();d=Math.min(f-c,d),1>d||(this._mergeMode?this.$_parseMerged(a,b,c,d,e):this.$_parseNormal(a,b,c,d,e))},parseBounds:function(a,b,c,d,e){var f,g=a.itemCount();if(!(1>g)){for(c=Math.max(0,c);c>=0&&e[c]<=0&&(f=a.getItem(c),f!=this.$_getAncestor(f,this._level));)c--;for(;d>=c&&e[c]>0;)c++;d>=c&&(this._mergeMode?this.$_parseMergedBounds(a,b,c,d,e):this.$_parseNormalBounds(a,b,c,d,e))}},$_getAncestor:function(a,b){var c=ab(a,Yf);for(c||(c=a.parent());c.level()>b;)c=c.parent();return c},$_parseNormal:function(a,b,c,d,e){var f=a.itemCount();if(!(1>f)){var g=a.getItem(c),h=g,i=c,j=i+1;for(e[i]=i+1;f>j;)g=a.getItem(j),(g.level()!=h.level()||g.constructor!==h.constructor)&&(i=j),e[j]=i+1,j++,h=g}},$_parseMerged:function(a,b,c,d,e){var f=a.itemCount();if(!(1>f))for(var g,h=a.getItem(c),i=this.$_getAncestor(h,this._level),j=c,k=e[j]=j+1;f>k;){if(h=a.getItem(k),g=this.$_getAncestor(h,this._level),g!=i){if(k>=d)break;i=g,j=k}e[k]=j+1,k++}},$_parseNormalBounds:function(a,b,c,d,e){var f=a.itemCount();if(!(1>f)){var g=a.getItem(c),h=g,i=c,j=i+1;for(e[i]=i+1;f>j;)g=a.getItem(j),(g.level()!=h.level()||g.constructor!==h.constructor)&&(i=j),e[j]=i+1,j++,h=g}},$_parseMergedBounds:function(a,b,c,d,e){var f=a.itemCount();if(!(1>f)){var g,h=a.getItem(c),i=this.$_getAncestor(h,this._level),j=c,k=j+1;for(e[j]=j+1;f>k;){if(h=a.getItem(k),g=this.$_getAncestor(h,this._level),g!=i){if(k>d)break;i=g,j=k}e[k]=j+1,k++}}}});nj.$_default=new nj,nj.INIT_COUNT=200,nj.getDefault=function(a,b){var c=nj.$_default;return c._level=a,c._mergeMode=b,c};var oj=Xa("ColumnMergeRule",mj,{init:function(a){this._super(),oj.$_runtime=oj.$_runtime||new Gm,this._runtime=oj.$_runtime,this._exprNode=null,this.setCriteria(a)},criteria:null,setCriteria:function(a){a=a?a.trim():null,a!=this._criteria&&(this._criteria=a,this._exprNode=a?vc.Default.parse(a,null):null,this._changed())},$_isRow:function(a,b){var c=a instanceof Xf;if(c&&!b){var d=a.parent();c=d.isExpanded()||d.firstItem()!=a}return c},parseInit:function(a,b,c,d,e){var f=!1,g=a.itemCount(),h=a.dataSource()._values.length;if(d=Math.min(g-c,d),!(1>d||0>=h)){this._runtime.setDataSource(a.dataSource());for(var i=null,j=c;g>j&&(i=a.getItem(j),!this.$_isRow(i,f));)e[j]=j+1,j++;if(!(j>=g)){var k,l=Hk,m=this._exprNode.isIdentifier("value"),n=c=j;if(e[n]=n+1,!(i._dataRow>=h))for(m?l=i.getData(b):(this._runtime.setItem(i,b),l=this._exprNode.evaluate(this._runtime)),j=c+1;g>j;j++)if(i=a.getItem(j),this.$_isRow(i,f)){if(i._dataRow>=h)break;if(m?k=i.getData(b):(this._runtime.setItem(i,b),k=this._exprNode.evaluate(this._runtime)),k instanceof Date&&l instanceof Date?+k!=+l:k!=l){if(j>=d)break;n=j,l=k}e[j]=n+1}else{if(j>=d)break;l=Hk,n=j,e[j]=n+1}}}},parseBounds:function(a,b,c,d,e){var f=!1,g=a.itemCount();if(!(1>g)){var h,i,j,k,l=this._exprNode.isIdentifier("value"),m=ta,n=Math.max(0,c),o=n,p=-1;if(n>0&&e[n]<=0)if(h=a.getItem(n),this.$_isRow(h,f)){for(l?i=a.getItem(n).getData(b):(this._runtime.setItem(h,b),i=this._exprNode.evaluate(this._runtime)),n--;n>=0&&(h=a.getItem(n),this.$_isRow(h,f))&&(l?m=h.getData(b):(this._runtime.setItem(h,b),m=this._exprNode.evaluate(this._runtime)),m instanceof Date&&i instanceof Date?+m==+i:m==i);)n--;for(j=o-1;j>n;j--)e[j]=n+2;o-1>n&&(p=n+1)}else{for(e[n]=n+1,j=o-1;j>n;j--)e[j]=n+2;for(o-1>n+1&&(p=n+2),n--;n>=0&&e[n]<=0&&!this.$_isRow(a.getItem(n),f);)e[n]=n+1,n--}for(n=Math.max(0,c);d>=n&&e[n]>0;)n++;for(;d>=n&&!this.$_isRow(a.getItem(n),f);)e[n]=n+1,n++;if(d>n){for(o=n,h=a.getItem(n),l?i=h.getData(b):(this._runtime.setItem(h,b),i=this._exprNode.evaluate(this._runtime)),n++;g>n;)if(h=a.getItem(n),this.$_isRow(h,f)){if(l?m=h.getData(b):(this._runtime.setItem(h,b),m=this._exprNode.evaluate(this._runtime)),m!=i){for(k=o,p>=0&&(k=p,p=-1),j=o;n>j;j++)e[j]=k+1;if(n>=d)break;i=m,o=n}else e[n]=o+1;n++}else{for(k=o,p>=0&&(k=p,p=-1),j=o;n>j;j++)e[j]=k+1;for(e[n]=n+1,n++;g>n&&!this.$_isRow(a.getItem(n),f);)e[n]=n+1,n++;if(o=n,n>=d)break}if(n==g&&m==i)for(k=p>=0?p:o,j=o;n>j;j++)e[j]=k+1}}},_changed:function(){}},{INIT_COUNT:200,createRule:function(a){return a&&a.criteria?new oj(a.criteria):null}},function(a){a.$_runtime=null}),pj=Xa("GridMergeRoom",null,{init:function(){this._super()},scope:function(){},group:function(){},headItem:function(){return-1},tailItem:function(){return-1},getHead:function(a){},getTail:function(a){},isHead:function(a){},isTail:function(a){},contains:function(a){}}),qj=Xa("ColumnMergeRoom",pj,{init:function(a){this._super(),this._column=a.C1(),this._head=a.top(),this._tail=a.bottom(),this._group=null},column:function(){return this._column},head:function(){return this._head},tail:function(){return this._tail},scope:function(){return this._column},group:function(){return this._group},setGroup:function(a){this._group=a},headItem:function(){return this._head},tailItem:function(){
return this._tail},getHead:function(a){return a?a.set(this._head,this._column):a=this._column.grid().getIndex(this._head,this._column),a},getTail:function(a){return a?a.set(this._tail,this._column):a=this._column.grid().getIndex(this._tail,this._column),a},isHead:function(a){return a.column()==this._column&&a.I()==this._head},isTail:function(a){return a.column()==this._column&&a.I()==this._tail},contains:function(a){return a.column()==this._column&&a.I()>=this._head&&a.I()<=this._tail}},{$_rooms:[],$_roomCount:0,borrow:function(a){var b=qj.$_rooms.pop();return b?(b._head=a.top(),b._tail=a.bottom()):(b=new qj(a),k("########### M E R G E R O O M: "+ ++qj.$_roomCount)),b},returnTo:function(a){if(a){for(var b=qj.$_rooms,c=0,d=b.length;d>c;c++)if(b[c]===a)return;b.push(a)}}}),rj=Xa("ColumnMergeManager",null,{init:function(a){this._super(),this._column=a,this._flags=null,this._rooms=[],this._inited=!1},count:function(){return this._rooms.length},clear:function(){this._flags=null,this._rooms.splice(0,this._rooms.length),this._inited=!1},initialize:function(a){if(!this._inited){var b=this._column.grid(),c=(b.rowGroup(),b.itemSource()),d=ab(this._column,rk),e=b.getGroupLevel(d.dataIndex()),f=b.isGroupedColumn(d)?nj.getDefault(e,b.rowGroup().isMergeMode()):this._column.mergeRule();if(f){for(var g=this._flags=new Array(c.itemCount()),h=c.itemCount();h--;)g[h]=0;f.parseInit(c,d.dataIndex(),b.fixedOptions().rowCount(),a,g)}this._inited=!0}},refresh:function(a,b){if(this._inited&&this._flags&&!(a>b)){var c,d,e,f,g=this._column.grid(),h=g.layoutManager().fixedItemCount(),i=g.itemSource(),j=ab(this._column,rk),k=g.getGroupLevel(j.dataIndex()),l=k>0?nj.getDefault(k,g.rowGroup().isMergeMode()):this._column.mergeRule(),m=a,n=g.displayOptions().isEditItemMerging();for(this._rooms.length=0,l&&l.parseBounds(i,j.dataIndex(),a,b,this._flags);b>=m;)if(c=this.$_checkMerge(i,this._column,m,0==this._rooms.length,h)){if(1>k)e=i.getItem(c.R2()),e instanceof tj||e instanceof sj||(d=new qj(c),this._rooms.push(d));else if(e=n?i.source().getItem(c.top()):i.getItem(c.top()),e.level()>=k){for(f=e instanceof Yf?e:e.parent();f.level()>k;)f=f.parent();d=new qj(c),d.setGroup(f),this._rooms.push(d)}m=c.R2()+1}else m+=1}},getRooms:function(){return this._rooms.slice()},scroll:function(a){},getRoom:function(a){for(var b=this._rooms,c=b.length-1;c>=0;c--)if(b[c].contains(a))return b[c];return null},$_checkMerge:function(a,b,c,d,e){if(a&&b&&c>=0){var f=c,g=this._flags[f],h=a.getItem(f),i=b.grid().displayOptions(),j=i.isEditItemMerging();if(0>=g||me.isEditing(h.itemState())&&!j)return null;if(d)for(;f>e&&!(this._flags[f-1]<g||me.isEditing(a.getItem(f-1).itemState()));)f--;for(var k,l,m=a.itemCount(),n=c+1;m>n;){if(l=me.isEditing(a.getItem(n).itemState()),this._flags[n]>g||this._flags[n]<=0||l&&!j)return n>f+1?bf.createRange(f,b,n-1,b):(h=a.getItem(f),k=b instanceof rk?b.groupLevel():-1,h instanceof tj&&h.isCollapsed()?bf.createRange(f,b,n-1,b):h instanceof sj&&h.parent().level()==k&&(n==c+1||h.parent().isCollapsed())?bf.createRange(f,b,n-1,b):(h instanceof tj||h instanceof sj)&&h.parent().level()>k?bf.createRange(f,b,n-1,b):null);n++}if(n>f)return n>f+1?bf.createRange(f,b,n-1,b):(h=a.getItem(f),k=b instanceof rk?b.groupLevel():-1,h instanceof tj&&h.isCollapsed()?bf.createRange(f,b,n-1,b):h instanceof sj&&h.parent().level()==k&&(n==c+1||h.parent().isCollapsed())?bf.createRange(f,b,n-1,b):(h instanceof tj||h instanceof sj)&&h.parent().level()>k?bf.createRange(f,b,n-1,b):null)}return null}},{MERGE_ROOMS:"mergeRooms"}),sj=Xa("MergedGroupFooter",$f,{init:function(){this._super()},isMerged:function(){return!0}}),tj=Xa("MergedGroupHeader",Yf,{init:function(a){this._super(),this._groupField=a,this._footer=null},groupField:function(){return this._groupField},footer:function(){return this._footer},isMerged:function(){return!0},_addChild:function(a,b){this._super(a,b),a instanceof $f&&(this._footer=a)}}),uj=Xa("MergedDataCell",Ih,{init:function(a){this._super(a||"mergedDataCell")},value:function(){var a=this.index(),b=a.item();if(b instanceof Xf)return this._super();var c=b instanceof Yf?b:b.parent();return b=c.firstItem(),b.getData(a.dataField())}}),vj=(Xa("MergedSeriesCell",xh,{init:function(){this._super("mergedSeriesCell")},displayText:function(){return null},value:function(){return ta}}),Xa("MergedDataCellElement",Wi,{init:function(a){this._super(a,"mergedDataCellView"),this._values=null,this._mergeRoom=null,this._topIndex=-1,this._bottomIndex=-1},mergeRoom:function(){return this._mergeRoom},setFocused:function(a){a!=this._focused&&(this._focused=a,this._doLayoutHandles&&this._doLayoutHandles(),this.invalidate(!1,!0))},$_setMergeRoom:function(a){this._mergeRoom=a},_getButtonVisible:function(a){var b=this._super(a);if(b){var c=this.grid();if(a==xe.VISIBLE||a==xe.DEFAULT&&!this._mouseEntered){var d=c.focusedIndex();if(this._innerIndex>0){var d=d.clone();d.incRow(-this._innerIndex)}if(!Ye.areEquals(d,this._index))return!1}var e=-1==this._innerIndex?0:this._innerIndex,f=c.getItem(this._mergeRoom.headItem()+e);if(-1==this._innerIndex&&this.group()instanceof tj){e=0;for(var g=this._mergeRoom.headItem(),h=this._mergeRoom.tailItem();h>g&&(f=c.getItem(this._mergeRoom.headItem()+e),!(f instanceof Xf));g++)e++}return f.canEdit()}return!1},_doPrepareValue:function(a){this._super(a)},_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a)},_doRender:function(a,b){this._super(a,b)},_drawBordersWithBlank:function(a,b,c){this._super(a,b,Ie.NONE)},clip:function(a){var b=this.grid();if(b.fixedOptions().colCount()>0)this._super(a);else{var c=b.layoutManager()._gridBounds,d=this.boundsBy();this.getClientRect(this._drawRect);var e=this._drawRect.clone();if(d.x<c.x){var f=c.x-d.x+b._x;e.x+=f,e.width-=f}a.clipRect(e)}}})),wj=Xa("MergedSeriesCellElement",Yi,{init:function(a){this._super(a,"mergedSeriesCellElement"),this._values=null,this._mergeRoom=null,this._topIndex=-1,this._bottomIndex=-1},value:function(){return this._values},setValue:function(a){s(a)&&!z(a,this._values)&&(this._values=a,this.invalidate())},mergeRoom:function(){return this._mergeRoom},$_setMergeRoom:function(a){this._mergeRoom=a}}),xj=Xa("MergedHeaderElement",Zi,{init:function(a){this._super(a,"mergedHeaderView"),this._cellView=new ij(a),this.addElement(this._cellView)},setFixed:function(a){},setRightFixed:function(a){},_doUpdateElement:function(a){this._super(a)},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this._cellView.updateCell(this.grid().rowGroup().getHeaderCell(this.index())),this._cellView.setRect(this.clientRect())},_doRender:function(a,b){}}),yj=Xa("MergedFooterElement",Zi,{init:function(a,b){this._super(a,"mergedFooterView"),this._fixed=b,this._cells=[]},fixed:!1,rightFixed:!1,setFixed:function(a){this._fixed=a},setRightFixed:function(a){this._rightFixed=a},_doUpdateElement:function(a){this._super(a),this._level=this.item().parent().level()},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this.$_prepareCells(a),this.$_layoutCells(a)},_doRender:function(a,b){},$_prepareCells:function(a){var b=this.grid(),c=Math.max(this._level,a.firstCol(this._fixed,this._rightFixed)),d=a.lastCol(this._fixed,this._rightFixed),e=(this._rowGroup=b.rowGroup(),b.groupFooterMergeManager()),f=e.count()>0;for(b.isColumnLayoutChanged()&&(this.clear(),this._cells=[]),this.hideAll(),i=c;d>=i;i++){var g=f&&e.findRoom(this._level,i);this._prepareCell(a,i,g)}if(f)for(var h=e.getRoomNames(this._level),i=0;i<h.length;i++){var g=e.getRoom(this._level,h[i]);g&&(c>g.base()&&c<=g.last()||d<g.base()&&d>=g.start())&&this._prepareCell(a,g.base(),g)}},_prepareCell:function(a,b,c){var d=this.grid(),e=this._rowGroup,f=a.getColumn(b),g=ab(this._cells[f.$_hash],ri);g||(g=f instanceof ak?new Ci(this._dom):new Bi(this._dom),this._cells[f.$_hash]=g,this.addElement(g)),g.setVisible(!c||c.base()==b),f instanceof pk&&g.setTextVisible(!c||c.base()==b);var h=Ye.temp(d,this.index(),f),i=e.getFooterCell(h);g.updateCell(i)},$_layoutCells:function(a){for(var b,c,d,e,f=(a.fixedColCount(),Math.max(this._level,a.firstCol(this._fixed,this._rightFixed))),g=a.lastCol(this._fixed,this._rightFixed),h=this.x(),i=this.height(),j=this.grid().groupFooterMergeManager(),k=j.count()>0,l=f;g>=l;l++){var b=this._cells[a.getColumn(l).$_hash],c=a.columnBounds(l);k&&(n=j.findRoom(this._level,l))&&(d=a.columnBounds(n.start()),e=a.columnBounds(n.last()),c.width=e.right()-d.x,c.x=d.x),c.x-=h,c.height=i,b.setRect(c),b.layoutContent(a)}if(k)for(var m=j.getRoomNames(this._level),l=0;l<m.length;l++){var n=j.getRoom(this._level,m[l]);n&&(f>n.base()&&f<=n.last()||g<n.base()&&g>=n.start())&&(d=a.columnBounds(n.start()),c=d,e=a.columnBounds(n.last()),c.width=e.right()-d.x,c.height=i,c.x-=h,b=this._cells[a.getColumn(n.base()).$_hash],b.setRect(c),b.layoutContent(a))}}}),zj=Xa("GridMergeHeaderElement",Th,{init:function(a){this._super(a,"mergedGroupHeadersContainer",null),this._views=[],this._headerMap={},this._headIndex=null,this._tailIndex=null},clearHeaders:function(){var a,b;for(this._views=[],this._headerMap={},a=this.childCount()-1;a>=0;a--)b=this.getChild(a),b.setVisible(!1),this._views.push(b)},addHeader:function(a){var b=this._headerMap[a._id];b||(b=this._views.length>0?this._views.pop():null,b||(b=new xj(this._dom),this.addElement(b),k("########### M E R G E H E A D E R: "+this.childCount())),b._item=a,this._headerMap[a._id]=b),b.setVisible(!0)},getHeaderView:function(a){return this._headerMap[a._id]},getCellView:function(a){var b=ab(a.item(),tj);return b?this._headerMap[b._id]:null},isLayer:function(){return!0},_doAttached:function(a){this._super(a),this._headIndex=new Ye(this.grid()),this._tailIndex=new Ye(this.grid())},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this.$_layoutHeaders(a)},_doDraw:function(a){},$_layoutHeaders:function(a){var b=this.grid(),c=b.rowGroup().headerStyles(),d=a.leftPos(),e=b.topIndex(),f=a.fixedColCount(),g=a.fixedItemCount(),h=a.fixedWidth(),i=this.width();for(var j in this._headerMap){var k=this._headerMap[j],l=k.item(),m=l.index();k.updateElement(l,c),m=g>m?m:m-e;var n=a.itemBounds(m);n.width=i;var o=l.level()-1,p=a.columnBounds(o).right();f>0?o>=f?p=Math.max(p+h-d,h):o==f-1&&(p=h):0==f&&(p-=d),n.setLeft(p),n.width-=d,k.setRectI(n),k.layoutContent(a)}this._views=null}}),Aj=Xa("GridMergeElement",Th,{init:function(a,b,c){this._super(a,"mergeLayer",null),this._fixed=b,this._rightFixed=c,this._footerLayer=new Xd(a,"mergedFooterLayer"),this.addElement(this._footerLayer),this._cellLayer=new Xd(a,"mergedCellLayer"),this.addElement(this._cellLayer),this._roomMap={},this._scopeViews={},this._footerMap={},this._footerViews=[]},isFixed:function(){return this._fixed},isRightFixed:function(){return this._rightFixed},clearFooters:function(){this._footerViews=[],this._footerMap={};for(var a=this._footerLayer.childCount()-1;a>=0;a--){var b=this._footerLayer.getChild(a);b.setVisible(!1),this._footerViews.push(b)}},addFooter:function(a){var b=this._footerMap[a._id];b||(b=this._footerViews.pop(),b||(b=new yj(this._dom,this._fixed,this._rightFixed),this._footerLayer.addElement(b),k("########### M E R G E F O O T E R: "+this._footerLayer.childCount())),b._item=a,this._footerMap[a._id]=b),b.setVisible(!0)},clearRooms:function(){this._roomMap={};for(var a=this._cellLayer.childCount()-1;a>=0;a--){var b=this._cellLayer.getChild(a);b.setVisible(!1);var c=b.mergeRoom(),d=this.$_getViews(c.scope());d.indexOf(b)<0&&d.push(b)}},addColumnRooms:function(a,b){for(var c=this.$_getViews(a),d=b.length-1;d>=0;d--){var e,f=b[d];c.length>0?e=c.pop():(e=this._createElement(f),this._cellLayer.addElement(e),k("########### M E R G E C E L L: "+this._cellLayer.childCount())),e.setVisible(!0),e.$_setMergeRoom(f),this._roomMap[f.$_hash]=e}},getCellView:function(a){for(var b in this._roomMap){var c=this._roomMap[b],d=c.mergeRoom();if(d.contains(a))return c&&c.isVisible()?c:null}var e=a.item();return e instanceof sj?this._footerMap[e._id]:null},getFooterView:function(a){return this._footerMap[a._id]},isLayer:function(){return!0},_doAttached:function(a){this._super(a);var b=this.grid();this._headIndex=new Ye(b),this._tailIndex=new Ye(b)},_doMeasure:function(a,b,c){return new ld(b,c)},_doLayoutContent:function(a){this.$_layoutCells(a),this.$_layoutFooters(a)},_doDraw:function(a){},$_getViews:function(a){var b=this._scopeViews[a.$_hash];return b||(b=[],this._scopeViews[a.$_hash]=b),b},_createElement:function(a){var b=null;if(a instanceof qj){var c=a.column();c instanceof tk?b=new wj(this._dom):c instanceof rk&&(b=new vj(this._dom))}return b},$_layoutFooters:function(a){var b=this.grid().rowGroup(),c=b.footerStyles(),d=a.fixedColCount(),e=a.rfixedStartCol(),f=a.fixedItemCount(),g=a.topIndex(),h=a.itemCount(),i=this.isFixed(),j=this.isRightFixed();d>0?a.leftPos():0,b.isFooterCellMerge();for(var k in this._footerMap){var l,m,n,o=this._footerMap[k],p=o._item,q=p.index();if(o.updateElement(p,c),q=f>q?q:q-g,0>q||q>=h+f)throw new Error("Invalid MergedGroupFooter index: "+q);l=a.itemBounds(q,i,j),j?(m=Math.max(e,p.parent().level()),n=a.columnBounds(m).x,l.setLeft(n)):i?(m=p.parent().level(),n=a.columnBounds(m).x,l.setLeft(n)):(m=Math.max(d,p.parent().level()),n=a.columnBounds(m).x,l.setLeft(n)),o.setRect(l),o.setFixed(this._fixed),o.setRightFixed(this._rightFixed),o.layoutContent(a)}this._footerViews=null},$_layoutCells:function(a){var b=this.grid(),c=b.rowGroup().isMergeMode(),d=b.rowGroup().isMergeExpander(),e=b.topItem(),f=b.topIndex(),g=a.itemCount(),h=a.fixedItemCount();for(var i in this._roomMap){var j,k,l,m,n,o,p,q,r,s,t,u=this._roomMap[i],v=u.mergeRoom();v.getHead(this._headIndex),this._headIndex.I()-e>g-1?(u.setVisible(!1),t=this.$_getViews(v.column()),t.indexOf(u)<0&&t.push(u)):(v.getTail(this._tailIndex),j=this._headIndex.column(),k=b.body().getCell(this._headIndex,!0),u.updateCell(k),l=j.parent()instanceof gm?a.columnBounds(j.displayIndex()):a.dataColumnBounds(j),m=l.x,n=l.width,o=Math.min(h+g-1,Math.max(h,this._headIndex.I()-f)),l=a.itemBounds(o),u._topIndex=o,p=l.y,q=this._tailIndex.I(),r=v.group(),q=Math.min(h+g-1,Math.max(h,q-f)),u._bottomIndex=q,l=a.itemBounds(q),s=l.bottom()-p,u.setBoundsI(m,p,n,s),u instanceof vj&&u.setExpanderVisible(c&&d&&null!=r),u.layoutContent(a))}}}),Bj=Xa("FooterMergeRoom",null,{init:function(a,b,c,d){this._super(),this._name=a,this._base=b,this._start=c,this._count=d},name:null,base:-1,start:-1,count:0,last:function(){return this._start+this._count-1}}),Cj=Xa("RowGroupFooterMergeRoom",Bj,{init:function(a,b,c,d,e){this._super(b,c,d,e),this._groupLevel=a},groupLevel:-1}),Dj=Xa("FooterMergeRoom",null,{init:function(){this.clearRooms()},clearRooms:function(){this._footerRooms={},this._length=0},count:function(){return this._length},getRoom:function(a){return this._footerRooms[a]},getRoomNames:function(){return Object.keys(this._footerRooms)},findRoom:function(a){for(var b in this._footerRooms){var c=this._footerRooms[b];if(a>=c.start()&&a<=c.last())return c}return null},addRoom:function(a,b,c,d){this._footerRooms[a]=new Bj(a,b,c,d),this._length++},setRoom:function(a,b,c,d){var e=this._footerRooms[a];e?(e._base=b,e._start=c,e._count=d):this.addFooter(a,b,c,d)},buildRooms:function(a,b){this.clearRooms();var c=a.fixedOptions().colCount();if(b)for(var d=0,e=b.length;e>d;d++){var f=a.columnByName(b[d][0]);if(!f||f.group()||f instanceof ak)break;var g=f.displayIndex(),h=[];h.push(g);for(var i=1,j=b[d].length;j>i;i++){var k=a.columnByName(b[d][i]);if(k&&!k.group()&&k instanceof pk){var l=k.displayIndex();(1>c||g>=c&&l>=c||c>g&&c>l)&&h.push(l)}}if(h.length>1){var m=g,n=g;h.sort();for(var o=h.indexOf(g),i=o-1;i>=0&&h[i]==h[i+1]-1;i--)m=h[i];for(var i=o+1;i<h.length&&h[i]==h[i-1]+1;i++)n=h[i];n>m&&this.addRoom(b[d][0],g,m,n-m+1)}}}}),Ej=Xa("RowGroupFooterMergeManager",null,{init:function(){this.clearRooms()},clearRooms:function(){this._groupFooterRooms=[]},count:function(){return this._groupFooterRooms.length},getRoom:function(a,b){return this._groupFooterRooms[a]?this._groupFooterRooms[a][b]:null},getRoomNames:function(a){return this._groupFooterRooms[a]?Object.keys(this._groupFooterRooms[a]):[]},findRoom:function(a,b){if(this._groupFooterRooms[a])for(var c in this._groupFooterRooms[a]){var d=this._groupFooterRooms[a][c];if(b>=d.start()&&b<=d.last())return d}return null},addRoom:function(a,b,c,d,e){this._groupFooterRooms[a]||(this._groupFooterRooms[a]={}),this._groupFooterRooms[a][b]=new Cj(a,b,c,d,e)},setRoom:function(a,b,c,d,e){var f=this._groupFooterRooms[a][c];f?(f._start=d,f._count=e):this.addGroupFooter(a,b,c,d,e)},buildRooms:function(a){var b,c=a.rowGroup(),d=a.fixedOptions().colCount();if(this.clearRooms(),c&&c.isFooterCellMerge()){var e,f=c.isMergeMode(),g=a.getGroupByFields(),h=a.dataSource();if(g&&h){e=[];for(var i=0;i<g.length;i++)e.push(h.getOrgFieldName(g[i]))}var j=f?1:0,k=0,l=[];if(e)for(var i=0,m=a.getVisibleColumnCount();m>i;i++){var n=a.getVisibleColumn(i),o=n.fieldName&&n.fieldName();if(o&&(b=e.indexOf(o))>-1)0==l.length&&(k=i),l.push({name:o,col:i,level:b+1});else if(l.length>0)break}k+=j;for(var i=0;i<l.length;i++){var p=f?k+i:k,q=f?l.length-i-1:l.length;d>p&&(q=Math.min(d-p,q)),q>1&&l[i].col+j<p+q&&this.addRoom(l[i].level,l[i].name,l[i].col+j,p,q)}}}}),Fj=Xa("GridBaseOptions",null,{init:function(a){this._super(),this._grid=a},grid:function(){return this._grid},_invalidateOwner:function(){this._grid&&this._grid.invalidate()},_layoutOwner:function(){this._grid&&this._grid.invalidateLayout()},_refreshOwner:function(){this._grid&&this._grid.refreshView()},_invalidateEditor:function(){this._grid&&this._grid.editController().invalidateEditor(),this._grid&&this._grid.editController().reprepareEditor(this._grid.focusedIndex())}}),Gj=Xa("DisplayOptions",Fj,{init:function(a){this._super(a)},columnResizable:!0,columnMovable:!0,parentChangable:!1,defaultColumnWidth:120,fitStyle:Be.NONE,rowResizable:!1,rowHeight:0,minRowHeight:4,maxRowHeight:0,hscrollBar:!0,vscrollBar:!0,liveScroll:!0,horizLiveScroll:!0,hintDuration:2e3,rowChangeDelay:0,horzScrollStep:8,emptyMessage:"이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",heightMeasurer:null,fitWhenResized:!0,focusVisible:!0,wheelEnabled:!0,rightClickable:!0,editItemMerging:!1,showInnerFocus:!0,setFitStyle:function(a){a!=this._fitStyle&&(this._fitStyle=a,this._refreshOwner())},setRowHeight:function(a){a=Math.max(0,a),a!=this._rowHeight&&(this._rowHeight=a,this._refreshOwner())},setMinRowHeight:function(a){a=Math.max(0,a),a!=this._minRowHeight&&(this._minRowHeight=a,this._refreshOwner())},setMaxRowHeight:function(a){a=Math.max(0,a),a!=this._maxRowHeight&&(this._maxRowHeight=a,this._refreshOwner())},setHeightMeasurer:function(a){a!=this._heightMeasurer&&(this._heightMeasurer=a,"fixed"==a?this._grid.setHeightMeasurer(new Bk):this._grid.setHeightMeasurer(null))},setFitWhenResized:function(a){a!=this._setFitWhenResized&&(this._setFitWhenResized=a,this._refreshOwner())},setFocusVisible:function(a){a!=this._focusVisible&&(this._focusVisible=a,this._refreshOwner())},setShowInnerFocus:function(a){a!=this._showInnerFocus&&(this._showInnerFocus=a,this._refreshOwner())}}),Hj=Xa("EditOptions",Fj,{init:function(a){this._super(a)},readOnly:!1,editable:!0,checkable:!0,updatable:!0,appendable:!1,insertable:!1,deletable:!1,revertable:!1,editWhenFocused:!1,commitWhenNoEdit:!1,commitWhenExitLast:!1,crossWhenExitLast:!1,validateOnEdited:!0,validateOnExit:!1,hintOnError:!0,deleteRowsMessage:"선택된 행(들)을 삭제하시겠습니까?",deleteRowsConfirm:!0,confirmWhenDelete:!0,editWhenClickFocused:!1,commitLevel:ze.IGNORE,useTabKey:!0,useArrowKeys:!0,skipReadOnly:!1,skipReadOnlyCell:!1,verticalMovingStep:Se.DEFAULT,enterToTab:!1,enterToNextRow:!1,enterToEdit:!1,forceInsert:!1,forceAppend:!1,checkDiff:!1,checkCellDiff:!1,strictDiff:!1,deletableWhenEdit:!0,showCommitError:!0,firstCellWhenInsert:!1,appendWhenInsertKey:!1,appendWhenExitLast:!1,showOnlyValidationMessage:!0,deleteRowsConfirm_:function(){return this._confirmWhenDelete},setDeleteRowsConfirm:function(a){this.setConfirmWhenDelete(a)},setReadOnly:function(a){a!=this._readOnly&&(this._readOnly=a,this._refreshOwner(),this._invalidateEditor())},setEditable:function(a){a!=this._editable&&(this._editable=a,this._refreshOwner(),this._invalidateEditor())},isWritable:function(){return this._editable&&!this._readOnly},canUpdate:function(){return!this._readOnly&&this._updatable},canInsert:function(){return!this._readOnly&&this._insertable},canAppend:function(){return!this._readOnly&&this._appendable},canDelete:function(){return!this._readOnly&&this._deletable}}),Ij=Xa("EditorOptions",Fj,{init:function(a){this._super(a)},yearDisplayFormat:"{Y}년",monthDisplayFormat:"{M}월",months:null,weekDays:null,viewGridInside:!1,useCssStyle:!1,useCssStyleDropDownList:!1,useCssStyleDatePicker:!1,useCssStylePopupMenu:!1}),Jj=Xa("FixedOptions",Fj,{init:function(a){this._super(a),this._styles=new ng(this,"fixedBody"),this._rowBarStyles=new ng(this,"fixedRowBar"),this._colBarStyles=new ng(this,"fixedColumnBar")},colCount:0,rightColCount:0,rowCount:0,exceptFromFiltering:!0,exceptFromSorting:!0,editable:!0,rowEditable:!0,resizable:!1,rowResizable:!1,movable:!1,colBarWidth:3,rowBarHeight:3,ignoreColumnStyles:!1,ignoreDynamicStyles:!1,styles:null,rowBarStyles:null,colBarStyles:null,onStyleChanged:null,setColCount:function(a){a=Math.max(0,a),a!=this._colCount&&(this._colCount=a,this._grid&&this._grid.$_rowGroupFooterMergeChanged(),this._grid&&this._grid.$_footerMergeChanged(),this._refreshOwner())},setRightColCount:function(a){a=Math.max(0,a),a!=this._rightColCount&&(this._rightColCount=a,this._grid&&this._grid.$_rowGroupFooterMergeChanged(),this._grid&&this._grid.$_footerMergeChanged(),this._refreshOwner())},setRowCount:function(a){a=Math.max(0,a),a!=this._rowCount&&(this._rowCount=a,this.$_resetItemSource())},setEditable:function(a){a!=this._editable&&(this._editable=a,this._refreshOwner())},setRowEditable:function(a){a!=this._rowEditable&&(this._rowEditable=a,this._refreshOwner())},setExceptFromFiltering:function(a){a!=this._exceptFromFiltering&&(this._exceptFromFiltering=a,this.$_resetItemSource())},setExceptFromSorting:function(a){a!=this._exceptFromSorting&&(this._exceptFromSorting=a,this.$_resetItemSource())},setIgnoreColumnStyles:function(a){a!=this._ignoreColumnStyles&&(this._ignoreColumnStyles=a,this._refreshOwner())},setIgnoreDynamicStyles:function(a){a!=this._ignoreDynamicStyles&&(this._ignoreDynamicStyles=a,this._refreshOwner())},setColBarWidth:function(a){a=Math.max(0,a),a!=this._colBarWidth&&(this._colBarWidth=a,this._refreshOwner())},setRowBarHeight:function(a){a=Math.max(0,a),a!=this._rowBarHeight&&(this._rowBarHeight=a,this._refreshOwner())},$_resetItemSource:function(){var a,b=this.grid();b&&(a=b.itemSource())&&a.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},stylesChanged:function(a){this._refreshOwner()}}),Kj=Xa("SelectOptions",Fj,{init:function(a){this._super(a),this._maskStyles=new ng(this,"selectMask"),this._mobileStyles=new ng(this,"mobileSelection",{background:new yd(268435456),border:new Dd(4281545523,2),figureBackground:new yd(4281545523),figureBorder:new Dd(4292730333,1)})},rangeSelect:!0,mode:{init:Ge.SINGLE,set:function(a){this._mode=a,this.grid().clearSelection()}},style:{init:He.BLOCK,set:function(a){if(a!=this._style){var b=this.grid(),c=b.selections();c.count>0&&(item=c.getItem(0),rng=item.getBounds(),c.clear(),a!=He.NONE&&(c.setItemStyle(a),c.add(b.getIndex(rng.R1(),rng.C1()),b.getIndex(rng.R1,rng.C1),a))),this._style=a}}},maskStyles:{set:function(a){a!==this._maskStyles&&(this._maskStyles.extend(a),this._refreshOwner())}},mobileStyles:{set:function(a){a!==this._mobileStyles&&(this._mobileStyles.extend(a),this._refreshOwner())}},proxy:function(){var a=this._super();return a.mobileStyles={background:ng.getFillText(this._mobileStyles.background()),border:ng.getStrokeText(this._mobileStyles.border()),figureBackground:ng.getFillText(this._mobileStyles.figureBackground()),figureBorder:ng.getStrokeText(this._mobileStyles.figureBorder())},a}}),Lj=Xa("SortHandleImageOptions",null,{init:function(a){this._super(),a&&this.assign(a)},ascending:null,descending:null,hoveredAscending:null,hoveredDescending:null,none:null,hoveredNone:null,loadImages:function(a){a.getImage(this._ascending),a.getImage(this._descending),a.getImage(this._hoveredAscending),a.getImage(this._hoveredDescending),a.getImage(this._none),a.getImage(this._hoveredNone)}}),Mj=Xa("SortingOptions",Fj,{init:function(a){this._super(a),this._toast=new Tg,this._toast._visible=!1,this._toast._message="Sorting...",this._handleImages=new Lj},enabled:!0,style:se.EXCLUSIVE,handleVisibility:qe.VISIBLE,handleColor:void 0,handleNoneColor:void 0,hoveredHandleColor:void 0,hoveredHandleNoneColor:void 0,handleBorderColor:void 0,imageHandle:!1,handleImages:null,commitBeforeSorting:!0,toast:null,keepFocusedRow:!1,textCase:ue.SENSITIVE,setHandleVisibility:function(a){a!=this._handleVisibility&&(this._handleVisibility=a,this._refreshOwner())},setHandleColor:function(a){a!=this._handleColor&&(this._handleColor=a,this._handleFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHandleNoneColor:function(a){a!=this._handleNoneColor&&(this._handleNoneColor=a,this._handleNoneFill=a?new yd(a):yd.EMPTY,this._refreshOwner())},setHoveredHandleColor:function(a){a!=this._hoveredHandleColor&&(this._hoveredHandleColor=a,this._hoveredHandleFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHoveredHandleNoneColor:function(a){a!=this._hoveredHandleNoneColor&&(this._hoveredHandleNoneColor=a,this._hoveredHandleNoneFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHandleBorderColor:function(a){a!=this._handleBorderColor&&(this._handleBorderColor=a,this._handleBorderPen=a?new Dd(a):Dd.GRAY,this._refreshOwner())},handleFill:function(){return this._handleFill},handleNoneFill:function(){return this._handleNoneFill},setToast:function(a){a!=this._toast&&this._toast.assign(a)},setHandleImages:function(a){this._handleImages.assign(a)}}),Nj=Xa("FilterSelectorOptions",null,{init:function(a){this._super(),this._styles=new ng("filterSelectorStyles"),a&&this.assign(a)},minWidth:null,maxWidth:null,minHeight:null,maxHeight:null,styles:null,closeWhenClick:!1,setMinWidth:function(a){this._minWidth=a?pd.createFrom(a):void 0},setMaxWidth:function(a){this._maxWidth=a?pd.createFrom(a):void 0},setMinHeight:function(a){this._minHeight=a?pd.createFrom(a):void 0},setMaxHeight:function(a){this._maxHeight=a?pd.createFrom(a):void 0},getMinWidth:function(a){return this._minWidth?this._minWidth.getSize(a):void 0},getMaxWidth:function(a){return this._maxWidth?this._maxWidth.getSize(a):void 0},getMinHeight:function(a){return this._minHeight?this._minHeight.getSize(a):void 0},getMaxHeight:function(a){return this._maxHeight?this._maxHeight.getSize(a):void 0}}),Oj=Xa("FilterHandleImageOptions",null,{init:function(a){this._super(),a&&this.assign(a)},none:null,fill:null,hoveredNone:null,hoveredFill:null,loadImages:function(a){a.getImage(this._none),a.getImage(this._fill),a.getImage(this._hoveredNone),a.getImage(this._hoveredFill)}}),Pj=Xa("FilteringOptions",Fj,{init:function(a){this._super(a),this._selector=new Nj,this._handleImages=new Oj,this._toast=new Tg,this._toast._visible=!1,this._toast._message="Filtering..."},enabled:!0,handleVisibility:qe.VISIBLE,handleColor:void 0,handleNoneColor:void 0,hoveredHandleColor:void 0,hoveredHandleNoneColor:void 0,handleBorderColor:void 0,imageHandle:!1,handleImages:null,commitBeforeFiltering:!0,selector:null,toast:null,addParentNodeOnFiltering:!0,setSelector:function(a){this._selector.assign(a)},setToast:function(a){this._toast.assign(a)},setHandleImages:function(a){this._handleImages.assign(a)},setHandleColor:function(a){a!=this._handleColor&&(this._handleColor=a,this._handleFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHandleNoneColor:function(a){a!=this._handleNoneColor&&(this._handleNoneColor=a,this._handleNoneFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHoveredHandleColor:function(a){a!=this._hoveredHandleColor&&(this._hoveredHandleColor=a,this._hoveredHandleFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHoveredHandleNoneColor:function(a){a!=this._hoveredHandleNoneColor&&(this._hoveredHandleNoneColor=a,this._hoveredHandleNoneFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHandleBorderColor:function(a){a!=this._handleBorderColor&&(this._handleBorderColor=a,this._handleBorderPen=a?new Dd(a):Dd.GRAY,this._refreshOwner())},setAddParentNodeOnFiltering:function(a){if(a!=this._addParentNodeOnFiltering){this._addParentNodeOnFiltering=a;var b=this.grid();if(b&&b instanceof po){var c=b._items;c&&c instanceof go&&(c._addParentNodeOnFiltering=a,b.applyFilters())}}}}),Qj=Xa("HeaderCheckImageOptions",null,{init:function(a){this._super(),a&&this.assign(a)},none:void 0,fill:void 0,hoveredNone:void 0,hoveredFill:void 0,loadImages:function(a){a.getImage(this._none),a.getImage(this._fill),a.getImage(this._hoveredNone),a.getImage(this._hoveredFill)}}),Rj=Xa("ColumnHeaderOptions",Fj,{init:function(a){this._super(a),this._checkImages=new Qj},checkVisibility:qe.ALWAYS,imageCheckHandle:!1,checkImages:null,checkColor:void 0,checkNoneColor:void 0,hoveredCheckColor:void 0,hoveredCheckNoneColor:void 0,checkBorderColor:void 0,setCheckVisibility:function(a){a!=this._checkVisibility&&(this._checkVisibility=a,this._refreshOwner())},setCheckImages:function(a){this._checkImages.assign(a)},setCheckColor:function(a){a!=this._checkColor&&(this._checkColor=a,this._checkFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setCheckNoneColor:function(a){a!=this._checkNoneColor&&(this._checkNoneColor=a,this._checkNoneFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHoveredCheckColor:function(a){a!=this._hoveredCheckColor&&(this._hoveredCheckColor=a,this._hoveredCheckFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setHoveredCheckNoneColor:function(a){a!=this._hoveredCheckNoneColor&&(this._hoveredCheckNoneColor=a,this._hoveredCheckNoneFill=a?new yd(a):yd.GRAY,this._refreshOwner())},setCheckBorderColor:function(a){a!=this._checkBorderColor&&(this._checkBorderColor=a,this._checkBorderPen=a?new Dd(a):Dd.GRAY,this._refreshOwner())}}),Sj=Xa("GroupingOptions",Fj,{init:function(a){this._super(a),this._toast=new Tg,this._toast._visible=!1,this._toast._message="Grouping..."},enabled:!0,prompt:"컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",linear:!1,expandWhenGrouping:!0,summarizing:!0,commitBeforeGrouping:!0,commitBeforeExpand:!0,commitBeforeCollapse:!0,fixMergedColumns:!0,toast:null,removeIncludeLower:!1,setToast:function(a){a!=this._toast&&this._toast.assign(a)},propertyChanged:function(){this.grid().groupingOptionsChanged(),this._layoutOwner()}}),Tj=Xa("CopyOptions",null,{init:function(){this._super(),this._dateWriter=null,this._boolWriter=null},enabled:!0,singleMode:!1,datetimeFormat:null,booleanFormat:null,lookupDisplay:!1,dateWriter:function(){return this._dateWriter},boolWriter:function(){return this._boolWriter},setDatetimeFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a,a?this._dateWriter=new Db(a):this._dateWriter=null)},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?this._boolWriter=new lb(a):this._boolWriter=null)}}),Uj=Xa("PasteOptions",null,{init:function(){this._super(),this._boolReader=null,this._dateReaders=null,this._numberCharExp=null},enabled:!0,singleMode:!1,startEdit:!0,commitEdit:!0,enableAppend:!0,fillFieldDefaults:!1,fillColumnDefaults:!1,forceRowValidation:!1,forceColumnValidation:!1,datetimeFormats:null,booleanFormat:null,numberChars:null,selectionBase:!1,stopOnError:!0,noEditEvent:!1,eventEachRow:!1,checkReadOnly:!1,setDatetimeFormats:function(a){if(a!=this._datetimeFormats)if(s(a)?this._datetimeFormats=a.concat():a?this._datetimeFormats=[a]:this._datetimeFormats=null,this._datetimeFormats){this._dateReaders=[];for(var b=0;b<this._datetimeFormats.length;b++)this._dateReaders.push(new Lb(this._datetimeFormats[b]))}else this._dateReaders=null},dateReaders:function(){return this._dateReaders;
},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?this._boolReader=new mb(a):this._boolReader=null)},boolReader:function(){return this._boolReader},setNumberChars:function(a){if(a!=this._numberChars)if(this._numberChars=a,a&&a.length>0){for(var b="[",c=0;c<a.length;c++){var d=a[c];b+="\\"==d?"\\"+d:d}b+="]",this._numberCharExp=new RegExp(b,"g")}else this._numberCharExp=null},numberCharExp:function(){return this._numberCharExp}}),Vj=Xa("ColumnSummary",hh,{init:function(a){this._super(),this._column=a,this._styles=new ng(this,"columnSummaryStyles"),this._groupStyles=new ng(this,"columnRowGroupSummaryStyles"),this._dynamicStyles=new Jg(this),this._groupDynamicStyles=new Jg(this),this._exprNode=void 0,this._groupExprNode=void 0,this._dirty=!1},stylesChanged:function(a){this._changed()},styles:null,groupStyles:null,text:null,expression:null,groupText:null,groupExpression:null,dynamicStyles:null,groupDynamicStyles:null,callback:null,groupCallback:null,column:function(){return this._column},isDirty:function(){return this._dirty},setText:function(a){a!=this._text&&(this._text=a,this._changed())},setGroupText:function(a){a!=this._groupText&&(this._groupText=a,this._changed())},setStyles:function(a){a!==this._styles&&this._styles.extend(a)},setGroupStyles:function(a){a!==this._groupStyles&&this._groupStyles.extend(a)},setExpression:function(a){a=La(a),a!=this._expression&&(this._expression=a,a?this._exprNode=vc.Default.parse(a):this._exprNode=void 0,this._changed())},setGroupExpression:function(a){a=La(a),a!=this._groupExpression&&(this._groupExpression=a,a?this._groupExprNode=vc.Default.parse(a):this._groupExprNode=void 0,this._changed())},setDynamicStyles:function(a){this._dynamicStyles.setItems(a),this._changed()},setGroupDynamicStyles:function(a){this._groupDynamicStyles.setItems(a),this._changed()},clean:function(){this._dirty=!1},capitalIndexers:function(){return null},evaluate:function(a){return this._exprNode&&this._exprNode.evaluate(a)},evaluateGroup:function(a){return this._groupExprNode&&this._groupExprNode.evaluate(a)},_changed:function(){this._dirty||(this.dirty=!0,this._column&&this._column._footerChanged&&this._column._footerChanged())}}),Wj=Xa("ColumnHeaderSummary",Vj,{init:function(a){this._super(a._column)}}),Xj=Xa("ColumnHeader",hh,{init:function(a){ih.init.call(this),this._column=a,this._summary=new Wj(this),this._styles=new ng(this,"columnHeaderStyles"),this._subStyles=new ng(this,"columnHeaderSubStyles"),this._dirty=!1},stylesChanged:function(){this._changed()},summary:null,styles:null,subStyles:null,text:null,subText:null,subTextGap:void 0,itemOffset:void 0,itemGap:void 0,subTextLocation:void 0,imageIndex:-1,imageUrl:null,checkLocation:Ke.NONE,imageLocation:Ke.NONE,clickBehavior:pe.NONE,showTooltip:!0,tooltip:null,fixedHeight:0,column:function(){return this._column},setSummary:function(a){a!=this._summary&&(this._summary.assign(a),this._changed())},setStyles:function(a){a!==this._styles&&this._styles.extend(a)},setSubStyles:function(a){a!==this._subStyles&&this._subStyles.extend(a)},displayText:function(){var a=this._text;if(!a&&this._column instanceof rk){var b=this._column.getField();a=b?b.header()||b.orgFieldName():this._column.fieldName()}return a||(a=this._column.name()),a},clean:function(){this._dirty=!1},_changed:function(){this._dirty||(this.dirty=!0,this._column&&this._column._headerChanged())}}),Yj=Xa("ColumnFooter",Vj,{init:function(a){this._super(a)}}),Zj=Xa("Column",null,{init:function(a){this._super(),this._initColumn(),a&&this.assign(a)},_initColumn:function(){this._header=this._createHeader(),this._styles=new ng(this,"columnStyles"),this._index=-1,this._layoutRect=new kd,this._orgWidth=NaN,this._groupWidth=NaN,this._displayOffset=NaN,this._displayWidth=NaN,this._fitOffset=NaN,this._fitWidth=NaN,this._measuredHeight=-1,this._dataRoot=null,this._distance=0,this._value=ta,this._states={},this._parent=null,this.$_grid=null,this.$_fixed=!1,this.$_rightFixed=!1},stylesChanged:function(a){this._changed()},header:null,styles:null,dirty:!1,name:null,tag:null,visible:!0,width:100,height:0,saveWidth:NaN,fillWidth:0,fillHeight:0,thickness:1,resizable:!0,movable:!0,styleName:null,displayIndex:-1,checked:!1,grid:function(){return this.$_grid||(this._parent?this._parent.grid():null)},parent:function(){return this._parent},setParent:function(a){if(a!=this._parent){this._parent&&this._parent._removeInternal(this),a&&a._addInternal(this);var b=this.grid();b&&b._columnsReset()}},group:function(){return this._parent instanceof gm?null:this._parent},root:function(){var a=this.group();return a?a.root():this},isRoot:function(){return this===this.root()},dataRoot:function(){return this._dataRoot},isDataRoot:function(){return this._dataRoot===this},isDirty:function(){return this._dirty||this._header._isDirty},setHeader:function(a){"string"==typeof a&&(a={text:a}),this._header.assign(a)},setVisible:function(a){a!=this._visible&&(this._visible=a,this._invalidateSize(),this._invalidateVisible())},setWidth:function(a){a=Math.max(0,a),a!=this._width&&(this._width=a,(!this.group()||isNaN(this._groupWidth))&&(this._displayWidth=this._groupWidth=a),this._invalidateSize())},setHeight:function(a){a=Math.max(0,Na(a)),a!=this._height&&(this._height=a,this._changed())},setFillWidth:function(a){a=Math.max(0,Na(a)),a!=this._fillWidth&&(this._fillWidth=a,this._changed())},setFillHeight:function(a){a=Math.max(0,Na(a)),a!=this._fillHeight&&(this._fillHeight=a,this._changed())},groupWidth:function(){return this._groupWidth},displayOffset:function(){return isNaN(this._fitOffset)?this._displayOffset:this._fitOffset},displayWidth:{get:function(){return isNaN(this._fitWidth)?this._displayWidth:Na(this._fitWidth)},set:function(a){a=Math.max(0,a);var b=this.displayWidth();isNaN(b)&&(b=0),isNaN(a)||a==b||ak.changeWidth(this,a-b)}},saveWidth_:function(){return isNaN(this._fitWidth)?this._groupWidth:this._fitWidth},setSaveWidth:function(a){this._saveWidth=a},measuredHeight:function(){return this._measuredHeight},index:function(){return this._index},displayIndex_:function(){return this._visible?this._displayIndex:-1},setDisplayIndex:function(a){this._parent&&(0>a?this.setVisible(!1):(a=Math.min(a,this._parent.visibleCount()-1),this._parent.setVisibleIndex(this,a)))},setStyles:function(a){a!==this._styles&&(this._styles.extend(a),this._changed())},setChecked:function(a){if(a!=this._checked){this._checked=a,this._changed();var b=this.grid();b&&b._columnCheckedChanged(this)}},distance:function(){return this._distance},displayText:function(){return this._name?this._name:this.header()?this.header().text():"col:"+this._index},isFixed:function(){return this.$_fixed},isRightFixed:function(){return this.$_rightFixed},prepare:function(a,b,c){this.$_grid=a,this.$_fixed=b,this.$_rightFixed=c},clean:function(){this._dirty=!1,this._header.clean()},$_getOffset:function(){for(var a=0,b=this,c=b.group();c;)a+=b._displayOffset,b=c,c=c.group();return a},stateFor:function(a){return this._states[a]},setState:function(a,b){this._states[a]=b},propertyChanged:function(){this._changed()},_setParent:function(a){a!=this._parent&&(a&&a._columnRemoved(this),this._parent=a,a&&a._columnAdded(this),this._parentChanged())},_parentChanged:function(){},_createHeader:function(){return new Xj(this)},_headerChanged:function(){this._changed()},_invalidateSize:function(){var a=this.grid();a&&(this._dirty=!0,a.invalidateColumnWidths())},_invalidateVisible:function(){var a=this.grid();a&&a._columnVisibleIndexChanged(this)},_changed:function(){if(!this._dirty){this._dirty=!0;var a=this.grid();a&&a.invalidateColumns()}},checkGroupExist:function(a){for(var b=this,c=b.group();c;){if(!a||c.orientation()===a)return!0;c=c.group()}return!1}},{compareLoc:function(a,b){if(null==a||null==b)return 0;if(null==a)return-1;if(null==b)return 1;var c=a.root().displayIndex(),d=b.root().displayIndex();return c==d&&(a.group()==b.group()?(c=a.displayIndex(),d=b.displayIndex()):(c=a.dataRoot().displayIndex(),d=b.dataRoot().displayIndex())),c-d}});Zj.MIN_WIDTH=2;var $j=Zj.prototype,_j=Xa("ColumnGroupHeader",Xj,{init:function(a){this._super(a),this._fillHeight=0},stylesChanged:function(a){this._changed()},visible:!0,group:function(){return this._column}}),ak=Xa("ColumnGroup",Zj,{init:function(a){this._super(a)},_initColumn:function(){this._super(),this._columns=new ok(this),this._sum=ta},orientation:oe.HORIZONTAL,hideChildHeaders:!1,columns:null,setOrientation:function(a){a=a==oe.VERTICAL?a:oe.HORIZONTAL,a!=this._orientation&&(this._orientation=a,this.resetGroupWidths(),this._changed())},columns_:function(){return this._columns.items()},setColumns:function(a){var b,c,d,e=this._columns;if(e.clear(),a&&(c=a.length)>0){for(b=0;c>b;b++)d=a[b],d instanceof Zj?e.indexOf(d)<0&&this._columns.add(d):(d=em.createColumn(d),this._columns.add(d));this.$_attachChildren()}this.grid()&&this.grid()._columnsReset(this)},visibleItems:function(){return this._columns.visibleItems()},getOrderedColumns:function(){return this._columns.getOrderedColumns()},dataLevel:function(){return this._dataLevel},headerLevel:function(){return this._headerLevel},count:function(){return this._columns.count()},visibleCount:function(){return this._columns.visibleCount()},isVertical:function(){return this._orientation==oe.VERTICAL},isHorizontal:function(){return this._orientation!=oe.VERTICAL},first:function(){return gk(this)||this},last:function(){return hk(this)||this},getItem:function(a){return this._columns.getItem(a)},getVisibleItem:function(a){if(0>a||a>=this._columns.visibleCount())throw"Invalid visible index: "+a;return this._columns.getVisibleItem(a)},isAncestorOf:function(a){if(a&&a!==this)for(var b=a._parent;b;){if(b===this)return!0;b=b._parent}return!1},setChildrenProperty:function(a,b,c,d){this._columns.setChildrenProperty(a,b,c,d)},calcHeaderLevels:function(){var a=this.header().isVisible()?1:0;if(!this._hideChildHeaders){var b,c,d=this.visibleCount(),e=0;if(d>0)if(this.isHorizontal())for(e=1,b=0;d>b;b++)c=this.getVisibleItem(b),c instanceof ak&&(e=Math.max(e,c.calcHeaderLevels()));else for(b=0;d>b;b++)c=this.getVisibleItem(b),c instanceof ak?e+=c.calcHeaderLevels():e++;a+=e}return this._headerLevel=a},calcDataLevels:function(){var a,b,c=this._columns,d=0,e=this.visibleCount(),f=0;if(e>0)if(this.isHorizontal())for(f=1,a=0;e>a;a++)b=c.getVisibleItem(a),b instanceof ak&&(f=Math.max(f,b.calcDataLevels()));else for(a=0;e>a;a++)b=c.getVisibleItem(a),b instanceof ak?f+=b.calcDataLevels():f++;return this._dataLevel=d+f},calcHorz:function(){var a,b,c=this.visibleCount(),d=1;if(c>=1)if(this.isVertical())for(d=1,b=0;c>b;b++)a=this.getVisibleItem(b),a instanceof ak&&(d=Math.max(d,a.calcHorz()));else for(d=0,b=0;c>b;b++)a=this.getVisibleItem(b),a instanceof ak?d+=Math.max(1,a.calcHorz()):d++;return d},right:function(a){if(this.isHorizontal())try{var b=this._checkVisible(a);if(b<this.visibleCount()-1)return a=ik(this,b+1)}catch(c){}return null},left:function(a){if(this.isHorizontal())try{var b=this._checkVisible(a);if(b>0)return a=jk(this,b-1)}catch(c){}return null},next:function(a){try{var b=this._checkVisible(a);if(b<this.visibleCount()-1)return a=kk(this,b+1)}catch(c){}return null},prev:function(a){try{var b=this._checkVisible(a);if(b>0)return a=lk(this,b-1)}catch(c){}return null},lower:function(a){if(this.isVertical())try{var b=this._checkVisible(a);if(b<this.count()-1)return a=mk(this,b+1)}catch(c){}return null},upper:function(a){if(this.isVertical())try{var b=this._checkVisible(a);if(b>0)return a=nk(this,b-1)}catch(c){}return null},getDataColumn:function(a){for(var b=0,c=this.count();c>b;b++){var d=this.getItem(b);if(d instanceof rk){if(d.dataIndex()==a)return d}else if(d instanceof ak&&(d=d.getDataColumn(a)))return d}return null},columnAtPoint:function(a,b){var c,d,e,f=this.visibleCount();if(this.isVertical()){for(c=0;f>c;c++)if(d=this.getVisibleItem(c),b<d._layoutRect.bottom())return e=ab(d,ak),e?(b-=d._layoutRect.y,e.columnAtPoint(a,b)):d}else for(c=0;f>c;c++)if(d=this.getVisibleItem(c),a<d._layoutRect.right())return e=ab(d,ak),e?(a-=d._layoutRect.x,e.columnAtPoint(a,b)):d;return this},_addInternal:function(a){return a instanceof Zj||(a=em.createColumn(a)),!a||a instanceof ak&&a.isAncestorOf(this)||a.parent()===this?-1:this._columns.add(a)},add:function(a){var b,c=this._addInternal(a);return c>=0&&(b=this.grid())&&b._columnsReset(this),c},_removeInternal:function(a){var b=this._columns.indexOf(a);return b>=0?(this._columns.removeAt(b),!0):!1},remove:function(a){if(this._removeInternal(a)){var b=this.grid();return b&&b._columnsReset(this),!0}return!1},removeAt:function(a){if(a>=0&&a<this.count()){this._columns.removeAt(a);var b=this.grid();return b&&b._columnsReset(this),!0}return!1},clear:function(){if(this.count()>0){this._columns.clear();var a=this.grid();a&&a._columnsReset(this)}},setChildIndex:function(a,b){var c=this.grid();a&&a.parent()===this&&a.index()!=b&&this._columns.move(a,b)&&c&&c._columnIndexChanged(a)},setVisibleIndex:function(a,b){var c=this.grid();a&&a.parent()===this&&this._columns.moveVisible(a,b)&&c&&c._columnVisibleIndexChanged(a)},initGroupWidths:function(){var a=this._columns.count();if(!(1>a))for(var b=0;a>b;b++){var c=this._columns.getItem(b);c._displayWidth=c._groupWidth=NaN,c instanceof ak&&c.initGroupWidths()}},restoreGroupWidths:function(){var a=this._columns.count();if(!(1>a)){var b,c,d,e,f,g=this._groupWidth;if(this.isVertical())for(d=0;a>d;d++)b=this._columns.getItem(d),b._displayWidth=b._groupWidth=g,b._displayOffset=0;else{for(c=0,d=0;a>d;d++)b=this._columns.getItem(d),c+=b._displayWidth=isNaN(b._saveWidth)?b._groupWidth:b._saveWidth;for(f=0,d=0;a-1>d;d++)b=this._columns.getItem(d),e=b._displayWidth*g/c,b._groupWidth=e,b._displayOffset=Na(f),f+=e,b._displayWidth=Na(f)-b._displayOffset;b=this._columns.getItem(a-1),e=g-f,b._groupWidth=e,b._displayOffset=Na(f),b._displayWidth=Na(f+e)-b._displayOffset}for(d=0;a>d;d++)b=this._columns.getItem(d),b instanceof ak&&b.restoreGroupWidths()}},resetGroupWidths:function(){var a=this._columns.visibleCount();if(!(1>a)){var b,c,d,e,f,g=this._groupWidth;if(this.isVertical())for(b=0;a>b;b++)c=this._columns.getVisibleItem(b),c._displayWidth=c._groupWidth=g,c._displayOffset=0;else{for(d=0,b=0;a>b;b++)c=this._columns.getVisibleItem(b),d+=c._displayWidth=c._width;for(f=0,b=0;a-1>b;b++)c=this._columns.getVisibleItem(b),e=g*c._displayWidth/d,c._groupWidth=e,c._displayOffset=Na(f),f+=e,c._displayWidth=Na(f)-c._displayOffset;c=this._columns.getVisibleItem(a-1),e=g-f,c._groupWidth=e,c._displayOffset=Na(f),c._displayWidth=Na(f+e)-c._displayOffset}for(b=0;a>b;b++)c=this._columns.getItem(b),c instanceof ak&&c.resetGroupWidths()}},collectColumns:function(a,b){for(var c=0,d=this._columns.count();d>c;c++){var e=this._columns.getItem(c);b&&e instanceof ak||a.push(e),e instanceof ak&&e.collectColumns(a,b)}},collectGroups:function(a){for(var b=0,c=this._columns.count();c>b;b++){var d=ab(this._columns.getItem(b),ak);d&&(a.push(d),d.collectGroups(a))}},collectColumnNames:function(a,b){for(var c=0,d=this._columns.count();d>c;c++){var e,f=this._columns.getItem(c);!f||!(e=f.name())||b&&f instanceof ak||a.push(e),f instanceof ak&&f.collectColumnNames(a,b)}return a},collectGroupNames:function(a){for(var b=0,c=this._columns.count();c>b;b++){var d=this._columns.getItem(b);if(d instanceof ak){var e=d.name();e&&a.push(e),d.collectGroupNames(a)}}return a},clearMergeGrouped:function(){var a,b,c=this._columns.count();for(a=0;c>a;a++)b=this._columns.getItem(a),b instanceof rk&&b._setMergeGrouped(!1),b instanceof ak&&b.clearMergeGrouped()},columnByName:function(a){return this._columns.columnByName(a)},valueColumnByName:function(a){return this._columns.valueColumnByName(a)},columnByField:function(a){if(a>=0){var b,c,d=this._columns.count();for(b=0;d>b;b++){if(c=this._columns.getItem(b),c instanceof rk&&c.fieldName()&&c.dataIndex()==a)return c;if(c instanceof ak&&(c=c.columnByField(a)))return c}}return null},columnByFieldName:function(a){if(a){var b,c,d=a.toLowerCase(),e=this._columns.count();for(b=0;e>b;b++){if(c=this._columns.getItem(b),c instanceof rk&&c.fieldName()&&c.fieldName().toLowerCase()==d)return c;if(c instanceof ak&&(c=c.columnByFieldName(a)))return c}}return null},collectColumnsByFieldName:function(a,b){if(a){var c,d,e=a.toLowerCase(),f=this._columns.count();for(c=0;f>c;c++)d=this._columns.getItem(c),d instanceof rk&&d.fieldName()&&d.fieldName().toLowerCase()==e&&b.push(d),d instanceof ak&&d.collectColumnsByFieldName(a,b)}},columnByTag:function(a){if(a){var b,c,d=this._columns.count();for(b=0;d>b;b++){if(c=this._columns.getItem(b),c.tag()==a)return c;if(c instanceof ak&&(c=c.columnByTag(a)))return c}}return null},collectColumnsByTag:function(a,b){if(a){var c,d,e=this._columns.count();for(c=0;e>c;c++)d=this._columns.getItem(c),d.tag()==a&&b.push(d),d instanceof ak&&d.collectColumnsByTag(a,b)}},getLeafItems:function(a){a=arguments.length>0?a:!0;var b=[];return ck(this,b,a),b},getHorzColumns:function(a,b){var c=[],d=void 0!=a&&void 0!=b?a+b-1:void 0;return dk(this,c,a,d),c},getValueColumns:function(a){a=arguments.length>0?a:!0;var b=[];return ek(this,b,a),b},getDataColumns:function(a){a=arguments.length>0?a:!0;var b=[];return fk(this,b,a),b},clearFitWidths:function(){this._columns.$_clearFitWidths()},resetFitWidths:function(){var a=this._columns.visibleCount();if(!(1>a)){var b,c,d,e,f,g=0,h=this._fitWidth;if(this.isHorizontal()){for(b=0;a>b;b++)e=this._columns.getVisibleItem(b),g+=e._groupWidth;for(d=0,b=0;a-1>b;b++)e=this._columns.getVisibleItem(b),c=e._groupWidth*h/g,e._fitWidth=c,e._fitOffset=d,d+=c;e=this._columns.getVisibleItem(a-1),c=h-d,e._fitWidth=c,e._fitOffset=d}else for(b=0;a>b;b++)e=this._columns.getVisibleItem(b),e._fitWidth=this._fitWidth,e._fitOffset=0;for(b=0;a>b;b++)f=ab(this._columns.getVisibleItem(b),ak),f&&f.resetFitWidths()}},_createHeader:function(){return new _j(this)},clean:function(){this._super();for(var a=this.count();a--;)this.getItem(a).clean()},$_attachChildren:function(){var a,b,c=this.count();for(a=0;c>a;a++)b=this.getItem(a),b._setParent(this),b instanceof ak&&b.$_attachChildren()},_columnAdded:function(a){},_columnRemoved:function(a){},initVisibles:function(){this._columns.$_initVisibles()},resetVisibles:function(){this._columns.$_resetVisibles()},resetStates:function(){this._columns.$_resetStates(this.grid())},resetIndicies:function(a){this._columns.$_resetIndicies(a)},_checkVisible:function(a){var b;if(!a||(b=a._displayIndex)<0||a!==this.getVisibleItem(b))throw new Error("Column is not a visible group member");return b},_clearSavedWidths:function(){for(var a=0,b=this.count();b>a;a++){var c=this.getItem(a);c._saveWidth=NaN,c instanceof ak&&c._clearSavedWidths()}},_saveOrgWidths:function(){for(var a=0,b=this.count();b>a;a++){var c=this.getItem(a);c._orgWidth=c.saveWidth(),c instanceof ak&&c._saveOrgWidths()}},_restoreOrgWidths:function(){for(var a=0,b=this.count();b>a;a++){var c=this.getItem(a);c._saveWidth=c._orgWidth,c instanceof ak&&c._restoreOrgWidths()}}},{getRight:function(a){var b=a&&a._parent;return b?(a=b.right(a),a||(a=ak.getRight(b)),a):null},getLeft:function(a){var b=a&&a._parent;return b?(a=b.left(a),a||(a=ak.getLeft(b)),a):null},getNext:function(a){var b=a&&a._parent;return b?(a=b.next(a),a||(a=ak.getNext(b)),a):null},getPrev:function(a){var b=a&&a._parent;return b?(a=b.prev(a),a||(a=ak.getPrev(b)),a):null},getLower:function(a){var b=a&&a._parent;return b?(a=b.lower(a),a||(a=ak.getLower(b)),a):null},getUpper:function(a){var b=a&&a._parent;return b?(a=b.upper(a),a||(a=ak.getUpper(b)),a):null},getTop:function(a){for(var b,c=null;a;){if(ak.isTop(a)){c=a;break}if(b=ak.getUpper(a),!b){c=a;break}a=b}if(c){var d=c.group();return d?c:c}return null},getBottom:function(a){for(var b,c=null;a;){if(ak.isBottom(a)){c=a;break}if(b=ak.getLower(a),!b){c=a;break}a=b}if(c){var d=c.group();return d?c:c}return null},isTop:function(a){for(var b=a&&a._parent;b;){if(b.isVertical()&&b.visibleCount()>1&&a._displayIndex>0)return!1;a=b,b=a._parent}return!0},isBottom:function(a){for(var b=a&&a._parent;b;){if(b.isVertical()&&b.visibleCount()>1&&a._displayIndex<b.visibleCount()-1)return!1;a=b,b=a._parent}return!0},isLeft:function(a){for(var b=a&&a._parent;b;){if(b.isHorizontal()&&b.visibleCount()>1&&a._displayIndex>0)return!1;a=b,b=a._parent}return!0},isRight:function(a){for(var b=a&&a._parent;b;){if(b.isVertical()&&b.visibleCount()>1&&a._displayIndex<b.visibleCount()-1)return!1;a=b,b=a._parent}return!0},getAncestors:function(a,b){b?b.length=0:b=[];for(var c=a._parent;c&&!(c instanceof gm);)b.push(c),c=c._parent;return b},getFirstDataRoot:function(a){var b,c=a.visibleCount();return 1>c?b=a:a.isVertical()&&c>1?b=a:(b=a.getVisibleItem(0),b instanceof ak&&(b=ak.getFirstDataRoot(b))),b},getLastDataRoot:function(a){var b,c=a.visibleCount();return 1>c?b=a:a.isVertical()&&c>1?b=a:(b=a.getVisibleItem(a.visibleCount()-1),b instanceof ak&&(b=ak.getLastDataRoot(b))),b},changeWidth2:function(a,b,c,d){if(a&&0!=b){d=isNaN(d)?0:Math.max(0,d);var e,f,g,h,i=a.parent(),j=0,k=b;if(c){var l=0;for(j=0,e=0,g=i.visibleCount();g>e;e++)j+=i.getVisibleItem(e)._groupWidth,l+=i.getVisibleItem(e)._fitWidth;k=b*(j/l),k=b>0?Math.max(1,k):Math.min(-1,k)}if(a.group()){var m,n;a._groupWidth=Math.max(d,a._groupWidth+k),a instanceof ak&&a.resetGroupWidths();var o=ak.getAncestors(a);for(e=0,g=o.length;g>e;e++){if(n=o[e],n.isVertical())for(n._groupWidth=a._groupWidth,m=0,h=n.count();h>m;m++)f=n.getItem(m),f!==a&&(f._groupWidth=a._groupWidth,f instanceof ak&&f.resetGroupWidths()),f._displayOffset=0;else{for(j=0,m=0,h=n.visibleCount();h>m;m++)f=n.getVisibleItem(m),f._displayOffset=Na(j),j+=f._groupWidth;n._groupWidth=j}n==a.root()?n.setWidth(n._groupWidth):a=n}}else a&&a.setWidth(Math.max(0,a._width+k))}},changeWidth:function(a,b,c,d){if(a&&0!=b&&(d=isNaN(d)?2:Math.max(0,d),!(a.displayWidth()+b<d))){var e,f,g,h,i=a.parent(),j=0,k=b;if(c){var l=0;for(j=0,e=0,g=i.visibleCount();g>e;e++)j+=i.getVisibleItem(e)._groupWidth,l+=i.getVisibleItem(e)._fitWidth;k=b*(j/l),k=b>0?Math.max(1,k):Math.min(-1,k)}if(f=a.group()){var m=ak.getAncestors(a);for(f.isVertical()||(h=a._groupWidth>0?a._width*k/a._groupWidth:0,a.setWidth(Math.max(0,a._width+h))),e=0;e<m.length-1;e++)f=m[e],h=f._groupWidth>0?f._width*k/f._groupWidth:0,f.setWidth(Math.max(0,f._width+h));for(f=m[m.length-1],f.setWidth(Math.max(0,Na(f._width+k))),e=m.length;e--;)f=m[e],f.resetGroupWidths();a instanceof ak&&a.resetGroupWidths()}else a&&a.setWidth(Math.max(0,a._width+k))}}}),bk=ak.prototype,ck=function(a,b,c){for(var d=c?a.visibleCount():a.count(),e=0;d>e;e++){var f=c?a.getVisibleItem(e):a.getItem(e);f._columns?ck(f,b):b.push(f)}},dk=function(a,b,c,d){if(a.isHorizontal()){var e=a.visibleCount();c=void 0==c?0:c,d=void 0==d?e-1:d;for(var f=0;e>f;f++)if(f>=c&&d>=f){var g=a.getVisibleItem(f);g._columns?dk(g,b):b.push(g)}}},ek=function(a,b,c){for(var d=c?a.visibleCount():a.count(),e=0;d>e;e++){var f=c?a.getVisibleItem(e):a.getItem(e);f instanceof pk?b.push(f):f instanceof ak&&ek(f,b,c)}},fk=function(a,b,c){for(var d=c?a.visibleCount():a.count(),e=0;d>e;e++){var f=c?a.getVisibleItem(e):a.getItem(e);f instanceof rk?b.push(f):f instanceof ak&&fk(f,b,c)}},gk=function(a){for(var b=a.visibleCount(),c=0;b>c;c++){var d=a.getVisibleItem(c);if(d instanceof pk)return d;if(d instanceof ak&&(d=gk(d),d instanceof pk))return d}return null},hk=function(a){for(var b=a.visibleCount()-1;b>=0;b--){var c=a.getVisibleItem(b);if(c instanceof pk)return c;if(c instanceof ak&&(c=hk(c),c instanceof pk))return c}return null},ik=function(a,b){for(var c=b,d=a.visibleCount();d>c;c++){var e=a.getVisibleItem(c);if(e instanceof pk)return e;if(e instanceof ak&&(e=e.first(),e instanceof pk))return e}return null},jk=function(a,b){for(var c=b;c>=0;c--){var d=a.getVisibleItem(c);if(d instanceof pk)return d;if(d instanceof ak&&(d=d.last(),d instanceof pk))return d}return null},kk=function(a,b){for(var c=b,d=a.visibleCount();d>c;c++){var e=a.getVisibleItem(c);if(e instanceof pk)return e;if(e instanceof ak&&(e=e.first(),e instanceof pk))return e}return null},lk=function(a,b){for(var c=b;c>=0;c--){var d=a.getVisibleItem(c);if(d instanceof pk)return d;if(d instanceof ak&&(d=d.last(),d instanceof pk))return d}return null},mk=function(a,b){for(var c=b,d=a.visibleCount();d>c;c++){var e=a.getVisibleItem(c);if(e instanceof pk)return e;if(e instanceof ak&&(e=e.first(),e instanceof pk))return e}return null},nk=function(a,b){for(var c=b;c>=0;c--){var d=a.getVisibleItem(c);if(d instanceof pk)return d;if(d instanceof ak&&(d=d.last(),d instanceof pk))return d}return null},ok=Xa("ColumnCollection",null,{init:function(a){this._super(),this._owner=a,this._items=[],this._visibles=[],this._orderedColumns=[]},owner:function(){return this._owner},grid:function(){return this._owner&&this._owner.grid()},count:function(){return this._items.length},items:function(){return this._items.slice()},setItems:function(a){var b=this._items,c=this._orderedColumns;if(b.length=c.length=0,a){for(var d=0,e=a.length;e>d;d++)b.push(a[d]),a[d]._setParent(this._owner);c=b.slice()}},visibleItems:function(){return this._visibles.slice()},getOrderedColumns:function(){return this._orderedColumns.slice()},visibleCount:function(){return this._visibles.length},getItem:function(a){return this._items[a]},getVisibleItem:function(a){return this._visibles[a]},clear:function(){this._items.length=this._visibles.length=this._orderedColumns.length=0},indexOf:function(a){return this._items.indexOf(a)},add:function(a){if(null==a)throw new Error("column is null");if(this.indexOf(a)>=0)throw new Error("column is already contained");return this._items.push(a),a._setParent(this._owner),this._orderedColumns.push(a),this._items.length},removeAt:function(a){if(0>a||a>=this._items.length)throw new Error("index is invalid: "+a);var b=this._items[a];this._items.splice(a,1);var c=this._orderedColumns.indexOf(b);c>=0&&this._orderedColumns.splice(c,1),b._setParent(null)},move:function(a,b){if(null==a)throw new Error("column is null");if(0>b||b>=this._items.length)throw new Error("newIndex is invalid: "+b);return a._parent!==this._owner||a._index==b?!1:(this._items.splice(a.index,1),this._items.splice(b,0,a),!0)},moveVisible:function(a,b){if(null==a)throw new Error("column is null");if(0>b||b>=this._items.length)return!1;if(a._parent===this._owner&&a._visible){if(!this.$_isVisible(a))return this.$_resetVisibles(!1),!0;var c=this._visibles,d=a._displayIndex;if(d!=b){c.splice(d,1),c.splice(b,0,a);var e=this._orderedColumns,f=e.indexOf(a);if(f>=0&&e.splice(f,1),e.splice(b,0,a),this.$_resetVisibles(!1),this._owner instanceof ak){var g=this._owner.grid&&this._owner.grid();g&&(g._columnWidthsDirty=!0)}return!0}}return!1},columnByName:function(a){if(a)for(var b=0,c=this._items.length;c>b;b++){var d=this._items[b];if(d.name()==a)return d;if(d instanceof ak&&(d=d._columns.columnByName(a)))return d}return null},valueColumnByName:function(a){if(a)for(var b=0,c=this._items.length;c>b;b++){var d=this._items[b];if(d instanceof ak){if(d=d._columns.valueColumnByName(a))return d}else if(d.name()==a)return d}return null},setChildrenProperty:function(a,b,c,d){for(var e=d?this._visibles:this._items,f=e.length;f--;){var g=e[f];g.setProperty(a,b),g instanceof ak&&g.setProperty(a,b,!0,!0)}},$_isVisible:function(a){return this._visibles.indexOf(a)>=0},$_initVisibles:function(){var a,b,c,d=this._items;for(a=0,b=d.length;b>a;a++)c=d[a],c._displayIndex=a,c instanceof ak&&c.initVisibles()},$_resetVisibles:function(a){arguments.length<1&&(a=!0);var b,c,d,e=function(a,b){for(var c=-1,d=0,e=a.length;e>d;d++)if(a[d]._visible&&c++,a[d]===b){var f=this.grid();if(b._parent instanceof gm&&!(b instanceof rk&&f.isGroupedColumn(b))){var g=f.isMergedRowGrouped&&f.isMergedRowGrouped()?f.rowGroupFields().length:0;return Math.max(c,g)}return c}return-1}.bind(this),f=this._items,g=this._visibles;for(orderedColumns=this._orderedColumns,b=g.length-1;b>=0;b--)d=g[b],(!d._visible||f.indexOf(d)<0)&&g.splice(b,1);for(b=0,c=f.length;c>b;b++)if(d=f[b],d._visible){if(!this.$_isVisible(d)){var h=e(this._orderedColumns,d);h=h>=0?h:d._displayIndex,h>=0?g.splice(Math.min(g.length,h),0,d):g.push(d)}d instanceof ak&&a&&d.resetVisibles()}for(b=g.length;b--;)g[b]._displayIndex=b},$_clearFitWidths:function(){for(var a=this._items.length;a--;){var b=this._items[a];b._fitWidth=NaN,b._fitOffset=NaN,b instanceof ak&&b.clearFitWidths()}},$_resetStates:function(a){var b,c,d,e,f,g=this._items,h=g.length,i=a.itemSource();for(b=0;h>b;b++)d=g[b],d instanceof rk&&d._setSortOrder(-1);if(i&&(e=a.getSortFields()))for(f=a.getSortDirections(),b=0;b<e.length;b++)for(c=0;h>c;c++)d=g[c],d instanceof rk&&d.dataIndex()==e[b]&&(d._setSortOrder(b),d.setSortDirection(f[b]));for(b=0;h>b;b++)d=g[b],d instanceof ak&&d.resetStates()},$_resetIndicies:function(a){var b,c,d=a.itemSource(),e=d&&d.dataSource(),f=this._items.length;for(b=0;f>b;b++)c=this._items[b],c._index=b,c instanceof rk?(c._resetDataIndex(e),c._resetImages(a)):c instanceof tk?c.resetIndicies(e):c instanceof ak&&c.resetIndicies(a)}}),pk=Xa("ValueColumn",Zj,{init:function(a){this._super(a)},_initColumn:function(){this._super(),this._footer=new Yj(this),this._rendererChanged=!1,this._rendererObj=null},footer:null,renderer:null,mergeRule:null,cursor:null,ignoreDefaultDynamicStyles:!1,blankWhenCopy:!1,blankWhenExport:!1,textInputCase:le.NORMAL,setFooter:function(a){this._footer.assign(a)},rendererObj:function(){return this._rendererObj||this._defaultRenderer()},setRenderer:function(a){this._renderer=a,this._rendererChanged=!0,this._changed()},setMergeRule:function(a){if(a!=this._mergeRule){a instanceof mj||(a=oj.createRule(a)),this._mergeRule=a;var b=this.grid();b&&b._columnMergeRuleChanged(this)}},isWritable:function(){return!1},canMerge:function(){return null!==this._mergeRule},assign:function(a){this._super(a)},prepare:function(a,b,c){$j.prepare.call(this,a,b,c);var d=a.delegate();this._rendererChanged&&(this._rendererObj=d.createRenderer(this._renderer),this._rendererChanged=!1)},clean:function(){this._super(),this._footer.clean()},_footerChanged:function(){this._changed()},_defaultRenderer:function(){return Zm.Default}}),qk=pk.prototype,rk=Xa("DataColumn",pk,{init:function(a){this._super(a)},_initColumn:function(){this._super(),this._dataIndex=-1,this._baseIndex=-1,this._valueType=ie.TEXT,this._sortOrder=-1,this._menu=null,this._images=null,this._lookupSource=null,this._lookupKeyFields=null,this._lookupKeyFieldIds=null,this._lookupMap=null,this._labelFieldIndex=-1,this._mergeGrouped=!1,this._editorOptions=null,this._filters=new Qg(this),this._filters.addListener(this),this._filterActions=[],this._dynamicStyles=new Jg(this),this._validations=new _g},capitalIndexers:function(){return rk.CAPITAL_INDEXERS},fieldIndex:-1,fieldName:null,editable:!0,readOnly:!1,sortable:!0,filterable:!0,sortDirection:te.ASCENDING,groupable:!0,button:we.NONE,alwaysShowButton:!1,alwaysShowEditButton:!1,buttonVisibility:xe.DEFAULT,editButtonVisibility:xe.DEFAULT,popupMenu:null,defaultValue:ta,required:!1,requiredMessage:null,requiredLevel:ze.ERROR,nanText:null,dynamicStyles:null,validations:null,autoFilter:!1,lookupDisplay:!1,lookupCase:ye.SENSITIVE,lookupValues:null,lookupLabels:null,labelField:null,lookupSourceId:null,lookupKeyFields:null,editor:null,imageList:null,equalBlank:!1,groupLevel:-1,filters:null,filterActions:null,error:null,errorLevel:ze.IGNORE,excelFormat:void 0,displayRegExp:null,displayReplace:null,setEditable:function(a){if(a!=this._editable){this._editable=a;var b=this.grid();b&&b._dataColumnChanged(this)}},setReadOnly:function(a){if(a!=this._readOnly){this._readOnly=a;var b=this.grid();b&&b._dataColumnChanged(this)}},alwaysShowButton_:function(){return this._buttonVisibility==xe.ALWAYS},setAlwaysShowButton:function(a){a?this.setButtonVisibility(xe.ALWAYS):this._buttonVisibility==xe.ALWAYS&&this.setButtonVisibility(xe.DEFAULT)},alwaysShowEditButton_:function(){return this._editButtonVisibility==xe.ALWAYS},setAlwaysShowEditButton:function(a){a?this.setEditButtonVisibility(xe.ALWAYS):this._editButtonVisibility==xe.ALWAYS&&this.setEditButtonVisibility(xe.DEFAULT);
},dataIndex:function(){return this._dataIndex},baseIndex:function(){return this._baseIndex},valueType:function(){return this._valueType},sortOrder:function(){return this._sortOrder},setValidations:function(a){this._validations.assign(a)},getFilters:function(){return this._filters.items()},hasFilters:function(){return this._filters.count()>0||this._filterActions.length>0},isFiltered:function(){return this._filters.activeCount()>0},filters_:function(){return this._filters.items()},setFilters:function(a){var b=this.grid();(!b||b.canFiltering())&&this._filters.assign(a)},filterActions_:function(){return this._filterActions.concat()},setFilterActions:function(a){if(a!=this._filterActions){if(a!==this._filterActions&&(this._filterActions=[],a)){a=s(a)?a:[a];for(var b=0,c=a.length;c>b;b++)if(a[b]){var d=new Sg(this);d.assign(a[b]),this._filterActions.push(d)}}var e=this.grid();e&&e.$_columnFilterActionsChanged(this)}},hasFilterAction:function(){return this._filterActions.length>0},setLookupValues:function(a){a!=this._lookupValues&&(this._lookupValues=a&&a.slice(),this._lookupMap=null,this._changed())},setLookupLabels:function(a){a!=this._lookupLabels&&(this._lookupLabels=a&&a.slice(),this._lookupMap=null,this._changed())},labelFieldIndex:function(){return this._labelFieldIndex},lookupSource:function(){return this._lookupSource},setLookupKeyFields:function(a){a!=this._lookupKeyFields&&(a&&!Ga(a)&&(a=[a]),this._lookupKeyFields=a,this._changed())},lookupKeyFieldIds:function(){return this._lookupKeyFieldIds},setDynamicStyles:function(a){this._dynamicStyles.setItems(a),this._changed()},setEditor:function(a){if("string"==typeof a)this._editor=a;else if(a){a.hasOwnProperty("type")&&(this._editor=a.type),this._editorOptions=this._editorOptions||{};for(var b in a){var c=a[b];s(c)?this._editorOptions[b]=c.slice():this._editorOptions[b]=c}}},editorOptions:function(){return this._editorOptions},hasDomain:function(){return this._lookupValues&&this._lookupLabels},setImageList:function(a){if(a!=this._imageList){this._imageList=a;var b=this.grid();b&&(this._images=b.getImageList(this._imageList))}},images:function(){return this._images},_resetImages:function(a){this._imageList?this._images=a.getImageList(this._imageList):this._images=null},getImages:function(){return this._images},isMergeGrouped:function(){return this._mergeGrouped},_setMergeGrouped:function(a){this._mergeGrouped=a},getField:function(){var a=this._dataIndex;if(a>=0){var b=this.grid(),c=b.dataSource();if(c)return c.getField(a)}return null},getLookupLabel:function(a){if(!this._lookupMap){var b=this._lookupValues,c=this._lookupLabels;if(b&&b.length>0){this._lookupMap={};for(var d=0;d<b.length;d++)c&&c.length>d?this._lookupMap[b[d]]=c[d]:this._lookupMap[b[d]]=b[d]}}var e=this._lookupMap?this._lookupMap[a]:void 0;return e?e:a},getLookupIndex:function(a){if(this._lookupValues&&this._lookupValues.length>0)for(var b=0,c=this._lookupValues.length;c>b;b++)if(this._lookupValues[b]==a)return b;return-1},getLookupValue:function(a){return this._lookupValues&&this._lookupValues.length>0?this._lookupValues[a]:void 0},getSourceValue:function(a){var b=this._lookupValues,c=this._lookupLabels;if(c&&b){var d=c.indexOf(a);if(d>=0&&b.length>d)return b[d];if(d=b.indexOf(a),d>=0)return b[d]}return void 0},clearFilters:function(){this.setFilters(null)},addFilters:function(a,b){if(a){var c=this.grid();(!c||c.canFiltering())&&this._filters.addItems(u(a),b)}},removeFilters:function(a){if(a){var b=this.grid();(!b||b.canFiltering())&&this._filters.removeItems(u(a))}},activateFilters:function(a,b){if(a){var c=this.grid();(!c||c.canFiltering())&&this._filters.activateItems(u(a),b)}},activateAllFilters:function(a){var b=this.grid();(!b||b.canFiltering())&&this._filters.activateAll(a)},toggleFilters:function(a){if(a){var b=this.grid();(!b||b.canFiltering())&&this._filters.toggleItems(u(a))}},toggleAllFilters:function(){var a=this.grid();(!a||a.canFiltering())&&this._filters.toggleAll()},getFilter:function(a){return this._filters.getItem(a)},getActiveFilters:function(a){return this._filters.getActiveItems(a)},assign:function(a){this._super(a)},canMerge:function(){return this._mergeGrouped||this._super()},prepare:function(a,b,c){qk.prepare.call(this,a,b,c),this._menu=a.popupMenuManager().getMenu(this.popupMenu());var d=a.dataSource();(this._saveFieldName!=this._fieldName||this._saveLabelField!=this._labelField)&&this._resetDataIndex(d);var e,f;if(this._lookupKeyFields&&(f=this._lookupKeyFields.length)>0){for(this._lookupKeyFieldIds=new Array(f),e=0;f>e;e++)this._lookupKeyFieldIds[e]=d.getFieldIndex(this._lookupKeyFields[e]);this._lookupSourceId?this._lookupSource=a.lookupProvider().getSource(this._lookupSourceId):this._lookupSource=null}else this._lookupKeyFieldIds=null,this._lookupSource=null},getAdapter:function(a){return a===Qg?this._filters:this._super(a)},isWritable:function(){var a=this._editable&&!this._readOnly;return a&&this.$_grid&&(a=!this.$_fixed||!this.$_rightFixed||this.$_grid.$_fixedColEditable),a},menu:function(){return this._menu},_setSortOrder:function(a){this._sortOrder=a},_resetDataIndex:function(a){this._dataIndex=-1,this._baseIndex=-1,this._labelFieldIndex=-1,a&&(this._fieldName?this._dataIndex=a.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0&&(this._baseIndex=a.getBaseField(this._dataIndex),this._valueType=a.getValueType(this._dataIndex)),this._labelFieldIndex=a.getFieldIndex(this._labelField),this._saveFieldName=this._fieldName,this._saveLabelField=this._labelField)},$_filterActionClick:function(a,b,c){this.grid()&&this.grid().$_columnFilterActionClicked(a,b,c)},onColumnFilterChanged:function(a){this.grid()&&this.grid().$_columnFiltersChanged(a)}},{CAPITAL_INDEXERS:["value","values"]}),sk=Xa("DerivedColumn",pk,{init:function(a){this._super(a)},_initColumn:function(){this._super()}}),tk=Xa("SeriesColumn",sk,{init:function(a){this._super(a)},_initColumn:function(){this._super(),this._fieldArray=[],this._fields=null},fieldNames:null,setFieldNames:function(a){a!=this._fieldNames&&(this._fieldNames=a,this._fieldArray=a?a.split(","):[])},fields:function(){return this._fields},resetIndicies:function(a){if(this._fields=[],a){var b,c,d,e,f,g,h,i,j=this._fieldArray.length;for(b=0;j>b;b++)if(c=this._fieldArray[b],d=c.split(".."),d.length>1){if(e=a.getFieldIndex(d[0]),f=a.getFieldIndex(d[1]),e>=0&&f>=0)for(g=Math.min(e,f),h=Math.max(e,f),i=g;h>=i;i++)this._fields.push(i)}else i=a.getFieldIndex(c),i>=0&&this._fields.push(i)}},_defaultRenderer:function(){return kn.Default}}),uk=Xa("ColumnGroupProxy",ak,{init:function(a){if(bk.init.call(this),this._items=null,a){this.assignProps(a,["name","tag","saveWidth","width","fillWidth","fillHeight","visible","resizable","movable","styles","orientation","hideChildHeaders"]);var b=a.header;"string"==typeof b?this.header().setText(b):b&&this.header().assign(b)}},build:function(a){var b=uk.buildColumns(a,this._items);bk.setColumns.call(this,b)},setColumns:function(a){this._items=a}},{buildColumns:function(a,b){var c=[];if(b)for(var d,e,f=0,g=b.length;g>f;f++)d=b[f],d instanceof uk?(d.build(a),c.push(d)):d instanceof Zj?c.push(d):"string"==typeof d?(e=a.layoutColumnByName(d),e&&c.push(e)):d&&d.name&&(e=a.layoutColumnByName(d.name),e&&(e.assignProps(d,["tag","saveWidth","width","fillWidth","fillHeight","visible","resizable","movable","styles"]),c.push(e)));return c}}),vk=Xa("ColumnLayout",null,{init:function(a){Ya.init.call(this),this._name=a},name:null,items:null,build:function(a){var b=uk.buildColumns(a,this._items);return this.$_validate(b),b},$_validate:function(a){if(a&&a.length>0){var b=[];this.$_validateColumns(a,b)}},$_validateColumns:function(a,b){for(var c=a.length-1;c>=0;c--){var d=a[c];if(b.indexOf(d)>=0)throw new Error("Column is dupulicated: "+d.name());b.push(d),d instanceof ak&&this.$_validateColumns(d.columns(),b)}}},{create:function(a){if(a){var b=s(a)?a:a.columns,c={};if(b=vk.$_parseColumns(b,c)){var d=new vk(s(a)?null:a.name);return d.setItems(b),d}}return null},$_parseColumns:function(a,b){var c=[];if(a)for(var d=0,e=a.length;e>d;d++){var f=a[d],g=null;"string"==typeof f?b.hasOwnProperty(f)||(b[f]=1,g=f):f&&("group"==f.type?g=vk.$_parseGroup(f,b):f.hasOwnProperty("columns")&&s(f.columns)&&f.columns.length>0?g=vk.$_parseGroup(f,b):f.name&&(b.hasOwnProperty(f.name)||(b[f.name]=1,g=f))),g&&c.push(g)}return c},$_parseGroup:function(a,b){var c=new uk(a),d=a.columns;return d&&(d=vk.$_parseColumns(d,b),c.setColumns(d)),c}}),wk=Xa("ColumnLayoutCollection",null,{init:function(){Ya.init.call(this),this._layouts=[]},items:function(){return this._layouts.concat()},count:function(){return this._layouts.length},getItem:function(a){if(0>a||a>=this._layouts.length)throw"Invalid ColumnLayoutCollection index: "+a;return this._layouts[a]},find:function(a){for(var b=0,c=this._layouts.length;c>b;b++)if(this._layouts[b].name()==a)return this._layouts[b];return null},clear:function(){this._layouts=[]},load:function(a){if(a){var b;if(s(a))for(var c=0,d=a.length;d>c;c++)b=vk.create(a[c]),b&&this._layouts.push(b);else b=vk.create(a),b&&this._layouts.push(b)}}}),xk=Xa("GridDelegate",null,{init:function(a){this._super(),this._grid=a,this._dom=a._dom,this._defaultEditor=null,this._defaultButtonRenderer=new Qm,this._defaultEditButtonRenderer=new Sm,this._cellEditors={},this._selectionViews=[],this._rowViews=[],this._groupHeaderViews=[],this._groupFooterViews=[],this._mergedHeaderViews=[],this._mergedFooterViews=[],this._FooterHeadRenderer=new Gi},isFixed:function(){return this._fixed},prepareResources:function(){this._defaultButtonRenderer.prepare(this._grid)},createRenderer:function(a){var b=null;if(a){var c,d=null;switch("string"==typeof a?c=a:(c=a.type||"text",d=a),c){case"text":b=new Zm;break;case"bar":b=new $m;break;case"check":b=new _m;break;case"icon":b=new cn;break;case"shape":b=new an;break;case"signal":b=new bn;break;case"image":b=new dn;break;case"link":b=new hn;break;case"imageButton":b=new jn;break;case"code39":b=new en;break;case"code128":b=new fn;break;case"sparkLine":b=new nn;break;case"sparkColumn":b=new on;break;case"sparkWinLoss":b=new pn;break;case"actualTargetBullet":b=new rn;break;case"actualTargetText":b=new sn}b&&d&&b.assign(d)}return b},borrowItemView:function(a,b,c){var d=null;return a instanceof Xf?(d=this._rowViews.pop()||new $i(this._dom),d.setFixed(b),d.setRightFixed(c)):a instanceof Zf?d=this._groupHeaderViews.pop()||new jj(this._dom):a instanceof sj?(d=this._mergedFooterViews.pop()||new yj(this._dom),d.setFixed(b),d.setRightFixed(c)):a instanceof $f?(d=this._groupFooterViews.pop()||new kj(this._dom),d.setFixed(b),d.setRightFixed(c)):a instanceof tj&&(d=this._mergedHeaderViews.pop()||new xj(this._dom),d.setFixed(b),d.setRightFixed(c)),d},returnItemView:function(a){a instanceof $i&&this._rowViews.indexOf(a)<0?this._rowViews.push(a):a instanceof jj&&this._groupHeaderViews.indexOf(a)<0?this._groupHeaderViews.push(a):a instanceof kj&&this._groupFooterViews.indexOf(a)<0?this._groupFooterViews.push(a):a instanceof xj&&this._mergedHeaderViews.indexOf(a)<0?this._mergedHeaderViews.push(a):a instanceof yj&&this._mergedFooterViews.indexOf(a)<0&&this._mergedFooterViews.push(a)},borrowSelectionView:function(a){var b=this._selectionViews.pop()||(gb()?new Vl(this._dom):new Ll(this._dom));return b},returnSelectionView:function(a){a&&this._selectionViews.indexOf(a)<0&&this._selectionViews.push(a)},getDefaultCellRenderer:function(){return Zm.Default},getCellButtonRenderer:function(a){return this._defaultButtonRenderer},createDefaultCellEditor:function(){var a=this._grid._container._container,b=new Mk(this._grid,a);return b.setController(this._grid._editController),b},getDefaultCellEditor:function(){if(!this._defaultEditor){var a=this._grid._container._container;this._defaultEditor=new Mk(this._grid,a),this._defaultEditor.setController(this._grid._editController)}return this._defaultEditor},getCellEditor:function(a){var b=this.$_getCellEditorType(a),c=this._grid._container._container,d=this._cellEditors[b];if(!d){switch(b){case"dropdown":d=new Rk(this._grid,c);break;case"multiline":d=new Nk(this._grid,c);break;case"number":d=new Vk(this._grid,c);break;case"date":d=new Wk(this._grid,c);break;case"search":d=new Tk(this._grid,c);break;case"line":default:d=this.getDefaultCellEditor()}this._cellEditors[b]=d,d&&d.setController(this._grid._editController)}return d},hasEditorButton:function(a){var b=this.$_getCellEditorType(a);if(b)switch(b){case"dropdown":case"date":case"search":return!0;case"multiline":case"number":case"line":default:return!1}return!1},getCellEditButtonRenderer:function(a){var b=null,c=a.dataColumn();if(c){var d=this.$_getCellEditorType(a);b=this._defaultEditButtonRenderer,"date"==d?b.setButtonType(Rm.CALENDAR):b.setButtonType(Rm.COMBO)}return b},getFooterHeadRenderer:function(){return this._FooterHeadRenderer},getRowHeaderSummaryRenderer:function(){return this._FooterHeadRenderer},createGridEventHandler:function(){return null},$_getCellEditorType:function(a){var b=a.dataColumn();if(b){var c=b.editor()?b.editor().toLowerCase():null;return c}return null}}),yk=3,zk=Xa("HeightMeasurer",null,{init:function(){this._super(),this._itemHeight=0,this._headerHeight=0,this._footerHeight=0,this._summaryHeight=0},itemHeight:function(){return this._itemHeight},headerHeight:function(){return this._headerHeight},footerHeight:function(){return this._footerHeight},summaryHeight:function(){return this._summaryHeight},calculate:function(a,b,c,d,e){},_calcItemLine:function(a){var b=a.body().styles(),c=b.fontSize()+yk,d=a.indicator(),e=a.stateBar();return d.isVisible()&&(c=Math.max(c,d.styles().fontSize()+yk)),e.isVisible()&&(c=Math.max(c,e.styles().fontSize()+yk)),c=c+Math.max(1,b.borderTopWidth())+Math.max(1,b.borderBottomWidth())+Math.max(1,b.paddingTop())+Math.max(1,b.paddingBottom()),Na(c)},_calcHeaderLine:function(a){var b=a.header().styles(),c=b.fontSize()+yk;return c=c+Math.max(1,b.borderTopWidth())+Math.max(1,b.borderBottomWidth())+Math.max(1,b.paddingTop())+Math.max(1,b.paddingBottom()),Na(c)},_calcFooterLine:function(a){var b=a.footer().styles(),c=b.fontSize()+yk;return c=c+Math.max(1,b.borderTopWidth())+Math.max(1,b.borderBottomWidth())+Math.max(1,b.paddingTop())+Math.max(1,b.paddingBottom()),Na(c)},_calcSummaryLine:function(a){var b=a.header().summary().styles(),c=b.fontSize()+yk;return c=c+Math.max(1,b.borderTopWidth())+Math.max(1,b.borderBottomWidth())+Math.max(1,b.paddingTop())+Math.max(1,b.paddingBottom()),Na(c)},_setMeasuredHeight:function(a,b){a._measuredHeight=b},_getRootColumn:function(a){return a._rootGroup()}}),Ak=Xa("SimpleHeightsMeasurer",zk,{init:function(){this._super()},calculate:function(a,b,c,d,e){a.calcGroupLevels(),this._itemHeight=b?this.$_calcItemHeights(a,a.getDataLevel()):0,this._headerHeight=c?this.$_calcHeaderHeights(a,a.getHeaderLevel()):0,this._footerHeight=d?this.$_calcFooterHeights(a,a.getDataLevel()):0,this._summaryHeight=e?this.$_calcSummaryHeights(a,a.getDataLevel()):0},$_arrangeItemHeights:function(a,b){var c,d,e,f=0,g=a.visibleCount();if(a.isVertical()){var h=Na(b/a.dataLevel());for(c=0;g>c;c++)e=a.getVisibleItem(c),c==g-1?d=Math.max(0,b-f):e instanceof ak?(d=h*e.dataLevel(),f+=d):(d=h,f+=d),this._setMeasuredHeight(e,d),e instanceof ak&&this.$_arrangeItemHeights(e,d)}else for(c=0;g>c;c++)e=a.getVisibleItem(c),this._setMeasuredHeight(e,b),e instanceof ak&&this.$_arrangeItemHeights(e,b)},$_calcItemHeights:function(a,b){var c,d=a.displayOptions(),e=Na(d.rowHeight());0>=e&&(c=this._calcItemLine(a),e=b*c),e=Na(Math.max(d.minRowHeight(),e)),(c=d.maxRowHeight())>0&&e>c&&(e=c);var f=this._getRootColumn(a);return this.$_arrangeItemHeights(f,e),e},$_calcHeaderHeights:function(a,b){var c,d=a.header(),e=Na(d.height());return 0>=e&&(c=this._calcHeaderLine(a),e=b*c),e=Na(Math.max(d.minHeight(),e))},$_calcFooterHeights:function(a,b){var c=a.footer(),d=Na(c.height());return 0>=d&&(d=b*this._calcFooterLine(a)),d=Na(Math.max(c.minHeight(),d))},$_calcSummaryHeights:function(a,b){var c=a.header().summary(),d=Na(c.height());return 0>=d&&(d=b*this._calcSummaryLine(a)),d=Na(Math.max(c.minHeight(),d))}});Ak.Default=new Ak;var Bk=Xa("FixedHeightsMeasurer",zk,{init:function(){this._super()},calculate:function(a,b,c,d){this._itemHeight=b?this.$_calcItemHeights(a):0,(c||d)&&(a.calcGroupLevels(),c&&(this._headerHeight=c?this.$_calcHeaderHeights(a,a.getHeaderLevel()):0),d&&(this._footerHeight=d?this.$_calcFooterHeights(a,a.getDataLevel()):0))},$_checkHeight:function(a,b){for(var c=a.visibleCount(),d=0;c>d;d++){var e=a.getVisibleItem(d);e._value=e.height()>0?e.height():b,e instanceof ak&&this.$_checkHeight(e,b)}},$_calcGroupHeight:function(a){var b,c,d=0,e=a.visibleCount();if(a.isVertical())for(var b=0;e>b;b++)c=a.getVisibleItem(b),d+=c instanceof ak?this.$_calcGroupHeight(c):c._value;else for(b=0;e>b;b++)c=a.getVisibleItem(b),d=c instanceof ak?Math.max(d,this.$_calcGroupHeight(c)):Math.max(d,c._value);return a._sum=d,d},$_arrangeHeights:function(a,b){var c,d,e,f,g=a.visibleCount();if(a.isVertical()){var h=0;if(a._sum>b)for(c=0;g>c;c++){var e=a.getVisibleItem(c);g-1>c?(d=Na(b*e._value/a._sum),h+=d):d=Math.max(0,b-h),this._setMeasuredHeight(e,d),e instanceof ak&&this.$_arrangeHeights(e,d)}else if(a._sum<b){var i=0;for(c=0;g>c;c++)e=a.getVisibleItem(c),(f=e.fillHeight())>0&&(i+=f);if(i>0){var j=b-a._sum;for(c=0;g>c;c++)e=a.getVisibleItem(c),g-1>c?(d=e._value,(f=e.fillHeight())>0&&(d+=Na(j*f/i)),h+=d):d=Math.max(0,b-h),this._setMeasuredHeight(e,d),e instanceof ak&&this.$_arrangeHeights(e,d)}else for(c=0;g>c;c++)e=a.getVisibleItem(c),g-1>c?(d=Na(b*e._value/a._sum),h+=d):d=Math.max(0,b-h),this._setMeasuredHeight(e,d),e instanceof ak&&this.$_arrangeHeights(e,d)}else for(c=0;g>c;c++)e=a.getVisibleItem(c),g-1>c?(d=e._value,h+=d):d=Math.max(0,b-h),this._setMeasuredHeight(e,d),e instanceof ak&&this.$_arrangeHeights(e,e._value)}else for(c=0;g>c;c++)e=a.getVisibleItem(c),this._setMeasuredHeight(e,b),e instanceof ak&&this.$_arrangeHeights(e,b)},$_calcItemHeights:function(a,b){var c=this._calcItemLine(a),d=this._getRootColumn(a);this.$_checkHeight(d,c);var e=a.displayOptions(),f=this.$_calcGroupHeight(d),g=Na(e.rowHeight());return g>0&&(f=g),f=Na(Math.max(f,e.minRowHeight())),(g=Na(e.maxRowHeight()))>0&&f>g&&(f=g),this.$_arrangeHeights(d,f),f},$_calcHeaderHeights:function(a,b){var c=a.header(),d=Na(c.height());if(0>=d){var e=this._calcHeaderLine(a);d=b*e}return d=Na(Math.max(c.minHeight(),d))},$_calcFooterHeights:function(a,b){var c=a.footer(),d=Na(c.height());if(0>=d){var e=this._calcFooterLine(a);d=b*e}return d=Na(Math.max(c.minHeight(),d))}});Bk.Default=new Bk;var Ck=new kd,Dk=Xa("GridLayoutManager",null,{init:function(a){this._super(),this._grid=a,this._options=null,this._items=null,this._panelBounds=null,this._indicatorBounds=null,this._stateBarBounds=null,this._checkBarBounds=null,this._rowGroupBounds=null,this._rowGroupBarWidth=0,this._fixedBounds=null,this._nonfixedBounds=null,this._headerBounds=null,this._fixedHeaderBounds=null,this._summaryBounds=null,this._fixedSummaryBounds=null,this._editBarBounds=null,this._footerBounds=null,this._fixedFooterBounds=null,this._bodyBounds=null,this._gridBounds=null,this._scrollBounds=null,this._columnGrouped=!1,this._columnCount=0,this._columns=[],this._fixedColumnPoints=[],this._rfixedColumnsPoints=[],this._columnPoints=[],this._fixedItemCount=0,this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,this._fixedItemPoints=[],this._itemPoints=[],this._fixedCols=0,this._rfixedCols=0,this._fixedRows=0,this._fixedWidth=0,this._fixedHeight=0,this._rfixedWidth=0,this._focusIndex=null,this._columnFitted=!1,this._columnsLength=0,this._prevFirst=0,this._prevLast=0,this._firstCol=0,this._lastCol=0,this._clientRect=null,this._leftPos=0,this._topIndex=0,this._hscrollBar=!1,this._vscrollBar=!1,this._heightMeasurer=null,this._columnMerged=!1},heightMeasurer:null,grid:function(){return this._grid},isColumnGrouped:function(){return this._columnGrouped},isColumnMerged:function(){return this._columnMerged},itemCount:function(){return this._itemCount},fullItemCount:function(){return this._fullItemCount},columnCount:function(){return this._columnCount},isHscrollBar:function(){return this._hscrollBar},isVscrollBar:function(){return this._vscrollBar},columnsLength:function(){return this._columnsLength},topIndex:function(){return this._topIndex},leftPos:function(){return this._leftPos},prevFirst:function(a,b){return a?b?this.rfixedStartCol():0:this._prevFirst},prevLast:function(a,b){return a?b?this._columnCount-1:this._fixedCols-1:this._prevLast},firstCol:function(a,b){return a?b?this.rfixedStartCol():0:this._firstCol},lastCol:function(a,b){return a?b?this._columnCount-1:this._fixedCols-1:this._lastCol},fixedItemCount:function(){return this._fixedItemCount},fixedColCount:function(){return this._fixedCols},rfixedColCount:function(){return this._rfixedCols},rfixedStartCol:function(){return this._columnCount-this._rfixedCols},fixedRowCount:function(){return this._fixedRows},isRowGrouped:function(){return!1},rowGroupLevels:function(){return 0},isColumnMerged:function(){return this._columnMerged},panelBounds:function(){return this._panelBounds.clone()},indicatorBounds:function(){return this._indicatorBounds.clone()},stateBarBounds:function(){return this._stateBarBounds.clone()},checkBarBounds:function(){return this._checkBarBounds.clone()},rowGroupBounds:function(){return this._rowGroupBounds.clone()},headerBounds:function(){return this._headerBounds.clone()},fixedHeaderBounds:function(){return this._fixedHeaderBounds.clone()},summaryBounds:function(){return this._summaryBounds.clone()},fixedSummaryBounds:function(){return this._fixedSummaryBounds.clone()},editorBounds:function(){return this._editorBounds.clone()},footerBounds:function(){return this._footerBounds.clone()},fixedFooterBounds:function(){return this._fixedFooterBounds.clone()},fixedBounds:function(){return this._fixedBounds.clone()},rfixedBounds:function(){return this._rfixedBounds.clone()},nonfixedBounds:function(){return this._nonfixedBounds.clone()},bodyBounds:function(){return this._bodyBounds.clone()},gridBounds:function(){return this._gridBounds.clone()},clientRect:function(){return this._clientRect.clone()},fixedWidth:function(){return this._fixedWidth},rfixedLeft:function(){return this._rfixedBounds.x},rfixedWidth:function(){return this._rfixedWidth},fixedHeight:function(){return this._fixedHeight},setHeightMeasurer:function(a){this._heightMeasurer=a},cellIsVisible:function(a){var b=a.I(),c=this._fixedItemCount;if(b>=c){if(b<this._topIndex+c)return!1;if(0==this._fullItemCount&&b==this._topIndex+c)return!0;if(b>=this._topIndex+c+this._fullItemCount)return!1}var d,e=a.column(),f=e.root(),g=f.displayIndex();if(c=this._fixedCols,g>=c){for(d=this.columnBounds(g).x;e!=f;)d+=e.displayOffset(),e=e.parent();if(d<this._leftPos)return!1;if(d+a.column().displayWidth()-this._leftPos>this._nonfixedBounds.width)return!1}return!0},makeCellVisible:function(a){this._focusIndex=a.clone()},getColumn:function(a){return this._columns[a]},getColumnBounds:function(a){return this.columnBounds(a)},columnBounds:function(a){var b,c,d=this.rfixedStartCol();return a<this._fixedCols?b=new kd(this._fixedColumnPoints[a],0,this._fixedColumnPoints[a+1]-this._fixedColumnPoints[a],0):a>=d?(b=new kd(this._rfixedColumnPoints[a-d],0,this._rfixedColumnPoints[a-d+1]-this._rfixedColumnPoints[a-d],0),b.offset(this._grid.fixedOptions().colBarWidth(),0)):(c=a-this._fixedCols,b=new kd(this._columnPoints[c],0,this._columnPoints[c+1]-this._columnPoints[c],0)),b},getDataColumnBounds:function(a){return this.dataColumnBounds(a)},dataColumnBounds:function(a){var b=a.root(),c=a.dataRoot(),d=this.columnBounds(b.displayIndex());return c!==b&&(d.x+=a.$_getOffset(c),d.width=c.groupWidth()),d},yU:function(){return this._grid._feedbackLayer},getColumnRect:function(a){return this.columnRect(a)},columnRect:function(a){var b,c,d,e=this.rfixedStartCol();return a<this._fixedCols?(b=this._gridBounds.x,c=a,d=new kd(this._fixedColumnPoints[c]+b,0,this._fixedColumnPoints[c+1]-this._fixedColumnPoints[c],0)):a>=e?(b=this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth(),c=a-e,d=new kd(this._rfixedColumnPoints[c]+b,0,this._rfixedColumnPoints[c+1]-this._rfixedColumnPoints[c],0)):(b=this._bodyBounds.x,c=a-this._fixedCols,d=new kd(this._columnPoints[c]+b,0,this._columnPoints[c+1]-this._columnPoints[c],0)),d},getDataColumnRect:function(a){return this.dataColumnRect(a)},dataColumnRect:function(a){var b=a.root(),c=a.dataRoot(),d=this.columnBounds(b.displayIndex());return c!==b&&(d.leftBy(a.$_getOffset(c)),d.width=c.groupWidth()),d},dataRootBounds:function(a){var b=a.root(),c=a.dataRoot(),d=this.columnBounds(b.displayIndex());return c!=b&&(this._getColumnRectInRoot(c,Ck),d.leftBy(Ck.x),d.setWidth(c.displayWidth())),d},dataRootRect:function(a){var b=a.root(),c=a.dataRoot(),d=this.columnRect(b.displayIndex());return c!=b&&(d.setLeft(d.x+c.displayOffset()),d.width=c.displayWidth()),d},itemBounds:function(a,b,c){var d=c?this._rfixedBounds:b?this._fixedBounds:this._bodyBounds;return a<this._fixedItemCount?new kd(0,this._fixedItemPoints[a],d.width,this._fixedItemPoints[a+1]-this._fixedItemPoints[a]):new kd(0,this._itemPoints[a-this._fixedItemCount],d.width,this._itemPoints[a-this._fixedItemCount+1]-this._itemPoints[a-this._fixedItemCount])},getItemBounds:function(a,b){return this.itemBounds(a,b)},itemRect:function(a,b){var c=b?this._fixedBounds:this._bodyBounds,d=c.y;return a<this._fixedItemCount?new kd(0,this._fixedItemPoints[a]+d,c.width,this._fixedItemPoints[a+1]-this._fixedItemPoints[a]):new kd(0,this._itemPoints[a-this._fixedItemCount]+d,c.width,this._itemPoints[a-this._fixedItemCount+1]-this._itemPoints[a-this._fixedItemCount])},getItemRect:function(a,b){return this.itemRect(a,b)},dataCellRect:function(a){var b=this._grid;if(!b.isValid(a)||this._fixedItemCount+this._itemCount<1)return new kd;var c,d=a.C(),e=d.group()?d.root():a.C(),f=this.columnRect(e.displayIndex()),g=null;return a.I()<this._fixedItemCount?(g=this.getItemBounds(a.I()),f.y=g.y+this._bodyBounds.y,f.height=g.height):(c=a.I()-b.topIndex(),0>c||c>=this._itemCount+this._fixedItemCount?(f.y=this.getItemBounds(0).y+this._bodyBounds.y,f.height=0):(g=this.getItemBounds(c),f.y=g.y+this._bodyBounds.y,f.height=g.height)),d!==e&&(g||(g=new kd),this._getColumnRectInRoot(d,g),g.offset(f.x,f.y),f.copy(g)),f},mouseToIndex:function(a,b,c){if(c.itemIndex(-1),c.column(null),!(this._columnCount<1)){var d,e=-1,f=this.grid(),g=this._summaryBounds.bottom();if(b>=g&&b<this._footerBounds.y){for(d=0;d<this._fixedItemCount;d++)if(b>=g+this._fixedItemPoints[d]&&b<g+this._fixedItemPoints[d+1]){e=d,b-=g+this._fixedItemPoints[d];break}if(0>e&&this._itemCount>0){for(d=0;d<this._itemCount;d++)if(b>=g+this._itemPoints[d]&&b<g+this._itemPoints[d+1]){e=d,b-=g+this._itemPoints[d];break}e>=0&&(e+=f.topItem())}}else b>=this._footerBounds.y?e=-2:b<this._headerBounds.y&&(e=-3);c.itemIndex(e);var h=-1,i=this._gridBounds.x;if(a>=i&&a<=this._clientRect.width){for(a-=i,d=0;d<this._fixedCols;d++)if(a>=this._fixedColumnPoints[d]&&a<this._fixedColumnPoints[d+1]){h=d,a-=this._fixedColumnPoints[d];break}if(0>h&&this._rfixedCols>0){var j=a-this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth()+i;for(d=0;d<this._rfixedCols;d++)if(j>=this._rfixedColumnPoints[d]&&j<this._rfixedColumnPoints[d+1]){h=d+this.rfixedStartCol(),a=j-=this._rfixedColumnPoints[d];break}}if(0>h)for(a=a-this._fixedWidth+this._leftPos,d=this._firstCol;d<=this._lastCol;d++)if(a>=this._columnPoints[d-this._fixedCols]&&a<this._columnPoints[d-this._fixedCols+1]){h=d,a-=this._columnPoints[d-this._fixedCols];break}}if(h>=0&&h<f.visibleColumnCount()){c.column(f.getVisibleColumn(h));var k=ab(c.column().root(),ak);k&&c.column(k.columnAtPoint(a,b))}else c.column(null),c.itemIndex(-1);return c}},mouseToIndexEx:function(a,b,c){if(this._columnCount<1)return c;var d,e=0,f=this.grid(),g=this._topIndex+this._fixedItemCount,h=this._bodyBounds.y;if(h>b)e=-1;else if(b>=this._bodyBounds.bottom()&&b<this._footerBounds.y)e=g+this._fullItemCount;else if(b>=this._footerBounds.y)e=g+this._fullItemCount;else{for(e=-1,d=0;d<this._fixedItemCount;d++)if(b>=h+this._fixedItemPoints[d]&&b<h+this._fixedItemPoints[d+1]){e=d;break}if(0>e&&this._itemCount>0){for(d=0;d<this._itemCount;d++)if(b>=h+this._itemPoints[d]&&b<h+this._itemPoints[d+1]){e=d;break}e>=0&&(e+=g)}}c.itemIndex(e);var i=-1,j=this._gridBounds.x;if(j>a)i=Math.max(0,this._firstCol-1);else if(a>=this._bodyBounds.right()&&a<this._clientRect.right())i=f.visibleColumnCount()-1;else if(a>this._clientRect.right())i=Math.min(f.visibleColumnCount()-1,this._lastCol+1);else{for(a-=j,d=0;d<this._fixedCols;d++)if(a>=this._fixedColumnPoints[d]&&a<this._fixedColumnPoints[d+1]){i=d;break}if(0>i&&this._rfixedCols>0){var k=a-this._rfixedBounds.x+this._grid.fixedOptions().colBarWidth()+j;for(d=0;d<this._rfixedCols;d++)if(k>=this._rfixedColumnPoints[d]&&k<this._rfixedColumnPoints[d+1]){i=d+this.rfixedStartCol();break}}if(0>i)for(a=a-this._fixedWidth+this._leftPos,d=this._firstCol;d<=this._lastCol;d++)if(a>=this._columnPoints[d-this._fixedCols]&&a<this._columnPoints[d-this._fixedCols+1]){i=d;break}}return i>=0&&i<f.visibleColumnCount()?c.column(f.getVisibleColumn(i)):c.column(null),c},measure:function(a,b,c,d,e){this._items=this._grid.itemSource(),this._options=this._grid.displayOptions(),this._leftPos=b,this._topIndex=c,this._columnMerged=!1,this._doMeasure(a,d,e),this._focusIndex=null},layout:function(a){this._doLayout(a)},fitColumnWidth:function(a,b,c,d){a instanceof ak?this._doFitGroupWidth(a,b,c,d):a instanceof pk&&this._doFitColumnWidth(a,b,c,d,!1)},isMergedCell:function(a){var b=this._grid;if(b.rowGroup().isMergeMode()&&b.isGroupedColumn(a.dataColumn()))return!0;var c=a.column();if(c instanceof pk&&c.canMerge()){var d=c.stateFor(rj.MERGE_ROOMS);if(d)return null!=d.getRoom(a)}return!1},getMergedCell:function(a){var b=a.column();if(b instanceof pk&&b.canMerge()){var c=b.stateFor(rj.MERGE_ROOMS);if(c)return c.getRoom(a)}return null},scrollToNextColumn:function(){for(var a=0;a<this._columnCount;a++)if(this._columnPoints[a]>this._leftPos)return this._columnPoints[a];return this._leftPos},scrollToPrevColumn:function(){for(var a=this._columnCount-1;a>=0;a--)if(this._columnPoints[a]<this._leftPos)return this._columnPoints[a];return this._leftPos},_isColumnsDirty:function(){return this._grid._isColumnsDirty()},_isHeaderDirty:function(){return this._grid._isStylesDirty()||this._grid.header().isDirty()||this._grid._isColumnsDirty()},_isFooterDirty:function(){return this._grid._isStylesDirty()||this._grid.footer().isDirty()||this._grid._isColumnsDirty()},_getFixedRowCount:function(){var a=this._grid.itemSource();return a?Math.min(a.fixedCount(),a.itemCount()):0},_getItem:function(a){return this._items.getItem(a)},_doMeasure:function(a,b,c){var d,e,f,g=this._grid,h=a.clone();this._hscrollBar=this._vscrollBar=!1,this._prevFirst=this._firstCol,this._prevLast=this._lastCol,this._firstCol=0,this._lastCol=-1,this.$_checkColumnGrouping(),this.$_calcFixedColumnPoints(),this.$_calcColumnPoints(),this.$_calcRightFixedColumnPoints(),this._heightMeasurer.calculate(g,!0,g.header().isVisible(),g.footer().isVisible(),g.header().summary().isVisible()),this._panelBounds=h.clone(),g.panel().isVisible()&&(d=g.panelView())?(d.setModel(g.panel()),e=d.measure(g,h.width,h.height)):e=ld.EMPTY,g._panel._realHeight=e.height,this._panelBounds.height=e.height,h.topBy(e.height),this._indicatorBounds=h.clone(),g.indicator().isVisible()?(d=g.indicatorView(),e=d.measure(g,h.width,h.height)):e=ld.EMPTY,g._indicator._realWidth=e.width,this._indicatorBounds.width=e.width,h.leftBy(e.width),this._stateBarBounds=h.clone(),g.stateBar().isVisible()?(d=g.stateBarView(),e=d.measure(g,h.width,h.height)):e=ld.EMPTY,this._stateBarBounds.width=e.width,h.leftBy(e.width),this._checkBarBounds=h.clone(),g.checkBar().isVisible()?(d=g.checkBarView(),e=d.measure(g,h.width,h.height)):e=ld.EMPTY,this._checkBarBounds.width=e.width,
h.leftBy(e.width),this._rowGroupBounds=h.clone(),e=this.isRowGrouped()?g.rowGroupView().measure(g,h.width,h.height):ld.EMPTY,this._rowGroupBounds.width=e.width,h.leftBy(e.width),this._fixedBounds=h.clone(),this._fixedBounds.width=this._fixedWidth,h.leftBy(this._fixedWidth),this._rfixedBounds=h.clone(),this._rfixedBounds.x=Math.min(h.x+this._columnsLength+this._rfixedWidth,h.right())-this._rfixedWidth,this._rfixedBounds.width=this._rfixedWidth,h.width-=this._rfixedWidth,this._headerBounds=h.clone(),g.header().isVisible()?(d=g.headerView(),e=d.measure(g,h.width,h.height),e.height=Math.max(e.height,this._heightMeasurer.headerHeight())):e=ld.EMPTY,g._header._realHeight=e.height,this._headerBounds.height=e.height,this._headerBounds.width=e.width,this._fixedHeaderBounds=new kd(this._fixedBounds.x,this._headerBounds.y,this._fixedBounds.width,this._headerBounds.height),this._rfixedHeaderBounds=new kd(this._rfixedBounds.x,this._headerBounds.y,this._rfixedBounds.width,this._headerBounds.height),h.topBy(e.height),this._summaryBounds=h.clone(),g.header().summary().isVisible()?(d=g.summaryView(),e=d.measure(g,h.width,h.height),e.height=Math.max(e.height,this._heightMeasurer.summaryHeight())):e=ld.EMPTY,this._summaryBounds.height=e.height,this._summaryBounds.width=e.width,this._fixedSummaryBounds=new kd(this._fixedBounds.x,this._summaryBounds.y,this._fixedBounds.width,this._summaryBounds.height),this._rfixedSummaryBounds=new kd(this._rfixedBounds.x,this._summaryBounds.y,this._rfixedBounds.width,this._summaryBounds.height),this._editBarBounds=h.clone(),this._editBarBounds.y+=this._summaryBounds.height,g.editBar().isVisible()?(d=g.editBarRenderer(),d.setModel(g.getEditBar()),e=d.measure(g,h.width,h.height),e.height=Math.max(e.height,this._heightMeasurer.itemHeight(0))):e=ld.EMPTY,this._editBarBounds.height=e.height,this._editBarBounds.width=e.width,this._footerBounds=h.clone(),g.footer().isVisible()?(d=g.footerView(),e=d.measure(g,h.width,h.height),e.height=Math.max(e.height,this._heightMeasurer.footerHeight())):e=ld.EMPTY,g._footer._realHeight=e.height,this._footerBounds.y=h.bottom()-e.height,this._footerBounds.width=e.width,this._footerBounds.height=e.height,this._fixedFooterBounds=new kd(this._fixedBounds.x,this._footerBounds.y,this._fixedBounds.width,this._footerBounds.height),this._rfixedFooterBounds=new kd(this._rfixedBounds.x,this._footerBounds.y,this._rfixedBounds.width,this._footerBounds.height),this._gridBounds=new kd(this._fixedBounds.x,this._editBarBounds.bottom(),a.right(),this._footerBounds.y-this._editBarBounds.bottom());var i=new kd(this._headerBounds.x,this._editBarBounds.bottom(),this._headerBounds.width,this._footerBounds.y-this._editBarBounds.bottom()+1);this.$_calcHorzScroll(c,i,this._gridBounds),this._hscrollBar&&i.bottomBy(-c),this._calcItemPoints(i),this._bodyBounds=i.clone(),this.$_updateScrollInfo(a,b,c),this.$_checkColumnMerging(),this._vscrollBar&&this._rfixedBounds.right()>this._gridBounds.right()&&(this._rfixedBounds.x=this._gridBounds.right()-this._rfixedWidth,this._rfixedHeaderBounds.x=this._rfixedFooterBounds.x=this._rfixedSummaryBounds.x=this._rfixedBounds.x),this._fixedBounds.y=this._rfixedBounds.y=this._bodyBounds.y,this._fixedBounds.height=this._rfixedBounds.height=this._bodyBounds.height,this._nonfixedBounds=this._gridBounds.clone(),this._nonfixedBounds.setLeft(this._nonfixedBounds.x+this._fixedWidth),this._nonfixedBounds.rightBy(-this._rfixedWidth),this._fixedHeight>0&&this._nonfixedBounds.setTop(this._nonfixedBounds.y+this._fixedHeight+g.fixedOptions().rowBarHeight()),this.$_measureFitting(this._nonfixedBounds,this._vscrollBar?b:0),this._columnFitted?(this.$_fitColumns(this._nonfixedBounds.width),this._bodyBounds.width=this._columnsLength,this._rfixedBounds.x=h.x+this._columnsLength,this._rfixedBounds.width=this._rfixedWidth,this._rfixedHeaderBounds=new kd(this._rfixedBounds.x,this._headerBounds.y,this._rfixedBounds.width,this._headerBounds.height),this._rfixedSummaryBounds=new kd(this._rfixedBounds.x,this._summaryBounds.y,this._rfixedBounds.width,this._summaryBounds.height),this._rfixedFooterBounds=new kd(this._rfixedBounds.x,this._footerBounds.y,this._rfixedBounds.width,this._footerBounds.height)):this._clearFitWidths(),this.$_calcLeftPos(),this.isRowGrouped()&&(this._rowGroupBounds.setRight(this._bodyBounds.right()+this._rfixedWidth),this._rowGroupBounds.setTop(this._headerBounds.y),this._rowGroupBounds.setBottom(this._footerBounds.bottom())),this._bodyBounds.x-=this._leftPos;var j=this._bodyBounds.width+this._rfixedWidth;this._panelBounds.setRight(this._bodyBounds.right()+this._rfixedWidth),this._headerBounds.x=this._bodyBounds.x,this._headerBounds.width=j,this._summaryBounds.x=this._bodyBounds.x,this._summaryBounds.width=j,this._editBarBounds.x=this._bodyBounds.x,this._editBarBounds.width=j,this._footerBounds.x=this._bodyBounds.x,this._footerBounds.width=j,f=Math.min(this._footerBounds.y,this._bodyBounds.bottom()),this._indicatorBounds.y=this._bodyBounds.y,this._indicatorBounds.setBottom(f),this._stateBarBounds.y=this._bodyBounds.y,this._stateBarBounds.setBottom(f),this._checkBarBounds.y=this._bodyBounds.y,this._checkBarBounds.setBottom(f)},$_calcHorzScroll:function(a,b,c){this._hscrollBar=a>0&&this._options.fitStyle()!=Be.EVEN_FILL,this._hscrollBar&&(this._fixedWidth+this._rfixedWidth>=c.width?this._hscrollBar=this._columnsLength>0:this._hscrollBar=this._columnsLength>c.width-this._fixedWidth-this._rfixedWidth),b.width=this._columnsLength},$_updateScrollInfo:function(a,b,c){var d,e,f,g,h,i=this._options.fitStyle()==Be.EVEN_FILL,j=this._bodyBounds,k=j.right()+this._rfixedWidth,l=this._footerBounds,m=!i&&b>0&&this._columnsLength>0&&(this._leftPos>0||k>a.right()),n=c>0&&this._itemCount>0&&(this._topIndex>0||j.bottom()>l.y);if(m&&(e=n?b:0,this._columnsLength<this._gridBounds.width-this._fixedBounds.width-this._rfixedBounds.width-e&&(m=!1)),m!=n&&(m?n=c>0&&this._itemCount>0&&j.bottom()>l.y-c:m=!i&&b>0&&this._columnsLength>0&&k>a.right()-b),m){if(!this._hscrollBar&&this._itemCount>0){var o=j.clone();o.setBottom(l.y-c),this._calcItemPoints(o),this._itemCount>0&&(j.height=this._itemPoints[this._itemCount])}if(this._rfixedFooterBounds.y=this._fixedFooterBounds.y=l.y-=c,j.setBottom(Math.min(j.bottom(),l.y)),this._gridBounds.setBottom(l.y),this._itemCount>0){for(d=this._fullItemCount;d>0&&j.y+this._itemPoints[d]>l.y;)this._fullItemCount--,d--;for(d=this._itemCount;d>0&&j.y+this._itemPoints[d-1]>l.y;)this._itemCount--,this._itemPoints.pop(),d--}}else this._leftPos=0;if(g=j.bottom(),this._itemCount>0&&g<this._fixedFooterBounds.y){for(f=this._heightMeasurer.itemHeight(0),h=Na((this._fixedFooterBounds.y-g)/f),this._availableItemCount=this._fullItemCount+h;this._topIndex>0&&h>0;)this._topIndex--,this._itemCount++,this._fullItemCount++,this._itemPoints.push(this._itemPoints[this._itemPoints.length-1]+f),j.bottomBy(f),h--;n&&0==this._topIndex&&this._availableItemCount>=this._fullItemCount&&(n=!1,m&&(m=k>a.right()))}else this._availableItemCount=this._fullItemCount;this._clientRect=a.clone(),this._clientRect.width-=n?b:0,this._clientRect.height-=m?c:0,this._gridBounds.setRight(this._clientRect.right()),this._gridBounds.setBottom(this._footerBounds.y),this._hscrollBar=m,this._vscrollBar=n},$_calcLeftPos:function(){var a,b,c,d,e;if(this._leftPos>0&&(c=this._columnPoints.length-1,d=this._nonfixedBounds.width-(this._columnPoints[c]-this._leftPos),d>0&&(this._leftPos=Math.max(0,this._leftPos-d))),this._focusIndex&&(a=this._focusIndex.column())&&(b=a.root(),c=b.displayIndex(),c>=this._fixedCols&&c<this.rfixedStartCol())){for(e=this._columnPoints[c-this._fixedCols];a!=b;)e+=a.displayOffset(),a=a.parent();e<this._leftPos?this._leftPos=e:(d=e+this._focusIndex.column().displayWidth()-this._leftPos-this._nonfixedBounds.width,d>0&&(this._leftPos=Math.min(e,this._leftPos+d)))}var f=this._leftPos,g=this._clientRect.width;for(this._firstCol=this._fixedCols,this._lastCol=-1,c=this._fixedCols;c<this._columnCount;c++)if(this._columnPoints[c+1-this._fixedCols]>f){this._firstCol=c;break}for(c=this._columnCount-this._rfixedCols-1;c>=this._fixedCols;c--)if(this._columnPoints[c-this._fixedCols]-f<g-this._headerBounds.x){this._lastCol=c;break}},_doLayout:function(a){var b,c,d=this._gridBounds,e=this._grid,f=e.header(),g=f.summary(),h=e.footer(),i=e.indicator(),j=e.stateBar(),k=e.checkBar(),l=this._fixedCols>0,m=this._rfixedCols>0;(b=e.panelView())&&(b.setVisible(e.panel().isVisible()),b.isVisible()&&(b.setRect(this._panelBounds),b.layoutContent(this))),b=e.indicatorView(),b.setVisible(i.isVisible()),b.isVisible()&&(b.setRect(this._indicatorBounds),b.layoutContent(this)),b=e.stateBarView(),b.setVisible(j.isVisible()),b.isVisible()&&(b.setRect(this._stateBarBounds),b.layoutContent(this)),b=e.checkBarView(),b.setVisible(k.isVisible()),b.isVisible()&&(b.setRect(this._checkBarBounds),b.layoutContent(this)),b=e.rowGroupView(),b.setVisible(this.isRowGrouped()),b.isVisible()&&(b.setRect(c=this._rowGroupBounds),b.setClipBounds(c.x,c.y,d.right()-c.x,c.height)),b=e.headerView(),b.setVisible(f.isVisible()),b.isVisible()&&(b.setRect(this._headerBounds),b.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,a.height),b.layoutContent(this)),b=e.fixedHeaderView(),b.setVisible(l&&f.isVisible()),b.isVisible()&&(b.setRect(this._fixedHeaderBounds),b.layoutContent(this)),b=e.rfixedHeaderView(),b.setVisible(m&&f.isVisible()),b.isVisible()&&(b.setRect(this._rfixedHeaderBounds),b.layoutContent(this)),b=e.summaryView(),b.setVisible(g.isVisible()),b.isVisible()&&(b.setRect(this._summaryBounds),b.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,a.height),b.layoutContent(this)),b=e.fixedSummaryView(),b.setVisible(l&&g.isVisible()),b.isVisible()&&(b.setRect(this._fixedSummaryBounds),b.layoutContent(this)),b=e.rfixedSummaryView(),b.setVisible(m&&g.isVisible()),b.isVisible()&&(b.setRect(this._rfixedSummaryBounds),b.layoutContent(this)),b=e.indicatorHeadView(),b.setVisible(i.isVisible()&&f.isVisible()),b.isVisible()&&(b.updateCell(i.getHeadCell()),b.setBounds(this._indicatorBounds.x,this._headerBounds.y,this._indicatorBounds.width,this._headerBounds.height),b.layoutContent(this)),b=e.stateBarHeadView(),b.setVisible(j.isVisible()&&f.isVisible()),b.isVisible()&&(b.updateCell(j.getHeadCell()),b.setBounds(this._stateBarBounds.x,this._headerBounds.y,this._stateBarBounds.width,this._headerBounds.height),b.layoutContent(this)),b=e.checkBarHeadView(),b.setVisible(k.isVisible()&&f.isVisible()),b.isVisible()&&(b.updateCell(k.getHeadCell()),b.setBounds(this._checkBarBounds.x,this._headerBounds.y,this._checkBarBounds.width,this._headerBounds.height),b.layoutContent(this)),b=e.footerView(),b.setVisible(h.isVisible()),b.isVisible()&&(b.setRect(this._footerBounds),b.setClipBounds(this._nonfixedBounds.x,0,this._nonfixedBounds.width,this._footerBounds.bottom()),b.layoutContent(this)),b=e.fixedFooterView(),b.setVisible(l&&h.isVisible()),b.isVisible()&&(b.setRect(this._fixedFooterBounds),b.layoutContent(this)),b=e.rfixedFooterView(),b.setVisible(m&&h.isVisible()),b.isVisible()&&(b.setRect(this._rfixedFooterBounds),b.layoutContent(this)),b=e.indicatorFootView(),b.setVisible(i.isVisible()&&h.isVisible()),b.isVisible()&&(b.updateCell(i.getFootCell()),b.setBounds(this._indicatorBounds.x,this._footerBounds.y,this._indicatorBounds.width,this._footerBounds.height),b.layoutContent(this)),b=e.stateBarFootView(),b.isVisible=j.isVisible&&h.isVisible,b.isVisible()&&(b.updateCell(j.getFootCell()),b.setBounds(this._stateBarBounds.x,this._footerBounds.y,this._stateBarBounds.width,this._footerBounds.height),b.layoutContent(this)),b=e.checkBarFootView(),b.setVisible(k.isVisible()&&h.isVisible()),b.isVisible()&&(b.updateCell(k.getFootCell()),b.setBounds(this._checkBarBounds.x,this._footerBounds.y,this._checkBarBounds.width,this._footerBounds.height),b.layoutContent(this)),b=e.indicatorSummaryView(),b.setVisible(i.isVisible()&&g.isVisible()),b.isVisible()&&(b.updateCell(i.getSumCell()),b.setBounds(this._indicatorBounds.x,this._summaryBounds.y,this._indicatorBounds.width,this._summaryBounds.height),b.layoutContent(this)),b=e.stateBarSummaryView(),b.isVisible=j.isVisible&&g.isVisible,b.isVisible()&&(b.updateCell(j.getSumCell()),b.setBounds(this._stateBarBounds.x,this._summaryBounds.y,this._stateBarBounds.width,this._summaryBounds.height),b.layoutContent(this)),b=e.checkBarSummaryView(),b.setVisible(k.isVisible()&&g.isVisible()),b.isVisible()&&(b.updateCell(k.getSumCell()),b.setBounds(this._checkBarBounds.x,this._summaryBounds.y,this._checkBarBounds.width,this._summaryBounds.height),b.layoutContent(this));var n=e.fixedBodyView(),o=e.rfixedBodyView();b=e.bodyView(),this._fixedItemCount+this._itemCount>0?(this._fixedCols>0?(n.setVisible(!0),n.setRect(this._fixedBounds),n.setClipBounds(this._fixedBounds.x,this._gridBounds.y,this._fixedBounds.width,this._gridBounds.height)):n.setVisible(!1),this._rfixedCols>0?(o.setVisible(!0),o.setRect(this._rfixedBounds),o.setClipBounds(this._rfixedBounds.x,this._gridBounds.y,this._rfixedBounds.width,this._gridBounds.height)):o.setVisible(!1),b.setRect(this._bodyBounds),b.setClipBounds(this._nonfixedBounds.x,this._gridBounds.y,this._nonfixedBounds.width,this._gridBounds.height),this.$_layoutItems(b,this._bodyBounds),n.setEmpty(!1),o.setEmpty(!1),b.setEmpty(!1)):(n.setBounds(0,this._fixedBounds.y,this._fixedBounds.width,this._footerBounds.y-this._bodyBounds.y),o.setBounds(0,this._rfixedBounds.y,this._rfixedBounds.width,this._footerBounds.y-this._bodyBounds.y),b.setBounds(0,this._bodyBounds.y,this._bodyBounds.width,this._footerBounds.y-this._bodyBounds.y),this.$_layoutItems(b,this._bodyBounds),n.setEmpty(!0),o.setEmpty(!0),b.setEmpty(!0)),b=e.fixedMergeView(),b.setVisible(l),l&&(c=this._fixedBounds,b.setRect(c),b.setClipBounds(c.x,c.y,Math.min(c.width,d.right()-c.x),Math.min(c.height,d.bottom()-c.y))),b=e.rfixedMergeView(),b.setVisible(m),m&&(c=this._rfixedBounds,b.setRect(c),b.setClipBounds(c.x,c.y,Math.min(c.width,d.right()-c.x),Math.min(c.height,d.bottom()-c.y))),b=e.mergeView(),c=this._bodyBounds.clone(),c.width+=this._rfixedWidth,b.setRect(c),l?(c.x=Math.max(c.x,this._fixedBounds.right()),b.setClipBounds(c.x,c.y,Math.min(c.width,d.right()-c.x),Math.min(c.height,d.bottom()-c.y))):b.setClipBounds(c.x,c.y,Math.min(c.width,d.right()-c.x),Math.min(c.height,d.bottom()-c.y)),c=this._fixedBounds,e.mergeHeaderView().setBounds(c.x,c.y,c.width+this._bodyBounds.width+this._rfixedWidth,c.height),e.mergeHeaderView().setClipBounds(c.x,c.y,Math.min(c.width+this._bodyBounds.width+this._rfixedWidth,d.right()-c.x),Math.min(c.height,d.bottom()-c.y)),this.$_layoutMerges()},$_checkColumnGrouping:function(){var a,b,c,d=this._grid;for(this._columnGrouped=!1,a=0,b=d.visibleColumnCount();b>a;a++)if(c=d.getVisibleColumn(a),c instanceof ak){this._columnGrouped=!0;break}},$_calcFixedColumnPoints:function(){var a,b,c,d=this._grid,e=d.fixedOptions();if(this._columnCount=d.visibleColumnCount(),this._fixedCols=Math.min(e.colCount(),this._columnCount),this._rfixedCols=Math.min(e.rightColCount(),this._columnCount-this._fixedCols),this._columns=[],this._fixedColumnPoints=[],this._fixedWidth=0,this._fixedCols>0){for(b=0,this._fixedColumnPoints.push(b),a=0;a<this._fixedCols;a++)c=d.getVisibleColumn(a),this._columns.push(c),b+=c.width(),this._fixedColumnPoints.push(b);this._fixedWidth=this._fixedColumnPoints[this._fixedCols]+d.fixedOptions().colBarWidth()}},$_calcRightFixedColumnPoints:function(){var a,b,c,d=this._grid;d.fixedOptions();if(this._rfixedColumnPoints=[],this._rfixedWidth=0,this._rfixedCols>0){b=0;var e=this._columnCount;for(this._rfixedColumnPoints.push(b),a=e-this._rfixedCols;e>a;a++)c=d.getVisibleColumn(a),this._columns.push(c),b+=c.width(),this._rfixedColumnPoints.push(b);var f=d.fixedOptions().colBarWidth();this._rfixedWidth=b+f}},$_calcColumnPoints:function(){var a,b,c,d,e=this._grid;if(this._columnsLength=0,this._columnPoints=[],a=e.visibleColumnCount()-this._fixedCols-this._rfixedCols,!(1>a)){for(c=0,this._columnPoints.push(c),b=0;a>b;b++)d=e.getVisibleColumn(b+this._fixedCols),this._columns.push(d),c+=d.width(),this._columnPoints.push(c);this._columnsLength=c}},$_measureFitting:function(a){this.grid();if(this._columnFitted=this._options.fitStyle()!=Be.NONE,this._columnFitted){var b=this._columnPoints.length;if(b>0){var c=a.width;if(this._options.fitStyle()==Be.EVEN_FILL){for(var d=1;b>d;d++)this._columnPoints[d]=this._columnPoints[d]*c/this._columnsLength;this._columnPoints[b-1]=c,this._columnsLength=c}else this._columnFitted=c-this._columnPoints[b-1]>0}else this._columnFitted=!1}},$_fitColumns:function(a){if(this._columnFitted){var b,c,d,e,f,g=this._columnsLength,h=this._columnPoints.length,i=(this.grid(),this._options),j=i.fitStyle();if(h>0){if(j==Be.EVEN||j==Be.EVEN_FILL)for(b=1;h>b;b++)this._columnPoints[b]=this._columnPoints[b]*a/g;else if(j==Be.FILL){for(e=0,f=0,b=0;h-1>b;b++)(c=this._columns[b].fillWidth())>0?f+=c:e+=this._columns[b].width();if(f>0)for(e=a-e,b=1;h>b;b++)(c=this._columns[b-1].fillWidth())>0?this._columnPoints[b]=this._columnPoints[b-1]+c*e/f:this._columnPoints[b]=this._columnPoints[b-1]+this._columns[b-1].width();else for(b=1;h>b;b++)this._columnPoints[b]=this._columnPoints[b]*a/g}var k=0;for(b=1;h-1>b;b++){var l=this._columnPoints[b]-this._columnPoints[b-1];l<Zj.MIN_WIDTH?(k=Zj.MIN_WIDTH-l,this._columnPoints[b]+=Zj.MIN_WIDTH-l):k>0&&l>Zj.MIN_WIDTH+k&&(this._columnPoints[b]-=k,k=0)}for(b=0;h-1>b;b++)d=this._columns[this._fixedCols+b],this._setFitWidth(d,this._columnPoints[b+1]-this._columnPoints[b])}this._columnPoints[h-1]=a,this._columnsLength=a}},$_calcItemHeight:function(a,b,c){var d=this._items.getItem(c),e=b.borrowItemView(d,!1,!1),f=null;e instanceof jj&&d instanceof Yf?f=a.rowGroup().headerStyles():d instanceof Wf&&(f=a.body().styles()),e.updateElement(d,f);var g=this._heightMeasurer.itemHeight(0),h=e.measure(a,1e4,g);return b.returnItemView(e),h.height},$_compensateItems:function(a){var b,c,d,e,f=this.grid(),g=f.delegate(),h=this._focusIndex?this._focusIndex.I():-1;if(h>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(this._topIndex=h-this._fixedItemCount-Math.max(0,this._fullItemCount-1),c=this.fixedItemCount()>0?this._fixedHeight+f.fixedOptions().rowBarHeight():0,this._itemPoints=[c],this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,e=f.itemCount()-this._fixedItemCount,b=this._topIndex;e>b&&c<a.height;b++)d=this.$_calcItemHeight(f,g,b+this._fixedItemCount),c+=d,this._itemCount++,this._itemPoints.push(c);return this._fullItemCount=this._itemCount-(c>=a.height?1:0),c}return-1},_calcItemPoints:function(a){var b,c,d,e,f=-1,g=this._grid,h=g.delegate(),i=0;if(this._fixedRows=this._getFixedRowCount(),this._fixedItemCount=0,this._fixedHeight=0,this._fixedItemPoints=[],this._fixedRows>0){for(this._fixedItemPoints.push(i),b=0;b<this._fixedRows&&i<a.height;b++)d=this.$_calcItemHeight(g,h,b),i+=d,this._fixedItemPoints.push(i),this._fixedItemCount++;this._fixedHeight=i,i+=g.fixedOptions().rowBarHeight()}if(c=g.itemCount()-this._fixedItemCount,this._itemPoints=[],this._itemCount=0,this._fullItemCount=0,this._availableItemCount=0,c>0&&i<a.height){for(this._itemPoints.push(i),e=this._topIndex,this._focusIndex&&(f=this._focusIndex.I(),f>=this._fixedItemCount&&f<e+this._fixedItemCount&&(e=this._topIndex=f-this._fixedItemCount)),b=e;c>b&&i<a.height;b++)d=this.$_calcItemHeight(g,h,b+this._fixedItemCount),i+=d,this._itemCount++,this._itemPoints.push(i);this._fullItemCount=this._itemCount-(i>=a.height?1:0),d=this.$_compensateItems(a),d>=0&&(i=d)}a.height=i},$_checkColumnMerging:function(){var a,b,c,d,e,f=this._grid,g=f.mergeView(),h=f.fixedMergeView(),i=f.rfixedMergeView(),j=this._fixedItemCount+this._topIndex,k=Math.min(f.itemCount()-1,this._fixedItemCount+this._topIndex+this._itemCount-1),l=this._fixedCols>0,m=this._rfixedCols>0;g.clearRooms(),l&&h.clearRooms(),m&&i.clearRooms();var n=f.getHorzColumns(0,this._fixedCols);for(a=0,b=n.length;b>a;a++)c=n[a],c instanceof pk&&c.canMerge()&&(d=c.stateFor(rj.MERGE_ROOMS),d||(d=new rj(c),c.setState(rj.MERGE_ROOMS,d)),d.refresh(j,k),e=d.getRooms(),h.addColumnRooms(c,e),this._columnMerged=!0);for(n=f.getHorzColumns(this.rfixedStartCol(),this._rfixedCols),a=0,b=n.length;b>a;a++)c=n[a],c instanceof pk&&c.canMerge()&&(d=c.stateFor(rj.MERGE_ROOMS),d||(d=new rj(c),c.setState(rj.MERGE_ROOMS,d)),d.refresh(j,k),e=d.getRooms(),i.addColumnRooms(c,e),this._columnMerged=!0);for(n=f.getHorzColumns(this._fixedCols,this._columns.length-this._fixedCols-this._rfixedCols),a=0,b=n.length;b>a;a++)c=n[a],c instanceof pk&&c.canMerge()&&(d=c.stateFor(rj.MERGE_ROOMS),d||(d=new rj(c),c.setState(rj.MERGE_ROOMS,d)),d.refresh(j,k),e=d.getRooms(),g.addColumnRooms(c,e),this._columnMerged=!0);g.clearFooters(),l&&h.clearFooters(),m&&i.clearFooters(),f.mergeHeaderView().clearHeaders()},$_layoutItems:function(a,b){var c,d,e,f=this._grid,g=f.rowGroupView(),h=f.bodyView(),i=f.fixedBodyView(),j=f.rfixedBodyView(),k=this._fixedCols>0,l=this._rfixedCols>0;for(g.clearBody(),h.clearItems(),i.clearItems(),j.clearItems(),c=0;c<this._fixedItemCount;c++)d=this._items.getItem(c),d instanceof Zf?g.addHeader(d):d instanceof $f?g.addFooter(d):d.isMerged()||(h.addItem(d),k&&i.addItem(d),l&&j.addItem(d));for(e=this._topIndex+this._fixedRows,c=0;c<this._itemCount;c++)d=this._items.getItem(c+e),d instanceof Zf?g.addHeader(d):d instanceof $f?g.addFooter(d):d.isMerged()||(h.addItem(d),k&&i.addItem(d),l&&j.addItem(d));h.layoutContent(this),k&&i.layoutContent(this),l&&j.layoutContent(this),this.isRowGrouped()&&g.layoutContent(this)},$_layoutMerges:function(){var a,b,c,d,e,f,g=this._grid,h=this._fixedCols>0,i=this._rfixedCols>0;for(b=g.mergeView(),c=this._topIndex+this._fixedRows,a=0;a<this._itemCount;a++)d=this._items.getItem(a+c),d instanceof sj&&b.addFooter(d);if(b.layoutContent(this),h){for(e=g.fixedMergeView(),a=0;a<this._itemCount;a++)d=this._items.getItem(a+c),d instanceof sj&&e.addFooter(d);e.layoutContent(this)}if(i){for(rfixedView=g.rfixedMergeView(),a=0;a<this._itemCount;a++)d=this._items.getItem(a+c),d instanceof sj&&rfixedView.addFooter(d);rfixedView.layoutContent(this)}for(f=g.mergeHeaderView(),a=0;a<this._itemCount;a++)d=this._items.getItem(a+c),d instanceof tj&&f.addHeader(d);f.layoutContent(this)},_doFitGroupWidth:function(a,b,c,d){var e=this._grid,f=e.itemCount();if(1>f)return 2;for(var g=0,h=a.visibleCount();h--;){var i,j=a.getVisibleItem(h);i=j instanceof ak?this._doFitGroupWidth(j,b,c,d):this._doFitColumnWidth(j,b,c,d,!0),a.orientation()==oe.HORIZONTAL?(ak.changeWidth(j,i-j.groupWidth(),!1),g+=i):g=Math.max(g,i)}return a.orientation()==oe.VERTICAL&&(d>0&&(g=Math.min(g,d)),c>0&&(g=Math.max(g,c)),g=Math.max(g,2),ak.changeWidth(a,g-a.groupWidth(),!1)),g},_doFitColumnWidth:function(a,b,c,d,e){var f,g,h,i=2,j=this._grid,k=j.body(),l=this._options.defaultColumnWidth(),m=j.itemCount();if(1>m)return i;g=a instanceof tk?new Fk(j):new Ek(j);var n=0,o=m;if(b&&(n=j.topItem(),o=n+this.itemCount(),(m=this.fixedItemCount())>0))for(f=0;m>f;f++)g.updateCell(k.getCell(Ye.temp(j,f,a))),h=g.measure(j,l,Ba),i=Math.max(i,h.width);for(f=n;o>f;f++){var p=Ye.temp(j,f,a);p.dataRow()>-1&&(g.updateCell(k.getCell(p)),h=g.measure(j,l,Ba),i=Math.max(i,h.width))}return d>0&&(i=Math.min(i,d)),c>0&&(i=Math.max(i,c)),!e&&ak.changeWidth(a,i-a.groupWidth(),!1),i},_getColumnRectInRoot:function(a,b){var c=a.root(),d=a.parent();for(b.copy(a.layoutRect());d!=c;)b.offset(d.layoutRect().x,d.layoutRect().y),d=d.parent()},_clearFitWidths:function(){this.grid()._clearFitWidths()},_getColumnWidth:function(a){var b=this.rfixedStartCol();return a<this._fixedCols?this._fixedColumnPoints[a+1]-this._fixedColumnPoints[a]:a>=rfixedStart?this._rfixedColumnPoints[a-b+1]-this._rfixedColumnPoints[a-b]:this._columnPoints[a-this._fixedCols+1]-this._columnPoints[a-this._fixedCols]},_setFitWidth:function(a,b){a._fitWidth=b;var c=ab(a,ak);c&&c.resetFitWidths()}}),Ek=Xa("TestDataCellElement",Wi,{init:function(a){this._super(),this._grid=a},grid:function(){return this._grid}}),Fk=Xa("TestSeriesCellElement",Yi,{init:function(a){this._super(),this._grid=a},grid:function(){return this._grid}}),Gk=Qc?1:0,Hk="***1-da*&23%^1//+)(lu%v\\3d!#~`{``~er",Ik="Tahoma",Jk="10pt",Kk=Xa("CellEditor",bb,{init:function(a,b){this._super(),this._grid=a,this._options=a.editorOptions(),this._parentElement=b,this._editor=this._createEditor(b),this._editor.$_owner=this,this._editIndex=new Ye,this._controller=null,this._started=!1,this._oldValue=void 0,this._dateConverter=Ib.Default,this._saveDateConverter=null,this._boolConverter=mb.Default,this._saveBoolConverter=null,this._cellBounds=new kd,this._editor&&(this._editor.addEventListener?(this._editor.addEventListener("focus",function(a){this._grid.$_setEditFocused(!0,a)}.bind(this)),this._editor.addEventListener("focusin",function(a){this._grid.$_setEditFocused(!0,a)}.bind(this)),this._editor.addEventListener("blur",function(a){this._grid.$_setEditFocused(!1,a)}.bind(this)),this._editor.addEventListener("focusout",function(a){this._grid.$_setEditFocused(!1,a)}.bind(this))):(this._editor.attachEvent("onfocus",function(a){this._grid.$_setEditFocused(!0,a)}.bind(this)),this._editor.attachEvent("onfocusin",function(a){this._grid.$_setEditFocused(!0,a)}.bind(this)),this._editor.attachEvent("onblur",function(a){this._grid.$_setEditFocused(!1,a)}.bind(this)),this._editor.attachEvent("onfocusout",function(a){this._grid.$_setEditFocused(!1,a)}.bind(this)))),this.setVisible(!1,!0)},emptyValue:void 0,textCase:le.DEFAULT,fontFamily:null,fontSize:null,datetimeFormat:null,todayChar:null,nowChar:null,booleanFormat:null,visible:!1,setDatetimeFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a,a?(this._saveDateConverter||(this._saveDateConverter=new Ib(a)),this._saveDateConverter.setFormatString(a),this._dateConverter=this._saveDateConverter):this._dateConverter=Ib.Default)},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?(this._saveBoolConverter||(this._saveBoolConverter=new mb(a)),this._saveBoolConverter.setFormat(a),this._boolConverter=this._saveBoolConverter):this._boolConverter=mb.Default)},editor:function(){return this._editor},visible_:function(){return parseInt(this._container.style.width)>Gk&&parseInt(this._container.style.height)>Gk},setVisible:function(a,b){if(a){var c;c=this._fontFamily?this._fontFamily:Ik,c!=this._editor.style.fontFamily&&(this._editor.style.fontFamily=c),c=this._fontSize?this._fontSize:Jk,c!=this._editor.style.fontSize&&(this._editor.style.fontSize=c)}a&&this._editor.value==Hk?this._editor.value="":a||null!=this._editor.value&&void 0!=this._editor.value&&""!=this._editor.value||(this._editor.value=Hk,this._grid.$_editFocused&&this.selectAll()),a||Jc.setSize(this._container,Gk,Gk)},isEditing:function(){return this._started},editIndex:function(){return this._editIndex},hasButton:function(){return!1},initOptions:function(){this._emptyValue=void 0,this._booleanFormat=null,this._todayChar=null,this._nowChar=null,this._datetimeFormat=null,this._textCase=le.DEFAULT,this._fontFamily=null,this._fontSize=null},applyOptions:function(a){a&&this.assign(a)},setController:function(a){this._controller=a},beginEdit:function(a,b){this._started||(this._started=this._doBeginEdit(),a&&this.clear(),b&&this.selectAll())},endEdit:function(){this._start||(this._doEndEdit(),this._started=!1)},caretToLast:function(){},commit:function(){this._doCommit()},setEditIndex:function(a){this._editIndex.assign(a)},setReadOnly:function(a){},getEditValue:function(a){return void 0},setEditValue:function(a){this._oldValue=a},getEditText:function(){return""},clear:function(){this._editor.value=""},setFocus:function(){this._editor.focus()},selectAll:function(){this._grid.$_editFocused&&this._selectAll()},setBounds:function(a,b,c,d){},setCellBounds:function(a,b,c,d){this._cellBounds.set(a,b,c,d)},closeList:function(a){},buttonClicked:function(a){},_createEditor:function(a){return null},_selectAll:function(){},_editField:function(){return this._grid.dataSource()?this._grid.dataSource().getField(this._editIndex.dataField()):null},_isDateEditor:function(){return!1},_doBeginEdit:function(){return!0},_doEndEdit:function(){},_requestStart:function(){return this._started||(this.selectAll(),this._controller.onEditorStart(this)),this._started},$_valToStr:function(a){var b=this.editIndex(),c="";try{if(a!==ta){var d=b.grid().dataSource().getField(b.dataField());if(d)switch(d.dataType()){case ie.DATETIME:a&&(c=this._dateConverter.getText(a));break;case ie.BOOLEAN:c=this._boolConverter.toText(a);break;case ie.NUMBER:isNaN(a)||(c=E(a));break;default:c=a}else c=a}}catch(e){l(e),c=a}return null===c?"":c},$_strToVal:function(a){a=E(a);var b=this._editIndex,c=b.dataColumn()&&this._textCase==le.DEFAULT?b.dataColumn().textInputCase():this._textCase;try{var d=b.grid().dataSource().getField(b.dataField());if(d){var e=d.dataType();if(e==ie.DATETIME||a&&this._isDateEditor()&&e==ie.TEXT){var f=d.dataType()==ie.DATETIME,g=null;return a&&a==this._nowChar&&(g=new Date),!g&&a&&a==this._todayChar&&(g=new Date,g.setHours(0,0,0,0)),g||(g=this._dateConverter.getDate(a)),f?g:this._dateConverter.getText(g)}if(e==ie.BOOLEAN)return this._boolConverter.toBoolEx(a);if(e==ie.NUMBER)return parseFloat(a)}return c===le.UPPER?a?a.toLocaleUpperCase():a:c===le.LOWER&&a?a.toLocaleLowerCase():a}catch(h){return void l(h)}},_dispatchKeyDown:function(a,b,c,d){return!this._controller,this._controller.onEditorKeyDown(this,a,b,c,d)},_dispatchKeyPress:function(a){return!this._controller,this._controller.onEditorKeyPress(this,a)},_dispatchKeyUp:function(a,b,c,d){return!this._controller,this._controller.onEditorKeyUp(this,a,b,c,d)},_dispatchChange:function(){this._controller.onEditorChange(this)},_dispatchSearch:function(a){this._controller.onEditorSearch(this,a)},_dispatchCommit:function(){this._controller.onEditorCommit(this)},_sendToParent:function(a,b,c){try{var d=Nc&&a.metaKey||!Nc&&a.ctrlKey;if(2==b){if(this._dispatchKeyPress(a.keyCode||a.which))return a.preventDefault&&a.preventDefault(),!0}else if(3==b){if(this._dispatchKeyUp(a.keyCode,d,a.shiftKey,a.altKey))return a.preventDefault&&a.preventDefault(),!0}else if(this._dispatchKeyDown(a.keyCode,d,a.shiftKey,a.altKey))return a.preventDefault&&a.preventDefault(),!0;return!1}finally{}}},{Unselected:{}}),Lk=Xa("TextCellEditor",Kk,{init:function(a,b){this._super(a,b),this._borderable=!0,this._modified=!1,this._inputValue=void 0},readOnly:!1,maxLength:0,text:function(){return this._editor.value},setAlignment:function(a){this._container.style.textAlign="left"},setText:function(a){this._editor&&a!=this._editor.value&&(this._editor.value=a,this._doChanged())},initOptions:function(){this._super(),this._editor.readOnly=this._readOnly=!1,this._maxLength=0},setReadOnly:function(a){this._editor.readOnly=this._readOnly=a},_selectAll:function(){this._editor.select()},_doBeginEdit:function(a,b){return this._modified=!1,this.isVisible()&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},_doEndEdit:function(){this._modified=!1},caretToLast:function(){var a=E(this._editor.value).length;this._editor.setSelectionRange(a,a)},_doCommit:function(){},setEditIndex:function(a){this._super(a);var b=(a&&a.grid(),a.valueColumn());if(b){var c=this._textCase==le.DEFAULT?b.textInputCase():this._textCase;switch(c){case le.LOWER:this._editor.style.textTransform="lowercase";break;case le.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=this._maxLength>0?this._maxLength:this._defMaxLength}},setEditValue:function(a){this._super(a),this._editor.value=this.$_valToStr(a)},getEditValue:function(a){a=arguments.length>0?a:!0;var b=this._editField(),c=this._emptyValue;try{var d=b.dataType(),e=this._editor.value;if(d==ie.TEXT)e||void 0===this._emptyValue||(e=this._emptyValue),c=this.$_strToVal(e),void 0===c&&(c="");else if(r(e))if(void 0!==this._emptyValue)c=this.$_strToVal(this._emptyValue);else switch(d){case ie.NUMBER:isNaN(this._oldValue)&&(c=NaN);
break;case ie.DATETIME:null===this._oldValue&&(c=null);break;case ie.BOOLEAN:}else c=this.$_strToVal(e);c=b.readValue(c)}catch(f){if(a)throw f;c=this._emptyValue}return c},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(a,b){this._super(a,b),a&&this._borderable?(this._container.style.border="2px solid rgb(82, 146, 247)",this._container.style["box-shadow"]="rgba(0, 0, 0, 0.4) 1px 2px 5px"):(this._container.style.border="none",this._container.style["box-shadow"]="none")},_createContainer2:function(){var a=document.createElement("div");return a.spellCheck=!1,a["aria-hidden"]=!1,a.style.position="absolute",a.style["z-index"]=2e3,a.style.resize="none",a.style.border="none",a.style.outline="none",a.style["aria-hidden"]=!1,a.style["font-family"]="Tahoma",a.style["font-style"]="normal",a.style["font-variant"]="normal",a.style["font-weight"]="normal",a.style["font-size"]="13px",a.style["line-height"]="normal",a.style["text-align"]="left",a.style.padding="1px 2px",a.style.margin="0px",a.style["max-width"]="none",a.style["max-height"]="none",a.style.overflow="hidden",a.style["background-color"]="rgb(255, 255, 255)",a.style["box-shadow"]="none",a.style.color="rgb(68, 84, 106)",a.style["word-wrap"]="break-word",a},_createEditor2:function(a){this._container=this._createContainer2(),a.appendChild(this._container);var b=document.createElement("div");return b.contenteditable=!0,b.style.width="100%",b.style.height="100%",b.style.margin=0,b.style.outline="none",b.style.cursor="text",b.style["-webkit-user-modify"]="read-write-plaintext-only",b.style["white-space"]="pre-wrap",b.style["-webkit-transform"]="translateZ(0)",this._container.appendChild(b),b},_createContainer:function(){var a=document.createElement("div");return a.spellcheck=!1,a["aria-hidden"]=!1,a.style.outline="none",a.style["aria-hidden"]=!1,a.style.position="absolute",a.style["z-index"]=2e3,a.style.boxSizing="border-box",a.style.overflow="hidden",a.style.border="none",a.style.width="0px",a.style.height="0px",a.style.padding="0px",a.style.margin="0px",a.style.border="2px solid rgb(82, 146, 247)",a.style.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",a.style.resize="none",a},_createEditor:function(a){this._container=this._createContainer(),a.appendChild(this._container);var b=document.createElement("input");return b.autoComplete="off",b.style.position="absolute",b.style.margin="0px",b.style.padding="0px",b.style.fontFamily=Ik,b.style.fontStyle="normal",b.style.fontVariant="normal",b.style.fontWeight="normal",b.style.fontSize=Jk,b.style.lineHeight="normal",b.style.wordWrap="normal",b.style.overflow="hidden",b.style.resize="none",b.style.border="none",b.style.outline="none",b.style.textAlign="left",b.style.color="rgb(68, 84, 106)",b.style.left="0px",b.style.top="0px",b.style.width="100%",b.style.height="100%",b.style.imeMode="auto",b.style.cursor="text",b.style["-webkit-user-modify"]="read-write-plaintext-only",b.style["white-space"]="pre-wrap",b.style["-webkit-transform"]="translateZ(0)",b.onkeydown=this._keyDownHandler.bind(this),b.onkeyup=this._keyUpHandler.bind(this),b.onkeypress=this._keyPressHandler.bind(this),b.onchange=this._changeHandler.bind(this),b.oninput=this._inputHandlerStock=this._inputHandler.bind(this),b.onpaste=this._pasteHandler.bind(this),b.oncopy=this._copyHandler.bind(this),b.addEventListener?(b.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),b.addEventListener("compositionupdate",this._compositionupdatetHandler.bind(this)),b.addEventListener("compositionend",this._compositionendHandler.bind(this)),b.addEventListener("text",this._textHandler.bind(this)),b.addEventListener("selectionchange",function(a){j("########################### S E L C H")})):(b.attachEvent("oncompositionstart",this._compositionstartHandler.bind(this)),b.attachEvent("oncompositionupdate",this._compositionupdatetHandler.bind(this)),b.attachEvent("oncompositionend",this._compositionendHandler.bind(this)),b.attachEvent("ontext",this._textHandler.bind(this)),b.attachEvent("onselectionchange",function(a){j("########################### S E L C H")})),this._container.appendChild(b),this._defMaxLength=b.maxLength>0?b.maxLength:1e6,b},_focusHandler:function(){},_keyDownHandler:function(a){var b=this._editor,c=a.keyCode;if((Sc||Tc)&&!this.isVisible()&&a.ctrlKey&&c==Yd.Z)return!1;switch(this._inputValue=b.value,c){case Yd.BACK:case Yd.DELETE:this._sendToParent(a)||!this.isVisible()&&this._requestStart()&&(a.preventDefault(),a.stopImmediatePropagation(),!this._editor.readOnly&&this._editor.value&&this.setText(""));break;case Yd.TAB:return!this._sendToParent(a);case Yd.LEFT:if(!this.isVisible()||0==b.selectionEnd&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);if(this._editor.readOnly&&Rc)return!this._sendToParent(a);break;case Yd.RIGHT:if(!this.isVisible()||b.selectionEnd==b.value.length&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);if(this._editor.readOnly&&Rc)return!this._sendToParent(a);break;case Yd.HOME:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.END:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.SPACE:if(!this.isVisible())return!this._sendToParent(a);break;case Yd.UP:case Yd.DOWN:case Yd.PAGEUP:case Yd.PAGEDOWN:case Yd.ENTER:case Yd.ESCAPE:case Yd.F2:case Yd.INSERT:return a.preventDefault(),a.stopImmediatePropagation(),!this._sendToParent(a);case 229:this._sendToParent(a);break;default:return!this._sendToParent(a,null,!0)}return Pc&&!a.ctrlKey&&!a.altKey&&(0==c||c>=32)&&(112>c||c>130)&&this._requestStart(),!0},_keyUpHandler:function(a){var b=a.keyCode;switch((b==Yd.BACK||b==Yd.DELETE)&&Vc&&this.isVisible()&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),a.keyCode){case Yd.LEFT:case Yd.RIGHT:case Yd.HOME:case Yd.END:case Yd.SPACE:this.isVisible()||this._sendToParent(a,3);break;default:this._sendToParent(a,3)}},_keyPressHandler:function(a){var b=a.which||a.keyCode;this._sendToParent(a,2),Pc?!a.ctrlKey&&!a.altKey&&(0==b||b>=32)&&(112>b||b>130)&&this._requestStart():b>=32&&this._requestStart()},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(){this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange())},_compositionupdatetHandler:function(){this._composing=!0},_compositionendHandler:function(a){this._composing=!1},_changeHandler:function(a){},_inputHandler:function(a){if(Yc){if(this._editor.value==Hk)return;if((void 0==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}this._doChanged()},_pasteHandler:function(a){if(this.isVisible())return void this._doChanged();a.preventDefault();try{var b,c=(a.originalEvent||a).clipboardData;b=c?c.getData("text/plain"):window.clipboardData.getData("text"),b&&this._grid.pasteFromClipboard(b)}catch(d){if(!(d instanceof S))throw d;alert(d.message)}},_copyHandler:function(a){if(!this.isEditing()){var b=this._grid.copyToClipboard();return ia.clipboardData?ia.clipboardData.setData("Text",b):a.clipboardData.setData("text/plain",b),a.preventDefault()}},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange())},setBounds:function(a,b,c,d){Jc.setBounds(this._container,a,b,c,d)}}),Mk=Xa("LineCellEditor",Lk,{init:function(a,b){this._super(a,b)}}),Nk=Xa("MultiLineCellEditor",Kk,{init:function(a,b){this._super(a,b),this._modified=!1},readOnly:!1,maxLength:0,minHeight:0,text:function(){return this._editor.value},setAlignment:function(a){this._container.style.textAlign="left"},initOptions:function(){this._super(),this._editor.readOnly=this._readOnly=!1,this._maxLength=0,this._minHeight=0},setReadOnly:function(a){this._editor.readOnly=this._readOnly=a},_selectAll:function(){this._editor.select()},_doBeginEdit:function(a,b){return this._modified=!1,this.isVisible()&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},_doEndEdit:function(){this._modified=!1},_doCommit:function(){},setEditIndex:function(a){this._super(a);var b=(a&&a.grid(),this._textCase==le.DEFAULT?a.dataColumn().textInputCase:this._textCase);switch(b){case le.LOWER:this._editor.style.textTransform="lowercase";break;case le.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=this._maxLength>0?this._maxLength:2e9},setEditValue:function(a){this._super(a),this._editor.value=this.$_valToStr(a)},getEditValue:function(a){a=arguments.length>0?a:!0;var b=this._editField(),c=b.nullValue;try{var d=b.dataType(),e=this._editor.value;if(d==ie.TEXT)e||void 0===this._emptyValue||(e=this._emptyValue),c=this.$_strToVal(e),void 0===c&&(c="");else if(r(e))if(void 0!==this._emptyValue)c=this.$_strToVal(this._emptyValue);else switch(d){case ie.NUMBER:isNaN(this._oldValue)&&(c=NaN);break;case ie.DATETIME:null===this._oldValue&&(c=null);break;case ie.BOOLEAN:}else c=this.$_strToVal(e);c=b.readValue(c)}catch(f){if(a)throw f}return c},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},setVisible:function(a,b){this._super(a,b),a?(this._container.style.border="2px solid rgb(82, 146, 247)",this._container.style["box-shadow"]="rgba(0, 0, 0, 0.4) 1px 2px 5px"):(this._container.style.border="none",this._container.style["box-shadow"]="none")},_createContainer:function(){var a=document.createElement("div");return a.spellcheck=!1,a.style.position="absolute",a.style["z-index"]=2e3,a.style.boxSizing="border-box",a.style.overflow="hidden",a.style.border="none",a.style.width="0px",a.style.height="0px",a.style.padding="0px",a.style.margin="0px",a.style.backgroundColor="#fff",a.style.border="none",a.style.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",a.style.resize="none",a},_createEditor:function(a){this._container=this._createContainer(),a.appendChild(this._container);var b=document.createElement("textarea");return b.autoComplete="off",b.style.tabIndex=-1,b.style.position="absolute",b.style.margin="0px",b.style.padding="0px",b.style.fontFamily=Ik,b.style.fontStyle="normal",b.style.fontVariant="normal",b.style.fontWeight="normal",b.style.fontSize=Jk,b.style.lineHeight="normal",b.style.wordWrap="normal",b.style.overflow="hidden",b.style.resize="none",b.style.border="none",b.style.outline="none",b.style.textAlign="left",b.style.color="rgb(68, 84, 106)",b.style.left="0px",b.style.top="0px",b.style.width="100%",b.style.height="100%",b.style.imeMode="auto",b.style.cursor="text",b.style["-webkit-user-modify"]="read-write-plaintext-only",b.style["white-space"]="pre",b.style["-webkit-transform"]="translateZ(0)",b.onkeydown=this._keyDownHandler.bind(this),b.onkeypress=this._keyPressHandler.bind(this),b.oninput=this._inputHandler.bind(this),b.onpaste=this._pasteHandler.bind(this),b.oncopy=this._copyHandler.bind(this),b.addEventListener?(b.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),b.addEventListener("text",this._textHandler.bind(this))):(b.attachEvent("oncompositionstart",this._compositionstartHandler.bind(this)),b.attachEvent("ontext",this._textHandler.bind(this))),this._container.appendChild(b),b},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(){Ea("########## COMPOSITION START: "),this._requestStart()},_keyDownHandler:function(a){Ea("########## EDITOR KEYDOWN: "+a.keyCode);var b=this._editor,c=a.keyCode;if((Sc||Tc)&&!this.isVisible()&&a.ctrlKey&&c==Yd.Z)return!1;switch(c){case Yd.BACK:case Yd.DELETE:this._sendToParent(a)||!this.isVisible()&&this._requestStart()&&(a.preventDefault(),a.stopImmediatePropagation(),!this._editor.readOnly&&this._editor.value&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case Yd.TAB:return!this._sendToParent(a);case Yd.LEFT:if(!this.isVisible()||0==b.selectionEnd&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);break;case Yd.RIGHT:if(!this.isVisible()||b.selectionEnd==b.value.length&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);break;case Yd.HOME:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.END:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.UP:case Yd.PAGEUP:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.DOWN:case Yd.PAGEDOWN:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.SPACE:if(!this.isVisible())return!this._sendToParent(a);break;case Yd.ENTER:if(!a.ctrlKey&&!a.shiftKey)return!this._sendToParent(a);if(a.ctrlKey&&!a.shiftKey){a.stopImmediatePropagation();var d=b.value;if(d){var e=b.selectionEnd;d=d.substring(0,e)+"\r\n"+d.substring(e),b.value=d,b.setSelectionRange(e+1,e+1),this._doChanged()}}break;case Yd.ESCAPE:case Yd.F2:case Yd.INSERT:return a.preventDefault(),a.stopImmediatePropagation(),!this._sendToParent(a);case 229:break;default:return this._sendToParent(a,null,!0),!0}return 0==a.keyCode,!0},_keyPressHandler:function(a){a.keyCode>=32&&this._requestStart()},_inputHandler:function(a){this._doChanged()},_pasteHandler:function(a){if(this.isVisible())return void this._doChanged();var b,c=(a.originalEvent||a).clipboardData;return b=c?c.getData("text/plain"):window.clipboardData.getData("text"),b&&this._grid.pasteFromClipboard(b),a.preventDefault()},_copyHandler:function(a){if(!this.isEditing()){var b=this._grid.copyToClipboard();return ia.clipboardData?ia.clipboardData.setData("Text",b):a.clipboardData.setData("text/plain",b),a.preventDefault()}},setBounds:function(a,b,c,d){Jc.setBounds(this._container,a,b,c,d),a>dm.x&&this.$_resetBounds()},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},$_resetBounds:function(){var a=Jc.getBounds(this._container),b=a.cx,c=a.cy,d=a.width,e=Math.round(a.height),f=this._editor.value==Hk;!f&&this._editor.scrollWidth>d&&(d=this._editor.scrollWidth+6),!f&&this._editor.scrollHeight>e&&(e=this._editor.scrollHeight+6);var g=isNaN(parseInt(this._minHeight))?0:parseInt(this._minHeight);g>0&&(e=Math.max(e,g)),a=Jc.getBounds(this._parentElement),d=Math.min(a.width,d),e=Math.min(a.height,e),b+d>a.width&&(b=a.width-d),c+e>a.height&&(c=a.height-e),Jc.setBounds(this._container,Math.max(b,0),Math.max(c,0),d,e)}}),Ok=(Xa("MultiLineCellEditor2",Kk,{init:function(a,b){this._super(a,b),this._modified=!1},readOnly:!1,maxLength:0,text:function(){},setText:function(){},setAlignment:function(a){this._container.style.textAlign="left"},initOptions:function(){this._super(),this._editor.readOnly=this._readOnly=!1,this._maxLength=0},setReadOnly:function(a){this._editor.readOnly=this._readOnly=a},_selectAll:function(){this._editor.select()},_doBeginEdit:function(a,b){return this._modified=!1,this.isVisible()&&(this._editor.value||this._editor.setSelectionRange(0,0)),!0},_doEndEdit:function(){this._modified=!1},_doCommit:function(){},setEditIndex:function(a){this._super(a);var b=(a&&a.grid(),this._textCase==le.DEFAULT?a.dataColumn().textInputCase:this._textCase);switch(b){case le.LOWER:this._editor.style.textTransform="lowercase";break;case le.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}this._editor.maxLength=this._maxLength>0?this._maxLength:2e9},setEditValue:function(a){this._super(a),this._editor.value=this.$_valToStr(a)},getEditValue:function(a){a=arguments.length>0?a:!0;var b=this._editField(),c=b.nullValue;try{var d=b.dataType(),e=this._editor.value;if(d==ie.TEXT)e||void 0===this._emptyValue||(e=this._emptyValue),c=this.$_strToVal(e),void 0===c&&(c="");else if(r(e))if(void 0!==this._emptyValue)c=this.$_strToVal(this._emptyValue);else switch(d){case ie.NUMBER:isNaN(this._oldValue)&&(c=NaN);break;case ie.DATETIME:null===this._oldValue&&(c=null);break;case ie.BOOLEAN:}else c=this.$_strToVal(e);c=b.readValue(c)}catch(f){if(a)throw f}return c},getEditText:function(){return this._editor.value},isEdited:function(){return this._modified},_selectAll:function(){if(document.selection){var a=document.body.createTextRange();a.moveToElementText(this._editor),a.select()}else if(window.getSelection){var a=document.createRange();a.selectNode(this._editor),window.getSelection().addRange(a)}},_createContainer:function(){var a=document.createElement("div");return a.spellcheck=!1,a.style.position="absolute",a.style["z-index"]=2e3,a.style.boxSizing="border-box",a.style.overflow="hidden",a.style.border="none",a.style.width="0px",a.style.height="0px",a.style.padding="1px",a.style.margin="0px",a.style.backgroundColor="#fff",a.style.border="2px solid rgb(82, 146, 247)",a.style.boxShadow="rgba(0, 0, 0, 0.4) 1px 2px 5px",a.style.resize="none",a},_createEditor:function(a){this._container=this._createContainer(),a.appendChild(this._container);var b=document.createElement("div");return b.contenteditable=!0,b.contentEditable=!0,b.style.width="100%",b.style.height="100%",b.style.margin=0,b.style.outline="none",b.style.cursor="text",b.style["-webkit-user-modify"]="read-write-plaintext-only",b.style["white-space"]="pre-wrap",b.style["-webkit-transform"]="translateZ(0)",b.onkeydown=this._keyDownHandler.bind(this),b.onkeypress=this._keyPressHandler.bind(this),b.oninput=this._inputHandler.bind(this),b.onpaste=this._pasteHandler.bind(this),b.oncopy=this._copyHandler.bind(this),b.addEventListener?(b.addEventListener("compositionstart",this._compositionstartHandler.bind(this)),b.addEventListener("text",this._textHandler.bind(this))):(b.attachEvent("oncompositionstart",this._compositionstartHandler.bind(this)),b.attachEvent("ontext",this._textHandler.bind(this))),this._container.appendChild(b),b},_textHandler:function(){this._requestStart()},_compositionstartHandler:function(){Ea("########## COMPOSITION START: "),this._requestStart()},_keyDownHandler:function(a){Ea("########## EDITOR KEYDOWN: "+a.keyCode);var b=this._editor;switch(a.keyCode){case Yd.BACK:a.preventDefault(),a.stopImmediatePropagation();case Yd.DELETE:this._sendToParent(a)||!this.isVisible()&&this._requestStart()&&(a.preventDefault(),a.stopImmediatePropagation(),!this._editor.readOnly&&this._editor.value&&(this._editor.value="",this._modified=!0,this._dispatchChange()));break;case Yd.TAB:return!this._sendToParent(a);case Yd.LEFT:if(!this.isVisible()||0==b.selectionEnd&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);break;case Yd.RIGHT:if(!this.isVisible()||b.selectionEnd==b.value.length&&b.selectionEnd==b.selectionStart)return!this._sendToParent(a);break;case Yd.HOME:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.END:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.UP:case Yd.PAGEUP:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.DOWN:case Yd.PAGEDOWN:if(!this.isVisible())return!this._sendToParent(a);a.stopImmediatePropagation();break;case Yd.SPACE:if(!this.isVisible())return!this._sendToParent(a);break;case Yd.ENTER:if(!a.ctrlKey&&!a.shiftKey)return!this._sendToParent(a);if(a.ctrlKey&&!a.shiftKey){a.stopImmediatePropagation();var c=b.value;if(c){var d=b.selectionEnd;c=c.substring(0,d)+"\r\n"+c.substring(d),b.value=c,b.setSelectionRange(d+1,d+1),this._doChanged()}}break;case Yd.ESCAPE:case Yd.F2:case Yd.INSERT:return a.preventDefault(),a.stopImmediatePropagation(),!this._sendToParent(a);case 229:}return 0==a.keyCode,!0},_keyPressHandler:function(a){a.keyCode>=32&&this._requestStart()},_inputHandler:function(a){this._doChanged()},_pasteHandler:function(a){if(this.isVisible())return void this._doChanged();var b,c=(a.originalEvent||a).clipboardData;return b=c?c.getData("text/plain"):window.clipboardData.getData("text"),b&&this._grid.pasteFromClipboard(b),a.preventDefault()},_copyHandler:function(a){if(!this.isEditing()){var b=this._grid.copyToClipboard();return ia.clipboardData?ia.clipboardData.setData("Text",b):a.clipboardData.setData("text/plain",b),a.preventDefault()}},setBounds:function(a,b,c,d){Jc.setBounds(this._container,a,b,c,d),this.$_resetBounds()},_doChanged:function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this.$_resetBounds())},$_resetBounds:function(){var a=Jc.getBounds(this._container),b=a.cx,c=a.cy,d=this._editor.scrollWidth+6,e=this._editor.scrollHeight+6;a=Jc.getBounds(this._parentElement),b+d>a.width&&(b=a.width-d),c+e>a.height&&(c=a.height-e),Jc.setBounds(this._container,Math.max(b,0),Math.max(c,0),d,e)}}),Q({BUTTON:"button",EDITOR:"editor"})),Pk=Q({NONE:"none",ASCENDING:"ascending",DESCENDING:"descending"}),Qk=Pk,Rk=Xa("DropDownCellEditor",Lk,{init:function(a,b){this._super(a,b),this._list=new Sk(a._container,this._options&&(this._options._useCssStyle||this._options._useCssStyleDropDownList)),this._list.addListener(this),this._items=null,this._values=[],this._labeling=!1,this._lookup=!1,this._domain=null,this._closing=!1,this._value=void 0,this._selectedIndex=-1,this._borderable=!1,this._globalMouseHandler=function(a){for(var b=a.target;b;){if(b==this._list._element)return;b=b.parentNode}this.closeUp(!0)}.bind(this)},values:null,items:null,labels:null,displayLabels:!0,domainOnly:!1,textReadOnly:!1,dropDownWidth:-1,dropDownPosition:Ok.BUTTON,dropDownCount:8,itemSortStyle:Qk.NONE,caseSensitive:!1,partialMatch:!1,commitOnSelect:!0,dropDownWhenClick:!1,setValues:function(a){this._values=a?a.slice():[]},setItems:function(a){this.setValues(a)},items_:function(){return this._value},setLabels:function(a){this._labels=a?a.slice():[]},isListing:function(){return this._list.isListing()},dropDown:function(a){if(!this.isReadOnly()&&!this.isListing()&&!this._closing&&(this._refreshItems(),a||this._items&&this._items.length>0)){this._list.setViewGridInside(this._options&&this._options._viewGridInside),this._list.setItems(this._items);var b=Jc.getBounds(this._container);return this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,this._list.setCaseSensitive(this._caseSensitive),this._list.setPartialMatch(this._partialMatch),this._list.setDropDownCount(this._dropDownCount),this._list.setDropDownWidth(this._dropDownWidth),this._list.setDropDownPosition(this._dropDownPosition),this._list.setSortStyle(this._itemSortStyle),this._list.setValueIndex(this._selectedIndex),this._list.show(ja.documentElement,b.cx-1,b.cy+b.height,this._cellBounds.width,Jc.getBounds(this._editor)),this._list.$_search(this._editor.value,!0),Jc.addWindowListener("mousedown",this._globalMouseHandler),!0}return!1},closeUp:function(a){if(this.isListing()){this._closing=!0;try{var b;Jc.removeWindowListener("mousedown",this._globalMouseHandler),this._list.hide(),a&&this._list.isSelected()&&(b=this._list.itemIndex())>=0&&this._items&&this._items.length>b?(this._selectedIndex=this._list.valueIndex(),this._editor.value=this._items[b],(this._selectedIndex!=this._saveIndex||this._editor.value!=this._saveText)&&this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit()):this._selectedIndex=-1}finally{this._closing=!1}return!0}return!1},hasButton:function(){return!0},initOptions:function(){this._super(),this._values=[],this._labels=[],this._displayLabels=!0,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=Ok.BUTTON,this._dropDownCount=8,this._itemSortStyle=Qk.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1},setEditIndex:function(a){this._super(a),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._textReadOnly&&(this._editor.readOnly=!0),this._refreshItems()},setEditValue_2:function(a){this._super(a),this._value=a,this._editor.value=this.$_valToStr(a)},setEditValue:function(a){var b,c,d,e=-1;if(this._value=a,this._lookup){var f=this._domain;f?(b=e=f.keys?f.keys.indexOf(a):-1,d=b>=0&&f.values&&f.values.length>b?f.values[b]:a):e=this._editIndex.dataColumn().getLookupIndex(a),this._labeling?(d=f?e>=0&&f.values&&f.values.length>e?f.values[e]:a:e>=0?this._editIndex.dataColumn().getLookupLabel(a):a,this._super(d)):this._super(a)}else if(this._values){for(b=0,c=this._values.length;c>b;b++)if(a==this._values[b]){e=b;break}this._labeling&&this._labels&&(0>e||this._labels.length>e)?(d=e>=0?this._labels[b]:a,this._super(d)):this._super(a)}else this._super(a);this._selectedIndex=e},isEdited:function(){var a=this._super();return a&&this.isDomainOnly()&&(a=void 0!==this.$_getEditValue(!1)),a},getEditValue:function(a){return!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(a)},_createContainer:function(){var a=this._super();return a.style.border="none",a.style.boxShadow="none",a},setBounds:function(a,b,c,d){a+=2,b+=2,c-=4,d-=4,this._super(a,b,c,d)},_createEditor:function(a){var b=this._super(a);return b},_textHandler:function(){this._requestStart()},_oncompositionstartHandler:function(){this._super()},_keyDownHandler:function(a){var b=this._list;switch(a.keyCode){case Yd.ENTER:if(this.closeUp(!0))return!this._sendToParent(a);break;case Yd.ESCAPE:if(this.closeUp(!1))return a.preventDefault(),!0;break;case Yd.DOWN:if(a.altKey&&!this.isListing())return this._requestStart(),a.preventDefault(),!0;if(this.isListing())return this._list.setItemIndex(Math.min(b.itemCount()-1,b.itemIndex()+1)),a.preventDefault(),!0;break;case Yd.PAGEDOWN:if(this.isListing())return this._list.setItemIndex(Math.min(b.itemCount()-1,b.itemIndex()+b.dropDownCount())),a.preventDefault(),!0;break;case Yd.UP:if(a.altKey&&this.isListing())return this.closeUp(!1),a.preventDefault(),!0;if(this.isListing())return this._list.setItemIndex(Math.max(0,b.itemIndex()-1)),a.preventDefault(),!0;break;case Yd.PAGEUP:if(this.isListing())return this._list.setItemIndex(Math.max(0,b.itemIndex()-b.dropDownCount())),a.preventDefault(),!0}return this._super(a)},_keyPressHandler:function(a){this._super(a)},_inputHandler:function(a){return this._super(a)},_pasteHandler:function(a){return this._super(a)},_copyHandler:function(a){return this._super(a)},_requestStart:function(){return this._super()?(this.dropDown(),!0):!1},_doChanged:function(){this._super(),this.isListing()&&this._list.$_search(this._editor.value)},closeList:function(a){this.closeUp(a)},buttonClicked:function(a){this.isListing()?this.closeUp(!1):this.dropDown()},_refreshItems:function(a,b){var c=this.editIndex(),d=c.item();if(this._values&&(this._values.length>0||b))this.isDisplayLabels()&&this._labels&&this._labels.length>=this._values.length?(this._items=this._labels,this._labeling=!0):this._items=this._values;else if(c.dataColumn()&&c.item()&&(c.dataRow()>=0||me.isEditing(d.itemState()))){var e=c.dataColumn();if(e.lookupSource()){for(var f=e.lookupKeyFieldIds(),g=[],h=0;h<f.length-1;h++)g.push(d.getData(f[h]));var i=e.lookupSource().getTextDomain(g);i&&i.values&&i.values.length>0&&(this._items=i.values,this._labeling=!0,this._lookup=!0,this._domain=i)}else e.lookupValues()&&e.lookupValues().length>0&&(this.isDisplayLabels()&&e.lookupLabels()&&e.lookupLabels().length>=e.lookupValues().length?(this._items=e.lookupLabels(),this._labeling=!0):this._items=e.lookupValues(),this._lookup=!0)}if(a&&this.isListing()){this._list.setItems(this._items);var j=Jc.getBounds(this._container);this._list.$_resetItems(j.cx-1,j.cy+j.height,this._cellBounds.width,Jc.getBounds(this._editor))}},$_getEditValue:function(a){var b,c=this.text(),d=Lk.prototype.getEditValue.call(this,a),e=d,f=this._editIndex.dataColumn(),g=this._selectedIndex,h=g>=0;if(this._lookup){if(this._domain){if(this._labeling&&(b=h?g:this._domain.values?this._domain.values.indexOf(c):-1,e=b>=0&&this._domain.keys&&this._domain.keys.length>b?this._domain.keys[b]:e),this.isDomainOnly()&&(!this._domain.keys||this._domain.keys.indexOf(e)<0))return Kk.Unselected}else if(this._labeling&&(e=h?f.getLookupValue(g):f.getSourceValue(c),void 0===e&&(e=d)),this.isDomainOnly()&&(!f.lookupValues()||f.lookupValues().indexOf(e)<0))return Kk.Unselected}else if(this._labeling&&(b=h?g:this._labels?this._labels.indexOf(c):-1,b>=0&&b<this._values.length&&(e=this._values[b])),this.isDomainOnly()&&(!this._values||this._values.indexOf(e)<0))return Kk.Unselected;return e},onDropDownListCloseUp:function(a,b){this.closeUp(b),this.setFocus()}}),Sk=Xa("DropDownList",bb,{init:function(a,b){this._super(),this._useCssStyle=b,this._container=a,this._containerElement=null,this._dom=new Jc(this._element=this.$_createList()),this._firstChild=null,this._selected=!1,this._mouseoverHandler=function(a){var b=this._currDiv=a.currentTarget;Jc.getChildIndex(b)!=this._itemIndex&&(b.style.background="rgba(0, 255, 0, 0.2)")}.bind(this),this._mouseoutHandler=function(a){var b=this._currDiv=a.currentTarget;Jc.getChildIndex(b)!=this._itemIndex&&(b.style.background="")}.bind(this),this._clickHandler=function(a){var b=a.currentTarget,c=Jc.getChildIndex(b);c>=0&&(this._itemIndex=c,this.fireEvent(Sk.CLOSE_UP,!0))}.bind(this)},minWidth:0,maxWidth:0,dropDownCount:8,caseSensitive:!1,partialMatch:!1,sortStyle:Qk.NONE,items:null,itemIndex:-1,dropDownPosition:Ok.BUTTON,dropDownWidth:-1,viewGridInside:!1,isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},setItems:function(a){if(this._items=[],a)for(var b=0,c=a.length;c>b;b++)this._items.push({label:a[b],index:b})},setItemIndex:function(a,b){a=Math.max(-1,a),a<this._items.length&&(b||a!=this._itemIndex)&&(this._itemIndex=a,this.isListing()&&this.$_refreshItems(),this._selected=a>=0)},itemCount:function(){return this._items&&this._items.length},valueIndex:function(){var a=this._items,b=this._itemIndex;return a&&b>=0&&b<a.length?a[b].index:-1},setValueIndex:function(a){if(a=Math.max(-1,a),this._itemIndex=-1,a>=0)for(var b=0,c=this._items.length;c>b;b++)if(this._items[b].index==a){this._itemIndex=a;break}this.isListing()&&this.$_refreshItems(),this._selected=!0},isSelected:function(){return this._selected},show:function(a,b,c,d,e){this._containerElement=this._viewGridInside?this._container._container:a,this._sortStyle!=Qk.NONE&&this.$_sortItems(),this.$_show(b,c,d,e)},hide:function(){this._dom.detach(),this._containerElement=null},$_createList:function(){var a=document.createElement("div");return this._useCssStyle&&(a.className="rg-dropdownlist"),a.onkeydown=function(a){27==a.keyCode&&this.fireEvent(Sk.CLOSE_UP,!1)}.bind(this),a},$_sortItems:function(){this._sortStyle==Qk.ASCENDING?this._items.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0}):this._items.sort(function(a,b){return a.label>b.label?-1:a.label<b.label?1:0})},$_show:function(a,b,c,d){var e=this._element;if(e){var e=this._dom.element();this._dom.setStyles({position:"absolute","float":"none",clear:"both",boxSizing:"border-box",minWidth:"20px",minHeight:"10px",overflow:"auto",zIndex:3e3}),!this._useCssStyle&&this._dom.setStyles({background:"#fff",border:"1px solid rgb(50, 50, 50)",boxShadow:"rgba(0, 0, 0, 0.8) 1px 2px 5px",fontFamily:"Tahoma",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",fontSize:"10pt",padding:"0px",margin:"0px"}),this._firstChild=null,this._dom.clearChildren(),this._dom.disableSelection(),this._containerElement.appendChild(e),this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(c),this.$_resetPosition(a,b,c,d),this._selected=!1}},$_resetHeight:function(){var a=this._dom.element();if(this._firstChild){var b=Jc.getBounds(this._firstChild),c=this._firstChild.currentStyle||window.getComputedStyle(this._firstChild),d=parseInt(c.marginTop.replace("px",""));d=isNaN(d)?0:d;var e=parseInt(c.marginBottom.replace("px",""));e=isNaN(e)?0:e;var f=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;a.style.height=(b.height+d)*f+4+e+"px"}else a.style.height="10px"},$_resetWidth:function(a){var b=this._dom.element(),c=Jc.getBounds(b),d=this._dropDownWidth,e=this._dropDownWidth;
0>e?e=a:0==e&&(e=10),b.style.width=e+"px";var f=0;if(this._firstChild){var g=this._firstChild.currentStyle||window.getComputedStyle(this._firstChild),h=parseInt(g.marginLeft.replace("px",""));h=isNaN(h)?0:h;var i=parseInt(g.marginRight.replace("px",""));i=isNaN(i)?0:i;for(var j=b.childNodes,k=0;k<j.length;k++)f=Math.max(f,j[k].scrollWidth);f+=b.offsetWidth-b.clientWidth+h+i}0>d&&(f=Math.max(f,e)),c=$c(),f=Math.min(f,c.width),e=f,Vc&&(d>=0||f>e)&&(e+=20),e<c.width?b.style.overflowX="hidden":b.style.overflowX="auto",b.style.width=e+"px"},$_resetPosition:function(a,b,c,d){var e=$c(),f=Jc.getBounds(this._containerElement),g=Jc.getBounds(this._container._container),h=e.width,i=e.height,j=this._dom.getBounds(),k=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(i-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(h-=18),a+=g.left-f.left,b+=g.top-f.top,(Yc||Vc||Wc)&&(a+=document.documentElement.scrollLeft,b+=document.documentElement.scrollTop),b+j.height>i+l&&(b=b-d.height-j.height,0>b&&(b=i-j.height-2)),this._dropDownPosition!=Ok.EDITOR?a=Math.max(0,a+c-j.width):a+j.width>h+k&&(a=h-j.width),this._viewGridInside&&(b=d.bottom-f.top+2,(f.bottom<d.bottom+j.height||i+l<d.bottom+j.height)&&(b=d.top-j.height-f.top-2)),this._dom.move(Math.max(0,a),Math.max(0,b))},$_resetItems:function(a,b,c,d){this._dom.clearChildren(),this._firstChild=null,this.$_buildItems(),this.$_resetHeight(),this.$_resetWidth(c),this.$_resetPosition(a,b,c,d)},$_buildItems:function(){var a=this._items;if(a&&!(a.length<1))for(var b=0,c=a.length;c>b;b++){var d=a[b],e=Jc.createElement("div",{position:"relative","float":"none",paddingTop:"1px",paddingBottom:"1px",paddingLeft:"2px",paddingRight:"2px",whiteSpace:"nowrap",cursor:"default"});!this._useCssStyle&&(e.style.background=b==this._itemIndex?"#333":""),!this._useCssStyle&&(e.style.color=b==this._itemIndex?"#fff":""),this._useCssStyle&&(e.className=b==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item"),Jc.disableSelection(e),this._element.appendChild(e),0==b&&(this._firstChild=e),e.onmouseover=this._useCssStyle?null:this._mouseoverHandler,e.onmouseout=this._useCssStyle?null:this._mouseoutHandler,e.onclick=this._clickHandler;var f=(d?d.label.toString():"").trim(),g=Jc.createElement("span");g.innerHTML=f?Jc.htmlEncode(f):"&nbsp;",g.tabIndex=-1,Jc.disableSelection(g),e.appendChild(g)}},$_refreshItems:function(){for(var a,b=this._element.childNodes,c=0;c<b.length;c++)a=b[c],this._useCssStyle?a.className=c==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item":(a.style.background=c==this._itemIndex?"#333":"",a.style.color=c==this._itemIndex?"#fff":"");var d=this._itemIndex;if(d>=0&&d<b.length)if(a=b[d],a.offsetTop<this._element.scrollTop)this._element.scrollTop=a.offsetTop;else{var e=a.offsetTop+Jc.getSize(a).height;e>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=e-this._element.clientHeight)}},hangulToChosungAll:function(a){var b=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],c="";for(i=0;i<a.length;i++){var d=a.charCodeAt(i)-44032;c+=d>-1&&11172>d?b[Math.floor(d/588)]:a[i]}return c},hangulToChosung:function(a){var b={};if(/[ㄱ-힣]/.test(a)){var c,d,e,f=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],g=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"],h=a.charCodeAt(0)-44032;e=h%28,d=(h-e)/28%21,c=((h-e)/28-d)/21,b.cho=f[c]?f[c]:a,g[d]&&(b.org=a)}else b.cho=a,b.org=a;return b},$_search:function(a,b){try{if(this._items&&a){var c,d,e,f,g=this._items,h=g.length,i=this._caseSensitive?a:a.toLowerCase(),j=[];for(c=0;h>c;c++){if(d=g[c].label.toString())if(d=this._caseSensitive?d:d.toLowerCase(),this._partialMatch){f="";for(var k,l,m=0;m<d.length;m++)k=this.hangulToChosung(d[m]),l=this.hangulToChosung(i[m]),f+=l.org?k.org:k.cho;if(f==i)return void this.setItemIndex(c,b)}else if(d==i)return void this.setItemIndex(c,b);j.push(d)}for(c=0;h>c;c++)if(d=j[c],this._partialMatch){for(var n=!1,m=0;m<i.length;m++){if(e=this.hangulToChosung(d[m]),!(e.org&&e.org==i[m]||e.cho&&e.cho==i[m])){n=!1;break}n=!0}if(n)return void this.setItemIndex(c,b)}else if(d&&0==d.indexOf(i))return void this.setItemIndex(c,b);for(c=0;h>c;c++)if(d=j[c],this._partialMatch){var k,l,o,p;o=this.hangulToChosungAll(d),p=this.hangulToChosungAll(i);var q=o.indexOf(p);if(f=d.substr(0,q),~q)for(var m=0,r=q,s=i.length;s>m;m++,r++)k=this.hangulToChosung(d[r]),l=this.hangulToChosung(i[m]),f+=l.org?k.org:k.cho;if(f&&f.indexOf(i)>0)return void this.setItemIndex(c,b)}else if(d&&d.indexOf(i)>0)return void this.setItemIndex(c,b)}this.setItemIndex(-1)}finally{b&&(this._selected=!0)}}});Sk.CLOSE_UP="onDropDownListCloseUp";var Tk=Xa("SearchCellEditor",Rk,{init:function(a,b){this._super(a,b),this._searchKey=null,this._timer=void 0},searchLength:1,searchDelay:1e3,useCtrlEnterKey:!1,useEnterKey:!1,fillItems:function(a,b,c){return this.isListing()&&a==this.getEditText()?(this.setValues(b),this.setLabels(c),this._refreshItems(!0,!0),this._list.$_search(this._editor.value),!0):!1},_keyDownHandler:function(a){var b=a.keyCode==Yd.ENTER;if(b&&(b=a.ctrlKey?this.isUseCtrlEnterKey():this.isUseEnterKey()&&(!this._items||this._items.length<1)),b&&this.isEditing()){a.preventDefault(),a.stopImmediatePropagation(),this.$_stopTimer();var c=this.getEditText();return c&&c!=this._searchKey&&(this._searchKey=c,this._dispatchSearch(c)),!0}return this._super(a)},_keyUpHandler:function(a){this._super(a),Rc&&this.$_search()},_inputHandler:function(a){this._super(a),Rc||this.$_search()},_doEndEdit:function(){this._super(),this.$_stopTimer(),this._searchKey=null},dropDown:function(){this._super(!0)},$_search:function(){var a=this.getEditText();a&&a.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},$_startTimer:function(){this.$_stopTimer(),this._timer=setInterval(function(){var a=this.getEditText();a&&a!=this._searchKey&&(this._searchKey=a,this._dispatchSearch(a),this.$_stopTimer())}.bind(this),this._searchDelay)},$_stopTimer:function(){this._timer&&clearInterval(this._timer)}});Tk.SEARCH="onSearchCellEditorSearch";var Uk=/[ㄱ-ㅎㅏ-ㅣ가-힣]/g,Vk=Xa("NumberCellEditor",Lk,{init:function(a,b){this._super(a,b),this._regxAll=/[0-9]|,|\.|\-|\+|e|E/,this._regxPos=/[0-9]|,|\.|\+|e|E/,this._regxInt=/[0-9]|,|\+|\-/,this._regxPosInt=/[0-9]|,|\+/,this._regx=this._regxAll,this._editor.style.imeMode="disabled",this._editor.style["-webkit-ime-mode"]="disabled",this._editor.style["-moz-ime-mode"]="disabled",this._editor.style["-ms-ime-mode"]="disabled"},positiveOnly:!1,integerOnly:!1,setPositiveOnly:function(a){a!=this._positiveOnly&&(this._positiveOnly=a,this.$_resetRistrict())},setIntegerOnly:function(a){a!=this._integerOnly&&(this._integerOnly=a,this.$_resetRistrict())},initOptions:function(){this._super(),this.setPositiveOnly(!1),this.setIntegerOnly(!1)},_pasteHandler:function(a){return this._super(a)},_keyPressHandler:function(a){if(Pc&&(a.ctrlKey||0===a.charCode))return void this._super(a);var b=String.fromCharCode(a.keyCode||a.charCode);this._regx.test(b)||a.preventDefault(),this._super(a)},$_resetValue:function(){if(this.isVisible()){var a=this._editor.selectionStart,b=this._editor.selectionEnd,c=this._editor.value?this._editor.value.length:0;this._editor.value=this._editor.value.replace(Uk,"");var d=this._editor.value?this._editor.value.length:0;d==c?this._editor.setSelectionRange(a,b):this._editor.setSelectionRange(b,b)}},_dispatchChange:function(){this.isVisible()&&(this.$_resetValue(),this._super())},setEditValue:function(a){var b=parseFloat(a);this._editor.value=isNaN(b)?"":b},getEditValue:function(a){this.$_resetValue();var b=this._editField(),c=b.nullValue;try{var d=this._editor.value;d=d&&d.trim(),d&&(d=d.replace(/,/g,""),d=d.replace(/[.]+/g,"."),d=d.replace(/\++/g,"+"),d=d.replace(/\-+/g,"-"),d=d.replace(/\+\-/g,"+"),d=d.replace(/\-\+/g,"-")),c=d?parseFloat(d):void 0}catch(e){if(a)throw e}return c},$_resetRistrict:function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll}}),Wk=Xa("DateCellEditor",Lk,{init:function(a,b){this._super(a,b),this._yearDisplayFormat=this._options.yearDisplayFormat(),this._monthDisplayFormat=this._options.monthDisplayFormat(),this._months=this._options.months(),this._weekDays=this._options.weekDays(),this._list=new Xk(a._container,this,this._options&&(this._options._useCssStyle||this._options._useCssStyleDatePicker)),this._list.addListener(this),this._closing=!1,this._date=void 0,this._borderable=!1,this._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,this._globalMouseHandler=function(a){for(var b=a.target;b;){if(b===this._list._element)return void this._list._monthPicker.hide();if(b===this._list._monthPicker._dom._element)return;b=b.parentNode}this.closeUp(!0)}.bind(this)},editFormat:null,minDate:new Date(1970,0,1),maxDate:new Date(2100,11,31),yearNavigation:!1,textReadOnly:!1,dropDownPosition:Ok.BUTTON,dropDownWhenClick:!1,showToday:!0,yearDisplayFormat:"{Y}년",monthDisplayFormat:"{M}월",months:null,weekDays:null,editFormat_:function(){return this._datetimeFormat},setEditFormat:function(a){this.setDatetimeFormat(a)},isListing:function(){return this._list.isListing()},isMonthListing:function(){return this._list.isMonthListing()},dropDown:function(){if(!this.isReadOnly()&&!this.isListing()&&!this._closing){var a=this._list,b=Jc.getBounds(this._container);return a.setViewGridInside(this._options&&this._options._viewGridInside),a.setYearNavigation(this._yearNavigation),a.setDropDownPosition(this._dropDownPosition),a.setShowToday(this._showToday),a.setYearDisplayFormat(this._yearDisplayFormat),a.setMonthDisplayFormat(this._monthDisplayFormat),a.setMonths(this._months),this._weekDays&&this._weekDays.length>0&&a.setWeekDays(this._weekDays),this.$_setListDate(),a.show(this._parentElement,b.cx-1,b.cy+b.height,this._cellBounds.width,Jc.getBounds(this._editor)),a.show(ja.documentElement,b.cx-1,b.cy+b.height,this._cellBounds.width,Jc.getBounds(this._editor)),Jc.addWindowListener("mousedown",this._globalMouseHandler),!0}return!1},closeUp:function(a){if(this.isListing()){this._closing=!0;try{Jc.removeWindowListener("mousedown",this._globalMouseHandler),this._list.hide(),a&&this._list.isSelected()&&this.$_selectDate(this._list.date())}finally{this._closing=!1}return!0}return!1},initOptions:function(){this._super(),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0},_isDateEditor:function(){return!0},hasButton:function(){return!0},setEditIndex:function(a){this._super(a),this._textReadOnly&&(this._editor.readOnly=!0)},setEditValue:function(a){this._super(a),this._date=a,this._editor.value=this.$_valToStr(a)},getEditValue:function(a){return this._super(a)},_createContainer:function(){var a=this._super();return a.style.border="none",a.style.boxShadow="none",a},_createEditor:function(a){var b=this._super(a);return b},_textHandler:function(){this._requestStart()},_oncompositionstartHandler:function(){this._requestStart()},_keyDownHandler:function(a){var b=this._list;if(b.isMonthListing())return a.keyCode==Yd.ESCAPE?(this.closeMonthList(),a.preventDefault(),a.stopImmediatePropagation(),!0):!1;var c=this.isListing(),d=c&&b.isFocused();switch(a.keyCode){case Yd.ENTER:if(this.closeUp(!0))return a.preventDefault(),a.stopImmediatePropagation(),!this._sendToParent(a);break;case Yd.ESCAPE:if(this.closeUp(!1))return a.preventDefault(),a.stopImmediatePropagation(),!0;break;case Yd.HOME:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.firstDay()),!0;break;case Yd.END:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.lastDay()),!0;break;case Yd.LEFT:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.incDay(-1)),!0;break;case Yd.RIGHT:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.incDay(1)),!0;break;case Yd.PAGEUP:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.incMonth(-1)),!0;break;case Yd.PAGEDOWN:if(d)return a.preventDefault(),a.stopImmediatePropagation(),this.$_selectDate(b.incMonth(1)),!0;break;case Yd.DOWN:if(a.altKey&&!this.isListing())return this._requestStart(),a.preventDefault(),a.stopImmediatePropagation(),!0;if(this.isListing())return a.preventDefault(),a.stopImmediatePropagation(),d?this.$_selectDate(b.incDay(7)):(this._list.setFocused(!0),this.$_setListDate()),!0;break;case Yd.UP:if(a.altKey&&this.isListing())return this.closeUp(!1),a.preventDefault(),a.stopImmediatePropagation(),!0;if(this.isListing()){if(a.preventDefault(),a.stopImmediatePropagation(),d){var e=b.date();e.getDate()<=7?this._list.setFocused(!1):this.$_selectDate(b.incDay(-7))}else this._list.setFocused(!1);return!0}break;case Yd.T:(a.altKey||a.altKey&&a.ctrlKey)&&this.isListing()&&(a.preventDefault(),a.stopImmediatePropagation(),this._list.setDate(new Date),this.$_selectDate(this._list._date))}return this._super(a)},_keyPressHandler:function(a){var b=this._list,c=String.fromCharCode(a.keyCode||a.charCode);if(c.toLocaleLowerCase()==this.todayChar()){if(a.preventDefault(),a.stopImmediatePropagation(),this.isListing())return b.setFocused(!0),this.$_selectDate(b.today()),!0}else{if(Pc&&0==a.charCode)return this._super(a);if(!this._regx.test(c))return void a.preventDefault()}return this._super(a)},$_resetValue:function(){if(this.isVisible()){var a=this._editor.selectionStart,b=this._editor.selectionEnd,c=this._editor.value?this._editor.value.length:0;this._editor.value=this._editor.value.replace(Uk,"");var d=this._editor.value?this._editor.value.length:0;d==c?this._editor.setSelectionRange(a,b):this._editor.setSelectionRange(b,b)}},_dispatchChange:function(){this.isVisible()&&(this.$_resetValue(),this._super())},_changeHandler:function(a){return this._super(a)},_pasteHandler:function(a){return this._super(a)},_copyHandler:function(a){return this._super(a)},_requestStart:function(){return this._super()?(this.dropDown(),!0):!1},setBounds:function(a,b,c,d){a+=2,b+=2,c-=4,d-=4,this._super(a,b,c,d)},_doChanged:function(){this._super(),this.isListing()},closeList:function(a){this.closeUp(a)},closeMonthList:function(){this._list.closeMonth()},buttonClicked:function(a){this.isListing()?this.closeUp(!1):this.dropDown()},$_selectDate:function(a){a&&a!=this._date&&(this._date=a,this._editor.value=this._dateConverter.getText(this._date),this._doChanged())},$_setListDate:function(a){var a=this._dateConverter.getDateNull(this._editor.value);a&&this._list.setDate(a)},onDatePickerCloseUp:function(a,b){this.closeUp(b),this.setFocus()}}),Xk=Xa("DatePicker",bb,{init:function(a,b,c){this._super(),this._useCssStyle=c,this._editor=b,this._container=a,this._containerElement=null,this._headerElement=null,this._headElement=null,this._todayElement=null,this._yearDisplayFormat=b.yearDisplayFormat(),this._monthDisplayFormat=b.monthDisplayFormat(),this._months=b.months(),this._weekDays=b.weekDays(),this._weekDays=Ia,this._date=new Date,this._currDate=null,this._today=null,this._selected=!1,this._cellBackground="#f5f5f5",this._todayBackground="#d5d5d5",this._focusedBackground="rgba(255, 255, 0, 0.3)",this._hoveredBackground="",this._cellBorder="1px solid #eee",this._nullBorder="1px solid #fff",this._focusedBorder="1px solid #aaa",this._todayBorder="1px solid #aaa",this._hoveredBorder="1px solid #000",this._cellColor="#333",this._nullColor="#ccc",this._focused=!0,this._mouseoverHandler=function(a){var b=a.currentTarget;b.style.background=this._hoveredBackground,b.style.border=this._hoveredBorder}.bind(this),this._mouseoutHandler=function(a){var b=this._currDate,c=b.getFullYear(),d=b.getMonth(),e=Ja[I(c)?1:0][d],f=a.currentTarget,g=f.$_day;0>g||g>=e?(f.style.background="",f.style.border=this._nullBorder,f.style.color=this._nullColor):this.$_isFocusedDay(this._currDate,g+1)?(f.style.background=this._focusedBackground,f.style.border=this._focusedBorder,f.style.color=this._cellColor):this.$_isToday(this._currDate,g+1)?(f.style.background=this._todayBackground,f.style.border=this._todayBorder,f.style.color=this._cellColor):(f.style.background=this._cellBackground,f.style.border=this._cellBorder,f.style.color=this._cellColor)}.bind(this),this._clickHandler=function(a){var b=a.currentTarget.$_day;this._date=new Date(this._currDate),this._date.setDate(b+1),this._selected=!0,this.fireEvent(Xk.CLOSE_UP,!0)}.bind(this),this._dom=new Jc(this._element=this.$_createPicker()),this._monthPicker=new Yk(b,this._element,this._useCssStyle),this._monthPicker.addListener({onMonthPickerCloseUp:function(a,b){var c=b-this._currDate.getMonth();c&&(J(this._currDate,c),this.$_buildCalendar()),this._editor.setFocus()}.bind(this)})},minWidth:0,maxWidth:0,yearNavigation:!1,dropDownPosition:Ok.BUTTON,showToday:!0,yearDisplayFormat:null,monthDisplayFormat:null,months:null,viewGridInside:!1,date:function(){return this._date},setDate:function(a){return a.getTime()!=this._date.getTime()&&(this._currDate=new Date(a),this._date=new Date(a),this.isListing()&&this.$_buildCalendar()),this._date},setWeekDays:function(a){a!=this._weekDays&&(s(a)&&a.length>=7?this._weekDays=a:this._weekDays=Ia)},isListing:function(){return this._containerElement&&this._containerElement.contains(this._element)},isMonthListing:function(){return this._monthPicker.isListing()},closeMonth:function(){this._monthPicker.hide(0)},isSelected:function(){return this._selected},isFocused:function(){return this._focused},setFocused:function(a){a!=this._focused&&(this._focused=a,this._element.style.border=a?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=a?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=a?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=a?"1.0":"0.5",this._useCssStyle||(this._headerElement.style.backgroundColor=a?"rgba(0, 200, 200, 0.1)":"#e8e8e8"))},show:function(a,b,c,d,e){this._containerElement=this._viewGridInside?this._container._container:a,this.$_show(b,c,d,e)},hide:function(){this.setFocused(!1),this._monthPicker.hide(),this._dom.detach(),this._containerElement=null},today:function(){return this.setDate(new Date)},incDay:function(a){var b;return this._date.getMonth()==this._currDate.getMonth()?(b=new Date(this._date),this._date&&b.setDate(this._date.getDate()+a)):(b=this._currDate,b=new Date(b.getFullYear(),b.getMonth(),1)),this.setDate(b)},incMonth:function(a){var b;return this._date.getMonth()==this._currDate.getMonth()?(b=new Date(this._date),this._date&&J(b,a)):(b=this._currDate,b=new Date(b.getFullYear(),b.getMonth(),1)),this.setDate(b)},firstDay:function(){var a=new Date(this._currDate);return this._date&&a.setDate(1),this.setDate(a)},lastDay:function(){var a=new Date(this._currDate);if(this._date){var b=a.getFullYear(),c=a.getMonth(),d=Ja[I(b)?1:0][c];a.setDate(d)}return this.setDate(a)},$_createPicker:function(){var a=Jc.createElement("div",{position:"absolute","float":"none",clear:"both",boxSizing:"border-box",margin:"0px",overflow:"auto",zIndex:3e3});return this._useCssStyle?a.className="rg-calendar":Jc.setStyles(a,{cursor:"default",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",padding:"0px"}),this._header=this.$_createHeader(),a.appendChild(this._header),this._calendar=this.$_createCalendar(),a.appendChild(this._calendar),a.addEventListener("keydown",function(a){27==a.keyCode&&(this.isMonthLisiting()?this.closeMonth():this.fireEvent(Sk.CLOSE_UP,!1))}.bind(this)),a.addEventListener("mouseup",function(a){this._editor.setFocus()}.bind(this)),a},$_createHeader:function(){var a=this,b=this._headerElement=Jc.createElement("div",{position:"relative"});this._useCssStyle?b.className="rg-cal-header":Jc.setStyles(b,{paddingLeft:"4px",paddingRight:"4px",paddingTop:"4px",paddingBottom:"0px",fontSize:"12px",backgroundColor:"#e8e8e8",margin:"0px"});var c=Jc.createElement("span",{position:"absolute",left:"4px",minWidth:"17px",minHeight:"17px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"});this._useCssStyle?c.className="rg-cal-prev-month":Jc.setStyles(c,{top:"3px",backgroundImage:pa("cal_prev.png")}),b.appendChild(b.$_prev=c),c.onclick=function(a){!this._useCssStyle&&Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_prev_hover.png")}),J(this._currDate,-1),this.$_buildCalendar()}.bind(this),c.onmouseover=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_prev_hover.png")})},c.onmousedown=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_prev_active.png")})},c.onmouseout=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_prev.png")})};var d=Jc.createElement("span",{position:"absolute",right:"4px",minWidth:"17px",minHeight:"17px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"});this._useCssStyle?d.className="rg-cal-next-month":Jc.setStyles(d,{top:"3px",backgroundImage:pa("cal_next.png")}),b.appendChild(b.$_next=d),d.onclick=function(a){!this._useCssStyle&&Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_next_hover.png")}),J(this._currDate,1),this.$_buildCalendar()}.bind(this),d.onmouseover=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_next_hover.png")})},d.onmousedown=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_next_active.png")})},d.onmouseout=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_next.png")})};var e=this._todayElement=Jc.createElement("span",{position:"absolute",right:"18px",top:"2px"});this._useCssStyle?e.className="rg-cal-today-button":Jc.setStyles(e,{padding:"2px",fontSize:"10px",border:"1px solid transparent",borderRadius:"3px"}),b.appendChild(e),e.innerHTML="Today",e.onclick=function(b){a.setFocused(!0),a.setDate(new Date),a._editor.$_selectDate(a._currDate)},e.onmouseover=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff",textDecoration:"underline"})},e.onmouseup=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{color:"#00f",border:"1px solid #aaa",backgroundColor:"#fff"})},e.onmousedown=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{color:"#800",backgroundColor:"#eee"})},e.onmouseout=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{color:"",border:"1px solid transparent",backgroundColor:"",textDecoration:""})};var f=Jc.createElement("div",{position:"relative",textAlign:"center",marginLeft:"20px",marginRight:"50px"});b.appendChild(b.$_title=f),this._useCssStyle&&(f.className="rg-cal-yearmonth");var g=Jc.createElement("span",{position:"relative",verticalAlign:"top",height:"16px"});this._useCssStyle&&(g.className="rg-cal-year"),f.appendChild(f.$_year=g),g.innerHTML="2015년",g.onclick=function(a){};var h=this.$_createYearSpin();f.appendChild(f.$_yearSpin=h);var i=Jc.createElement("span",{position:"relative",verticalAlign:"top"});return this._useCssStyle&&(i.className="rg-cal-month"),f.appendChild(f.$_month=i),i.innerHTML="1월",i.onmousedown=function(a){a.preventDefault(),a.stopImmediatePropagation();var b=Jc.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,b.x,b.y,this._viewGridInside)}.bind(this),b},$_createYearSpin:function(){var a=Jc.createElement("div",{display:"inline-block",visibility:"hidden",position:"relative",width:"15px",height:"16px",marginLeft:"-4px",marginRight:"2px"}),b=Jc.createElement("span",{position:"absolute",top:"0px",left:"0px",width:"15px",height:"9px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"});this._useCssStyle?b.className="rg-cal-next-year":Jc.setStyles(b,{backgroundImage:pa("cal_up.png")}),a.appendChild(b),b.onclick=function(a){!this._useCssStyle&&Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_up_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this),b.onmouseover=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_up_hover.png")})},b.onmousedown=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_up_active.png")})},b.onmouseout=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_up.png")})};var c=Jc.createElement("span",{position:"absolute",top:"7px",left:"0px",width:"15px",height:"9px",backgroundRepeat:"no-repeat",backgroundPosition:"center center"});return this._useCssStyle?c.className="rg-cal-prev-year":Jc.setStyles(c,{backgroundImage:pa("cal_down.png")}),a.appendChild(c),c.onclick=function(a){!this._useCssStyle&&Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_down_hover.png")}),this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),c.onmouseover=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_down_hover.png")})},c.onmousedown=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_down_active.png")})},c.onmouseout=this._useCssStyle?null:function(a){Jc.setStyles(a.currentTarget,{backgroundImage:pa("cal_down.png")})},a},$_createCalendar:function(){var a=["sun","mon","tue","wed","thu","fri","sat"],b=Jc.createElement("table",{margin:"2px"});b.cellSpacing=3,this._useCssStyle&&(b.className="rg-cal-days-table");var c=this._headElement=Jc.createElement("thead",{});this._useCssStyle&&(c.className="rg-cal-weeks"),b.appendChild(b.$_head=c);var d,e,f,g=Jc.createElement("tr");for(c.appendChild(g),e=[],d=0;7>d;d++){var h=Jc.createElement("th",{minWidth:"20px",textAlign:"center"});this._useCssStyle&&(h.className="rg-cal-week-"+a[d]),c.appendChild(h);var f=Jc.createElement("span",{});f.innerHTML=Jc.htmlEncode(this._weekDays[d]),h.appendChild(f),e.push(f)}c.$_cells=e;var i=Jc.createElement("tbody",{});this._useCssStyle?i.className="rg-cal-days":Jc.setStyles(i,{fontSize:"10px"}),b.appendChild(b.$_body=i);for(var j=i.$_rows=[],k=0;6>k;k++){var g=Jc.createElement("tr",{});for(i.appendChild(g),j.push(g),g.$_cells=e=[],d=0;7>d;d++){var l=Jc.createElement("td",{padding:"1px"});this._useCssStyle?l.className="rg-cal-day rg-cal-week-"+a[d]:Jc.setStyles(l,{textAlign:"right",color:this._cellColor,background:"#f0f0f0",borderRadius:"1px"}),g.appendChild(l),e.push(l),l.onmouseover=this._useCssStyle?null:this._mouseoverHandler,l.onmouseout=this._useCssStyle?null:this._mouseoutHandler,l.onclick=this._clickHandler,f=Jc.createElement("span",{}),l.appendChild(l.$_span=f)}}return b},$_show:function(a,b,c,d){this.setFocused(!1),this._selected=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"50px":"20px";var e=this._date;e instanceof Date&&"Invalid Date"!=e||(e=null),this._currDate=e?new Date(e):new Date,this._today=new Date,this.$_buildCalendar(),this._dom.disableSelection(),this._containerElement.appendChild(this._dom.element());var f=$c(),g=Jc.getBounds(this._containerElement),h=Jc.getBounds(this._container._container),i=f.width,j=f.height,k=this._dom.getBounds(),l=window.pageXOffset||document.documentElement.scrollLeft,m=window.pageYOffset||document.documentElement.scrollTop;document.documentElement.scrollWidth>document.documentElement.clientWidth&&(j-=18),document.documentElement.scrollHeight>document.documentElement.clientHeight&&(i-=18),a+=h.left-g.left,b+=h.top-g.top,(Yc||Vc||Wc)&&(a+=document.documentElement.scrollLeft,b+=document.documentElement.scrollTop),b+k.height>j+m&&(b=b-d.height-k.height,0>b&&(b=j-k.height-2)),this._dropDownPosition!=Ok.EDITOR?a=Math.max(0,a+c-k.width):a+k.width>i+l&&(a=i-k.width),this._viewGridInside&&(b=d.bottom-g.top+2,(g.bottom<d.bottom+k.height||j+m<d.bottom+k.height)&&(b=d.top-k.height-g.top-2)),this._dom.move(Math.max(0,a),Math.max(0,b))},$_isFocusedDay:function(a,b){var c=A(this._date);return c&&a.getFullYear()==c.getFullYear()&&a.getMonth()==c.getMonth()&&b==c.getDate()},$_isToday:function(a,b){var c=A(this._today);return c&&a.getFullYear()==c.getFullYear()&&a.getMonth()==c.getMonth()&&b==c.getDate()},$_buildCalendar:function(){var a,b,c=["sun","mon","tue","wed","thu","fri","sat"],d=this._header,e=this._currDate,f=d.$_prev,g=d.$_next,h=d.$_title,i=e.getFullYear(),j=e.getMonth();for(h.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",i):i+"년")+"&nbsp;",this._months&&this._months.length>0?h.$_month.innerHTML=this._months[j]:h.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",j+1):j+1+"월",0==j?f.title=i-1+"/12":f.title=i+"/"+F(j),11==j?g.title=i+1+"/01":g.title=i+"/"+F(j+2),b=this._calendar.$_head.$_cells,a=0;7>a;a++){var k=b[a];k.innerHTML=Jc.htmlEncode(this._weekDays[a])}var l=this._calendar.$_body,m=l.$_rows,n=Ja[I(i)?1:0][j],o=new Date(e);o.setDate(1);var p=o.getDay();30==n&&6==p||31==n&&p>=5?Jc.addChild(l,m[5]):Jc.removeChild(l,m[5]),28==n&&0==p?Jc.removeChild(l,m[4]):Jc.addChild(l,m[4]);var q,r=0;if(b=m[0].$_cells,p>0){var s=i,t=j-1;0>t&&(s--,t=11);var u=Ja[I(s)?1:0][t];for(a=0;p>a;a++)q=b[a],q.$_day=a-p,q.$_span.innerHTML=u-p+a+1,this._useCssStyle?q.className="rg-cal-day rg-cal-prev-day rg-cal-week-"+c[a]:Jc.setStyles(q,{background:"",border:this._nullBorder,color:this._nullColor})}for(a=p;7>a;a++)q=b[a],q.$_day=r++,q.$_span.innerHTML=r,this.$_isFocusedDay(e,r)?this._useCssStyle?q.className="rg-cal-day rg-cal-focusday rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._focusedBackground,border:this._focusedBorder,color:this._cellColor}):this.$_isToday(e,r)?this.useCssStyle?q.className="rg-cal-day rg-cal-today rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._todayBackground,border:this._todayBorder,color:this._cellColor}):this._useCssStyle?q.className="rg-cal-day rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._cellBackground,border:this._cellBorder,color:this._cellColor});for(var v=1;6>v&&n>r;v++)for(b=m[v].$_cells,a=0;7>a;a++)if(n>r)q=b[a],q.$_day=r++,q.$_span.innerHTML=r,this.$_isFocusedDay(e,r)?this._useCssStyle?q.className="rg-cal-day rg-cal-focusday rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._focusedBackground,border:this._focusedBorder,color:this._cellColor}):this.$_isToday(e,r)?this._useCssStyle?q.className="rg-cal-day rg-cal-today rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._todayBackground,border:this._todayBorder,color:this._cellColor}):this._useCssStyle?q.className="rg-cal-day rg-cal-week-"+c[a]:Jc.setStyles(q,{background:this._cellBackground,border:this._cellBorder,color:this._cellColor});else for(var w=1;7>a;a++)q=b[a],q.$_day=r++,q.$_span.innerHTML=w++,this._useCssStyle?q.className="rg-cal-day rg-cal-next-day rg-cal-week-"+c[a]:Jc.setStyles(q,{background:"",border:this._nullBorder,color:this._nullColor})},$_refreshItems:function(){},$_search:function(a){}});Xk.CLOSE_UP="onDatePickerCloseUp";var Yk=Xa("MonthPicker",bb,{init:function(a,b,c){this._super(),this._useCssStyle=c,this._mouseoverHandler=function(a){var b=a.currentTarget;b.style.background="rgba(0, 0, 0, 0.9)",b.style.color="#fff"}.bind(this),this._mouseoutHandler=function(a){var b=a.currentTarget;b.style.background="",b.style.color=""}.bind(this),this._clickHandler=function(a){a.preventDefault(),a.stopImmediatePropagation();var b=a.currentTarget,c=Jc.getChildIndex(b);c>=0&&(this._month=c,this.fireEvent(Yk.CLOSE_UP,this._month)),this.hide()}.bind(this),this._months=a._months,this._dom=new Jc(this.$_createPicker()),this._container=null,this._listElement=b},month:-1,listElement:null,
show:function(a,b,c,d){if(this._container=a,a){a.appendChild(this._dom._element);var e=this._dom.getBounds(),f=Jc.getScrolled();if(d&&this._listElement){var g=this._listElement.getBoundingClientRect().width;b=Na(this._listElement.style.left.replace("px",""))+g/2,c=Na(this._listElement.style.top.replace("px",""))}b=Math.max(f.sx,b-e.width-2),c=Math.max(f.sy,c-e.height/2+13),this._dom.move(b,c)}},hide:function(){this._dom.detach(),this._container=null},isListing:function(){return this._container&&this._container.contains(this._dom._element)},$_createPicker:function(){var a=Jc.createElement("div",{position:"absolute","float":"none",clear:"both",boxSizing:"border-box",zIndex:3001});this._useCssStyle?a.className="rg-cal-month-picker":Jc.setStyles(a,{margin:"0px",cursor:"default",background:"#fff",border:"1px solid rgba(50, 50, 50, 0.5)",boxShadow:"rgba(0, 0, 0, 0.5) 1px 2px 5px",fontFamily:"Verdana",fontSize:"11px",fontStyle:"normal",fontVariant:"normal",fontWeight:"normal"}),a.onkeydown=function(a){27==a.keyCode&&this.hide()}.bind(this);for(var b=1;12>=b;b++){var c=Jc.createElement("div",{position:"relative","float":"none"});this._useCssStyle?c.className="rg-cal-month-picker-item":Jc.setStyles(c,{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"4px",paddingRight:"4px",fontFamily:"Verdana",fontSize:"11px",textAlign:"center",cursor:"default"}),Jc.disableSelection(c),a.appendChild(c),c.onclick=this._clickHandler,c.onmouseup=this._clickHandler,c.onmouseover=this._useCssStyle?null:this._mouseoverHandler,c.onmouseout=this._useCssStyle?null:this._mouseoutHandler;var d=Jc.createElement("span");d.innerHTML=Jc.htmlEncode((this._months?this._months[b-1]:b)+" "),d.tabIndex=-1,Jc.disableSelection(d),c.appendChild(d)}return a}});Yk.CLOSE_UP="onMonthPickerCloseUp";var Zk=Xa("DefaultEditController",null,{init:function(a){this._super(),this._grid=a,this._editIndex=new Ye,this._editors=[],this._starting=!1,this._editRow=-1,this._editor=null,this._editState=ta,this._modified=!1,this._commiting=!1,this._canceling=!1,this._resetting=!1,this._dirty=!1,this._editable=!1,this._readOnly=!1,this.$_editFocused=!1,this._defaultEditor=a.delegate().createDefaultCellEditor(),this._defaultEditor.setController(this),this._internalHideEditor(this._defaultEditor),this._showEditorTimer=null},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return this._editor&&this._editor.isEditing()},setFocus:function(a){this.$_focusToEditor(a)},resetEditor:function(a){if(this.isEditing())if(this._grid.isValid(this._editIndex)){if(this._resetBounds(!1),a&&this.isEditing()){var b=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(b),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor()},reprepareEditor:function(a){Ye.areEquals(a,this._editIndex)&&(this.isEditing()?this._editor.selectAll():this._prepareEditor(a))},invalidateEditor:function(){this._dirty=!0},closeList:function(a){this._editor&&this._editor.closeList(a)},focusedIndexChanging:function(){return this.isEditing()?(this.closeList(!0),this.commitEditor(!0)):!0},focusedIndexChanged:function(a,b){this._hideEditor(),this._grid.isValid(b)&&this._prepareEditor(b)},dataColumnChanged:function(a){if(a&&this._editor&&this._editIndex&&this._editIndex.dataColumn()===a){var b=!a.isEditable()||a.isReadOnly();b!=(!this._editable||this._readOnly)&&(this.isEditing()?this._editor.setReadOnly(b):this._prepareEditor(this._editIndex))}},showEditor:function(a){var b=this._grid;if(b&&b.isValid(a)){if(this._editor&&this._editor.isEditing())return b.makeCellVisible(a),!0;var c=this._editor&&!this._editor.isEditing();if(c)return!this._showEditorTimer&&this._prepareEditor(a),this._editor&&(this._editor.isTextReadOnly&&this._editor.isTextReadOnly()||this._editor.setReadOnly(this._readOnly)),b.makeCellVisible(a),this._activateEditor(!1,!0)}return!1},caretToLast:function(){this._editor&&this._editor.caretToLast()},hideEditor:function(){if(this.isEditing()){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},commitEditor:function(a,b){if(!this.isEditing()||this._commiting)return!0;var c,d,e=this._editIndex,f=e.dataColumn(),g=!0;this._commiting=!0;try{if(this._editor.commit(),(this._modified||this._editor.isEdited())&&f&&f.dataIndex()>=0)try{try{if(c=this._editor.getEditValue(),c===Kk.Unselected)g=!1;else{var h={text:this._editor.getEditText(),value:c};this._grid.getEditValue(this._editor,e,h),c=h.value,g=this._grid.editorCommit(this._editor,e,this._getData(e),c)}}catch(i){k(i.message||i),g=!1}this._grid.isItemEditing()?g&&(this._setData(e,c),this._grid.isItemEditing(e.item())&&(c=this._getData(e),this._grid.validateCellCommit(e,c)),this._modified=!1):this._modified=!1}catch(i){d=i,g=!1}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(e)}finally{this._resetting=!1}if(d){if(k(d.message||d),b)throw d;alert(d.message||d)}}finally{this._commiting=!1}return g},cancelEditor:function(a){if(this.isEditing()){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(b){throw b}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}}},fillSearchItems:function(a,b,c,d){this.isEditing()&&this._editIndex.column()===a&&this._editor instanceof Tk&&this._editor.fillItems(b,c,d)},buttonClicked:function(a){this._editor&&Ye.areEquals(this._editIndex,a)&&this._editor.hasButton()&&this._editor.buttonClicked(this._editIndex)},$_focusToEditor:function(a){(a||this._grid.$_editFocused)&&(this._grid._container._setFocusAndScroll(this._editor||this._defaultEditor),this.isEditing()||this._editor&&this._editor.selectAll())},$_focusToContainer:function(){},_internalHideEditor:function(a){this.closeList(!1),a.setVisible(!1),a.endEdit()},$_hideEdit:function(a,b){b&&(b.setEditIndex(a),b.setVisible(!1),this.$_focusToEditor())},$_getCellEditor:function(a){var b=this._grid.delegate().getCellEditor(a);return b&&b.setController(this),b},_prepareEditor:function(a){if(this._dirty=!1,this._grid.isValid(a)&&(this._hideEditor(),this._editor=this.$_getCellEditor(a),this._editor)){this._editIndex.assign(a);var b=this._grid,c=b.editOptions();if(!b.fixedOptions().isRowEditable()&&a.itemIndex()<b.layoutManager().fixedItemCount())return void this.$_hideEdit(a,this._editor);var d=a.dataColumn(),e=a.item(),f=e.itemState(),g=me.isInserting(f)?-1:a.dataRow(),h=b.itemSource().getCellStyle(g,a.dataField()),i=h?h.isEditable():void 0;if(void 0===i&&(i=b.canEdit(a)),!i)return void this.$_hideEdit(a,this._editor);var j=h?h.isReadOnly():void 0;void 0===j&&(j=d.isReadOnly()||!me.isInserting(f)&&!b.canUpdate(e,a.dataField())),this._editor.initOptions(),d.editorOptions()&&this._editor.applyOptions(d.editorOptions());var k=e.dataSource(),l=k?k.getField(a.dataField()):null;this._readOnly=j||c.isReadOnly()||!l||!l.isUpdatable()||!a.dataColumn(),this._editor.setReadOnly(!1),this._editor.setEditIndex(a),this._editable=!0,this._editor.clear();var m=this._getData(a);this._editor.setEditValue(m),this._editor.selectAll(),c.isEditWhenFocused()&&!this._editor.isEditing()?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||(this._showEditorTimer=setTimeout(function(){b.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),this.$_focusToEditor()}},_hideEditor:function(){if(this._editor)try{this._editor.clear(),this._editor.setVisible(!1)}finally{this._editor.endEdit(),this._editor=null,this._editable=!1,this.$_focusToEditor()}},_initEditor:function(a,b){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var c=this._editor;c&&(c.endEdit(),this._resetBounds(),c.setVisible(!0),c.beginEdit(a,b),a&&c.clear(),b&&c.selectAll(),c.setFocus())},_activateEditor:function(a,b){var c=this._grid,d=this._editor,e=this._editIndex;return this._editable&&d&&!d.isEditing()&&c.canShowEditor(e)?(this._initEditor(a,b),this._modified=!1,this._grid.editorActivated(this._editor),!0):!1},_resetBounds:function(){if(this._editor){var a=this._grid.getEditBounds(this._editIndex);a.x--,a.y--,a.width++,a.height++,Sc&&a.right()>this._grid.width()+3?this._editor.setBounds(a.x+1e4,a.y,0,0):this._editor.setBounds(a.x,a.y,a.width,a.height),a=this._grid.getEditCellBounds(this._editIndex),this._editor.setCellBounds(a.x,a.y,a.width,a.height)}},_getData:function(a){var b=a.item();if(b){var c=a.column().dataIndex();if(c>=0)return b.getData(c)}return void 0},_setData:function(a,b){var c=a.item();if(c){var d=a.column().dataIndex();if(d>=0)return c.setData(d,b)}},_isEditKey:function(a){return 8==a||a>=46&&90>=a||a>=96&&111>=a||a>=186&&222>=a||a==Yd.ENTER&&this._grid.editOptions().isEnterToEdit()},onEditorStart:function(a){a.isVisible()||this._commiting||this._canceling||this._activateEditor(!1,!1)},onEditorKeyDown:function(a,b,c,d,e){return this._editor&&(this._editor.isTextReadOnly&&this._editor.isTextReadOnly()||c||e||!this._isEditKey(b)?229==b&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool().keyDown(b,c,d,e)},onEditorKeyUp:function(a,b,c,d,e){return this._grid.activeTool().keyUp(b,c,d,e)},onEditorKeyPress:function(a,b){return this._grid.activeTool().keyPress(b)},onEditorChange:function(a){this._modified||(this._modified=!0,this._grid._editorStarted(this._editor,this._editIndex)),this.isEditing()&&(this._grid.makeCellVisible(this._editIndex),this._grid._editorChange(this._editor,this._editIndex,this._editor.getEditValue(!1)))},onEditorSearch:function(a,b){this._grid._editorSearch(this._editor,this._editIndex,b)},onEditorCommit:function(a){this.commitEditor(!0)}}),$k=Xa("GridTool",be,{init:function(a,b){this._super(a,b),this._grid=a.gridView(),this._focusView=new bl(this.grid()._dom),this._innerFocusView=null},focused:null,grid:function(){return this._grid},focused_:function(){return this._grid.focusedIndex()},setFocused:function(a,b){return this._grid.isValid(a)?this._grid.setFocusedIndex(a,b,!0):!1},layoutChanged:function(){this._doLayoutChanged&&this._doLayoutChanged()},resetFocused:function(){this._resetFocusedView()},focusedIndexChanging:function(a){this._doFocusedIndexChanging&&this._doFocusedIndexChanging(a)},focusedIndexChanged:function(a,b){this._doFocusedIndexChanged&&this._doFocusedIndexChanged(a,b)},columnHeaderDblClicked:function(a){this._grid._fireColumnHeaderDblClicked(a)},footerCellDblClicked:function(a){this._grid._fireFooterCellDblClicked(a)},headerSummaryCellDblClicked:function(a){this._grid._fireHeaderSummaryCellDblClicked(a)},checkBarFootDblClicked:function(){this._grid._fireCheckBarFootDblClicked()},indicatorCellDblClicked:function(a){this._grid._fireIndicatorCellDblClicked(a)},stateBarCellDblClicked:function(a){this._grid._fireStateBarCellDblClicked(a)},rowGroupHeadDblClicked:function(){this.grid()._fireRowGroupHeadDblClicked()},rowGroupFootDblClicked:function(){this.grid()._fireRowGroupFootDblClicked()},rowGroupHeaderFooterDblClicked:function(a,b){this.grid()._fireRowGroupHeaderFooterDblClicked(a,b)},rowGroupBarDblClicked:function(a){this.grid()._fireRowGroupBarDblClicked(a)},panelDblClicked:function(){this.grid()._firePanelDblClicked()},rowGroupPanelDblClicked:function(a){this.grid()._fireRowGroupPanelDblClicked(a)},dataCellClicked:function(a){this._grid._fireDataCellClicked(a)},dataCellDblClicked:function(a){this._grid._fireDataCellDblClicked(a)},cellButtonClicked:function(a){var b=a.dataColumn(),c=this._grid;if(b)switch(b.button()){case we.POPUP:var d=b.menu();if(d){var e,f=c.layoutManager(),g=f.getMergedCell(a);e=g?c.getCellView(c._mergeView,a,a.isFixedCol()):ab(c.getCellView(null,a),ri),e&&c.popupMenuManager().show(d,e)}break;case we.ACTION:this._grid._fireCellButtonClicked(a)}},editButtonClicked:function(a){this._grid._fireEditButtonClicked(a)},imageButtonClicked:function(a){this._grid._fireImageButtonClicked(a)},_doSetFocus:function(){this.grid().editController().setFocus(!0)},_resetFocusedView:function(){var a=this._grid,b=a.displayOptions().isShowInnerFocus(),c=this.focused(),d=!1,e=!1;if(a.displayOptions().isFocusVisible()&&a.isValid(c)){var f=a.getFocusedCellView(c);if(f){var g=a.layoutManager(),h=g.fixedColCount(),i=a.isEditing(),j=f.boundsBy(a);if(f instanceof kj){var k=g._rowGroupBounds,l=k.x+f._level*a.rowGroup().levelIndent();j.setLeft(l),j.width=k.width-a.leftPos()-f._level*a.rowGroup().levelIndent()}if(f instanceof yj){var m=f._level-1,n=g.getColumnBounds(m).right()+g.fixedBounds().x,o=g.fixedWidth(),p=a.leftPos(),q=g._editBarBounds;h>0?m>=h?n=Math.max(n+o-p,o+g.fixedBounds().x):m==h-1&&(n=o+g.fixedBounds().x):0==h&&(n-=p),j.x=n,j.width=q.width+q.x-n}if(j.width>0&&j.height>0){if(a._container.$_rich&&(j.x++,j.y++),this._focusView.setRect(j),d=!0,f instanceof vj){this._innerFocusView||(this._innerFocusView=new cl(a._dom),a.addFocusElement(this._innerFocusView));var g=a.layoutManager(),r=g.itemBounds(f._topIndex),k=g.itemBounds(c.I()-a.topIndex());f.setInnerIndex(c.I()-f.mergeRoom().headItem()),j.y+=k.y-r.y,j.height=k.height,i||(j.x+=2,j.y+=2,j.width-=5,j.height-=5),b&&this._innerFocusView&&(this._innerFocusView.setRect(j),this._innerFocusView.setEditing(i,f.getButtonWidth?f.getButtonWidth():0),e=!0)}e?this._focusView.setEditing(!1,0):this._focusView.setEditing(i,f.getButtonWidth?f.getButtonWidth():0)}}}this._focusView.setVisible(d),this._innerFocusView&&this._innerFocusView.setVisible(e),this._focusView.isVisible()&&a._resetFocusMask()}}),_k=Xa("GridScrollTool",null,{init:function(a){this._super(a,"gridScrollTool"),this._scrollTimer=null},isScrolling:function(){return null!=this._scrollTimer},stop:function(a,b){this._scrollTimer&&(this._scrollTimer.stop(a,b),this._scrollTimer=null)},start:function(a,b,c){return a instanceof wm?(a.isEnabled()&&(this._scrollTimer=new Am(a),this._scrollTimer.start()),!0):a instanceof vm&&(a.ptInTrack(b,c,!0)?this._scrollTimer=new Bm(a,!0):a.ptInTrack(b,c,!1)&&(this._scrollTimer=new Bm(a,!1)),this._scrollTimer)?(this._scrollTimer.start(),!0):!1},move:function(a,b){this._scrollTimer.move(a,b)}}),al=Xa("GridSelectionTool",$k,{init:function(a){this._super(a,"selectionTool"),this._clickPos=md.empty(),this._clickElement=null,this._clickHandle=null,this._clickCell=null,this._reclickCell=null,this._tmpIndex=this._grid.getIndex(),this._skipIndex=this._grid.getIndex(),this._tipCell=null,this._tipOptions=new Wg,this._scrollTool=new _k,this._rightClicked=null},hoveredCell:null,setHoveredCell:function(a){a!=this._hoveredCell&&(this._hideTooltip(),this._hoveredCell&&this._hoveredCell.setMouseEntered(!1),this._hoveredCell=a,this._hoveredCell&&this._hoveredCell.setMouseEntered(!0));var b=this.grid(),c=a;if(c instanceof Wi&&b.canHovering()){var d=c.index().clone(),e=d.dataColumn();if(e&&e.cursor()&&b.setCursor(e.cursor()),e&&b.isItemEditing(d.item())&&b.editOptions().isHintOnError()&&e.error())this._tipOptions.setMessage(e.error().message||e.error()),this._tipOptions.setStyles({background:"#eeffcc99"}),this._showTooltip(c,this._tipOptions);else{var f=c.renderer();if(f&&this._tipCell!=c){var g=f.getTooltip(c);if(g){c instanceof vj&&(d=b.pointToIndex(b.mouseX(),b.mouseY(),!1));var h=this._grid._fireShowTooltip(d,g),i={background:"#eeffffff"};if(h&&"object"==typeof h)this._tipOptions.setMessage(h.message),this._tipOptions.setStyles(h.styles?h.styles:i);else{if(!h||"string"!=typeof h)return;this._tipOptions.setMessage(h),this._tipOptions.setStyles(i)}this._showTooltip(c,this._tipOptions)}}}}else if(c instanceof vi&&b.canHovering&&c._grid.header().isShowTooltip()&&this._tipCell!=c){var j=ab(c,vi);if(j.isShowTooltip()){var g=j._tooltip||j._text;if(g){var h=this._grid._fireShowHeaderTooltip(j._column,g),i={background:"#eeffffff"};if(h&&"object"==typeof h)this._tipOptions.setMessage(h.message),this._tipOptions.setStyles(h.styles?h.styles:i);else{if(!h||"string"!=typeof h)return;this._tipOptions.setMessage(h),this._tipOptions.setStyles(i)}this._showHeaderTooltip(j,h)}}}},isEditing:function(){return this._grid.isEditing()},_doActivate:function(){this._super(),this._grid.addFocusElement(this._focusView),this._innerFocusView&&this._grid.addFocusElement(this._innerFocusView)},_doDeactivate:function(){this._grid.removeFocusElement(this._focusView),this._innerFocusView&&this._grid.removeFocusElement(this._innerFocusView),this._super()},_doCancel:function(a){a.closeFilterSelector(),a.isEditing()?a.cancelEditor(!0):a.cancel()},_doEnter:function(a,b,c){var d=a.isEditing();if(d&&!b.isEnterToTab())a.commitEditor(!0);else{var e=c.clone(),f=b.isSkipReadOnly(),g=b.isSkipReadOnlyCell();a.isValid(e)?b.isEnterToNextRow()&&e.I()<a.itemCount()-1?(e.down(),g&&this.$_checkReadOnly(e)&&(this.$_skipReadOnlyCell(e,1)||e.assign(c))):(!d||b.isEnterToTab())&&b.isCrossWhenExitLast()&&e.isLast()&&e.I()<a.itemCount()-1?(e.down(),e.home(),f&&this.$_skipReadOnly(e,1)):(!d||b.isEnterToTab())&&b.isCommitWhenExitLast()&&e.isLast()?(a.commit(b.isCommitWhenNoEdit()),b.isAppendWhenExitLast()&&(a.append(),a.isItemEditing()&&(e.down(),e.home()))):b.isEnterToTab()&&(a.isEditing()||this.$_checkReadOnly(e))?(a.isEditing()&&a.commitEditor(!0),e.next(),f&&!this.$_skipReadOnly(e,1)&&e.assign(c)):b.isEnterToEdit()||(e.next(),f&&!this.$_skipReadOnly(e,1)&&e.assign(c)):e.normalize(a),Ye.areEquals(e,c)?a.isValid(e)&&b.isEnterToEdit()&&!a.isEditing()&&c&&c.dataColumn()&&!this.$_checkReadOnly(c)&&a.showEditor(c):this.setFocused(e,!0)}return!0},_doTab:function(a,b,c,d,e){var f=c.clone();if(a.isValid(f)){if(b.isUseTabKey())return e?(f.prev(),b.isSkipReadOnly()&&!this.$_skipReadOnly(-1)&&f.assign(c)):(b.isCrossWhenExitLast()&&f.isLast()&&f.I()<a.itemCount()-1?(f.down(),f.home()):b.isCommitWhenExitLast()&&f.isLast()?(a.commit(b.isCommitWhenNoEdit()),b.isAppendWhenExitLast()&&(a.append(),a.isItemEditing()&&(f.down(),f.home()))):f.next(),b.isSkipReadOnly()&&!this.$_skipReadOnly(f,1)&&f.assign(c)),Ye.areEquals(f,c)||this.setFocused(f,!0),!0}else f.normalize(a),this.$_skipReadOnly(f,1);return!1},$_commitCancel:function(a,b){var c=this.grid();switch(a.itemState()){case me.INSERTING:return c.commit(b.isForceInsert())||c.cancel(!0),!0;case me.APPENDING:return c.commit(b.isForceAppend())||c.cancel(!0),!0;case me.UPDATING:return c.commit(b.isCommitWhenNoEdit())||c.cancel(!0),!0}return!1},_doKeyDown:function(a,b,c,d){Ea("selectionTool K E Y: "+a);var e=this.grid(),f=e.layoutManager(),g=e.editOptions(),h=g.isSkipReadOnly(),i=g.isSkipReadOnlyCell(),j=this.focused(),k=g.verticalMovingStep();j._verticalStep=k;var l=j.clone(),m=!1,n=!1;if(!e._fireKeyDown(a,b,c,d))return!0;if(Xm.consumeKey(l,a,b,c))return!0;if(e.closeFilterSelector(),a==Yd.ESCAPE)e.closePopups(),this._doCancel(e);else{if(a==Yd.ENTER)return this._doEnter(e,g,l);if(a==Yd.TAB)return this._doTab(e,g,l,b,c);if(a==Yd.F2)!e.isEditing()&&l&&l.dataColumn()&&e.showEditor(l,c);else if(a==Yd.INSERT)g.isAppendWhenInsertKey()||0==e.itemCount()?e.append():e.insert(l.item(),c,b);else{if(a==Yd.DELETE)return b&&c?(e.revertSelection(),!0):b?(e.deleteSelection(),!0):!1;if(a==Yd.BACK)return!1;if(D(a,Yd.HOME,Yd.END,Yd.RIGHT,Yd.LEFT,Yd.DOWN,Yd.UP,Yd.PAGEDOWN,Yd.PAGEUP)){var o=e.itemCount();if(a==Yd.DOWN&&0==o)return void e.append();if(!e.isValid(l))return l.normalize(e),this.setFocused(l,!0),!0;if((D(a,Yd.DOWN,Yd.PAGEDOWN)||a==Yd.END&&b)&&l.isBottom()&&this.$_checkAppending(l))return!0;if((D(a,Yd.UP,Yd.PAGEUP)||a==Yd.HOME&&b)&&l.isTop()&&this.$_checkAppending(l,!0))return!0;switch(a){case Yd.HOME:if(b){var p=l.clone();if(l.first(),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnlyCell(l,1,p)){l.assign(j);break}}else l.home(),this.$_skipReadOnly(l,1);break;case Yd.END:if(b){var p=l.clone();if(l.last(),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnlyCell(l,-1,p)){l.assign(j);break}}else l.end(),this.$_skipReadOnly(l,-1);break;case Yd.RIGHT:if(l.right(),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnly(l,1)){l.assign(j);break}break;case Yd.LEFT:if(l.left(),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnly(l,-1)){l.assign(j);break}break;case Yd.DOWN:try{if(l.I()!=e.itemCount()-1||!l.isBottom()&&k!=Se.ROW)b&&m?l.last():l.down(e.isItemEditing(l.item()));else{if(l.isBottom()&&this.$_commitCancel(l.item(),g))return!0;e.append(),n=!0,b&&m?l.last():l.down(e.isItemEditing(l.item()))}}finally{i&&this.$_checkReadOnly(l)&&(this.$_skipReadOnlyCell(l,1)||l.assign(j))}break;case Yd.UP:try{if(0==l.I()&&l.isTop()){if(this.$_commitCancel(l.item(),g))return!0;b&&m?l.first():l.up()}else b&&m?l.first():l.up(e.isItemEditing(l.item()))}finally{i&&this.$_checkReadOnly(l)&&(this.$_skipReadOnlyCell(l,-1)||l.assign(j))}break;case Yd.PAGEUP:var p=l.clone();if(l.incRow(-f.fullItemCount()),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnlyCell(l,1,p)){l.assign(j);break}break;case Yd.PAGEDOWN:if(l.I()==e.itemCount()-1&&l.isBottom()&&me.isInserting(l.item().itemState()))return e.commit(g.isForceAppend()),!0;var p=l.clone();if(l.incRow(f.fullItemCount()),h&&this.$_checkReadOnly(l)&&!this.$_skipReadOnlyCell(l,-1,p)){l.assign(j);break}}return c&&e.selections().count()>0?(this.setFocused(l,!1),e.selections().getItem(0).resizeTo(l)):this.setFocused(l,!0),!0}}}return!1},_doKeyUp:function(a,b,c,d){Ea("selectionTool KeyUp KEY: "+a+",ctrl="+b+",shift="+c+",alt="+d),this.grid()._fireKeyUp(a,b,c,d)},_doKeyPress:function(a){Ea("selectionTool KeyPress"),this.grid()._fireKeyPress(a)},_doClick:function(a,b){if(!this.isDragging()){var c=this._grid,d=this.focused().clone();if(d){var e=this.findElementAt(a,b,!0);if(e=e?e:this._clickElement,e==this._clickElement)if(this._clickElement instanceof Wi){if(this.dataCellClicked(d),!c.isEditing()){if(d.column()instanceof rk){var f=d.dataColumn(),g=c.editController()._editor;!f.isReadOnly()&&g&&(g instanceof Rk||g instanceof Wk)&&f.editorOptions&&f.editorOptions().dropDownWhenClick&&(c.makeCellVisible(),c.showEditor(d)&&c.editorButtonClick(d))}this._reclickCell?this._performRendererClick(d,this._reclickCell,a,b,!1,!1):this._performRendererClick(d,this._clickElement,a,b,!1,!0)}}else this._clickElement instanceof Oi&&this._indicatorCellClicked(d.itemIndex())}}},$_calcInnerCellIndex:function(a,b,c,d){if(a instanceof vj){var e=this._grid,f=e.layoutManager();e.containerToElement(c,d);d-=f.bodyBounds().y;for(var g=a._topIndex;g<=a._bottomIndex;g++){var h=f.itemBounds(g);if(d>=h.y&&d<h.bottom()){b.itemIndex(g+e.topIndex());break}}}},_doDblClick:function(a,b){if(!this.isDragging()){var c=this._grid,d=this.focused(),e=this.findElementAt(a,b,!0);if(e===this._clickElement){var f;if(this._clickElement instanceof Wi&&(f=this._clickCell.index(),this._clickCell instanceof vj&&(f=f.clone(),this.$_calcInnerCellIndex(this._clickCell,f,a,b)),this.dataCellDblClicked(f)),this._clickElement instanceof ij){var g=this._clickElement.item();if((g instanceof Zf||g instanceof tj)&&g.isExpanded&&g.setExpanded){var h=!g.isExpanded();g.setExpanded(h)}var i=Ye.temp(c,this._clickElement.index().itemIndex(),c.columnByField(g._groupField));this.rowGroupHeaderFooterDblClicked(-1,i)}else if(this._clickCell instanceof Bi)this.rowGroupHeaderFooterDblClicked(-2,this._clickCell.index());else if(this._clickElement instanceof vi){var j=this._getEditRequest(this._clickElement,a,b,!1,!1);j instanceof fl?c.layoutManager().fitColumnWidth(this._clickElement.index().column(),!1,0,0):this._clickElement.parent()instanceof Wh?this.columnHeaderDblClicked(this._clickElement.index().column()):e.parent()instanceof pm&&this.rowGroupPanelDblClicked(this._clickElement.index().column())}else d.isValid()&&!c.isEditing()&&this._clickCell instanceof Wi?Ye.areEquals(f,d)&&c.showEditor(f):this._clickCell instanceof zi?this._clickCell.error()?c.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this.footerCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof xi?this._clickCell.error()?c.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this.headerSummaryCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof Bi&&this._clickCell.error()?c.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._clickCell instanceof Ei?this.indicatorCellDblClicked(-1):this._clickCell instanceof Fi?this.indicatorCellDblClicked(-2):this._clickCell instanceof Oi?this.indicatorCellDblClicked(e.index().itemIndex()):this._clickCell instanceof Ii?this.stateBarCellDblClicked(-1):this._clickCell instanceof Ji?this.stateBarCellDblClicked(-2):this._clickCell instanceof Ri?this.stateBarCellDblClicked(e.index().itemIndex()):this._clickCell instanceof Mi?this.checkBarFootDblClicked():this._clickCell instanceof ej?this.rowGroupHeadDblClicked():this._clickCell instanceof fj?this.rowGroupFootDblClicked():this._clickCell instanceof _i?this.rowGroupBarDblClicked(this._clickCell.level()):this._clickCell instanceof bj?this.rowGroupBarDblClicked(-1):this._clickCell instanceof cj?this.rowGroupBarDblClicked(-2):this._clickElement instanceof pm&&this.panelDblClicked()}}},_doMouseDown:function(a,b,c,d,e){var f=this._grid;this._hideTooltip(),f.closePopups(),f.setFocus(),this._scrollTool.stop();var g=this._clickElement=null,h=this._clickCell=null;if(this._reclickCell=null,this._clickHandle=null,this._rightClicked=e>1?!0:!1,0==e||f.displayOptions().isRightClickable()){if(g=this._clickElement=this.findElementAt(a,b,!1),this._scrollTool.start(g,a,b))return;if(this._clickHandle=ab(g,di),h=this._clickCell=ab(g,ri),this._clickPos.set(a,b),this._clickHandle&&this._clickHandle.isClickable())return void this.$_handleClicked(this._clickHandle)}if(!(h instanceof Wi&&this.$_checkAppending(f.focusedIndex(),!0,h))){var i,j;if(h){var k,j,l=!1,m=null,n=null,o=h.index().clone();if(h instanceof vj&&this.$_calcInnerCellIndex(h,o,a,b),i=this._getEditRequest(h,a,b,c,d),(!i||i.isSelectable())&&(d||this._rightClicked&&f._selections.contains(o)||(h instanceof Wi?f._selections.clear():h instanceof Oi&&f.indicator().isSelectable()?f._selections.clear():h instanceof ij?f._selections.clear():null!=(m=this.$_getGroupFooterView(h))?f._selections.clear():null!=(n=this.$_getMergedFooterView(h))&&f._selections.clear()),h instanceof Wi?(Ye.areEquals(o,this.focused())&&(this._reclickCell=this._clickCell),i instanceof il||!this._reclickCell||!f.editOptions().isEditWhenClickFocused()?l=!0:(f.showEditor(o),setTimeout(function(){f._editController._editor.selectAll(),f._editController._editor.setFocus()},100))):h instanceof Oi?f.indicator().isSelectable()&&(k=this._tmpIndex,k.assign(f.focusedIndex()),k.itemIndex(o.I()),null==k.C()&&k.item()instanceof Xf&&k.column(f.getFirstColumn()),o=k,l=!0):h instanceof ij?(o.setColumn(f.getVisibleColumn(o.item().level())),l=!0):m?(k=this.focused().clone(),k.itemIndex(m.item().index()),o=k,l=!0):n&&(l=!0),l)){o.normalize(f);var p=this._rightClicked&&!f._selections.contains(o);if(!this.setFocused(o,p))return;He.isSingle(f._selectOptions.style())&&f._selections.count()<1&&f.clearSelection()}0==e&&(j=this._getDragTracker(i,a,b),this.setDragTracker(j),f._selections.count()<1&&((f._selectOptions.style()!=He.ROWS||j instanceof El)&&(f._selectOptions.style()!=He.COLUMNS||j instanceof Fl)||f.clearSelection()))}else g&&(i=this._getEditRequest(g,a,b,!1,!1),i&&this.setDragTracker(this._getDragTracker(i,a,b)));j=this.dragTracker(),j&&j.isStartWhenCreated()&&this._startDragTracker(a,b)}},_doMouseMove:function(a,b){var c=this._grid;if(this._scrollTool.isScrolling())this._scrollTool.move(a,b);else if(this.dragTracker())this._hideTooltip();else{var d=null;c.setCursor(Zd.DEFAUT),d=this.findElementAt(a,b,!0),c.canHovering()?this.setHoveredCell(ab(d,ri)):this._hideTooltip();var e=this._getEditRequest(d,a,b);e&&e.cursor()&&c.setCursor(e.cursor())}},_doMouseUp:function(a,b,c){var d=this._grid,e=this.findElementAt(a,b,!0);if(this._scrollTool.isScrolling())this._scrollTool.stop(a,b);else if(!(this.dragTracker()&&this.dragTracker().isCompleted()||e!=this._clickElement))if(e instanceof vi&&e.isClickable()){var f=this._getEditRequest(this._clickElement,a,b,!1,!1);f&&f.isDblClickable()||(e.parent()instanceof Wh||e.parent()instanceof wi?this.$_columnHeaderClicked(e.index().column(),this._rightClicked,c):e.parent()instanceof pm&&this._rowGroupPanelClicked(e.index().column()))}else if(e instanceof oi)e.cellView().column().setChecked(!e.cellView().column().isChecked());else if(e instanceof Vi)this._checkCellClicked(e);else if(e instanceof Li)this._checkAllClicked(e);else if(e instanceof Mi)this._checkBarFootClicked();else if(e instanceof Oi)this._indicatorCellClicked(e.index().itemIndex());else if(e instanceof Ei)d.filteringOptions().isEnabled(),this._indicatorCellClicked(-1);else if(e instanceof Fi)this._indicatorCellClicked(-2);else if(e instanceof Ri)this._stateBarCellClicked(e.index().itemIndex());else if(e instanceof Ii)this._stateBarCellClicked(-1);else if(e instanceof Ji)this._stateBarCellClicked(-2);else if(e instanceof ej)this._rowGroupHeadClicked();else if(e instanceof fj)this._rowGroupFootClicked();else if(e instanceof ij){var g=d.columnByField(e.item()._groupField),h=Ye.temp(d,e.index().itemIndex(),g);this._rowGroupHeaderFooterClicked(-1,h)}else e instanceof Bi?this._rowGroupHeaderFooterClicked(-2,e.index()):e instanceof _i?this._rowGroupBarClicked(e.level()):e instanceof bj?this._rowGroupBarClicked(-1):e instanceof cj?this._rowGroupBarClicked(-2):e instanceof pm?this._panelClicked(0):e instanceof zi?this._footerCellClicked(e.index().column()):e instanceof xi?this._headerSummaryCellClicked(e.index().column()):e&&e.isClickable()&&this.$_elementClicked(e);this.setDragTracker(null)},_doMouseOutside:function(){this._hoveredCell&&(this._hoveredCell.setMouseEntered(!1),this._hoveredCell=null),this._grid._validateScrollBars()},_doMouseWheel:function(a,b,c,d){if(this._grid.displayOptions().isWheelEnabled()){this._super(a,b,c,d);var e=this._grid.topIndex();return this._grid.setTopIndex(this._grid.topIndex()+(d>0?-3:3)),e!=this._grid.topIndex()}return!1},_doMouseEnter:function(a,b){},_doMouseLeave:function(){this._hideTooltip()},_doMouseOver:function(a,b){},_doLayoutChanged:function(a,b){this._resetFocusedView()},_doFocusedIndexChanging:function(a){},_doFocusedIndexChanged:function(a,b){this._resetFocusedView()},editButtonClicked:function(a){var b=this.grid();b.makeCellVisible(),b.showEditor(a)&&b.editorButtonClick(a),this._super(a)},$_checkAppending:function(a,b,c){var d=this.grid();if(a.I()==d.itemCount()-1&&me.isInserting(a.item().itemState())){var e=a.I();if(!c||c.index().I()!=e){try{d.commit(d.editOptions().isForceAppend(),!0)?(a=a.clone(),a.itemIndex(e),d.isValid(a)||a.itemIndex(d.getItemIndexOfRow(d.dataSource().rowCount()-1)),this.setFocused(a,!0)):b&&d.cancel(!0)}catch(f){if(f instanceof Zg)return f=d._fireValidationFail(e,f.column,f),f?alert(d._editOptions.isShowOnlyValidationMessage()&&f.userMessage?f.userMessage:f.toString()):null,!0;if(f instanceof S)return!0;throw f}return!0}}return!1},$_checkReadOnly:function(a){var b,c=this.grid(),d=c.isValid(a)&&(b=a.dataColumn())&&!b.isWritable();if(!d){var e=me.isInserting(a.item().itemState())?-1:a.dataRow(),f=ab(c.itemSource().getCellStyle(e,a.dataField()),Mg);d=f&&!f.isWritable()}return d},$_skipReadOnly:function(a,b){var c=!1,d=this.grid();if(d.editOptions().isSkipReadOnly()){var e=this._skipIndex;if(e.assign(a),c=!this.$_checkReadOnly(e),!c)if(b>0){for(;e.next();)if(!this.$_checkReadOnly(e)){a.assign(e),c=!0;break}}else for(;e.prev();)if(!this.$_checkReadOnly(e)){a.assign(e),c=!0;break}}return c},$_skipReadOnlyCell:function(a,b,c){var d=this.grid(),e=a.column(),f=e.checkGroupExist(oe.VERTICAL),g=!e.isWritable()&&!f;if(!g&&d.editOptions().isSkipReadOnlyCell()){var h=this._skipIndex;if(h.assign(a),g=!this.$_checkReadOnly(h),!g)if(b>0)for(;h.lower(d.isItemEditing(h.item()));){if(-1==h.itemIndex||!this.$_checkReadOnly(h)){a.assign(h),g=!0;break}if(Ye.areEquals(h,c)){g=!1;break}}else for(;h.upper(d.isItemEditing(h.item()));){if(-1==h.itemIndex||!this.$_checkReadOnly(h)){
a.assign(h),g=!0;break}if(Ye.areEquals(h,c)){g=!1;break}}}return g},$_getGroupFooterView:function(a){for(var b=a.parent();b;){if(b instanceof kj)return b;b=b.parent()}return null},$_getMergedFooterView:function(a){for(var b=a.parent();b;){if(b instanceof yj)return b;b=b.parent()}return null},_getEditRequest:function(a,b,c,d,e){var f,g,h=this._grid;if(a instanceof xm)return new ym(a);if(h.visibleColumnCount()<1)return null;if(!(a instanceof ri))return null;if(g=a,f=this.$_getRowResizeRequest(g,b,c))return f;if(h.header().isResizable()&&(f=this.$_getHeaderResizeRequest(b,c)))return f;if(h.header().summary().isResizable()&&(f=this.$_getHeaderSummaryResizeRequest(b,c)))return f;if(h.footer().isResizable()&&(f=this.$_getFooterResizeRequest(b,c)))return f;var i,j,k=h.layoutManager(),l=h.selectOptions().mode(),m=h.selectOptions().style(),n=g.localToContainer(md.EMPTY);if(n.x+=g.width(),g instanceof Oi){if(h.indicator().isSelectable()&&l!=Ge.NONE&&m!=He.NONE&&m!=He.SINGLE_ROW)return new Bl(h.selections(),g,He.ROWS)}else if(g instanceof vi)if(d){if(l!=Ge.NONE&&m!=He.NONE&&m!=He.SINGLE_COLUMN)return new Bl(h.selections(),g,He.COLUMNS)}else{if(i=g.index(),j=i.column(),h.displayOptions().isColumnResizable()&&j.isResizable()&&(h.fixedOptions().isResizable()||j.root().displayIndex()>=k.fixedColCount()&&j.root().displayIndex()<k.rfixedStartCol())&&b>=n.x-3&&b<=n.x+3)return new fl(g);if(h.displayOptions().isColumnMovable()&&j.isMovable()&&(!j.isRoot()||h.canMoveIndex(j.root().displayIndex())))return new gl(g)}else if(g instanceof ij||this.$_getGroupFooterView(g)||this.$_getMergedFooterView(g)){if(l!=Ge.NONE&&m!=He.NONE&&!He.isSingle(m)){if(h.selections().count()>0&&e)return new Bl(h.selections(),g,h.selections().itemStyle());if(m!=He.NONE)return new Bl(h.selections(),g,m)}}else if(g instanceof Wi){if(b=g.mouseX(),c=g.mouseY(),g.ptInButton(b,c))return new il(g);if(g.ptInEditButton(b,c))return new jl(g);if(g.ptInDataButton(b,c))return new kl(g);if(l!=Ge.NONE&&m!=He.NONE&&!He.isSingle(m)){if(h.selections().count()>0&&e)return new Bl(h.selections(),g,h.selections().itemStyle());if(m!=He.NONE)return new Bl(h.selections(),g,m)}}return this._super(a,b,c,d,e)},$_getHeaderResizeRequest:function(a,b){var c=this._grid.layoutManager(),d=c.indicatorBounds().width;if(0>=d&&(d=c.stateBarBounds().width),0>=d&&(d=c.checkBarBounds().width),0>=d&&(c.fixedColCount()>0||c.columnCount()>0)&&(d=20),0>=d||a>=d)return null;var e=c.headerBounds();return b>e.bottom()-3&&b<=e.bottom()?new ml:null},$_getHeaderSummaryResizeRequest:function(a,b){var c=this._grid.layoutManager(),d=c.indicatorBounds().width;if(0>=d&&(d=c.stateBarBounds().width),0>=d&&(d=c.checkBarBounds().width),0>=d&&(c.fixedColCount()>0||c.columnCount()>0)&&(d=20),0>=d||a>=d)return null;var e=c.summaryBounds();return b>e.bottom()-3&&b<=e.bottom()?new nl:null},$_getFooterResizeRequest:function(a,b){var c=this._grid.layoutManager(),d=c.indicatorBounds().width;if(0>=d&&(d=c.stateBarBounds().width),0>=d&&(d=c.checkBarBounds().width),0>=d&&(c.fixedColCount()>0||c.columnCount()>0)&&(d=20),0>=d||a>=d)return null;var e=c.footerBounds();return b>=e.y&&b<=e.y+3?new ol:null},$_getRowResizeRequest:function(a,b,c){var d,e,f,g,h,i=this._grid,j=i.layoutManager(),k=j.fixedItemCount(),l=-1;if(a instanceof Oi?l=a.index().I():a instanceof Ri?i.indicator().isVisible()||(l=a.index().I()):a instanceof Vi?i.indicator().isVisible()||i.stateBar().isVisible()||(l=a.index().I()):a instanceof Wi&&!i.indicator().isVisible()&&!i.stateBar().isVisible()&&!i.checkBar().isVisible()&&50>b&&(l=a.index().I()),0>l)return null;if(d=a.localToContainer(md.EMPTY),e=a.width(),0>=e||b<d.x||b>=d.x+e)return null;if(e=-1,i.fixedOptions().isRowResizable())for(f=0;k>f;f++)if(i.getItem(f).isResizable()){if(l!=f)break;if(g=j.getItemRect(f),c>=g.bottom()-2&&c<=g.bottom()+2)return new pl(f);if(h=j.footerBounds(),g.bottom()>=h.y&&c>=h.y-2&&c<=h.y+2)return new pl(f)}if(e>=0)return null;if(i.displayOptions().isRowResizable()){if((0==j.itemCount()&&j.fixedItemCount()>0||1==j.itemCount()&&0==j.fullItemCount())&&(g=j.getItemRect(0),h=j.footerBounds(),g.bottom()>=h.y&&c>=h.y-4&&c<=h.y+2))return new pl(0);var m=j.itemCount(),n=i.topIndex();for(f=0;m>f;f++)if(i.getItem(f).isResizable()){if(l-n!=f+k)break;if(g=j.getItemRect(f+k),c>=g.bottom()-2&&c<=g.bottom()+2)return new pl(f+k);if(h=j.footerBounds(),g.bottom()>=h.y&&c>=h.y-2&&c<=h.y+2)return new pl(f+k)}}return null},_getDragTracker:function(a,b,c){if(a instanceof fl)return new ql(a,b,c);if(a instanceof gl)return this._grid.displayOptions().isParentChangable()?new wl(a,b,c):new vl(a,b,c);if(a instanceof ml)return new sl(this._grid,a,b,c);if(a instanceof nl)return new tl(this._grid,a,b,c);if(a instanceof ol)return new ul(this._grid,a,b,c);if(a instanceof pl)return new rl(this._grid,a,b,c);if(a instanceof Bl)switch(a.selectStyle()){case He.ROWS:return new El(a,b,c);case He.COLUMNS:return new Fl(a,b,c);case He.BLOCK:return new Dl(a,b,c)}else{if(a instanceof kl)return new Al(a);if(a instanceof jl)return new zl(a);if(a instanceof il)return new yl(a);if(a instanceof ym)return new zm(a,b,c)}return null},editorActivated:function(a){this._resetFocusedView()},$_columnHeaderClicked:function(a,b,c){b=arguments.length>1?b:!1,this.grid()._fireColumnHeaderClicked(a,b,c),this._doColumnHeaderClicked(a,b,c)},_doColumnHeaderClicked:function(a){},_checkCellClicked:function(a){var b=this.grid();if(b.editOptions().isCheckable()){var c=b.checkBar(),d=a.item();d.isCheckable()&&(c.isShowGroup()||d.dataRow()>=0)&&(b.makeItemVisible(d.index()),b.itemSource().checkItem(d,!d.isChecked(),c.isExclusive()))}},_checkAllClicked:function(a){var b=this.grid(),c=b.checkBar();!b.isEmpty()&&b.editOptions().isCheckable()&&(c.isShowAll()&&!c.isExclusive()?(a.setChecked(!a.isChecked()),b.itemSource().checkAll(a.isChecked(),c.isVisibleOnly(),c.isCheckableOnly())):this._checkBarHeadClicked())},_footerCellClicked:function(a){this.grid()._fireFooterCellClicked(a)},_headerSummaryCellClicked:function(a){this.grid()._fireHeaderSummaryCellClicked(a)},_checkBarHeadClicked:function(){this.grid()._fireCheckBarHeadClicked()},_checkBarFootClicked:function(){this.grid()._fireCheckBarFootClicked()},_indicatorCellClicked:function(a){this.grid()._fireIndicatorCellClicked(a)},_stateBarCellClicked:function(a){this.grid()._fireStateBarCellClicked(a)},_rowGroupHeadClicked:function(){this.grid()._fireRowGroupHeadClicked()},_rowGroupFootClicked:function(){this.grid()._fireRowGroupFootClicked()},_rowGroupHeaderFooterClicked:function(a,b){this.grid()._fireRowGroupHeaderFooterClicked(a,b)},_rowGroupBarClicked:function(a){this.grid()._fireRowGroupBarClicked(a)},_panelClicked:function(){this.grid()._firePanelClicked()},_rowGroupPanelClicked:function(a){this.grid()._fireRowGroupPanelClicked(a)},$_elementClicked:function(a){this._doElementClicked(a)},_doElementClicked:function(a){},$_handleClicked:function(a){this._doHandleClicked(a)},_doHandleClicked:function(a){var b=this.grid();a instanceof mi&&b.filteringOptions().isEnabled()&&b.selectColumnFilters(a.parent())},_showTooltip:function(a,b){var c=this.grid(),d=c.toolTipManager(),e=c.layoutManager();if((!d.isVisible()||this._tipCell!=a)&&(this._hideTooltip(),a&&b)){var f=a.boundsBy(),g=f.x,h=f.y;if(g=a._dataColumn&&a._dataColumn.isFixed()?g:Math.max(g,e.nonfixedBounds().x),a instanceof vj){var i=c.pointToIndex(c.mouseX(),c.mouseY(),!1);if(i){var j=i.I()-Math.max(a.index().I(),c.topIndex())+1;h+=j*c._layoutManager.$_calcItemHeight(c,c._delegate,i.I())}else h=c.mouseY()+8}else h+=a._height;d.show(b,g,h),this._tipCell=a}},_showHeaderTooltip:function(a,b){var c=this.grid(),d=c.toolTipManager(),e=c.layoutManager();if((!d.isVisible()||this._tipCell!=a)&&(this._hideTooltip(),a&&b)){var c=this.grid();if(a instanceof om)var f=c.mouseX()+8,g=c.mouseY();else var h=a.boundsBy(),f=a._column.isFixed()?h.x:Math.max(h.x,e.nonfixedBounds().x),g=h.y+h.height;d.show(b,f,g),this._tipCell=a}},_hideTooltip:function(){this.grid().toolTipManager().close(),this._tipCell=null},_performRendererClick:function(a,b,c,d,e,f){var g=this.grid();if(!g.isEditing()&&a.isValid()&&b){var h=a.dataColumn();if(h){var i=b.renderer();if(b.ptInCell(b.mouseX(),b.mouseY()))if(g.isReadOnly(a)||!(!e&&i.isEditable()||e&&i.isDblClickEditable())||f&&!i.isStartEditOnClick())!e&&i.isClickable(a)&&i.performClick(b,c,d);else{var j=a.item();(g.isItemEditing(j)||g.canUpdate(j,a.dataField()))&&g.canWrite(a)&&g.edit(a)&&i.performEdit(a)}}}}}),bl=Xa("FocusView",Xd,{init:function(a){this._super(a,"focusView"),this._border=new Dd(4281545523,2),this._editBorder=new Dd(4283601655,2),this._editing=!1},setEditing:function(a,b){a!=this._editing&&(this._editing=a,this._buttonWidth=b,this.invalidate())},_doDraw:function(a){var b=this.width()-(this._editing?this._buttonWidth:0),c=this._editing?0:1;a.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,b-c,this.height()-1)},_doDrawHtml:function(){var a=(this.width()-(this._editing?this._buttonWidth:0),this._editing?this._editBorder:this._border);this._css.background="",this._css.border=a.css()}}),cl=Xa("InnerFocusView",Xd,{init:function(a){this._super(a,"innerFocusView"),this._border=new Dd(2150839091,1,[1,1]),this._editBorder=new Dd(4283601655,2),this._editing=!1},setEditing:function(a,b){this._editing=a,this._buttonWidth=b,this.invalidate()},_doDraw:function(a){var b=this.width()-(this._editing?this._buttonWidth:0),c=this._editing?0:1;a.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,b-c,this.height()-1)},_doDrawHtml:function(){var a=(this.width()-(this._editing?this._buttonWidth:0),this._editing?this._editBorder:this._border);this._css.background="",this._css.border=a.css()}}),dl=Xa("GridDragTracker",de,{init:function(a,b){this._super(a.container(),b),this._grid=a},grid:function(){return this._grid},isStartWhenCreated:function(){return!1},checkScrolling:function(){return this._grid.checkScrolling()},checkHScrolling:function(){return this._grid.checkHSCrolling()}}),el=Xa("CellRequest",ce,{init:function(a){this._super(),this._cell=a},cell:function(){return this._cell},cursor:function(){return null},source:function(){return this._cell},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),fl=Xa("ColumnResizeRequest",el,{init:function(a){this._super(a)},delta:0,headerCell:function(){return this._cell},cursor:function(){return Zd.HORZ_RESIZE},isSelectable:function(){return!1},isDblClickable:function(){return!0}}),gl=Xa("ColumnMoveRequest",el,{init:function(a){this._super(a)}}),hl=Xa("DataCellRequest",ce,{init:function(a){this._super(),this._index=a},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),il=Xa("CellButtonRequest",hl,{init:function(a){this._super(a.index()),this._cell=a},cell:function(){return this._cell}}),jl=Xa("EditButtonRequest",il,{init:function(a){this._super(a)}}),kl=Xa("DataButtonRequest",il,{init:function(a){this._super(a)}}),ll=Xa("GridEditRequest",ce,{init:function(a){this._super()},cursor:function(){return null},source:function(){return null},isSelectable:function(){return!0},isDblClickable:function(){return!1}}),ml=Xa("HeaderResizeRequest",ll,{init:function(a){this._super(a)},cursor:function(){return Zd.VERT_RESIZE}}),nl=Xa("HeaderSummaryResizeRequest",ll,{init:function(a){this._super(a)},cursor:function(){return Zd.VERT_RESIZE}}),ol=Xa("FooterResizeRequest",ll,{init:function(a){this._super(a)},cursor:function(){return Zd.VERT_RESIZE}}),pl=Xa("RowResizeRequest",ll,{init:function(a){this._super(),this._itemIndex=a},itemIndex:function(){return this._itemIndex},cursor:function(){return Zd.VERT_RESIZE},isSelectable:function(){return!1}}),ql=Xa("ColumnResizeTracker",dl,{init:function(a){this._super(a.cell().grid(),"columnResizeTracker"),this._request=a;var b=a.headerCell(),c=b.index().column();c.group()?this._cell=si.getRootOf(b):this._cell=b,this._startWidth=this._cell.width(),this._offset=this.container().mouseX()-this._startWidth},_doStart:function(a,b){return!0},_doDrag:function(a,b){var c=this._request.headerCell(),d=c.index().column(),a=this.container().mouseX()-this._offset;return a>=2&&(ak.changeWidth(d,a-this._startWidth,!1,Zj.MIN_WIDTH),this._startWidth=a),!0}}),rl=Xa("RowResizeTracker",dl,{init:function(a,b,c,d){this._super(a,"rowResizeTracker"),this._request=b;var e=a.layoutManager().getItemBounds(b.itemIndex());e.x+=a.x(),e.y+=a.y(),this._rowTop=e.y,this._rowBottom=e.bottom(),this._offset=d-e.bottom()},_doStart:function(a,b){return!0},_doDrag:function(a,b){var c=b-this._offset-this._rowTop;return c>=2&&this._grid.displayOptions().setRowHeight(c),!0}}),sl=Xa("HeaderResizeTracker",dl,{init:function(a,b,c,d){this._super(a,"headerResizeTracker"),this._request=b;var e=a.layoutManager().headerBounds();this._headerTop=e.y,this._headerBottom=e.bottom(),this._offset=d-e.bottom()},_doStart:function(a,b){return!0},_doDrag:function(a,b){if(this._grid.footer().isVisible()&&b>=this._grid.layoutManager().footerBounds().y)return!1;if(b>=this._grid.layoutManager().gridBounds().bottom())return!1;var c=b-this._offset-this._headerTop;return c>=2&&this._grid.header().setHeight(c),!0}}),tl=Xa("HeaderSummaryResizeTracker",dl,{init:function(a,b,c,d){this._super(a,"headerResizeTracker"),this._request=b;var e=a.layoutManager().summaryBounds();this._summaryTop=e.y,this._summaryBottom=e.bottom(),this._offset=d-e.bottom()},_doStart:function(a,b){return!0},_doDrag:function(a,b){if(this._grid.footer().isVisible()&&b>=this._grid.layoutManager().footerBounds().y)return!1;if(b>=this._grid.layoutManager().gridBounds().bottom())return!1;var c=b-this._offset-this._summaryTop;return c>=2&&this._grid.header().summary().setHeight(c),!0}}),ul=Xa("FooterResizeTracker",dl,{init:function(a,b,c,d){this._super(a,"footerResizeTracker"),this._request=b;var e=a.layoutManager().footerBounds();this._footerTop=e.y,this._footerBottom=e.bottom(),this._offset=d-e.y},_doStart:function(a,b){return!0},_doDrag:function(a,b){if(this._grid.header().isVisible()&&b<this._grid.layoutManager().headerBounds().bottom())return!1;if(this._grid.panel()&&this._grid.panel().isVisible()&&b<this._grid.layoutManager().panelBounds().bottom())return!1;if(0>b)return!1;var c=this._footerBottom-b+this._offset;return c>=2&&this._grid.footer().setHeight(c),!0}}),vl=Xa("ColumnMoveTracker2",dl,{init:function(a,b,c){this._super(a.cell().grid(),"columnMoveTracker2"),this._request=a,this._sourceFeedback=new vi(this._grid,this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new xl(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.5);var d=a.cell().index().column().parent();d.isHorizontal()?(this._startPos=b,this._orgPos=a.cell().boundsByContainer().x):(this._startPos=c,this._orgPos=a.cell().boundsByContainer().y)},_doStart:function(a,b){var c=this._request.cell(),d=this.grid(),e=c.boundsBy(d);return d.addFeedbackElement(this._sourceFeedback),d.addFeedbackElement(this._targetFeedback),this._sourceFeedback.setBounds(e.x,e.y,c.width(),c.height()),this._sourceFeedback.updateCell(d.header().getCell(c.index())),this.$_setTarget(null),!0},_doDrag:function(a,b){var c=this.grid(),d=c.layoutManager();if(c.panel().isVisible()&&b>=d.panelBounds().y&&b<d.panelBounds().bottom())return!1;var e,f,g,h=this._request.cell().index().column(),i=null;h.group()?(i=this._request.cell(),h instanceof ak&&(i=i.parent()),h.parent().isHorizontal()?this._sourceFeedback.setX(this._orgPos+(this._currentX-this._startPos)):this._sourceFeedback.setY(this._orgPos+(this._currentY-this._startPos)),e=ab(i.parent(),wi),f=e.boundsByContainer(),a-=f.x,b-=f.y,i=e.getCellAt(a,b)):(h.parent().isHorizontal()?this._sourceFeedback.setX(this._orgPos+(a-this._startPos)):this._sourceFeedback.setY(this._orgPos+(b-this._startPos)),g=c.headerView(),f=g.boundsByContainer(),a-=f.x,b-=f.y,i=g.getCellAt(a,b));var j=i?i.index().column():null;return i&&j.isRoot()&&!c.canMoveToIndex(j.root().displayIndex())&&(i=null),i&&j.group()!=h.group()||this.$_setTarget(i),!0},_doCanceled:function(){},_doCompleted:function(){if(this._target){var a=ab(this._request.cell(),vi),b=a.index().column();b.setDisplayIndex(this._target.index().column().displayIndex())}},_doEnded:function(){this.grid().removeFeedbackElement(this._targetFeedback),this.grid().removeFeedbackElement(this._sourceFeedback)},getNextRequest:function(a,b){var c=this.grid(),d=this._request.cell().index();return c.groupingOptions().isEnabled()&&d.dataColumn()&&d.dataColumn().isGroupable()&&c.panel().isVisible()&&(b-=c.y(),b<c.layoutManager().headerBounds().y&&b>=0)?new qm(this._request.cell()):null},$_setTarget:function(a){if(a!=this._target){var b=this._request.cell(),c=b.index().column(),d=ab(c,ak),e=this._target=a;if(e){var f=this.grid(),g=f.leftPos();f.makeCellVisible(e.index()),f.leftPos()!=g&&(f.refreshView(),f.container().updateNow());var h=e.boundsBy(f);if(e===b)this._targetFeedback._direction="none";else if(d&&d===e.index().column())this._targetFeedback.direction="none";else if(!c.group()||c.group().isHorizontal()){var i=e.x(),j=d?b.parent().x():b.x();this._targetFeedback._direction="horz",this._targetFeedback._reversed=i>j}else{var k=e.y(),l=d?b.parent().y():b.y();this._targetFeedback._direction="vert",this._targetFeedback._reversed=k>l}this._targetFeedback.setBounds(h.x,h.y,e.width(),e.height()),this._targetFeedback.setVisible(!0),this._targetFeedback.invalidate()}else this._targetFeedback.setVisible(!1)}}}),wl=Xa("ColumnMoveTracker3",dl,{init:function(a,b,c){this._super(a.cell().grid(),"columnMoveTracker3"),this._request=a,this._sourceFeedback=new vi(this._grid,this._grid._dom,"columnMoveFeedback"),this._sourceFeedback.setAlpha(.7),this._targetFeedback=new xl(this._grid._dom,"columnMoveTargetFeedback"),this._targetFeedback.setAlpha(.5),this._startX=c,this._startY=c;var d=a.cell().boundsByContainer();this._orgX=d.x,this._orgY=d.y,this._target=null,this._dir=null},_doStart:function(a,b){var c=this._request.cell(),d=this.grid(),e=c.boundsBy(d);return d.addFeedbackElement(this._sourceFeedback),d.addFeedbackElement(this._targetFeedback),this._sourceFeedback.setBounds(e.x,e.y,c.width(),c.height()),this._sourceFeedback.updateCell(d.header().getCell(c.index())),this.$_setTarget(null),!0},_doDrag:function(a,b){var c=this.grid(),d=c.layoutManager();if(c.panel().isVisible()&&b>=d.panelBounds().y&&b<d.panelBounds().bottom())return!1;if(this._request.cell().index().column().parent().count()<2)return!0;this._sourceFeedback.setX(a),this._sourceFeedback.setY(b);var e=c.headerView(),f=e.boundsByContainer();a-=f.x,b-=f.y;var g=e.getCellAt(a,b,!0),h=g?g.index().column():null;return g&&h.isRoot()&&!c.canMoveToIndex(h.root().displayIndex())&&(g=null),this.$_setTarget(g),!0},_doCanceled:function(){},_doCompleted:function(){if(this._target){var a=ab(this._request.cell(),ri),b=a.index().column(),c=this._target.index().column();c.parent()===b.parent()?b.setDisplayIndex(c.displayIndex()):(b.setParent(c.parent()),b.setDisplayIndex(c.displayIndex()+("r"==this._dir?1:0)))}},_doEnded:function(){this.grid().removeFeedbackElement(this._targetFeedback),this.grid().removeFeedbackElement(this._sourceFeedback)},getNextRequest:function(a,b){var c=this.grid(),d=this._request.cell().index();return c.groupingOptions().isEnabled()&&d.dataColumn()&&d.dataColumn().isGroupable()&&c.panel().isVisible()&&(b-=c.y(),b<c.layoutManager().headerBounds().y&&b>=0)?new qm(this._request.cell()):null},$_setTarget:function(a){var b=this.currentX(),c=this.currentY(),d=this._request.cell(),e=d.index().column(),f=a?a.index().column():null;if(!(e instanceof ak&&e.isAncestorOf(f))){var g=a==this._target,h=this._target=a;if(h){var i=this.grid(),j=i.leftPos();g||(i.makeCellVisible(h.index()),i.leftPos!=j&&(i.refreshView(),i.updateNow()));var k,l=h.boundsBy(i);if(h===d)this._targetFeedback._direction="none";else if(!f.group()||f.group().isHorizontal()){var m,n;this._targetFeedback._direction="horz",f.parent()!=e.parent()||f instanceof ak?(m=h.width()/2,n=b-l.x,k=n>m?"r":"n",g&&k==this._dir||(this._dir=k,f instanceof ak&&(l.height=h.parent().height()),this._targetFeedback._reversed="r"==k)):g||(m=h.x(),n=e instanceof ak?d.parent().x():d.x(),this._targetFeedback._reversed=m>n)}else{var o,p;this._targetFeedback._direction="vert",f.parent()!=e.parent()||f instanceof ak?(o=h.height()/2,p=c-l.y,k=p>o?"r":"n",g&&k==this._dir||(this._dir=k,f instanceof ak&&(l.width=h.parent().width(),l.height=h.parent().height()),this._targetFeedback._reversed="r"==k)):(o=h.y(),p=e instanceof ak?d.parent().y():d.y(),this._targetFeedback._reversed=o>p)}this._targetFeedback.setRect(l),this._targetFeedback.setVisible(!0)}else this._targetFeedback.setVisible(!1)}}}),xl=Xa("ColumnMoveFeedback",Vd,{init:function(a,b){this._super(a,b),this._direction="none",this._reversed=!1,this._lineNone=new Dd("rgba(0, 0, 0, 0.7)",2),this._fillNone=new yd("rgba(0, 0, 0, 0.2)"),this._line=new Dd("rgba(0, 0, 0, 1)",2),this._fill=new yd(4278190080)},_doDraw:function(a){var b,c,d=this.clientRect();switch(this._direction){case"horz":this._reversed?(b=d.width,c=d.height-2,a.drawBoundsI(this._fill,null,b-3,1,3,c),a.drawLineI(this._line,b-1,1,b-7,1),a.drawLineI(this._line,b-1,c,b-7,c)):(c=d.height-2,a.drawBoundsI(this._fill,null,0,1,3,c),a.drawLineI(this._line,1,1,7,1),a.drawLineI(this._line,1,c,7,c));break;case"vert":this._reversed?(b=d.width-2,c=d.height,a.drawBoundsI(this._fill,null,1,c-3,b,3),a.drawLineI(this._line,1,c-1,1,c-7),a.drawLineI(this._line,b,c-1,b,c-7)):(w=d.width-2,a.drawBoundsI(this._fill,null,1,0,w,3),a.drawLineI(this._line,1,1,1,7),a.drawLineI(this._line,w,1,w,7));break;default:a.drawRectI(this._fillNone,this._lineNone,d)}}}),yl=Xa("CellButtonTracker",dl,{init:function(a){this._super(a.cell().grid(),"cellButtonTracker"),this._request=a},isStartWhenCreated:function(){return!0},_doStart:function(a,b){return this._request.cell().setButtonState(!0,!0),!0},_doDrag:function(a,b){var c=this._request.cell(),d=c.ptInButton(c.mouseX(),c.mouseY());return c.setButtonState(d,d),!0},_canAccept:function(a,b){var c=this._request.cell(),d=c.containerToElement(a,b);return c.ptInButton(d.x,d.y)},_doCanceled:function(){},_doCompleted:function(){this._request.cell().grid().activeTool().cellButtonClicked(this._request.cell().index())},_doEnded:function(){this._request.cell().setButtonState(!1,!1)}}),zl=Xa("EditButtonTracker",dl,{init:function(a){this._super(a.cell().grid(),"editButtonTracker"),this._request=a},isStartWhenCreated:function(){return!0},_doStart:function(a,b){return this._request.cell().setEditButtonState(!0,!0),!0},_doDrag:function(a,b){var c=this._request.cell(),d=c.ptInButton(c.mouseX(),c.mouseY());return c.setEditButtonState(d,d),!0},_canAccept:function(a,b){var c=this._request.cell(),d=c.containerToElement(a,b);return c.ptInEditButton(d.x,d.y)},_doCanceled:function(){},_doCompleted:function(){var a=this._request.cell(),b=a.index().clone();a instanceof vj&&a.innerIndex()>=0&&b.setItemIndex(b.itemIndex()+a.innerIndex()),a.grid().activeTool().editButtonClicked(b)},_doEnded:function(){this._request.cell().setEditButtonState(!1,!1)}}),Al=Xa("DataButtonTracker",dl,{init:function(a){this._super(a.cell().grid(),"dataButtonTracker"),this._request=a},isStartWhenCreated:function(){return!0},_doStart:function(a,b){return this._request.cell().setPressed(!0),!0},_doDrag:function(a,b){var c=this._request.cell(),d=c.ptInDataButton(c.mouseX(),c.mouseY());return c.setPressed(d),!0},_canAccept:function(a,b){var c=this._request.cell(),d=c.containerToElement(a,b);return c.ptInDataButton(d.x,d.y)},_doCanceled:function(){},_doCompleted:function(){this._request.cell().grid().activeTool().imageButtonClicked(this._request.cell().index())},_doEnded:function(){this._request.cell().setPressed(!1)}}),Bl=Xa("SelectRequest",el,{init:function(a,b,c){this._super(b),this._manager=a,this._style=c},manager:function(){return this._manager},selectStyle:function(){return this._style}}),Cl=Xa("SelectTracker",dl,{init:function(a,b){this._super(a.cell().grid(),b),this._request=a},isStartWhenCreated:function(){return this._request.cell()instanceof Bi||this._request.cell()instanceof ij?!1:!0},_doEnded:function(){var a=this._getItem();a&&this.grid()._fireSelectionEnded(a)},_getItem:function(){return null}}),Dl=Xa("BlockSelectTracker",Cl,{init:function(a){this._super(a,"blockSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._rowPrevLoop=0,this._rowLoop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(a,b,c){var d=this.container().activeTool(),e=this._request.manager(),f=e&&e._grid&&e._grid.layoutManager(),g=d&&d instanceof lm?d.findElementAt(a,b,!1).index():this.grid().pointToIndex(Na(a),Na(b),!0);return f.isMergedCell(g)&&(g=this.grid().pointToIndex(Na(a),Na(b),!0)),e.setItemStyle(He.BLOCK),c||(e.clear(),this._item=e.add(g,g,He.BLOCK)),Boolean(this._item)},_doDrag:function(a,b){if(this._item){var c,d=this.grid(),e=d.layoutManager();return this._currx=a=d.containerToGridX(a),this._curry=b=d.containerToGridY(b),b>e.footerBounds().y||b<e.gridBounds().y||a<e.gridBounds().x||a>e.clientRect().right()?this._startTimer():(this._stopTimer(),c=this.grid().pointToIndex(a,b,!0),c.column()&&c.I()>=0&&this._item.resizeTo(c)),!0}return!1},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var a=this._grid,b=this._currx,c=this._curry,d=a.layoutManager(),e=0,f=0;c>d.footerBounds().y?(f=Math.max(0,Math.min(3,(c-d.footerBounds().y)/40)),this._interval=4-f,this._rowLoop++):c<d.gridBounds().y&&(f=Math.max(0,Math.min(3,(d.gridBounds().y-c)/40)),this._interval=4-f,this._rowLoop++),b>d.clientRect().right()?(e=Math.max(0,Math.min(3,(b-d.clientRect().right())/40)),this._interval=4-e,this._colLoop++):b<d.gridBounds().x&&(e=Math.max(0,Math.min(3,(d.gridBounds().x-b)/40)),this._interval=4-e,this._colLoop++);var g=!1,h=Math.max(e,f);if(h>0&&(this._interval=4-Math.max(e,f)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,c>d.footerBounds().y?a.topItem()+d.fullItemCount()<a.itemCount()&&(a.setTopIndex(a.topIndex()+1),g=!0):c<d.gridBounds().y&&a.topItem()>d.fixedItemCount()&&(a.setTopIndex(a.topIndex()-1),g=!0)),g||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,b>d.clientRect().right()?(a.setLeftCol(a.leftCol()+1),g=!0):b<d.gridBounds().left()&&a.leftPos()>0&&(a.setLeftCol(a.leftCol()-1),g=!0)),g){var i=a.pointToIndex(this._currx,this._curry,!1);i.column()&&(i.itemIndex(Math.min(Math.max(0,i.I(),a.topIndex()),a.itemCount()-1)),this._item.resizeTo(i))}}}),El=Xa("RowsSelectTracker",Cl,{init:function(a){this._super(a,"rowsSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._colPrevLoop=0,this._colLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(a,b,c){var d=this.container().activeTool(),e=this._request.manager(),f=e&&e._grid&&e._grid.layoutManager(),g=d&&d instanceof lm?d.findElementAt(a,b,!1).index():this.grid().pointToIndex(Na(a),Na(b),!0);return f.isMergedCell(g)&&(g=this.grid().pointToIndex(Na(a),Na(b),!0)),e.setItemStyle(He.ROWS),c||(e.clear(),this._item=e.add(g,g,He.ROWS)),Boolean(this._item)},_doDrag:function(a,b){if(this._item){var c,d=this.grid(),e=d.layoutManager();return this._currx=a=d.containerToGridX(a),this._curry=b=d.containerToGridY(b),b>e.footerBounds().y||b<e.gridBounds().y||0>a||a>e.clientRect().right()?this._startTimer():(this._stopTimer(),c=d.pointToIndex(a,b,!1),c.I()>=0&&this._item.resizeTo(c)),!0}return!1},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var a,b,c=this._grid,d=this._currx,e=this._curry,f=c.layoutManager();e>f.footerBounds().y?(b=Math.max(0,Math.min(3,(e-f.footerBounds().y)/40)),this._interval=4-b,this._loop++):e<f.gridBounds().y&&(b=Math.max(0,Math.min(3,(f.gridBounds().y-e)/40)),this._interval=4-b,this._loop++),this._loop-this._prevLoop>=this._interval?(this._prevLoop=this._loop,e>f.footerBounds().y?c.setTopIndex(c.topIndex()+1):e<f.gridBounds().y&&c.setTopIndex(c.topIndex()-1),a=c.pointToIndex(this._currx,this._curry,!1),a.itemIndex(Math.min(Math.max(0,a.I(),c.topIndex()),c.itemCount()-1)),this._item.resizeTo(a)):(d>f.clientRect().right()?(b=Math.max(0,Math.min(3,(d-f.clientRect().right())/40)),this._interval=4-b,this._colLoop++):0>d&&(b=Math.max(0,Math.min(3,(f.gridBounds().x-d)/40)),this._interval=4-b,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,d>f.clientRect().right()?c.setLeftCol(c.leftCol()+1):d<f.gridBounds().x&&c.leftPos()>0&&c.setLeftCol(c.leftCol()-1),a=c.pointToIndex(this._currx,this._curry,!1),a.I()>=0&&(a.itemIndex(Math.min(Math.max(0,a.I(),c.topIndex()),c.itemCount()-1)),this._item.resizeTo(a))))}}),Fl=Xa("ColumnsSelectTracker",Cl,{init:function(a){this._super(a,"columnsSelectTracker"),this._item=null,this._timer=null,this._currx=NaN,this._curry=NaN,this._prevLoop=0,this._loop=0,this._rowPrevLoop=0,this._rowLoop=0,this._interval=0},_getItem:function(){return this._item},_doStart:function(a,b,c){var d=this.container().activeTool(),e=d&&d instanceof lm?d.findElementAt(a,b,!1).index():this.grid().pointToIndex(Na(a),Na(b),!0),f=this._request.manager();return f.setItemStyle(He.COLUMNS),c||(f.clear(),this._item=f.add(e,e,He.COLUMNS)),Boolean(this._item)},_doDrag:function(a,b){if(this._item){var c=this.grid(),d=c.layoutManager();if(this._currx=a=c.containerToGridX(a),this._curry=b=c.containerToGridY(b),a<d.gridBounds().x||a>d.clientRect().right()||b>d.footerBounds().y||0>b)this._startTimer();else{this._stopTimer();var e=c.pointToIndex(a,b,!1);e.column()&&this._item.resizeTo(e)}return!0}return!1},_doEnded:function(){this._stopTimer(),this._super()},_startTimer:function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this._timerHandler.bind(this),30),this._grid.selections().lock())},_stopTimer:function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections().unlock())},_timerHandler:function(){var a,b,c=this._grid,d=this._currx,e=this._curry,f=c.layoutManager();d>f.clientRect().right()?(b=Math.max(0,Math.min(3,(d-f.clientRect().right())/40)),this._interval=4-b,this._loop++):d<f.gridBounds().x&&(b=Math.max(0,Math.min(3,(f.gridBounds().x-d)/40)),this._interval=4-b,this._loop++),this._loop-this._prevLoop>=2*this._interval?(this._prevLoop=this._loop,d>f.clientRect().right()?c.setLeftCol(c.leftCol()+1):d<f.gridBounds().x&&c.leftPos()>0&&c.setLeftCol(c.leftCol()-1),a=c.pointToIndex(this._currx,this._curry,!1),a.column&&this._item.resizeTo(a)):(e>f.footerBounds().y?(b=Math.max(0,Math.min(3,(e-f.footerBounds().y)/40)),this._interval=4-b,this._rowLoop++):0>e&&(b=Math.max(0,Math.min(3,(f.gridBounds().y-e)/40)),this._interval=4-b,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,e>f.footerBounds().y?c.setTopIndex(c.topIndex()+1):e<f.gridBounds().y&&c.setTopIndex(c.topIndex()-1),a=c.pointToIndex(this._currx,this._curry,!1),a.column()&&this._item.resizeTo(a)))}}),Gl=Xa("SelectionItem",null,{init:function(a){this._super(),this._manager=a},style:function(){_a()},isSingleCell:function(){return!1},getBounds:function(){return null},contains:function(a){return!1},inflate:function(a,b){switch(a){
case"left":return this._inflateLeft(b);case"right":return this._inflateRight(b);case"top":return this._inflateTop(b);case"bottom":return this._inflateBottom(b)}return!1},resizeTo:function(a){},intersectsWith:function(a){_a()},mergeWith:function(a){_a()},getData:function(a){_a()},_resized:function(){this._manager&&this._manager._itemResized(this)},_inflateLeft:function(a){},_inflateRight:function(a){},_inflateTop:function(a){},_inflateBottom:function(a){}}),Hl=Xa("SelectionManager",bb,{init:function(a){this._super(),this._grid=a,this._items=[],this._locked=!1},exclusiveMode:!0,itemStyle:He.BLOCK,setExclusiveMode:function(a){a!=this._exclusive&&(this._exclusive=a,this.clear())},setItemStyle:function(a){a!=this._itemStyle&&(this._itemStyle=a,this.clear())},count:function(){return this._items.length},isSingleCell:function(){return 1==this._items.length&&this._items[0].isSingleCell()},lock:function(){this._locked=!0},unlock:function(){this._locked=!1},getItem:function(a){return this._items[a]},add:function(a,b,c){if(this._locked)return null;if(c==He.NONE)return this.clear(),null;this._exclusiveMode&&c!=this._style&&this.clear();var d=null;switch(c){case He.COLUMNS:d=new Kl(this,a.column(),b.column());break;case He.SINGLE_COLUMN:d=new Kl(this,a.column(),a.column());break;case He.ROWS:d=new Jl(this._grid,a.I(),b.I());break;case He.SINGLE_ROW:d=new Jl(this._grid,a.I(),a.I());break;case He.BLOCK:d=new Il(this,a,b);break;case He.SINGLE:d=new Il(this,a,a)}return this._addItem(d)},remove:function(a){if(!this._locked){var b=this._items.indexOf(a);b>=0&&(this._items.splice(b,1),this.fireEvent(Hl.REMOVED,a))}},clear:function(){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(Hl.CLEARED))},containsItem:function(a){return!1},containsColumn:function(a){return!1},contains:function(a){for(var b=0,c=this._items.length;c>b;b++)if(this._items[b].contains(a))return!0;return!1},normalize:function(){},_addItem:function(a){if(!a)throw new Error("item is null");return this._items.indexOf(a)<0&&(this._items.push(a),this.fireEvent(Hl.ADDED,a)),a},_itemResized:function(a){this.fireEvent(Hl.RESIZED,a)}});Hl.CHANGED="onSelectionChanged",Hl.ADDED="onSelectionAdded",Hl.REMOVED="onSelectionRemoved",Hl.CLEARED="onSelectionCleared",Hl.RESIZED="onSelectionResized",Hl.ENDED="onSelectionEnded";var Il=Xa("BlockSelection",Gl,{init:function(a,b,c){this._super(a),this._grid=b.grid(),this._startIndex=b.clone(),this._endIndex=c.clone()},startIndex:function(){return this._startIndex},endIndex:function(){return this._endIndex},style:function(){return He.BLOCK},isSingleCell:function(){return Ye.areEquals(this._startIndex,this._endIndex)},getBounds:function(){if(this._startIndex.normalize(this._grid),this._endIndex.normalize(this._grid),Ye.areEquals(this._startIndex,this._endIndex))return bf.create(this._startIndex);var a=this._startIndex.C()?this._startIndex.C().dataRoot():null,b=this._endIndex.C()?this._endIndex.C().dataRoot():null;return bf.createRange(this._startIndex.I(),a,this._endIndex.I(),b)},contains:function(a){return this.getBounds().containsIndex(a)},_inflateLeft:function(a){this._startIndex.C().distance()<=this._endIndex.C().distance()?a.C()!==this._startIndex.C()&&(this._startIndex.column(a.C()),this._resized()):a.C()!==this._endIndex.C()&&(this._endIndex.column(a.C()),this._resized())},_inflateRight:function(a){this._startIndex.C().distance()>this._endIndex.C().distance()?a.C()!==this._startIndex.C()&&(this._startIndex.column(a.C()),this._resized()):a.C()!==this._endIndex.C()&&(this._endIndex.column(a.C()),this._resized())},_inflateTop:function(a){var b=Math.max(0,Math.min(this._grid.itemCount()-1,a.I()));this._startIndex.I()<=this._endIndex.I()?b!==this._startIndex.I()&&(this._startIndex.itemIndex(b),this._resized()):b!==this._endIndex.I()&&(this._endIndex.itemIndex(b),this._resized())},_inflateBottom:function(a){var b=Math.max(0,Math.min(this._grid.itemCount()-1,a.I()));this._startIndex.I()>this._endIndex.I()?b!==this._startIndex.I()&&(this._startIndex.itemIndex(b),this._resized()):b!==this._endIndex.I()&&(this._endIndex.itemIndex(b),this._resized())},resizeTo:function(a){this._grid.isValid(a)&&!Ye.areEquals(a,this._endIndex)&&(this._endIndex.assign(a),this._resized())},intersectsWith:function(a){return this.getBounds().intersectsWith(a.getBounds())},mergeWith:function(a){},getData:function(a){if(a=arguments.length>0?a:-1,0==a)return null;var b,c=this._grid,d=c.collectDataColumns(this._startIndex.C(),this._endIndex.C());if(!d||(b=d.length)<1)return null;var e,f,g,h,i,j=Math.min(this._startIndex.I(),this._endIndex.I()),k=Math.max(this._startIndex.I(),this._endIndex.I()),l=[];for(e=j;k>=e;e++)if(g=c instanceof jm?ab(c.getItem(e),Xf):c instanceof po?ab(c.getItem(e),$n):null){for(f={},h=0;b>h;h++)i=d[h],f[i.fieldName()]=g.getData(i.dataIndex());if(l.push(f),a>0&&l.length==a)break}return l}}),Jl=Xa("RowSelection",Gl,{init:function(a,b,c){this._super(a.selections()),this._grid=a,this._startRow=Math.min(b,c),this._endRow=Math.max(b,c)},startRow:function(){return this._startRow},endRow:function(){return this._endRow},topRow:function(){return Math.min(this._startRow,this._endRow)},bottomRow:function(){return Math.max(this._startRow,this._endRow)},style:function(){return He.ROWS},getBounds:function(){var a=this._grid.itemCount();return this._startRow=Math.max(0,Math.min(a-1,this._startRow)),this._endRow=Math.max(0,Math.min(a-1,this._endRow)),this._startRow<=this._endRow?bf.createRange(this._startRow,this._grid.getVisibleColumn(0),this._endRow,this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1)):bf.createRange(this._endRow,this._grid.getVisibleColumn(0),this._startRow,this._grid.getVisibleColumn(this._grid.visibleColumnCount()-1))},contains:function(a){return a.I()>=this._startRow&&a.I()<=this._endRow},_inflateTop:function(a){var b=a.I();b!=this.topRow()&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this._grid.itemCount()-1,b)):this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,b)),this._resized())},_inflateBottom:function(a){var b=a.I();b!=this.bottomRow()&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this._grid.itemCount()-1,b)):this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,b)),this._resized())},resizeTo:function(a){var b=Math.max(0,a.I());b!=this._endRow&&(this._endRow=Math.max(0,Math.min(this._grid.itemCount()-1,b)),this._resized())},intersectsWith:function(a){return this.getBounds().intersectsWith(a.getBounds())},mergeWith:function(a){},getData:function(a){if(a=arguments.length>0?a:-1,0==a)return null;var b=this._grid,c=b.collectDataColumns(b.getVisibleColumn(0),b.getVisibleColumn(b.visibleColumnCount()-1));if(!c)return null;var d=c.length;if(1>d)return null;var e,f,g,h,i,j=Math.max(0,Math.min(this._startRow,this._endRow)),k=Math.min(this._grid.itemCount()-1,Math.max(this._startRow,this._endRow)),l=[];for(i=j;k>=i;i++)if(e=b instanceof jm?ab(b.getItem(i),Xf):b instanceof po?ab(b.getItem(i),$n):null){for(f={},g=0;d>g;g++)h=c[g],f[h.fieldName()]=e.getData(h.dataIndex());if(l.push(f),a>0&&l.length==a)break}return l}}),Kl=Xa("ColumnSelection",Gl,{init:function(a,b,c){this._super(a),Zj.compareLoc(b,c)<=0?(this._startColumn=b,this._endColumn=c):(this._startColumn=c,this._endColumn=b)},startColumn:function(){return this._startColumn},endColumn:function(){return this._endColumn},leftColumn:function(){return this._startColumn.distance()<=this._endColumn.distance()?this._startColumn:this._endColumn},rightColumn:function(){return this._startColumn.distance()>this._endColumn.distance()?this._startColumn:this._endColumn},style:function(){return He.COLUMNS},getBounds:function(){return this._startColumn.distance()<=this._endColumn.distance()?bf.createRange(0,this._startColumn,this._startColumn.grid().itemCount()-1,this._endColumn):bf.createRange(0,this._endColumn,this._endColumn.grid().itemCount()-1,this._startColumn)},contains:function(a){var b=a.column();return Zj.compareLoc(b,this._startColumn)>=0&&Zj.compareLoc(b,this._endColumn)<=0},_inflateLeft:function(a){var b=a.column();b!==this.leftColumn()&&(this._startColumn.distance()<=this._endColumn.distance()?this._startColumn=b:this._endColumn=b,this._resized())},_inflateRight:function(a){var b=a.column();b!==this.rightColumn()&&(this._startColumn.distance()>this._endColumn.distance()?this._startColumn=b:this._endColumn=b,this._resized())},resizeTo:function(a){a.column()!==this._endColumn&&(this._endColumn=a.column(),this._resized())},intersectsWith:function(a){return this.getBounds().intersectsWith(a.getBounds())},mergeWith:function(a){},getData:function(a){if(a=arguments.length>0?a:-1,0==a)return null;var b=this._startColumn.grid(),c=b.collectDataColumns(this._startColumn,this._endColumn);if(!c)return null;var d,e,f,g,h,i=b.itemCount(),j=[];for(d=0;i>d;d++)if(e=b instanceof jm?ab(b.getItem(d),Xf):b instanceof po?ab(b.getItem(d),$n):null){for(f={},g=0,h=c.length;h>g;g++)f[c[g].fieldName()]=e.getData(c[g].dataIndex());if(j.push(f),a>0&&j.length==a)break}return j}}),Ll=Xa("SelectionView",Xd,{init:function(a){this._super(a,"selectionView"),this._item=null,this._background=Ll.$$_defBackground,this._border=Ll.$$_defBorder},background:null,border:null,setBackground:function(a){a!==this._background&&(this._background=a,this.invalidate())},setBorder:function(a){a!=this._border&&(this._border=a,this.invalidate())},updateElement:function(a,b){this._item=a,this.setBackground(b.background()),this.setBorder(b.border())},_doDraw:function(a){var b=this.container().gridView(),c=b.layoutManager(),d=c.gridBounds();d=b.translateBy(this,d),a.clipRectEx(d),a.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())},_doDrawHtml:function(a){var b=this._background;Vc?this.$_setCssFill(b):this._css.background=b?b.css():null,this._css.border=this._border?this._border.css():"none"}});Ll.$$_defBackground=new yd(790532351),Ll.$$_defBorder=new Dd(2854129919,1);var Ml=Xa("ClipboardData",null,{init:function(){this._super()},lastColumn:function(){_a()},getText:function(a,b,c){_a()},getCellText:function(a,b,c){_a()},getRows:function(a,b,c){_a()},getCell:function(a,b,c){_a()}}),Nl=Xa("ClipboardSource",null,{init:function(a){this._super(),this._lines=[],this._colCount=0,this.$_parseQuoted(a)},rowCount:function(){return this._lines.length},colCount:function(){return this._colCount},isEmpty:function(){return 0==this._lines.length||0==this._colCount},isSingle:function(){return 1==this._lines.length&&1==this._colCount},get:function(a){return this._lines[a]},$_parseQuoted:function(a){for(var b,c,d,e,f=this._lines,g=[],h=a.length,i=0,j="";h>i;)b=a.charAt(i),c=h-1>i?a.charAt(i+1):"",'"'==b?e?d&&'"'==c?(j+=b,i++):d?d=!1:j+=b:(e=!0,d=!0):d||"\r"!=b&&"\n"!=b&&"	"!=b?(e=!0,j+=b):("	"==b&&g.push(j),("\r"==b||"\n"==b)&&(j.length>0&&g.push(j),this._colCount=Math.max(this._colCount,g.length),f.push(g),g=[],"\n"==c&&i++),j="",e=!1),i++;d&&(j='"'+j),j.length>0&&g.push(j),g.length>0&&(this._colCount=Math.max(this._colCount,g.length),f.push(g))}}),Ol=Xa("DefaultClipboardData",Ml,{init:function(){this._super(),this._columns=null},lastColumn:function(){return this._columns?this._columns[this._columns.length-1]:null},getText:function(a,b,c){for(var d=a.grid(),e=this.$_rangeToCells(a,null,b),f=[],g=b.R1();g<=b.R2();g++){var h=d.getItem(g);if(h.dataRow()>=0||me.isInserting(h.itemState()))for(var i=0;i<e.length;i++){for(var j=e[i],k=[],l=0;l<j.length;l++){var m=ab(j[l],rk);if(m&&!m._blankWhenCopy){var n=a.getData(g,m,c);k.push(n)}else k.push("")}var o=k.join("	")+"\r\n";f.push(o)}}var p=f.join("");return p},getCellText:function(a,b,c){var d=a.getData(b.itemIndex(),b.dataColumn(),c);return d},getRows:function(a,b,c){if(!b)return null;var d=new Nl(b);if(d.isEmpty())return null;if(d.isSingle())return d.get(0)[0];for(var e,f,g,h,i,j,k,l=a.getDataRoots(),m=new Ye(c.grid(),c.itemIndex(),c.column().dataRoot()),n=new Ye(c.grid(),c.itemIndex(),l[l.length-1]),o=bf.create(m,n),p=this.$_rangeToCells(a,d,o),q=[],r=0,s=d.rowCount();s>r;){for(e={},e.columns=[],e.values=[],f=0;f<p.length&&s>r;f++,r++)for(i=p[f],h=d.get(r),e.columns.push(i),e.values.push(k=[]),j=Math.min(h.length,i.length),g=0;j>g;g++)i[g]?k.push(h[g]):k.push("");q.push(e)}return q},getCell:function(a,b,c){if(!b)return null;var d=new Nl(b);return d.isEmpty()?null:d.get(0)[0]},$_rangeToCells:function(a,b,c){c.normalizeData();var d,e,f,g,h,i,j,k,l=c.C1(),m=c.C2(),n=[],o=a.getDataRoots(),p=this._columns=[],q=o.indexOf(l),r=o.indexOf(m);if(0>q)throw l.name+" is not data root column.";if(0>r)throw m.name+" is not data root column.";for(e=q;r>=e;e++)p.push(o[e]);for(h=p.length,i=0,e=0;e<p.length;e++)if(i+=this.$_calcWidth(p[e]),b&&i>=b.colCount()){i=Math.min(i,b.colCount()),h=e+1,p.length=h;break}for(k=0,j=1,e=0;h>e;e++)f=p[e],j=Math.max(j,this.$_calcHeight(f,i-k)),k+=f instanceof ak?f.$_dataWidth:1;for(d=0;j>d;d++)n.push([]);for(d=0;j>d;d++)for(g=0;i>g;g++)n[d].push(null);for(k=0,e=0;h>e;e++)f=p[e],this.$_setFields(f,n,k,0),k+=f instanceof ak?f.$_dataWidth:1;return n},$_calcHeight:function(a,b){if(1>b)return 0;var c,d,e,f=1,g=ab(a,ak);if(g&&(d=g.count())>0){if(g.isVertical())for(f=0,c=0;d>c;c++)f+=this.$_calcHeight(g.getItem(c),b);else for(c=0;d>c&&b>0;c++)e=g.getItem(c),f=Math.max(f,this.$_calcHeight(e,b)),b-=e instanceof ak?e.$_dataWidth:1;g.$_dataHeight=f}else g&&(g.$_dataHeight=1);return f},$_calcWidth:function(a){var b,c,d=1,e=ab(a,ak);if(e&&(c=e.count())>0){if(e.isHorizontal())for(d=0,b=0;c>b;b++)d+=this.$_calcWidth(e.getItem(b));else for(b=0;c>b;b++)d=Math.max(d,this.$_calcWidth(e.getItem(b)));e.$_dataWidth=d}else e&&(e.$_dataWidth=1);return d},$_setFields:function(a,b,c,d){var e,f,g,h,i=ab(a,ak);if(i)if(i.isVertical())for(e=d,g=0;g<i.count();g++)h=i.getItem(g),this.$_setFields(h,b,c,e),e+=h instanceof ak?h.$_dataHeight:1;else for(f=c,g=0;g<i.count();g++)h=i.getItem(g),this.$_setFields(h,b,f,d),f+=h instanceof ak?h.$_dataWidth:1;else b[d].length>c&&(b[d][c]=ab(a,rk))}}),Pl=Xa("ClipboardItem",Wf,{init:function(){this._super(),this._dataSource=null,this._values=null},setValues:function(a){this._values=a},id:function(){return NaN},index:function(){return-1},parent:function(){return null},root:function(){return this},childIndex:function(){return-1},level:function(){return 1},isLeaf:function(){return!0},isVisible:function(){return!0},provider:function(){return null},dataSource:function(){return this._dataSource},setDataSource:function(a){this._dataSource=a},dataRow:function(){return-1},rowState:function(){return je.NONE},itemState:function(){return me.NORMAL},isChecked:function(){return!1},setChecked:function(a){},isCheckable:function(){return!0},setCheckable:function(a){},isEditable:function(){return!1},isReadOnly:function(){return!1},setReadOnly:function(a){},isResizable:function(){return!1},getRowData:function(){return null},getRowObject:function(){return null},canEdit:function(){return!1},makeVisible:function(){},getData:function(a){return this._values[a]}}),Ql=Xa("ClipboardIndex",Ye,{init:function(a,b){this._super(),this._item=b},item:function(){return this._item}}),Rl=Xa("ClipboardManager",null,{init:function(a){this._super(),this._grid=a,this._data=new Ol,this._appendingItem=new Pl,this._appendingIndex=new Ql(a,this._appendingItem)},grid:function(){return this._grid},dataSource:function(){return this._dataSource},copyEmptyToClipboard:function(){return""},copyToClipboard:function(a){return this._data.getText(this,a,!0)},copyCellToClipboard:function(a){return this._data.getCellText(this,a,!0)},pasteFromClipboard:function(a,b){var c=a.clone();if(a=this.$_checkIndex(a),a&&this._grid.isValid(a)){if(b){var d=this._data.getRows(this,b,a);d&&("string"==typeof d?this.$_pasteSingleCell(a,d,!0):1==d.length?this.$_pasteSingleLine(a,d[0],!0):d.length>1&&this.$_pasteMultiLines(a,d,!0))}Ye.areEquals(a,c)||this._grid.setFocusedIndex(c,!1,!1)}},pasteCellFromClipboard:function(a,b){if(a=this.$_checkIndex(a),a&&this._grid.isValid(a)&&b){var c=this._data.getCell(this,b,a);this.$_pasteSingleCell(a,c,!0)}},getDataRoots:function(){return this._grid.getDataRootColumns()},getData:function(a,b,c){function d(c){if(h._lookupDisplay&&(b.labelField()||b.isLookupDisplay())){var d=Ye.temp(i,a,b),e=i.body().getCellSimple(d);return e.getTextFromItem(j)}return c}var e,f,g,h,i=this._grid,j=i.getItem(a);if(!j||!(me.isInserting(j.itemState())||j.dataRow()>=0))return"";if(b&&null!=(e=i.dataSource().getField(b.dataIndex()))){if(g=j.getData(b.dataIndex()),h=this._grid.copyOptions(),c)switch(e.dataType()){case ie.DATETIME:f=g?h.dateWriter()?h.dateWriter().getText(g):g:null;break;case ie.BOOLEAN:f=void 0!==g?h.boolWriter()?h.boolWriter().formatValue(g):g:null;break;case ie.NUMBER:f=void 0===g||isNaN(g)?null:g;break;default:f=d(g)}else switch(e.dataType()){case ie.DATETIME:f=g?g:"";break;case ie.BOOLEAN:f=void 0!==g?g:"";break;case ie.NUMBER:f=void 0===g||isNaN(g)?"":g;break;default:f=d(g)}return f=f?String(f):f,f&&(f.indexOf("\n")>=0||f.indexOf("\r\n")>=0||'"'==f.charAt(0))&&(f=f.replace(/\"/g,'""'),f='"'+f+'"'),f}return""},$_checkIndex:function(a){if(a&&(a.normalize(this._grid),this._grid.isValid(a)&&this._grid.pasteOptions().isSelectionBase()&&this._grid.selections().count()>0)){var b=this._grid.selections().getItem(0).getBounds(),c=b.firstCell();a.setColumn(c.column()),a.setItemIndex(c.itemIndex())}return a},$_createDate:function(){return new Ol},$_readValue:function(a,b,c){var d=ta,e=a.getField(b.dataIndex());switch(e.dataType){case ie.NUMBER:d=Number(c);break;case ie.DATETIME:d=new Date(c);break;case ie.BOOLEAN:d=Boolean(c);break;default:d=c}return d},$_convertValue:function(a,b,c,d){var e,f,g=ta,h=c.dataIndex(),i=a.getField(h);switch(i.dataType()){case ie.NUMBER:if(g=NaN,d){var j=b.numberCharExp();j&&(d=d.replace(j,"")),g=parseFloat(d)}break;case ie.DATETIME:if(g=null,f=b.dateReaders(),d&&f)for(e=0;e<f.length&&!(g=f[e].toDate(d));e++);null===g&&(g=new Date(d),isNaN(g.getTime())&&(g=null)),null===g&&(g=i.readValue(d));break;case ie.BOOLEAN:g=void 0;var k=b.boolReader();d&&k&&(g=k.toBoolStrict(d)),void 0===g&&(g=i.readValue(d));break;default:d=String(d),d&&(c.textInputCase()==le.LOWER?d=d.toLocaleLowerCase():c.textInputCase()==le.UPPER&&(d=d.toLocaleUpperCase())),g=d}return g},$_removeChars:function(a,b){if(b)for(;;){var c=a.replace(b,"");if(c.length==a.length)break;a=c}return a},$_fireRowsPasted:function(a){for(var b=this._grid,c=[],d=0;d<a.length;d++)c.push(b.getItemIndexOfRow(a[d]));c.length>0&&b.$_rowsPasted(c)},$_pasteSingleCell:function(a,b,c){var d,e,f=this._grid,g=f.pasteOptions(),h=g.isCheckReadOnly(),i=f.dataSource(),j=a.dataColumn(),k=f.itemSource(),l=b&&i&&j&&j.isWritable()&&f.canUpdate(a.item(),j.dataIndex());if(l){var m=f.getDataCellStyle(a.dataRow(),j.dataIndex());l=!m||m.isWritable()}if(l||!g.checkReadOnly)if(b.lastIndexOf("\r\n")==b.length-1&&(b=b.substr(0,b.length-2)),b.lastIndexOf("\n")==b.length-1&&(b=b.substr(0,b.length-1)),d=c?this.$_convertValue(i,g,j,b):this.$_readValue(i,j,b),f.isItemEditing()||g.isStartEdit()&&f.edit(a)){e=a.item();var n=j.isWritable();if(n){var m=k.getCellStyle(e.dataRow(),j.dataIndex());n=!m||m.isWritable()}if(!h||n){var o=e.getData(a.dataField());f.setCellUpdateEventLock(g.isNoEditEvent());try{e.setData(j.dataIndex(),d)}finally{f.setCellUpdateEventLock(!1)}f.validateCellCommit(a,a.item().getData(a.dataField())),f.$_editRowPasted(e,[a.dataField()],[o],[d]),f.refreshView()}}else{var p,q=f.validationManager(),r=g.isForceRowValidation()&&f.validationManager().isHasRowValidation(),s=g.isForceColumnValidation();e=a.item(),p=r?e.getRowData():[];var n=j.isWritable();if(n){var m=k.getCellStyle(e.dataRow(),j.dataIndex());n=!m||m.isWritable()}(!h||n)&&(d=c?this.$_convertValue(i,g,j,b):this.$_readValue(i,j,b),p[j.dataIndex()]=d,this._appendingItem.setValues(p),r&&f.validationManager().validateRow(this._appendingItem,!0,!0),s&&(this._appendingIndex.setColumn(j),q.validateCell(this._appendingIndex,!0)),f.updatePastedRow(e,p,!r))}},$_pasteSingleLine:function(a,b,c){var d,e,f,g,h,i,j,k,l,m=this._grid,n=m.itemSource(),o=m.dataSource(),p=!1,q=m.pasteOptions(),r=q.isCheckReadOnly();if(o){if(m.isItemEditing()||q.isStartEdit()&&m.edit(a)){var s=[],t=[],u=a.column();for(f=a.item(),i=[],j=Math.min(b.columns.length,b.values.length),k=0;j>k;k++)for(h=b.columns[k],g=b.values[k],l=0;l<g.length;l++){var e=h[l],v=g[l];if(e){t.push(f.getData(e.dataIndex())),d=c?this.$_convertValue(o,q,e,v):this.$_readValue(o,e,v),m.setCellUpdateEventLock(q.isNoEditEvent());try{var w=e.isWritable();if(w){var x=n.getCellStyle(f.dataRow(),e.dataIndex());w=!x||x.isWritable()}(!r||w)&&f.setData(e.dataIndex(),d)}finally{m.setCellUpdateEventLock(!1)}(!r||w)&&(a.column(e),m.validateCellCommit(a,a.item().getData(e.dataIndex())),s.push(e.dataIndex()),i.push(d),p=!0)}}p&&(m.$_editRowPasted(f,s,t,i),a.column(u),m.refreshView())}else{var y=m.validationManager(),z=q.isForceRowValidation()&&y.hasRowValidation(),A=q.isForceColumnValidation();for(f=a.item(),i=z?f.getRowData():[],j=Math.min(b.columns.length,b.values.length),k=0;j>k;k++)for(h=b.columns[k],g=b.values[k],l=0;l<g.length;l++)if(e=h[l]){var w=e.isWritable();if(w){var x=n.getCellStyle(f.dataRow(),e.dataIndex());w=!x||x.isWritable()}(!r||w)&&(d=c?this.$_convertValue(o,q,e,g[l]):this.$_readValue(o,e,g[l]),i[e.dataIndex()]=d,p=!0)}if(p){if(this._appendingItem.setValues(i),z&&y.validateRow(this._appendingItem,!0,!0),A)for(l=0;l<g.length;l++)this._appendingIndex.setColumn(h[l]),y.validateCell(this._appendingIndex,!0);m.updatePastedRow(f,i,!z)}}m.selections().clear(),m.selections().add(a,new Ye(a.grid(),a.itemIndex(),this._data.lastColumn()),He.BLOCK)}},$_pasteMultiLines:function(a,b,c){var d=this._grid,e=d.dataSource();if(e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=d.itemSource(),v=b.length,w=a.itemIndex(),x=d.pasteOptions(),y=e.fieldCount(),z=d.getDataColumns(!1),A=z.length,B=d.validationManager(),C=x.isForceRowValidation()&&B.hasRowValidation(),D=x.isForceColumnValidation(),E=this._appendingItem,F=this._appendingIndex,G=x.isCheckReadOnly(),H=x.isEventEachRow(),I=[];x.isCommitEdit()?d.commit(!1)||d.cancel():d.cancel(),p=d.itemCount(),E.setDataSource(e);try{for(f=0;v>f&&p>w;f++)try{if(k=d.getItem(w),k.itemState()==me.APPENDING)break;for(;k&&k.dataRow()<0;)w++,k=d.getItem(w);if(null==k)break;l=b[f],m=C?k.getRowData():[];var J=!1,K=[],L=[];for(h=Math.min(l.columns.length,l.values.length),g=0;h>g;g++)for(r=l.columns[g],q=l.values[g],i=0;i<q.length;i++)o=r[i],o&&(K.push(k.getData(o.dataIndex())),s=o.isWritable(),s&&(t=u.getCellStyle(k.dataRow(),o.dataIndex()),s=!t||t.isWritable()),s=!G||s,s&&(J=J||s,j=c?this.$_convertValue(e,x,o,q[i]):this.$_readValue(e,o,q[i]),m[o.dataIndex()]=j,L.push(o.dataIndex())));if(J)try{if(E.setValues(m),E.setIndex(k.index()),C&&B.validateRow(E,!0,!0),D)for(g=0;h>g;g++)for(r=l.columns[g],i=0;A>i;i++)o=z[i],F.column(o),B.validateCell(F,!0);d.updatePastedRow(k,m,!C),H&&d.$_editRowPasted(k,L,K,m),I.push(k.dataRow())}catch(M){if(x.isStopOnError())throw M}w++}catch(M){throw w=Math.max(a.I(),w-1),d.setFocusedIndex(a,!1),d.selections().clear(),d.selections().add(a,new Ye(a.grid(),w,this._data.lastColumn()),He.BLOCK),M}if(v>f&&x.isEnableAppend()){for(;v>f;f++){l=b[f],m=[];try{var L=[];for(h=Math.min(l.columns.length,l.values.length),g=0;h>g;g++){for(r=l.columns[g],q=l.values[g],i=0;i<q.length;i++)o=r[i],s=o.isWritable(),o&&s&&(t=u.getCellStyle(-1,o.dataIndex()),s=!t||t.isWritable()),(!G||s)&&(j=c?this.$_convertValue(e,x,o,q[i]):this.$_readValue(e,o,q[i]),m[o.dataIndex()]=j,L.push(o.dataIndex()));if(x.isFillColumnDefaults())for(i=0;A>i;i++)o=z[i],void 0===m[o.dataIndex()]&&(m[o.dataIndex()]=o.defaultValue());if(x.isFillFieldDefaults())for(i=0;y>i;i++)void 0===m[i]&&(n=e.getField(i),m[i]=n.defaultValue())}try{if(E.setValues(m),x.isForceRowValidation()&&B.validateRow(E,!0,!0),x.isForceColumnValidation())for(i=0;A>i;i++)o=z[i],this._appendingIndex.column(o),B.validateCell(this._appendingIndex,!0);d.appendPastedRow(m);var N=e.rowCount()-1;H&&(k=d.getItem(d.getItemIndexOfRow(N)),d.$_editRowPasted(k,L,[],m)),I.push(N)}catch(M){if(x.isStopOnError())throw M}}catch(M){throw w=Math.max(a.I(),d.itemCount()-1),d.setFocusedIndex(a,!1),d.selections().clear(),d.selections().add(a,new Ye(a.grid(),w,this._data.lastColumn()),He.BLOCK),M}}w=d.itemCount()}}catch(M){throw this.$_fireRowsPasted(I),M}this.$_fireRowsPasted(I),d.setFocusedIndex(a,!1),d.selections().clear(),d.selections().add(a,new Ye(a.grid(),w-1,this._data.lastColumn()),He.BLOCK)}}}),Sl=Xa("MobileSelectionTool",$k,{init:function(a){this._super(a,"mobileSelectionTool"),this._clickElement=null,this._clickCell=null,this._clickHandle=null,this._tapTracker=null,this._touchManager=new he(a),this._swipeTimer=null,this._swipeDistance=0,this._swipeDuration=0,this._swipeStarted=null,this._swipePrev=void 0,this._swipeAmount=0,this._tapX=this._tapY=NaN,this._touchManager.setTouchHandler(function(a,b){return this.onTouch(a,b)}.bind(this)),this._touchManager.setTapHandler(function(a,b){return this.onTap(a,b)}.bind(this)),this._touchManager.setDoubleTapHandler(function(a,b){return this.onDoubleTap(a,b)}.bind(this)),this._touchManager.setLongTapHandler(function(a,b){return this.onLongTap(a,b)}.bind(this)),this._touchManager.setDragStartHandler(function(a,b,c,d){return this.onDragStart(a,b,c,d)}.bind(this)),this._touchManager.setDragHandler(function(a,b,c,d){return this.onDrag(a,b,c,d)}.bind(this)),this._touchManager.setSwipeHandler(function(a,b,c){return this.onSwipe(a,b,c)}.bind(this))},touchManager:function(){return this._touchManager},_doActivate:function(){this._super()},_doDeactivate:function(){this._super()},_doMouseDown:function(a,b,c,d){this.onTouch(a,b)},_doMouseMove:function(a,b){},_doMouseUp:function(a,b){this.onTap(a,b)},_doLayoutChanged:function(a,b){},_doFocusedIndexChanging:function(a){},_doFocusedIndexChanged:function(a,b){},_doDblClick:function(a,b){this.onDoubleTap(a,b)},_resetFocusedView:function(){var a=this._grid,b=this.focused();if(a.displayOptions().isFocusVisible()&&a.isValid(b)){var c=this._grid.getFocusedCellView();if(c){var d=c.boundsBy(a);d.width>0&&d.height>0?(a._container.$_rich&&(d.x++,d.y++),this._focusView.setRect(d),this._focusView.setEditing(a.isEditing(),c.getButtonWidth?c.getButtonWidth():0),this._focusView.setVisible(!0)):this._focusView.setVisible(!1)}else this._focusView.setVisible(!1)}else this._focusView.setVisible(!1)},_stopTapTracker:function(a){if(this._tapTracker)try{a?this._tapTracker.drop(x,y):this._tapTracker.cancel()}finally{this._tapTracker=null}},onTouch:function(a,b){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var c=this._grid;this._clickCell=this._clickHandle=null;var d=this._clickElement=this.findElementAt(a,b,!1);return this._clickHandle=ab(d,di),this._clickCell=ab(d,ri),d instanceof xm?new _l(c,d):d instanceof wm?new Am(d):void 0},onTap:function(a,b){var c=this._grid,d=c._selections,e=this._clickCell,f=this._clickElement,g=e?e.index():null,h=e?g.column():null;if(d.clear(),c.closeFilterSelector(),e instanceof Wi)g.normalize(c),this.setFocused(g,!0),this.dataCellClicked(g);else if(e instanceof vi&&e.isClickable())!c.isEmpty()&&h instanceof rk&&h.isSortable()&&c.sortingOptions().isEnabled()&&c.sortColumn(h);else if(f instanceof Oi)d.add(g,g,He.ROWS);else if(f instanceof Ei)this._indicatorCellClicked(-1);else if(f instanceof Fi)this._indicatorCellClicked(-2);else if(f instanceof Vi)this._checkCellClicked(f);else if(f instanceof Li)this._checkAllClicked(f);else if(f instanceof Mi)this._checkBarFootClicked(e);else if(f instanceof Ri)this._stateBarCellClicked(e.index().itemIndex());else if(f instanceof Ii)this._stateBarCellClicked(-1);else if(f instanceof Ji)this._stateBarCellClicked(-2);else if(f instanceof ej)this._rowGroupHeadClicked();else if(f instanceof fj)this._rowGroupFootClicked();else if(f instanceof ij)this._rowGroupHeaderFooterClicked(-1,f.index());else if(f instanceof Bi)this._rowGroupHeaderFooterClicked(-2,f.index());else if(f instanceof _i)this._rowGroupBarClicked(elt.level());else if(f instanceof bj)this._rowGroupBarClicked(-1);else if(f instanceof cj)this._rowGroupBarClicked(-2);else if(f instanceof pm)this._panelClicked(0);else if(f instanceof zi)this._footerCellClicked(f.index().column());else if(f instanceof mi&&c.filteringOptions().isEnabled()){var i=f.parent();h=i.column(),c.isFilterSelecting(h)?c.closeFilterSelector():c.selectColumnFilters(f.parent())}},onLongTap:function(a,b){var c,d=this._grid,e=this._clickCell,f=this._clickElement,g=e?e.index():null,h=e?g.column():null;if(f instanceof Wi||f instanceof Ul){if(f instanceof Ul&&(e=d.getFocusedCellView(),g=d.focusedIndex(),h=g.column()),h.button()!=we.NONE&&e._getButtonVisible(h.buttonVisibility()))return this.cellButtonClicked(g),!1;(c=h.rendererObj())&&(c instanceof hn||c instanceof _m)&&this._performRendererClick(g,e,a,b,!1,!0)}else if(f instanceof vi&&f.parent()instanceof pm&&d.groupingOptions().isEnabled()&&g.dataColumn()&&g.dataColumn().isGroupable()&&d.panel().isVisible()){var i=d.panelView();if(i)return i.setState(mm.UNGROUPING),d.isGrouped(h)&&d.removeGroupBy(h),i.setState(mm.NORMAL),!1}return!0},onDoubleTap:function(a,b){if(this._clickElement instanceof Wi)this.dataCellDblClicked(this._clickElement.index());else if(this._clickElement instanceof ij){var c=ab(this._clickElement.item(),Zf);c&&c.setExpanded(!c.isExpanded())}else this._clickElement instanceof vi?this._clickElement.parent()instanceof Wh?this._grid._fireColumnHeaderDblClicked(this._clickElement.index().column()):this._grid._fireRowGroupPanelDblClicked(this._clickElement.index().column()):this._clickCell instanceof zi?this._clickCell.error()?this._grid.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._grid._fireFooterCellDblClicked(this._clickCell.index().column()):this._clickCell instanceof Bi&&this._clickCell.error()?this._grid.alertCellError(this._clickCell,this._clickCell.errorDetail()||this._clickCell.error()):this._clickCell instanceof Ei?this._grid._fireIndicatorCellDblClicked(-1):this._clickCell instanceof Fi?this._grid._fireIndicatorCellDblClicked(-2):this._clickCell instanceof Ii?this._grid._fireStateBarCellDblClicked(-1):this._clickCell instanceof Ji?this._grid._fireStateBarCellDblClicked(-2):this._clickCell instanceof Ri?this._grid._fireStateBarCellDblClicked(this._clickCell.index().itemIndex()):this._clickCell instanceof Mi?this._grid._fireCheckBarFootDblClicked(-2):this._clickCell instanceof ej?this._grid._fireRowGroupHeadDblClicked():this._clickCell instanceof fj?this._grid._fireRowGroupFootDblClicked():this._clickCell instanceof ij?this._grid._fireRowGroupHeaderFooterDblClicked(-1,this._clickCell.index()):this._clickCell instanceof Bi?this._grid._fireRowGroupHeaderFooterDblClicked(-2,this._clickCell.index()):this._clickCell instanceof _i?this._grid._fireRowGroupBarDblClicked(this._clickCell.level()):this._clickCell instanceof bj?this._grid._fireRowGroupBarDblClicked(-1):this._clickCell instanceof cj?this._grid._fireRowGroupBarDblClicked(-2):this._clickElement instanceof pm&&this._grid._firePanelDblClicked(0)},onDragStart:function(a,b,c,d){var e=this._clickElement,f=null;e instanceof Wi?f=new Xl(this._grid):e instanceof Oi?f=new Yl(this._grid,e):e instanceof vi?f=new Zl(this._grid,e):e instanceof Ul&&(f=new $l(this._grid,e)),f&&f.start(a,b,c,d)&&(this._tapTracker=f)},onDrag:function(a,b,c,d){var e=this._tapTracker;e&&(e.drag(a,b,c,d)||(e.cancel(),this._tapTracker=null))},onSwipe:function(a,b,c){if(this._clickElement instanceof Wi){var d=this._grid,e=1;switch(c){case"right":d.setLeftPos(d.leftPos()-b/20);break;case"left":d.setLeftPos(d.leftPos()+b/20);break;case"bottom":e=-1;case"top":this._swipeDistance=e*b/20,this._swipeDuration=a,this._swipePrev=this._swipeStarted=m(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},_checkCellClicked:function(a){var b=this.grid();if(b.editOptions().isCheckable()){var c=b.checkBar(),d=a.item();d.isCheckable()&&(c.isShowGroup()||d.dataRow()>=0)&&(b.makeItemVisible(d.index()),b.itemSource().checkItem(d,!d.isChecked(),c.isExclusive()));
}},_checkAllClicked:function(a){var b=this.grid(),c=b.checkBar();!b.isEmpty()&&b.editOptions().isCheckable()&&(c.isShowAll()&&!c.isExclusive()?(a.setChecked(!a.isChecked()),b.itemSource().checkAll(a.isChecked(),c.isVisibleOnly(),c.isCheckableOnly())):this._checkBarHeadClicked())},_performRendererClick:function(a,b,c,d){var e=this.grid();if(!e.isEditing()&&a.isValid()&&b){var f=a.dataColumn();if(f){var g=b.renderer();if(!e.isReadOnly(a)&&g.isEditable()){var h=a.item();(e.isItemEditing(h)||e.canUpdate(h,a.dataField()))&&e.canWrite(a)&&e.edit(a)&&g.performEdit(a)}else g.isClickable(a)&&g.performClick(b,c,d)}}},_footerCellClicked:function(a){this.grid()._fireFooterCellClicked(a)},_checkBarHeadClicked:function(a){this.grid()._fireCheckBarHeadClicked(a)},_checkBarFootClicked:function(a){this.grid()._fireCheckBarFootClicked(a)},_indicatorCellClicked:function(a){this.grid()._fireIndicatorCellClicked(a)},_stateBarCellClicked:function(a){this.grid()._fireStateBarCellClicked(a)},_rowGroupHeadFootClicked:function(){this.grid()._fireRowGroupHeadFootClicked()},_rowGroupHeaderFooterClicked:function(a,b){this.grid()._fireRowGroupHeaderFooterClicked(a,b)},_rowGroupBarClicked:function(a){this.grid()._fireRowGroupBarClicked(a)},_panelClicked:function(a){this.grid()._firePanelClicked(a)},_rowGroupPanelClicked:function(a){this.grid()._fireRowGroupPanelClicked(a)},$_scrollRow:function(){var a=m();if(a-this._swipeStarted<this._swipeDuration){var b=m()-this._swipePrev,c=(this._swipeDistance-this._swipeAmount)*b/this._swipeDuration;this._swipeAmount-=c,this._swipePrev=a,this._grid.setTopIndex(this._grid.topIndex()+c)}else clearInterval(this._swipeTimer)}}),Tl=(Xa("MobileFocusView",Xd,{init:function(){this._super("focusView"),this._border=new Dd(4281545523,2),this._editBorder=new Dd(4283601655,2),this._editing=!1},setEditing:function(a,b){a!=this._editing&&(this._editing=a,this._buttonWidth=b,this.invalidate())},_doDraw:function(a){var b=this.width()-(this._editing?this._buttonWidth:0);a.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,b-1,this.height()-1)}}),Xa("MobileContextMenu",Xd,{init:function(){this._super("focusView"),this._border=new Dd(4281545523,2),this._editBorder=new Dd(4283601655,2),this._editing=!1},setMenu:function(a){},_doDraw:function(a){var b=this.width()-(this._editing?this._buttonWidth:0);a.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,b-1,this.height()-1)}}),Xa("MobileEditController",null,{init:function(a){this._super(),this._grid=a,this._editIndex=new Ye,this._editor=null},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return this._editor&&this._editor.isEditing()},setFocus:function(){return!1},resetEditor:function(a){},reprepareEditor:function(a){},invalidateEditor:function(){},closeList:function(){},focusedIndexChanging:function(){return!0},focusedIndexChanged:function(a,b){},showEditor:function(a){},hideEditor:function(){},commitEditor:function(a){},cancelEditor:function(a){return!1},fillSearchItems:function(a,b,c,d){},buttonClicked:function(a){},dataColumnChanged:function(a){},_focusHandler:function(a){},onEditorStart:function(a){},onEditorKeyDown:function(a,b,c,d){},onEditorChange:function(a){},onEditorSearch:function(a,b){}})),Ul=Xa("MobileSelectionHandle",Vd,{init:function(a,b){this._super(a._dom,"mobileSelectionHandle"),this._view=a,this._dir=b,this.setWidth(21),this.setHeight(21)},view:function(){return this._view},dir:function(){return this._dir},propertyChanged:function(){this.invalidate()},_doDraw:function(a){a.drawBounds(this._background,this._border,5,5,11,11)}}),Vl=Xa("MobileSelectionView",Xd,{init:function(a){this._super(a,"mobileSelectionView"),this._item=null,this._background=Vl.$$_defBackground,this._border=Vl.$$_defBorder,this.addElement(this._leftHandle=new Ul(this,"left")),this.addElement(this._rightHandle=new Ul(this,"right")),this.addElement(this._topHandle=new Ul(this,"top")),this.addElement(this._bottomHandle=new Ul(this,"bottom"))},background:null,border:null,item:function(){return this._item},setBackground:function(a){a!==this._background&&(this._background=a,this.invalidate())},setBorder:function(a){a!=this._border&&(this._border=a,this.invalidate())},setHandleBackground:function(a){this._leftHandle._background=a,this._rightHandle._background=a,this._topHandle._background=a,this._bottomHandle._background=a},setHandleBorder:function(a){this._leftHandle._border=a,this._rightHandle._border=a,this._topHandle._border=a,this._bottomHandle._border=a},updateElement:function(a,b){this._item=a,this.setBackground(b.background()),this.setBorder(b.border()),this.setHandleBackground(b.figureBackground()),this.setHandleBorder(b.figureBorder());var c=this.width(),d=this.height(),e=this._leftHandle.width(),f=this._leftHandle.height(),g=(c-e)/2,h=(d-f)/2,i=a.style(),j=i==He.BLOCK||i==He.SINGLE;this._leftHandle._context=this._context,this._rightHandle._context=this._context,this._topHandle._context=this._context,this._bottomHandle._context=this._context,this._leftHandle.setVisible(j||He.isColumn(i)),this._rightHandle.setVisible(this._leftHandle.isVisible()),this._topHandle.setVisible(j||He.isRow(i)),this._bottomHandle.setVisible(this._topHandle.isVisible()),this._leftHandle.isVisible()&&this._leftHandle.move(-e/2,h),this._rightHandle.isVisible()&&this._rightHandle.move(c-e/2,h),this._topHandle.isVisible()&&this._topHandle.move(g,-f/2),this._bottomHandle.isVisible()&&this._bottomHandle.move(g,d-f/2),this._leftHandle.invalidate(),this._rightHandle.invalidate(),this._topHandle.invalidate(),this._bottomHandle.invalidate()},_doDraw:function(a){var b=this.container().gridView(),c=b.layoutManager(),d=c.gridBounds();d=b.translateBy(this,d),a.clipRectEx(d),a.drawBoundsI(this._background,this._border,0,0,this.width(),this.height())}});Vl.$$_defBackground=new yd(268435456),Vl.$$_defBorder=new Dd(4281545523,2);var Wl=Xa("TapDragTracker",null,{init:function(a,b){this._super(),this._grid=a,this._name=b},grid:function(){return this._grid},name:function(){return this._name},start:function(a,b,c,d){return this._doStart(a,b,c,d)},drag:function(a,b,c,d){return this._doDrag(a,b,c,d)},drop:function(a,b){this._doDrop(a,b)},cancel:function(){this._doCancel()},_doStart:function(a,b,c,d){return!0},_doDrag:function(a,b,c,d){return!0},_doDrop:function(a,b){},_doCancel:function(){}}),Xl=Xa("MobileScrollTracker",Wl,{init:function(a){this._super(a,"mobileScrollTracker"),this._tapX=this._tapY=NaN,this._vertical=!0},_doStart:function(a,b,c,d){var e=c-a,f=d-b;return this._vertical=Math.abs(f)>=Math.abs(e),this._vertical?this._grid.setTopIndex(this._grid.topIndex()+(f>0?-1:1)):this._grid.setLeftPos(this._grid.leftPos()-e),this._tapX=c,this._tapY=d,!0},_doDrag:function(a,b,c,d){var e=c-this._tapX,f=d-this._tapY,g=Math.abs(f)>=Math.abs(e);return g!=this._vertical&&(g&&Math.abs(f)>2*Math.abs(e)||!g&&Math.abs(e)>2*Math.abs(f))&&(this._vertical=g),this._vertical?Math.abs(f)>5&&(this._grid.setTopIndex(this._grid.topIndex()+(f>0?-1:1)),this._tapY=d):(this._grid.setLeftPos(this._grid.leftPos()-e),this._tapX=c),!0}}),Yl=Xa("MobileRowSelectTracker",Wl,{init:function(a,b){this._super(a,"mobileRowSelectTracker"),this._cell=b,this._item=null},_doStart:function(a,b,c,d){var e=this._grid,f=e._selections,g=this._cell.index();return f.clear(),this._item=f.add(g,g,He.ROWS),!0},_doDrag:function(a,b,c,d){var e=this._grid,f=e.pointToIndex(c,d,!1);return f.I()>=0&&this._item.resizeTo(f),!0}}),Zl=Xa("MobileColumnSelectTracker",Wl,{init:function(a,b){this._super(a,"mobileColumnSelectTracker"),this._cell=b,this._item=null},_doStart:function(a,b,c,d){var e=this._grid,f=e._selections,g=this._cell.index();return f.clear(),this._item=f.add(g,g,He.COLUMNS),!0},_doDrag:function(a,b,c,d){var e=this._grid,f=e.pointToIndex(c,d,!1);if(e.groupingOptions().isEnabled()&&f.dataColumn()&&f.dataColumn().isGroupable()&&e.panel().isVisible()&&d<e.layoutManager().headerBounds().y){var g=e.panelView();if(g)return g.setState(mm.GROUPING),e.isGrouped(f.column())||e.addGroupBy(g.groupingIndex(),f.column()),g.setState(mm.NORMAL),!1}return f.column()&&this._item.inflate(c>a?"right":"left",f),!0}}),$l=Xa("MobileSelectHandleTracker",Wl,{init:function(a,b){this._super(a,"mobileSelectHandleTracker"),this._handle=b},_doStart:function(a,b,c,d){return!0},_doDrag:function(a,b,c,d){var e=this._grid,f=e.pointToIndex(c,d,!1);if(f.I()>=0){var g=this._handle.view().item();g.inflate(this._handle.dir(),f)}return!0}}),_l=Xa("TabScrollThumbTracker",null,{init:function(a,b){this._super(),this._grid=a,this._thumb=b},start:function(a,b){this._thumb.setPressed(!0);var c=this._thumb.scrollBar(),d=c.containerToElement(a,b);c.isVertical()?this._offset=d.y-this._thumb.y():this._offset=d.x-this._thumb.x()},move:function(a,b){this.$_doScroll(a,b,um.THUMB_TRACK)},stop:function(a,b){this._thumb.setPressed(!1),this.$_doScroll(a,b,um.THUMB_END)},$_doScroll:function(a,b,c){var d=this._thumb.scrollBar(),e=d._maxPosition-d._min+1,f=d._buttonSize,g=d.containerToElement(a,b);d.isVertical()?(g.y-=this._offset,g.y=(g.y-f)*e/(d.height()-2*f-this._thumb.height()),d._doScroll(c,0,Na(g.y))):(g.x-=this._offset,g.x=(g.x-f)*e/(d.width()-2*f-this._thumb.width()),d._doScroll(c,0,Na(g.x)))}}),am=(Xa("MobileResizer",Xd,{init:function(){this._super("focusView"),this._border=new Dd(4281545523,2),this._editBorder=new Dd(4283601655,2),this._editing=!1},setEditing:function(a,b){a!=this._editing&&(this._editing=a,this._buttonWidth=b,this.invalidate())},_doDraw:function(a){var b=this.width()-(this._editing?this._buttonWidth:0);a.drawBoundsI(null,this._editing?this._editBorder:this._border,-1,-1,b-1,this.height()-1)}}),Xa("GridContainer",Ud,{init:function(a,b,c){this._super(a,b,c),this._createBackgroundElements(this.$_dom),this._gridView=this._createGridView(this.$_dom,this,c),this.addElement(this._gridView),this._prepareBorder(),this._prepareLayers(),this.setDefaultTool(this._createDefaultTool(),!0)},gridView:function(){return this._gridView},addFeedback:function(a){this._feedbackView.addElement(a)},removeFeedback:function(a){this._feedbackView.removeElement(a)},_createChildren:function(a){},_layoutChildren:function(a){},_beforeRender:function(a){this._gridView._beforeRender(a)},_doLayout:function(a){var b=a.clone();if(this._borderView){var c=this._gridView._styles.border();this._borderView.setVisible(c&&c.width()>0),this._borderView.isVisible()&&(this._borderView._border=c,this._borderView.setRect(b),this._borderView.invalidate(),b.inflate(-c.width(),-c.width()))}this._gridView.setRect(b),this._feedbackView.setRect(b),b.x=b.y=0,this._gridView._doLayout(b)},_doDrawContainer:function(a,b){},_doDrawContainerHtml:function(a,b){},_focusHandler:function(a){this._gridView._focusHandler(a)},_createBackgroundElements:function(){},_createGridView:function(a,b,c){return new jm(a,b,c)},_prepareBorder:function(){this.$_rich?(this._borderView=new bm(this.$_dom),this.addElement(this._borderView)):this._container.style.border="1px solid #888"},_prepareLayers:function(){this._feedbackView=new Xd(this.$_dom,"feedbackLayer"),this.addElement(this._feedbackView)},_createDefaultTool:function(){return cd&&gb()?new Sl(this):new lm(this)}})),bm=Xa("GridBorderElement",Xd,{init:function(a){this._super(a,"gridBorderView"),this._border=new Dd(4289374890),this.setMouseEnabled(!1)},_doDraw:function(a){var b=this._border.width(),c=Na(b/2);a.drawBoundsI(null,this._border,c,c,this.width()-b,this.height()-b)}}),cm=function(a){var b=new bd;b.src="data:image/png;base64,"+So;var c=new Xd(a);return c._doDraw=function(a){a.aL(b,(this.width()-b.width)/2,(this.height()-b.height)/2,b.width,b.height)},c},dm=new kd(-1e4,-1e4,100,100),em=Xa("GridBase",Xd,{init:function(a,b,c){this._super(a,"gridView"),this._container=b,this._readMode=c,this._offsetX=0,this._offsetY=0,b.$_rich&&(this._context=b._context,this._toolContext=new Rd("toolContext",b),b.addContext(this._toolContext)),this._loading=!0,this._userMode=!1,this._userModeError=null,this._gridObjects=[],this._addGridObject(this._panel=this._createPanelModel()),this._addGridObject(this._header=new mh(this)),this._addGridObject(this._editBar=new nh(this)),this._addGridObject(this._footer=this._createFooterModel()),this._addGridObject(this._indicator=new qh(this)),this._addGridObject(this._stateBar=new rh(this)),this._addGridObject(this._checkBar=new sh(this)),this._addGridObject(this._body=new th(this)),this._addGridObject(this._rowGroup=new wh(this));var d=this._rootElement=new Xd(a,"grid root view");this.addChild(d),d=this._emptyView=this._createEmptyView(a),d.setVisible(!1),this.addChild(d),d=this._debugView=new ci(a,this),this.addChild(d),this._panelView=this._createPanelView(a,this._panel),this._bodyView=this._createBodyView(a,this._body,!1),this._fixedBodyView=this._createBodyView(a,this._body,!0),this._rfixedBodyView=this._createBodyView(a,this._body,!0,!0),this._mergeView=new Aj(a),this._fixedMergeView=new Aj(a,!0),this._rfixedMergeView=new Aj(a,!0,!0),this._mergeHeaderLayer=new zj(a),this._headerView=new Wh(a,this._header),this._fixedHeaderView=new Wh(a,this._header,!0),this._rfixedHeaderView=new Wh(a,this._header,!0,!0),this._summaryView=new Xh(a,this._header.summary()),this._fixedSummaryView=new Xh(a,this._header.summary(),!0),this._rfixedSummaryView=new Xh(a,this._header.summary(),!0,!0),this._indicatorView=new Zh(a,this._indicator),this._stateBarView=new $h(a,this._stateBar),this._checkBarView=new _h(a,this._checkBar),this._footerView=this._createFooterView(a,this._footer),this._fixedFooterView=new Yh(a,this._footer,!0),this._rfixedFooterView=new Yh(a,this._footer,!0,!0),this._rowGroupView=new lj(a,this._rowGroup),this._indicatorHeadView=new Ei(a),this._stateBarHeadView=new Ii(a),this._checkBarHeadView=new Li(a),this._indicatorFootView=new Fi(a),this._stateBarFootView=new Ji(a),this._checkBarFootView=new Mi(a),this._indicatorSummaryView=new Hi(a),this._stateBarSummaryView=new Ki(a),this._checkBarSummaryView=new Ni(a),this._panelView&&this.addElement(this._panelView),this.addElement(this._bodyView),this.addElement(this._mergeView),this.addElement(this._fixedBodyView),this.addElement(this._rfixedBodyView),this.addElement(this._fixedMergeView),this.addElement(this._rfixedMergeView),this.addElement(this._mergeHeaderLayer),this.addElement(this._headerView),this.addElement(this._fixedHeaderView),this.addElement(this._rfixedHeaderView),this.addElement(this._summaryView),this.addElement(this._fixedSummaryView),this.addElement(this._rfixedSummaryView),this._addGroupView(),this.addElement(this._indicatorView),this.addElement(this._stateBarView),this.addElement(this._checkBarView),this.addElement(this._footerView),this.addElement(this._fixedFooterView),this.addElement(this._rfixedFooterView),this.addElement(this._indicatorHeadView),this.addElement(this._stateBarHeadView),this.addElement(this._checkBarHeadView),this.addElement(this._indicatorFootView),this.addElement(this._stateBarFootView),this.addElement(this._checkBarFootView),this.addElement(this._indicatorSummaryView),this.addElement(this._stateBarSummaryView),this.addElement(this._checkBarSummaryView),this._linesLayer=new bi(a,this),this.addElement(this._linesLayer),this._selectionLayer=new Xd(a,"selectionLayer"),this.addElement(this._selectionLayer),this._focusLayer=new Xd(a,"focusLayer"),this.addElement(this._focusLayer),this._scrollLayer=new Xd(a,"scrollLayer"),this.addElement(this._scrollLayer),this._hscrollBar=null,this._vscrollBar=null,this._feedbackLayer=new Xd(a,"feedbackLayer"),this.addElement(this._feedbackLayer),this.addFeedbackElement(cm(a)),this._rootColumn=new gm(this),this._dataRoots=new hm,this._columnLayouts=new wk,this._columnLayout=null,this._orgColumns=[],this._orgColumned=!0,this._columnLayoutChanged=!1,this._columnsLock=!1,this._columnWidthsDirty=!1,this._columnsDirty=!1,this._itemProvider=null,this._lookupProvider=null,this._delegate=this._createDelegate(),this._eventHandler=this._delegate.createGridEventHandler(),this._eventHandler&&this.addListener(this._eventHandler),this._layoutManager=this._createLayoutManager(),this._heightMeasurer=null,this._toolTipManager=new Yg(this),this._clipboardManager=new Rl(this),this._progressManager=new Mc(this._container._container),this._indicatorFootView.setRenderer(this._delegate.getFooterHeadRenderer()),this._indicatorSummaryView.setRenderer(this._delegate.getRowHeaderSummaryRenderer()),this._selections=new Hl(this),this._selections.addListener(this),this._selectionViews=new db,this._editController=this._createEditController(),this._validations=new _g,this._validationManager=new ch(this),this._columnSummaryRuntime=new Jm,this._rowGroupSummaryRuntime=new Km,this._columnValidationRuntime=new bh,this._rowValidationRuntime=new ah,this._displayOptions=new Gj(this),this._editOptions=new Hj(this),this._editorOptions=new Ij(this),this._copyOptions=new Tj,this._pasteOptions=new Uj,this._fixedOptions=new Jj(this),this._selectOptions=new Kj(this),this._sortingOptions=new Mj(this),this._filteringOptions=new Pj(this),this._groupingOptions=new Sj(this),this._columnHeaderOptions=new Rj(this),this._styles=new ng(this,"grid"),this._stylesDirty=!1,this.initStyles(),this._dataCellStyles=new Ng(this),this._styleMap=null,this._resetting=!1,this._layouted=!1,this._focusing=!1,this._focusedIndex=new Ye,this._shadowIndex=new Ye,this._currentRow=-1,this._currentRowId=-1,this._vertScroll=0,this._horzScroll=0,this._imageLists={},this._delegate.prepareResources(),this._filterSelector=new Rg(this._container._container),this._toastManager=new Vg(this),this._popupMenuManager=new hd(this.container()).addListener(this),this._contextMenu=null,this._dataCellRenderers=new Ym(this._delegate),this._groupFooterMergeManager=new Ej,this._footerMergeManager=new Dj,this._headerSummaryMergeManager=new Dj,this._topIndex=0,this._dataChanged=!1,this._cellUpdateEventLock=!1,this._updateLock=!1,this._rowChangeTimer=void 0,this._rowChangeTimerCallback=function(){this.$_checkCurrentRow(!0)}.bind(this),this.$_fixedColCount=this.$_fixedRowCount=0,this.$_fixedColEditable=this.$_fixedRowEditable=!0,this.$_editOptionsWritable=!1,this._tmpIndex=new Ye(this),this._productName="RealGridJS v1.0"},stylesChanged:function(a){this._stylesDirty||(this._stylesDirty=!0,this.refreshView())},dataCellStyleAdded:function(a,b){b&&this.invalidateLayout()},dataCellStyleChanged:function(a,b){b&&this.invalidateLayout()},dataCellStyleRemoved:function(a,b,c){this.itemSource().removeCellStyle(b),c&&this.invalidateLayout()},dataCellStylesCleared:function(a){this.itemSource().clearCellStyles(),a&&this.invalidateLayout()},scrollBarWidth:16,scrollBarHeight:16,body:null,panel:null,header:null,editBar:null,footer:null,indicator:null,checkBar:null,stateBar:null,rowGroup:null,columnHeaderOptions:null,displayOptions:null,editOptions:null,editorOptions:null,copyOptions:null,pasteOptions:null,fixedOptions:null,selectOptions:null,sortingOptions:null,filteringOptions:null,groupingOptions:null,styles:null,topIndex:0,leftPos:0,summaryMode:Fe.AGGREGATE,validations:null,sortMode:re.AUTO,filterMode:ve.AUTO,userMode:!1,userModeError:null,setUserMode:function(a){this._userMode=a},setUserModeError:function(a){this._userModeError=a},isReadMode:function(){return this._readMode},setStyles:function(a){a!==this._styles&&this._styles.extend(a)},setScrollBarWidth:function(a){a=Math.max(4,a),a!=this._scrollBarWidth&&(this._scrollBarWidth=a,this.refreshView())},setScrollBarHeight:function(a){a=Math.max(4,a),a!=this._scrollBarHeight&&(this._scrollBarHeight=a,this.refreshView())},dataCellRenderers:function(){return this._dataCellRenderers},getItemSource:function(){return this._itemProvider},itemSource:function(){return this._itemProvider},setItemSource:function(a){this._itemProvider&&this._itemProvider.removeListener(this),this._itemProvider=a,this._itemProvider&&this._itemProvider.addListener(this)},dataSource:function(){return this._itemProvider?this._itemProvider.dataSource():null},setDataSource:function(a){var b=this.dataSource();this._itemProvider&&this._itemProvider.setDataSource(a),this.dataSource()!==b&&this.dataSource()&&this.applyFilters()},maxItemCount:function(){return 0},setMaxItemCount:function(a){},activeTool:function(){return this.container().activeTool()},toolTipManager:function(){return this._toolTipManager},validationManager:function(){return this._validationManager},footerMergeManager:function(){return this._footerMergeManager},headerSummaryMergeManager:function(){return this._headerSummaryMergeManager},groupFooterMergeManager:function(){return this._groupFooterMergeManager},setValidations:function(a){this._validations.assign(a)},editController:function(){return this._editController},dataCellStyles:function(){return this._dataCellStyles},setBody:function(a){this._body.assign(a)},setPanel:function(a){this._panel&&this._panel.assign(a)},setIndicator:function(a){this._indicator.assign(a)},setStateBar:function(a){this._stateBar.assign(a)},setCheckBar:function(a){this._checkBar.assign(a)},setEditBar:function(a){this._editBar.assign(a)},setHeader:function(a){this._header.assign(a)},setFooter:function(a){this._footer.assign(a)},setRowGroup:function(a){this._rowGroup.assign(a)},panelView:function(){return this._panelView},mergeView:function(){return this._mergeView},fixedMergeView:function(){return this._fixedMergeView},rfixedMergeView:function(){return this._rfixedMergeView},mergeHeaderView:function(){return this._mergeHeaderLayer},indicatorView:function(){return this._indicatorView},stateBarView:function(){return this._stateBarView},checkBarView:function(){return this._checkBarView},headerView:function(){return this._headerView},fixedHeaderView:function(){return this._fixedHeaderView},rfixedHeaderView:function(){return this._rfixedHeaderView},summaryView:function(){return this._summaryView},fixedSummaryView:function(){return this._fixedSummaryView},rfixedSummaryView:function(){return this._rfixedSummaryView},footerView:function(){return this._footerView},fixedFooterView:function(){return this._fixedFooterView},rfixedFooterView:function(){return this._rfixedFooterView},rowGroupView:function(){return this._rowGroupView},summaryHeadView:function(){return this._summaryHeadView},indicatorHeadView:function(){return this._indicatorHeadView},indicatorFootView:function(){return this._indicatorFootView},indicatorSummaryView:function(){return this._indicatorSummaryView},stateBarHeadView:function(){return this._stateBarHeadView},stateBarFootView:function(){return this._stateBarFootView},stateBarSummaryView:function(){return this._stateBarSummaryView},checkBarHeadView:function(){return this._checkBarHeadView},checkBarFootView:function(){return this._checkBarFootView},checkBarSummaryView:function(){return this._checkBarSummaryView},bodyView:function(){return this._bodyView},fixedBodyView:function(){return this._fixedBodyView},rfixedBodyView:function(){return this._rfixedBodyView},delegate:function(){return this._delegate},layoutManager:function(){return this._layoutManager},popupMenuManager:function(){return this._popupMenuManager},selections:function(){return this._selections},columnSummaryRuntime:function(){return this._columnSummaryRuntime},rowGroupSummaryRuntime:function(){return this._rowGroupSummaryRuntime},columnValidationRuntime:function(){return this._columnValidationRuntime},rowValidationRuntime:function(){return this._rowValidationRuntime},setDisplayOptions:function(a){this._displayOptions.assign(a)},setSelectOptions:function(a){this._selectOptions.assign(a)},setEditOptions:function(a){this._editOptions.assign(a)},setEditorOptions:function(a){this._editorOptions.assign(a)},setCopyOptions:function(a){this._copyOptions.assign(a)},setPasteOptions:function(a){this._pasteOptions.assign(a)},setFixedOptions:function(a){this._fixedOptions.assign(a)},setSortingOptions:function(a){this._sortingOptions.assign(a),a&&a.handleImages&&this._sortingOptions.handleImages().loadImages(this._container)},setFilteringOptions:function(a){this._filteringOptions.assign(a),a&&a.handleImages&&this._sortingOptions.handleImages().loadImages(this._container)},setGroupingOptions:function(a){this._groupingOptions.assign(a)},setColumnHeaderOptions:function(a){this._columnHeaderOptions.assign(a),a&&a.checkImages&&this._columnHeaderOptions.checkImages().loadImages(this._container)},setSummaryMode:function(a){a!=this._summaryMode&&(this._summaryMode=a,this.$_summaryModeChanged())},heightMeasurer:function(){return this._heightMeasurer||Ak.Default},setHeightMeasurer:function(a){this._heightMeasurer=a},setTopIndex:function(a){a=Math.max(0,Math.min(parseInt(a),this.itemCount()-1,this._vscrollBar?this._vscrollBar.maxPosition():0)),a!=this._topIndex&&(this._topIndex=a,this.refreshView(),this.closePopups())},topItem:function(){return this._topIndex+this.layoutManager().fixedItemCount()},setTopItem:function(a){this.setTopIndex(a-this.layoutManager().fixedItemCount())},setLeftPos:function(a){a=Math.max(0,Math.min(parseInt(a),this._hscrollBar?this._hscrollBar.maxPosition():0)),a!=this._leftPos&&(this._leftPos=a,this.refreshView(),this.closePopups())},leftCol:function(){var a=this._layoutManager;return a?a.firstCol():0},setLeftCol:function(a){var b=this._layoutManager;b&&(a=Math.max(b.fixedColCount(),Math.min(a,b.columnCount()-1)),this.setLeftPos(b.columnBounds(a).x))},setRightCol:function(a){var b=this._layoutManager;if(b){var c=Math.min(b.columnCount()-1,Math.max(0,b.columnCount()-a-1)),d=this._hscrollBar._max-this._hscrollBar.maxPosition(),e=Math.min(this._hscrollBar.maxPosition(),b.columnBounds(c).x+b._columns[c]._width-d);e=Math.max(e,0),this.setLeftPos(e)}},isEmpty:function(){return 0==this.itemCount()||0==this.visibleColumnCount()},lookupProvider:function(){return this._lookupProvider},setLookupProvider:function(a){a!=this._lookupProvider&&(this._lookupProvider&&this._lookupProvider.removeListener(this),!a||a instanceof eh||(a=new fh(a)),this._lookupProvider=a,this._lookupProvider&&this._lookupProvider.addListener(this),this.refreshView())},getHeaderLevel:function(){return this._rootColumn.headerLevel()},getDataLevel:function(){return this._rootColumn.dataLevel()},itemCount:function(){return this._itemProvider?this._itemProvider.itemCount():0},rowCount:function(){var a=this.dataSource();return a?a.rowCount():0},getColumn:function(a){return this._rootColumn.getItem(a)},columns:function(){return this._rootColumn.columns()},getOrderedColumns:function(){return this._rootColumn.getOrderedColumns()},setColumns:function(a){this._checkEditing(),this._columnsLock=!0;try{this._rootColumn.setColumns(a),this._orgColumns=this._rootColumn.columns(),this._orgColumned=!0,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsReset(this._rootColumn),this.dataSource()&&this.applyFilters()}},collectColumns:function(a){var b=[];return this._rootColumn.collectColumns(b,a),b},collectGroups:function(){var a=[];return this._rootColumn.collectGroups(a),a},getColumnNames:function(a){return this._rootColumn.collectColumnNames([],a)},columnByHash:function(a){return this._rootColumn._columnMap[a]},columnByName:function(a){return this._rootColumn.columnByName(a)},layoutColumnByName:function(a){for(var b=0,c=this._orgColumns.length;c>b;b++){var d=this._orgColumns[b];if(d instanceof ak){if(d=d.valueColumnByName(a))return d}else if(d.name()==a)return d}return this._rootColumn.valueColumnByName(a)},columnByField:function(a){return this._rootColumn.columnByField(a)},columnByFieldName:function(a){return this._rootColumn.columnByFieldName(a)},columnsByFieldName:function(a){var b=[];return this._rootColumn.collectColumnsByFieldName(a,b),b.length>0?b:null},columnByTag:function(a){return this._rootColumn.columnByTag(a)},columnsByTag:function(a){var b=[];return this._rootColumn.collectColumnsByTag(a,b),b.length>0?b:null},getDataColumn:function(a){var b,c,d,e=this._rootColumn.count();for(b=0;e>b;b++)if(c=ab(this._rootColumn.getItem(b),rk)){if(c.dataIndex()==a)return c}else if(d=ab(this._rootColumn.getItem(b),ak),d&&(c=d.getDataColumn(a)))return c;return null},columnLayouts:function(){return this._columnLayouts.items()},setColumnLayouts:function(a){a!=this._columnLayouts&&(this._columnLayouts.clear(),this._columnLayouts.load(a))},columnLayout:function(){return this._columnLayout},setColumnLayout:function(a){this._checkEditing();var b=ab(a,vk);if(b||(b="string"==typeof a?this._columnLayouts.find(a):vk.create(a)),b!=this._columnLayout)if(this._columnLayout=b,b){this._columnsLock=!0;try{this._orgColumned&&(this._saveOrgWidths(),this._orgColumned=!1),this._rootColumn.setColumns(b.build(this)),this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore(),this._rootColumn._clearSavedWidths()}}else this.restoreColumns(!0)},restoreColumns:function(a){this._checkEditing(),this._columnsLock=!0;try{a&&this._restoreOrgWidths(),this._rootColumn.setColumns(this._orgColumns),this._orgColumned=!0,this._columnLayout=null,this._columnLayoutChanged=!0}finally{this._columnsLock=!1,this._columnsRestore()}},_doColumnsReset:function(a){},_columnsReset:function(a){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndicies();for(var b=0,c=this._rootColumn.count();c>b;b++){var d=this._rootColumn.getItem(b);d instanceof ak&&d.initGroupWidths()}this._columnWidthsDirty=!0,this._columnsDirty=!0,this.resetGrid(),this._doColumnsReset(a),this._resetFooterMerge(),this._resetHeaderSummaryMerge()}},_columnsRestore:function(a){if(!this._columnsLock){this._rootColumn.initVisibles(),this._resetColumnIndicies();var b,c,d=this._rootColumn.count();for(b=0;d>b;b++)c=this._rootColumn.getItem(b),isNaN(c._saveWidth)||(c._width=c._displayWidth=c._groupWidth=c._saveWidth),c instanceof ak&&c.count()>0&&c.restoreGroupWidths();this._columnWidthsDirty=!0,this._columnsDirty=!0,this.resetGrid(),this._doColumnsReset(a),this._resetFooterMerge(),this._resetHeaderSummaryMerge()}},_saveOrgWidths:function(){for(var a=0,b=this._orgColumns.length;b>a;a++){var c=this._orgColumns[a];c._orgWidth=c.saveWidth(),c instanceof ak&&c._saveOrgWidths()}},_restoreOrgWidths:function(){for(var a=0,b=this._orgColumns.length;b>a;a++){var c=this._orgColumns[a];c.setSaveWidth(c._orgWidth),c instanceof ak&&c._restoreOrgWidths()}},linearizeColumns:function(a){var b,c,d=this.getLeafColumns(!0);if(d&&(c=d.length)>0){if(a&&a.length>0)for(b=0;b<a.length;b++)d.sort(function(c,d){var e=a[b],f=c.getProperty(e),g=d.getProperty(e);return g>f?1:f>g?-1:0});var e=[],f=new vk;for(b=0;c>b;b++){var g=d[b];g._saveWidth=g.width(),e.push(g)}f.setItems(e),this.setColumnLayout(f)}},$_setPosition:function(a,b){var c,d;if(a._layoutRect.y=b,a instanceof ak&&(d=a.visibleCount())>0)if(a.isVertical())if(d>1)for(c=0;d>c;c++)this.$_setPosition(a.getVisibleItem(c),b+1);else this.$_setPosition(a.getVisibleItem(0),b);else for(c=0;d>c;c++)this.$_setPosition(a.getVisibleItem(c),b)},$_setRoot:function(a){var b,c,d;if(0==a._layoutRect.y)a._dataRoot=a;else{for(d=a.group();d&&0!=d._layoutRect.y;)d=d.group();a._dataRoot=d}if(a instanceof ak)for(c=a.visibleCount(),b=0;c>b;b++)this.$_setRoot(a.getVisibleItem(b))},$_setDistance:function(a,b){a._distance=b;var c=1,d=ab(a,ak);if(d){var e,f,g=d.visibleCount();if(d.isVertical())for(e=0;g>e;e++)f=d.getVisibleItem(e),c=Math.max(c,this.$_setDistance(f,b));else for(c=0,e=0;g>e;e++)f=d.getVisibleItem(e),c+=this.$_setDistance(f,b+c)}return c},_resetColumnPositions:function(){var a,b,c=this.getVisibleColumnCount();for(a=0;c>a;a++)b=this.getVisibleColumn(a),this.$_setPosition(b,0),this.$_setRoot(b),this.$_setDistance(b,1e6*a);this._dataRoots.collect(this._rootColumn)},_resetColumnIndicies:function(){this._rootColumn.resetIndicies(this),this._resetVisibleColumns(),this._resetColumnPositions(),this._resetColumnStates()},_resetVisibleColumns:function(){this._rootColumn.resetVisibles()},_resetColumnStates:function(){this._rootColumn.resetStates()},_resetFooterMerge:function(){this._footerMergeManager.buildRooms(this,this.footer()._mergeCells),this._groupFooterMergeManager.buildRooms(this)},_resetHeaderSummaryMerge:function(){this._headerSummaryMergeManager.buildRooms(this,this.header().summary()._mergeCells);
},isColumnLayoutChanged:function(){return this._columnLayoutChanged},focusedIndex:function(){return this._shadowIndex.assign(this._focusedIndex)},setFocusedIndex:function(a,b,c){if(b=arguments.length>1?b:!0,c=arguments.length>2?c:!1,!this._focusing){this._focusing=!0;try{return this._doSetFocusedIndex(a,b,c)}finally{this._focusing=!1}}return!1},_doSetFocusedIndex:function(a,b,c){if(!a)return!1;if(a&&!this.isValid(a)&&(a=a.clone(),a.normalize(this)),a.column()instanceof ak&&a.column(a.column().first()),!this.isValid(a)){var d=this.dataSource();return d&&0!=d.rowCount()&&0!=this.itemCount()||(this._focusedIndex.itemIndex(-1),this._focusedIndex.column(this.getFirstColumn())),!1}if(a&&Ye.areEquals(a,this._focusedIndex))return c&&this.$_makeFocusIndexVisible(),!0;var e,f=this.editOptions(),g=this._focusedIndex.clone(),h=this.itemSource(),i=this.container().activeTool(),j=this.layoutManager();if(this.closePopups2(),!this._editController.focusedIndexChanging())return!1;if(!this._fireCurrentChanging(g,a))return!1;if(!this.isValid(a))return!1;var k,l=g.item();if(h&&a.I()!=g.I())try{if(l)switch(l.itemState()){case me.INSERTING:if(!this.commit(f.isForceInsert(),!0))return this.cancel(!0),!1;break;case me.APPENDING:if(!this.commit(f.isForceAppend()),!0)return this.cancel(!0),!1;break;case me.UPDATING:if(!this.commit(this.isEditing()&&f.isCommitWhenNoEdit(),!0))return this.cancel(!0),!1}}catch(m){if(m instanceof Zg)return m=this._fireValidationFail(l._index,m.column,m),m?alert(f.isShowOnlyValidationMessage()&&m.userMessage?m.userMessage:m.toString()):null,!1;if(m instanceof S)return!1;throw m}else l&&this.isItemEditing(l)&&f.isValidateOnExit()&&(this.$_validateCellValue(g,g.value),this.invalidateLayout());return i.focusedIndexChanging(a),this.isValid(g)&&(k=j.getMergedCell(g),e=this.getCellView(k?this._mergeView:null,g),e&&(e.setFocused(!1),e.setMouseEntered(!1))),this._focusedIndex.assign(a),h instanceof jg&&h.setDiffs(this._editOptions.isCheckDiff(),this._editOptions.isCheckCellDiff(),this._editOptions.isStrictDiff()),this._editController.focusedIndexChanged(g,a),i.focusedIndexChanged(g,a),this.isValid(this._focusedIndex)&&(k=j.getMergedCell(this._focusedIndex),e=this.getCellView(k?this._mergeView:null,this._focusedIndex),e&&e.setFocused(!0)),b&&this.clearSelection(),this.isValid(this._focusedIndex)&&(this._indicatorView.isVisible()&&this._indicatorView.refresh(),this._headerView.isVisible()&&this._headerView.refresh(),this._fixedHeaderView.isVisible()&&this._fixedHeaderView.refresh(),this._rfixedHeaderView.isVisible()&&this._rfixedHeaderView.refresh()),c&&this.$_makeFocusIndexVisible(),this._fireCurrentChanged(this._shadowIndex.assign(this._focusedIndex)),this.$_checkCurrentRow()||this.$_checkLastCellCommit(g),!0},setCurrent:function(a,b){if(a){var c=this.getIndex(this._focusedIndex._itemIndex,this._focusedIndex._column);a.column?c._column=this.columnByName(a.column):a.fieldName?c._column=this.columnByFieldName(a.fieldName):void 0!==a.fieldIndex&&a.fieldIndex>=0&&(c._column=this.columnByField(a.fieldIndex)),void 0!==a.itemIndex&&a.itemIndex>=0?c._itemIndex=a.itemIndex:void 0!==a.dataRow&&a.dataRow>=0&&(c._itemIndex=this.getItemIndexOfRow(a.dataRow)),c._column&&c._itemIndex<0&&(c._itemIndex=0),c._itemIndex>=0&&!c._column&&(c._column=this.getFirstColumn()),this.setFocusedIndex(c,b,!0)}},$_makeFocusIndexVisible:function(){this.isValid(this._focusedIndex)&&this.makeCellVisible(this._focusedIndex)},cancelEditor:function(a){a=arguments.length>0?a:!0,this._editController.cancelEditor(a)},cancel:function(a){this.isEditing()&&(this.editController().cancelEditor(!0),this.editController().invalidateEditor());var b=this.focusedIndex();return this.isValid(b)&&this.itemSource().isEditing(b.item())?(b=b.clone(),this.itemSource().cancel(),b.normalize(this),this.setFocusedIndex(b),a&&this.$_makeFocusIndexVisible(),!0):!1},commitEditor:function(a){a=arguments.length>0?a:!0,this.editController().commitEditor(a)},commit:function(a,b){var c=this.focusedIndex();if(!this.isValid(c))return!1;var d=ab(this.itemSource(),jg);if(!d)return!1;this.isEditing()&&(this.editController().commitEditor(!0),this.editController().invalidateEditor());var e=c.item();if(d.isEditing(e)&&(a||d.isEdited(e))){var f=me.isInserting(e.itemState());try{this._validationManager.validateRow(e,f),this.$_validateRow(e,f)}catch(g){throw g instanceof Zg&&g.column&&g.column.setError&&(g.column.setError(g.message||g),g.column.setErrorLevel(g.level||ze.ERROR)),g}if(!d.commit()){if(b)throw new S;return!1}return!0}return!1},isScrolling:function(){return this._scrolling},isHorzScrolling:function(){return this._horzScrolling},toastManager:function(){return this._toastManager},setCellUpdateEventLock:function(a){this._cellUpdateEventLock=a},editorActivated:function(a){this.activeTool()&&this.activeTool().editorActivated(a)},onCurrentChanging:void 0,onCurrentChanged:void 0,onCurrentRowChanged:void 0,onValidateCell:void 0,onValidateRow:void 0,onColumnHeaderClicked:void 0,onColumnHeaderDblClicked:void 0,onFooterCellClicked:void 0,onFooterCellDblClicked:void 0,onHeaderSummaryCellClicked:void 0,onHeaderSummaryCellDblClicked:void 0,onCheckBarHeadClicked:void 0,onCheckBarFootClicked:void 0,onIndicatorCellClicked:void 0,onStateBarCellClicked:void 0,onRowGroupHeadClicked:void 0,onRowGroupFootClicked:void 0,onRowGroupHeaderFooterClicked:void 0,onRowGroupBarClicked:void 0,onCheckBarFootDblClicked:void 0,onIndicatorCellDblClicked:void 0,onStateBarCellDblClicked:void 0,onRowGroupHeadDblClicked:void 0,onRowGroupFootDblClicked:void 0,onRowGroupHeaderFooterDblClicked:void 0,onRowGroupBarDblClicked:void 0,onPanelClicked:void 0,onPanelDblClicked:void 0,onRowGroupPanelClicked:void 0,onRowGroupPanelDblClicked:void 0,onGridMenuItemClicked:void 0,onContextMenuItemClicked:void 0,onCellButtonClicked:void 0,onEditButtonClicked:void 0,onImageButtonClicked:void 0,onClickableCellClicked:void 0,onScrollToBottom:void 0,onDataCellClicked:void 0,onDataCellDblClicked:void 0,onRowsDeleting:void 0,onRowInserting:void 0,onUpdateStarted:void 0,onInsertStarted:void 0,onShowEditor:void 0,onHideEditor:void 0,onEditChange:void 0,onGetEditValue:void 0,onEditCommit:void 0,onEditCanceled:void 0,onEditSearch:void 0,onCellEdited:void 0,onEditRowChanged:void 0,onEditRowPasted:void 0,onRowsPated:void 0,onItemChecked:void 0,onItemsChecked:void 0,onItemAllChecked:void 0,onErrorClicked:void 0,onSorting:void 0,onSortingChanged:void 0,onFiltering:void 0,onFilteringChanged:void 0,onFilterActionClicked:void 0,getOptions:function(){var a={},b=this.itemSource();return a.summaryMode=this.summaryMode(),a.hideDeletedRows=b.isHideDeleted(),b.sortMode&&(a.sortMode=b.sortMode()),b.filterMode&&(a.filterMode=b.filterMode()),a},setOptions:function(a){if(a){var b,c=this.itemSource();a.summaryMode!==ta&&this.setSummaryMode(a.summaryMode),a.hideDeletedRows!==ta&&c.setHideDeleted(a.hideDeletedRows),void 0!=a.sortMode&&c.setSortMode(a.sortMode),void 0!=a.filterMode&&c.setFilterMode(a.filterMode),a.display&&this.setDisplayOptions(a.display),a.fixed&&this.setFixedOptions(a.fixed),(b=C(a.editing,a.edit))&&this.setEditOptions(b),(b=C(a.selecting,a.select,a.selection))&&this.setSelectOptions(b),(b=C(a.sorting,a.sort))&&this.setSortingOptions(b),(b=C(a.filtering,a.filter))&&this.setFilteringOptions(b),a.grouping&&this.setGroupingOptions(a.grouping),a.copy&&this.setCopyOptions(a.copy),a.paste&&this.setPasteOptions(a.paste),a.body&&this.setBody(a.body),a.panel&&this.setPanel(a.panel),a.indicator&&this.setIndicator(a.indicator),a.stateBar&&this.setStateBar(a.stateBar),a.checkBar&&this.setCheckBar(a.checkBar),a.editBar&&this.setEditBar(a.editBar),a.header&&this.setHeader(a.header),a.footer&&this.setFooter(a.footer),a.rowGroup&&this.setRowGroup(a.rowGroup),a.columnHeader&&this.setColumnHeaderOptions(a.columnHeader),a.editor&&this.setEditorOptions(a.editor)}},loadStyles:function(a){Eg.deserialize(a,this)},containerToGridRect:function(a){return a.x-=this._offsetX,a.y-=this._offsetY,a},containerToGridX:function(a){return a-this._offsetX},containerToGridY:function(a){return a-this._offsetY},setCursor:function(a){this.container().setCursor(a)},updateNow:function(){this.container().updateNow()},setColumnsProperty:function(a,b,c,d){this._rootColumn.setChildrenProperty(a,b,c,d)},invalidateColumnWidths:function(){this._columnWidthsDirty||(this._columnWidthsDirty=!0,this._columnsDirty=!0,this.refreshView())},invalidateColumns:function(){this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},getItem:function(a){return this._itemProvider.getItem(a)},getItemIndexOfRow:function(a){return this._itemProvider.getIndexOfRow(a)},getItemOfRow:function(a){return this._itemProvider.getItemOfRow(a)},getItemIndiciesOfRows:function(a){return this._itemProvider.getIndicesOfRows(a)},getAllItems:function(){return this._itemProvider?this._itemProvider.getAllItems():null},getIndex:function(a,b){return a=arguments.length>0?a:-1,b=arguments.length>1?b:null,new Ye(this,a,b)},isValid:function(a){return a&&a.grid()===this&&a.I()>=0&&a.I()<this.itemCount()&&a.column()&&a.column().grid()===this},isValidColumn:function(a){return a&&a.grid()===this&&a.column()&&a.column().grid()===this},isValidRow:function(a){return a&&a.grid()===this&&a.I()>=0&&a.I()<this.itemCount()},beginUpdate:function(){this._updateLock=!0},endUpdate:function(a){(a||this._updateLock)&&(this._updateLock=!1,this.refreshView())},invalidateLayout:function(){this._updateLock||this._super()},refreshView:function(){this._loading||(this.invalidateLayout(),this.setTopIndex(this.topIndex()),this.setLeftPos(this.leftPos()),this.setFocusedIndex(this.focusedIndex(),!0))},resetGrid:function(){this._resetting=!0,this.setTopIndex(0),this.setLeftPos(0),this.setFocusedIndex(this.getIndex(0,this.getFirstColumn()),!0),this.refreshView()},getFirstCell:function(){if(this.itemCount()>0){for(var a=0,b=0,c=this.itemCount();c>b;b++)if(this.getItem(b)instanceof Xf){a=b;break}return new Ye(this,a>=0?a:0,this.getFirstColumn())}return null},getFirstColumn:function(){return this._rootColumn.first()},getVisibleColumnCount:function(){return this._rootColumn.visibleCount()},visibleColumnCount:function(){return this._rootColumn.visibleCount()},getVisibleColumn:function(a){return this._rootColumn.getVisibleItem(a)},getHorzColumns:function(a,b){return this._rootColumn.getHorzColumns(a,b)},getLeafColumns:function(a){return a=arguments.length>0?a:!0,this._rootColumn.getLeafItems(a)},getValueColumns:function(a){return a=arguments.length>0?a:!0,this._rootColumn.getValueColumns(a)},getDataColumns:function(a){return a=arguments.length>0?a:!0,this._rootColumn.getDataColumns(a)},getDataRootColumns:function(){return this._dataRoots.roots()},collectDataColumns:function(a,b){return this._dataRoots.collectDataColumns(a,b)},isCheckable:function(a){var b=this.getItem(a);return b&&b.isCheckable()},setCheckable:function(a,b){var c=this.getItem(a);c&&c.setCheckable(b)},isCheckedItem:function(a){var b=this.getItem(a);return b&&b.isChecked()},isCheckedRow:function(a){var b=this._itemProvider.getItemOfRow(a);return b&&b.isChecked()},checkAll:function(a,b,c){this._itemProvider.checkAll(a,b,c)},checkItem:function(a,b,c){var d=this.getItem(a);d&&this._itemProvider.checkItem(d,b,c)},checkRow:function(a,b,c){var d=this.getItemOfRow(a);d&&this._itemProvider.checkItem(d,b,c)},checkItems:function(a,b){var c=this._itemProvider.getItemsByIndices(a);this._itemProvider.checkItems(c,b)},checkRows:function(a,b){var c=this._itemProvider.getItemsByRows(a);this._itemProvider.checkItems(c,b)},setAllCheck:function(a){this._checkBarHeadView.setChecked(a)},isAllChecked:function(){return this._checkBarHeadView.isChecked()},resetCheckables:function(){},applyaCheckables:function(){},addLookupSource:function(a){var b=this._lookupProvider||(this._lookupProvider=new fh);b.add(a)},removeLookupSource:function(a){this._lookupProvider&&this._lookupProvider.remove(a)},existsLookupData:function(a,b){if(a&&b){var c=this._lookupProvider&&this._lookupProvider.getSource(a);if(!c)throw"Invalid lookup source id: "+a;return s(b)||(b=[b]),c.exists(b)}return!1},fillLookupData:function(a,b){if(a&&b){var c=this._lookupProvider&&this._lookupProvider.getSource(a);if(!c)throw"Invalid lookup source id: "+a;b.rows?c.fillRows(b.rows):c.fill(b.keys,b.values)}},clearLookupData:function(a){if(a){var b=this._lookupProvider&&this._lookupProvider.getSource(a);if(!b)throw"Invalid lookup source id: "+a;b.clear()}},getIndicatorIndex:function(a){return a.index()},canHovering:function(){return!this.isEditing()},calcGroupLevels:function(){this._rootColumn.calcHeaderLevels(),this._rootColumn.calcDataLevels()},showToast:function(a,b){this._toastManager.show(a,b)},hideToast:function(a){this._toastManager.close(),a&&"function"==typeof a&&setTimeout(a,0)},isEditing:function(a){return this._editController.isEditing()&&(!a||Ye.areEquals(a,this._editController.editIndex()))},isItemEditing:function(a){return a=a||this.focusedIndex().item(),a&&this.itemSource()instanceof jg&&this.itemSource().isEditing(a)},isItemEdited:function(a){return a=a||this.focusedIndex().item(),a&&this.itemSource()instanceof jg&&this.itemSource().isEdited(a)},canWrite:function(a){var b=this._editOptions.isEditable()&&this.isValid(a)&&this.visibleColumnCount()>0&&a.item().canEdit()&&a.dataColumn();if(b){var c=a.C().root().displayIndex();(c<this._layoutManager.fixedColCount()||c>=this._layoutManager.rfixedStartCol())&&(b=this.fixedOptions().isEditable())}return b},canEdit:function(a){return this.canWrite(a)&&a.dataColumn().isEditable()},canShowEditor:function(a){return this.isValid(a)?(this._tmpIndex.assign(a),this._fireShowEditor(this._tmpIndex)):!1},canUpdate:function(a,b){return this.editOptions().canUpdate()&&this.visibleColumnCount()>0&&this.itemSource()&&this.itemSource().canUpdate(a,b)},canAppend:function(){var a=this.editOptions().canAppend()&&this.visibleColumnCount()>0&&this.itemSource()&&this.itemSource().canAppend();if(a)try{if(!this._fireRowInserting(this.itemSource().itemCount(),-1))return!1}catch(b){return alert(b.message||b),!1}return a},canInsert:function(a,b,c){var d=this._doCanInsert(a,b,c)&&this.editOptions().canInsert()&&this.visibleColumnCount()>0&&this.itemSource()&&this.itemSource().canInsert(a);if(d)try{if(!this._fireRowInserting(a.index(),a.dataRow()))return!1}catch(e){return alert(e.message||e),!1}return d},_doCanInsert:function(a,b,c){return!0},canDelete:function(a){return this.editOptions().canDelete()&&this.visibleColumnCount()>0&&this.itemSource()&&(this.isItemEditing(a)||this.itemSource().canDelete(a))},canCommit:function(a){return this.isItemEditing(a)&&(this.isItemEdited()||this.editOptions().isCommitWhenNoEdit())},canCancel:function(a){return this.isItemEditing(a)},append:function(){var a=this.itemSource();if(a instanceof jg&&a.dataSource()&&this.canAppend()){var b=this.$_getInsertDefaults(null);return a.append(b)}return!1},insertAt:function(a){return this.insert(this.getItem(a))},insert:function(a,b,c){if(a||(a=this.focusedIndex()?this.focusedIndex().item():null),!a)return!1;if(!(this.itemSource()instanceof jg&&this.canInsert(a,b,c)))return!1;var d=this.$_getInsertDefaults(null);return this.itemSource().insert(a,d,b,c)},edit:function(a){return a||(a=this.focusedIndex()),this.isValid(a)&&this.itemSource()instanceof jg?a.dataColumn()&&!this.canUpdate(a.item(),a.dataField())?!1:this.itemSource().edit(a.item()):!1},fillEditSearchItems:function(a,b,c,d){this._editController.fillSearchItems(a,b,c,d)},showEditor:function(a,b){return a=a||this.focusedIndex(),this._editController.showEditor(a)?(b&&this._editController.caretToLast(),!0):!1},editorButtonClick:function(a){this._editController.buttonClicked(a)},hideEditor:function(){this._editController.closeList(!1),this._editController.hideEditor()},reprepareEditor:function(){this._editController.reprepareEditor(this.focusedIndex())},isReadOnly:function(a){if(!this.isValid(a))return!1;var b=a.dataColumn();if(!b)return!0;if(!b.isReadOnly()){var c=me.isInserting(a.item().itemState())?-1:a.dataRow(),d=this.itemSource().getCellStyle(c,a.dataField());return d instanceof Mg&&d.isReadOnly()}return!0},getEditingItem:function(){var a=ab(this.itemSource(),jg);return a?a.editingItem():null},getSortFields:function(){return null},getSortDirections:function(){return null},getSortCases:function(){return null},addFocusElement:function(a){return a&&!this._focusLayer.contains(a)?(this._focusLayer.addElement(a,this._toolContext),!0):!1},removeFocusElement:function(a){return this._focusLayer.contains(a)?(this._focusLayer.removeElement(a),!0):!1},addFeedbackElement:function(a){return a&&!this._feedbackLayer.contains(a)?(this._feedbackLayer.addElement(a,this._toolContext),!0):!1},removeFeedbackElement:function(a){return this._feedbackLayer.contains(a)?(this._feedbackLayer.removeElement(a),!0):!1},getEditCellBounds:function(a){var b=this.layoutManager(),c=b.getMergedCell(a),d=this.getCellView(c?this._mergeView:null,a);if(d){var e=d.getBounds();if(e.x=e.y=0,e=d.boundsByContainer(e),c){var f=a.itemIndex();if(f>=b.topIndex()+b.fixedRowCount()&&f<b.topIndex()+b.itemCount()+b.fixedRowCount()){var g=b.itemBounds(d._topIndex),h=b.itemBounds(a.I()-this._topIndex);e.y+=h.y-g.y,e.height=h.height}else e=dm.clone()}return e}return dm.clone()},getEditBounds:function(a){var b=this.layoutManager(),c=b.getMergedCell(a),d=this.getCellView(c?this._mergeView:null,a,a.isFixedCol());if(d){var e=d.getBounds();if(d instanceof Wi&&(e.width-=d.getButtonsWidth()),e.x=e.y=0,e=d.boundsByContainer(e),c){var f=a.itemIndex();if(f>=b.topIndex()+b.fixedRowCount()&&f<b.topIndex()+b.itemCount()+b.fixedRowCount()){var g=b.itemBounds(d._topIndex),h=b.itemBounds(a.I()-this._topIndex);e.y+=h.y-g.y,e.height=h.height}else e=dm.clone()}return e}return dm.clone()},getCellView:function(a,b,c,d){if(c=c||b.column().isFixed(),d=d||b.column().isRightFixed(),null==a||a instanceof ai){var e=b.item();if(e&&e.isEditable()){var f=d?this._rfixedBodyView.findRowView(e.index()):c?this._fixedBodyView.findRowView(e.index()):this._bodyView.findRowView(e.index());if(f&&f.isVisible())return f.findCell(b.column())}}else{if(a===this._rowGroupView)return this._rowGroupView.getCellView(b,!!c,!!d);if(a instanceof Aj){var g=d?this._rfixedMergeView:c?this._fixedMergeView:this._mergeView;return g.getCellView(b)}if(a===this._mergeHeaderLayer)return this._mergeHeaderLayer.getCellView(b)}return null},getFocusedCellView:function(a){a=a||this._focusedIndex;var b=(this.layoutManager(),a.item()),c=b&&b.isMerged(),d=a.isFixedCol(),e=a.isRightFixedCol(),f=e?this.getCellView(this._rfixedMergeView,a,!0):d?this.getCellView(this._fixedMergeView,a,!0):null;return f||d||(f=this.getCellView(this._mergeView,a,!1)),!f&&c&&(f=this.getCellView(this._mergeHeaderLayer,a)),f||(f=this.getCellView(null,a,d)),f||c||(f=this.getCellView(this._rowGroupView,a,!1),f||(f=this.getCellView(this._rowGroupView,a,!0))),f},pointToIndex:function(a,b,c){var d=Ye.temp(this,-1,null);return c?this._layoutManager.mouseToIndex(a,b,d):this._layoutManager.mouseToIndexEx(a,b,d),d},getSelection:function(){return this._selections.count()>0?this._selections.getItem(0):null},clearSelection:function(){var a=this.focusedIndex();this._selections.clear(),this.isValid(a)&&this.itemCount()>0&&this.visibleColumnCount()>0&&this._selections.add(a,a,this._selectOptions.style())},deleteSelection:function(a){function b(a,b){var d=[];return d.push(b),c(a,d)}function c(a,b){try{if(b&&b.length>0){var c,d,e=b.length,f=[];for(c=0;e>c;c++)d=a.getItem(b[c]),d&&d.dataRow()>=0&&f.push(d.dataRow());if(f.length>0&&!a._fireRowsDeleting(f))return!1}}catch(g){return alert(g),!1}return!0}function d(c,d){if(0==d.count()||1==d.count()&&d.getItem(0).isSingleCell()){var e,f=-1;return f=0==d.count()?c.focusedIndex().itemIndex():d.getItem(0).getBounds().R1(),f>=0&&c.canDelete(e=c.getItem(f))&&(a||!c.editOptions().isConfirmWhenDelete()?(c.cancel(),me.isInserting(e.itemState())||c.itemSource().remove(e)):confirm(c.editOptions().deleteRowsMessage())&&b(c,f)&&(c.cancel(),me.isInserting(e.itemState())||c.itemSource().remove(e))),!0}return!1}function e(a,b){for(var c=null,d=b.length;d--;){var e=a.getItem(b[d]),f=e.itemState();if(me.isEditing(f)){c=e,me.isInserting(f)&&b.splice(d,1);break}}var g=null;b.length>0&&(g=a.itemSource().getRemovableRows(b)),c&&a.cancel(),g&&a.itemSource().removeRows(g)}var f=this.editOptions(),g=this.selections(),h=this.itemSource();if((a||f.isDeletable())&&h instanceof jg){if(this.isItemEditing(null)&&!f.isDeletableWhenEdit())return void alert("먼저 편집을 완료 하십시오.");if(this.commitEditor(!0),!d(this,g)){var i,j,k,l,m,n,o,p=g.count(),q=[];for(i=0;p>i;i++)if(j=g.getItem(i),j.style()==He.ROWS||j.style()==He.BLOCK)for(k=j.getBounds(),l=Math.min(k.R1(),k.R2()),m=Math.max(k.R1(),k.R2()),n=l;m>=n;n++)o=this.getItem(n),(o.dataRow()>=0||o instanceof ig||o instanceof co)&&q.push(n);for(q.sort(function(a,b){return b-b}),n=-1,i=q.length;i--;)q[i]==n?q.splice(i,1):n=q[i];q.length>0&&this.canDelete(this.getItem(q[0]))&&(a||!f.isConfirmWhenDelete()?c(this,q)&&(e(this,q),this.clearSelection()):confirm(f.deleteRowsMessage())&&c(this,q)&&(e(this,q),this.clearSelection()))}}},revertSelection:function(a){function b(a,b){if(0==b.count()||1==b.count()&&b.getItem(0).isSingleCell()){var c=-1;c=0==b.count()?a.focusedIndex().itemIndex():b.getItem(0).getBounds().R1(),c>=0&&a.itemSource().revert(c)}}var c=this.editOptions(),d=this.selections(),e=this.itemSource();if((a||c.isRevertable())&&e instanceof jg&&(this.commitEditor(!0),!b(this,d))){var f,g,h,i,j,k,l,m=d.count(),n=[];for(f=0;m>f;f++)if(g=d.getItem(f),g.style()==He.ROWS||g.style()==He.BLOCK)for(h=g.getBounds(),i=Math.min(h.R1(),h.R2()),j=Math.max(h.R1(),h.R2()),k=i;j>=k;k++)l=this.getItem(k),(l.dataRow()>=0||l instanceof ig||l instanceof co)&&n.push(k);for(n.sort(function(a,b){return b-b}),k=-1,f=n.length;f--;)n[f]==k?n.splice(f,1):k=n[f];n.length>0&&this.itemSource().revertAll(n)}},registerImageList:function(a){a&&a.name()&&!this._imageLists.hasOwnProperty(a.name())&&(this._imageLists[a.name()]=a,a.addListener(this),this._assignImageList(a))},unregisterImageList:function(a){a&&a.name()&&this._imageLists.hasOwnProperty(a.name())&&(delete this._imageLists[a.name()],a.removeListener(this),this._assignImageList(a,!0))},getImageList:function(a){return a&&this._imageLists[a]},getListImage:function(a,b){return a instanceof hb?a.getImage(b):a?(a=this._imageLists[a],a?a.getImage(b):null):void 0},_assignImageList:function(a,b){for(var c=this.getDataColumns(),d=0,e=c.length;e>d;d++){var f=c[d];f.imageList()==a.name()&&(f._images=b?null:a)}},getImage:function(a){return this._container.getImage(a)},getSummarizer:function(){return null},getSummary:function(a,b){var c=this.dataSource();if(b=b&&b.trim().toLowerCase(),b&&c){var d=this.getSummarizer();if(d){var e=isNaN(a)?c.getFieldIndex(a):a;if(e>=0&&e<c.fieldCount())switch(b){case"count":return d.getCount(e);case"sum":return d.getSum(e);case"max":return d.getMax(e);case"min":return d.getMin(e);case"avg":return d.getAvg(e);case"var":return d.getVar(e);case"varp":return d.getVarp(e);case"stdev":return d.getStdev(e);case"stdevp":return d.getStdevp(e)}}}return NaN},orderBy:function(a,b,c){if(!this.isItemEditing(null))if(!a||a.length<1)this._sortItems([],[],[]);else{for(var d=[],e=[],f=[],g=a.length,h=0;g>h;h++)d.push(a[h].dataIndex());b&&(e=b.concat()),c&&(f=c.concat()),this._sortItems(d,e,f)}},orderByFields:function(a,b,c){if(!this.isItemEditing(null))if(!a||a.length<1)this._sortItems([],[]);else{var d,e,f,g=a.length,h=this.dataSource(),i=[],j=[],k=[];for(d=0;g>d;d++)e=Number(a[d]),f=isNaN(e)?h.getFieldIndex(a[d]):e,i.push(f);b&&(j=b.concat()),c&&(k=c.concat()),this._sortItems(i,j,k)}},sortColumn:function(a,b){a&&(this.sortingOptions().style()==se.EXCLUSIVE?b&&b.shiftKey?this.sortColumnWithStyle(se.INCLUSIVE,a):this.sortColumnWithStyle(se.EXCLUSIVE,a):this.sortColumnWithStyle(this.sortingOptions().style(),a))},unsortColumn:function(a){a&&this.unsortColumnWithStyle(this.sortingOptions().style(),a)},$$_addSort:function(a,b,c,d){for(var e=this.getSortFields(),f=this.getSortDirections(),g=this.getSortCases(),h=-1,i=e.length,j=0;i>j;j++)if(e[j]==a){h=j;break}h>=0?(f[h]=b,g[h]=c):d?(e.splice(0,0,a),f.splice(0,0,b),g.splice(0,0,c)):(e.push(a),f.push(b),g.push(c)),this._sortItems(e,f)},sortColumnWithStyle:function(a,b){if(!this.isItemEditing(null)){if(!b)throw new Error("column is null");if(!(b.dataIndex()<0)){var c=this._sortingOptions.textCase();a==se.EXCLUSIVE?b.sortOrder()<0?this.orderBy([b],[te.ASCENDING],[c]):b.sortDirection()==te.ASCENDING?this.orderBy([b],[te.DESCENDING],[c]):this.isGroupedColumn(b)?this.orderBy([b],[te.ASCENDING],[c]):this.unsortColumnWithStyle(a,b):(a==se.INCLUSIVE||a==se.REVERSE)&&(b.sortOrder()<0?this.$$_addSort(b.dataIndex(),te.ASCENDING,c,a==se.REVERSE):b.sortDirection()==te.ASCENDING?this.$$_addSort(b.dataIndex(),te.DESCENDING,c,a==se.REVERSE):this.isGroupedColumn(b)?this.$$_addSort(b.dataIndex(),te.ASCENDING,c,a==se.REVERSE):this.unsortColumnWithStyle(a,b))}}},unsortColumnWithStyle:function(a,b){if(!this.isItemEditing(null)&&b){for(var c=this.getSortFields(),d=this.getSortDirections(),e=this.getSortCases(),f=-1,g=c.length,h=0;g>h;h++)if(c[h]==b.dataIndex()){f=h;break}0>f||(a==se.EXCLUSIVE?this.orderBy([],[],[]):(a==se.INCLUSIVE||a==se.REVERSE)&&(c.splice(f,1),d.splice(f,1),e.splice(f,1),this._sortItems(c,d,e)))}},canFiltering:function(){return this._fireFiltering()},applyFilters:function(){return this.isItemEditing(null)?!1:this._fireFiltering()?(this._toastManager.show(this.filteringOptions().toast(),!0,function(){this.$_doApplyFilters()}.bind(this)),!0):!1},$_doApplyFilters:function(){this._items.beginFiltering();try{this._items.clearAllFilters(),this.$_addFilters(this._rootColumn)}finally{this._items.endFiltering()}this.setTopIndex(0)},$_addFilters:function(a){var b,c,d,e,f,g,h=a.count();for(b=0;h>b;b++)if(c=a.getItem(b),c instanceof rk){if(d=c.filters())for(f=d.length,e=0;f>e;e++)g=d[e],g.isActive()&&this._items.addFilter(c.dataIndex(),g.criteria())}else c instanceof ak&&this.$_addFilters(c)},isFiltered:function(a){return a&&this._items.isFiltered(a.dataIndex())},isGroupedColumn:function(a){return!1},getGroupLevel:function(a){return-1},getGroupLevels:function(){return 0},clearColumnMergeGrouped:function(){this._rootColumn.clearMergeGrouped()},$_makeRowInView:function(a){var b,c,d=this.layoutManager();if(a>=d.fixedItemCount())if(b=a,c=d.fullItemCount(),0==c)d.itemCount()>0?this.setTopItem(b):this.seTopIndex(0);else{if(b>=this.topItem()&&b<this.topItem()+c)return;b>=this.topItem()+c&&(b=b-c+1),this.setTopItem(Math.max(0,b))}},$_makeColumnInView:function(a){var b,c,d,e=layoutManager(),f=a.root(),g=f.displayIndex();if(g>=e.fixedColCount()){for(c=e.columnBounds(g).x,b=a;b!=f;)c+=b.displayOffset(),b=b.parent();c<this.leftPos()?this.setLeftPos(c):(d=c+a.displayWidth()-this.leftPos()-e.nonfixedBounds().width)>0&&this.setLeftPos(Math.min(c,this.leftPos()+d))}},makeColumnVisible:function(a){var b=this.getIndex(-1,a);this.makeCellVisible(b)},makeItemVisible:function(a){var b=this.getIndex(a,this.getFirstColumn());this.makeCellVisible(b)},makeCellVisible:function(a,b){this.isValid(a)?this.layoutManager().cellIsVisible(a)||(this.layoutManager().makeCellVisible(a),this.invalidateLayout()):a&&a.column()&&(this.layoutManager().makeCellVisible(a),this.invalidateLayout())},copyToClipboard:function(){var a=this.selections();if(this._copyOptions.isEnabled())if(this._copyOptions.isSingleMode()||0==a.count()||a.isSingleCell()){var b=this.focusedIndex();if(b.isValid())return this._clipboardManager.copyCellToClipboard(b)}else{var c=a.getItem(0).getBounds();if(c)return this._clipboardManager.copyToClipboard(c)}return this._clipboardManager.copyEmptyToClipboard()},pasteFromClipboard:function(a){var b=this.focusedIndex().clone();if(b.normalize(this),this.isValid(b)&&b.dataColumn()&&this._pasteOptions.isEnabled()){if(this._pasteOptions.isSingleMode())this._clipboardManager.pasteCellFromClipboard(b,a);else if(this._clipboardManager.pasteFromClipboard(b,a),b.item()&&me.isEditing(b.item().itemState())){var c=b.item().getData(b.dataField());this.validateCellCommit(b,c),this.refreshView()}this._editController.reprepareEditor(b)}},$_editRowPasted:function(a,b,c,d){this._fireEditItemPasted(a,b,c,d)},$_rowsPasted:function(a){this._fireItemsPasted(a)},selectColumnFilters:function(a){this.isItemEditing(null)||this._fireFiltering()&&this._filterSelector.show(a,this.filteringOptions().selector())},closeFilterSelector:function(){this._filterSelector.hide()},closePopups:function(){this._filterSelector.hide(),this._popupMenuManager.close(),this._editController.closeList()},closePopups2:function(){this._popupMenuManager.close(),this._editController.closeList()},isFilterSelecting:function(a){return this._filterSelector.isOpened()&&this._filterSelector.column()===a},getCellValue:function(a,b){var c=this.getItem(a);if(c){if("string"==typeof b){var d=this.itemSource().dataSource();if(!d)return void 0;b=d.getFieldIndex(b)}return c.getData(b)}return void 0},setCellValue:function(a,b,c){var d=this.getItem(a);if(d){if("string"==typeof b){var e=this.itemSource().dataSource();if(!e)return;b=e.getFieldIndex(b)}d instanceof ig||d instanceof co?d.setValue(b,c):d.setData(b,c)}},searchItem:function(a,b,c,d,e,f){d=arguments.length>3?d:0,e=arguments.length>4?e:!0,f=arguments.length>5?f:!1,c=c instanceof Ve?c:c?new Ve(c):null;var g,h=-1;if(a&&a.length>0&&b&&b.length>0&&(g=this.itemSource())){var i,j,k,l,m=a.length,n=[],o=g.dataSource();for(i=0;m>i;i++)j=parseFloat(a[i]),!isNaN(j)&&j|0==j?n.push(j):(k=o.getFieldIndex(a[i]),k>=0&&n.push(k));n.length>0&&(m=g.itemCount(),d=Math.max(0,d),h=m>d?g.findItem(n,b,c,d,m-1):-1,0>h&&e&&d>0&&(h=g.findItem(n,b,c,0,d-1))),h>=0&&f&&(l=this.getIndex(h,C(this.focusedIndex().C(),this.getFirstColumn())),this.setFocusedIndex(l,!0,!0))}return h},searchCell:function(a,b,c,d,e,f,g){d=arguments.length>3?d:0,e=arguments.length>4?e:0,f=arguments.length>5?f:!0,g=arguments.length>6?g:!1,c=c instanceof We?c:c?new We(c):null;var h,i=this.itemSource(),j=null;if(i&&(h=i.dataSource())){if(!a||a.length<1){a=[];for(var k=h.getFields(),l=0;l<k.length;l++)a.push(k[l].orgFieldName())}if(a&&a.length>0&&b){var m,n,o=a.length,p=[];for(m=0;o>m;m++)n=parseFloat(a[m]),!isNaN(n)&&n|0==n?p.push(n):p.push(h.getFieldIndex(a[m]));if(p.length>0&&(o=i.itemCount(),d=Math.max(0,d),e=Math.max(0,e),j=o>d?i.findCell(p,b,c,d,o-1,e):null,!j&&f&&d>0&&(j=i.findCell(p,b,c,0,d-1,0)),j&&(j.fieldName=h.getOrgFieldName(j.fieldIndex))),j&&g){var q=this.getIndex(j.itemIndex,C(this.columnByField(j.fieldIndex),this.focusedIndex().C()));this.setFocusedIndex(q,!0,!0)}}}return j},$_setDataCellStyle:function(a,b,c,d){var e,f=Math.max(-1,b);if("string"==typeof c){if(e=a.getFieldIndex(c),0>e)return}else e=c;this.itemSource().setCellStyle(f,e,d)},setDataCellStyle:function(a,b,c,d){var e=c?this._dataCellStyles.get(c):null;if(this.$_setDataCellStyle(this.dataSource(),a,b,e),d){var f=this.focusedIndex();f&&f.dataField()==b&&f.dataRow()==a&&this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()}},getDataCellStyle:function(a,b){return this.itemSource().getCellStyle(a,this.dataSource().getFieldIndexOf(b))},getDataCellStyleId:function(a,b){var c=this.itemSource().getCellStyle(a,this.dataSource().getFieldIndexOf(b));return c?c.id():null},setDataCellStyles:function(a,b,c){var d,e,f,g,h=this.dataSource(),i=t(a),j=t(b),k=c?this._dataCellStyles.get(c):null;if(i&&j)for(g=j.length,d=0,e=i.length;e>d;d++)for(f=0;g>f;f++)this.$_setDataCellStyle(h,i[d],j[f],k);else if(i)for(d=0,e=i.length;e>d;d++)this.$_setDataCellStyle(h,i[d],b,k);else if(j)for(f=0,e=j.length;e>f;f++)this.$_setDataCellStyle(h,a,j[f],k);else this.$_setDataCellStyle(h,a,b,k);this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},setDataCellStyleRows:function(a,b){this.itemSource().setCellStyles(this._dataCellStyles,a,b),this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},clearDataCellStyles:function(){
this.itemSource().clearCellStyles(),this._editController.reprepareEditor(this.focusedIndex()),this.invalidateLayout()},getStylesOf:function(a){var b=this._styleMap;return b||(b=this._styleMap={},b[og.GRID]=b[og.DEFAULT]=this.styles(),b[og.PANEL]=this._panel.styles(),b[og.BODY]=this._body.styles(),b[og.BODY_EMPTY]=this._body.emptyStyles(),b[og.FIXED]=this._fixedOptions.styles(),b[og.FIXED_COLBAR]=this._fixedOptions.colBarStyles(),b[og.FIXED_ROWBAR]=this._fixedOptions.rowBarStyles(),b[og.HEADER]=this._header.styles(),b[og.HEADER_GROUP]=this._header.groupStyles(),b[og.FOOTER]=this._footer.styles(),b[og.FOOTER_GROUP]=this._footer.groupStyles(),b[og.ROWGROUP_HEADER]=this._rowGroup.headerStyles(),b[og.ROWGROUP_FOOTER]=this._rowGroup.footerStyles(),b[og.ROWGROUP_HEAD]=this._rowGroup.headStyles(),b[og.ROWGROUP_FOOT]=this._rowGroup.footStyles(),b[og.ROWGROUP_SUMMARY]=this._rowGroup.summaryStyles(),b[og.ROWGROUP_BAR]=this._rowGroup.barStyles(),b[og.ROWGROUP_HEADER_BAR]=this._rowGroup.headerBarStyles(),b[og.ROWGROUP_FOOTER_BAR]=this._rowGroup.footerBarStyles(),b[og.ROWGROUP_PANEL]=this._rowGroup.panelStyles(),b[og.INDICATOR]=this._indicator.styles(),b[og.INDICATOR_HEAD]=this._indicator.headStyles(),b[og.INDICATOR_FOOT]=this._indicator.footStyles(),b[og.INDICATOR_SUMMARY]=this._indicator.summaryStyles(),b[og.CHECKBAR]=this._checkBar.styles(),b[og.CHECKBAR_HEAD]=this._checkBar.headStyles(),b[og.CHECKBAR_FOOT]=this._checkBar.footStyles(),b[og.CHECKBAR_SUMMARY]=this._checkBar.summaryStyles(),b[og.STATEBAR]=b.statusBar=this._stateBar.styles(),b[og.STATEBAR_HEAD]=b.statusBarHead=this._stateBar.headStyles(),b[og.STATEBAR_FOOT]=b.statusBarFoot=this._stateBar.footStyles(),b[og.STATEBAR_SUMMARY]=b.statusBarSummary=this._stateBar.summaryStyles(),b[og.SELECTION]=this._selectOptions.maskStyles(),this._treeOptions&&(b[og.TREE_EXPANDER]=this._treeOptions.expanderStyles())),"all"==a?b:b[a]},clearStyles:function(a){var b=this.getStylesOf(a);if("all"==a){for(var c in b)b[c]&&b[c].clearValues();this.refreshView()}else b&&(b.clearValues(),this.refreshView())},alertCellError:function(a,b){this._fireErrorClicked(a,b)},canMoveIndex:function(a){var b=this.layoutManager();return this.fixedOptions().isMovable()||a>=b.fixedColCount()&&a<b.rfixedStartCol()},canMoveToIndex:function(a){var b=this.layoutManager();return a>=b.fixedColCount()&&a<b.rfixedStartCol()},showProgress:function(a){this._progressManager.show(null,null,a)},setProgress:function(a,b,c,d){this._progressManager.setProperties(a,b,c,d)},closeProgress:function(){this._progressManager.close()},beginExportProgress:function(a){this._progressManager.show(null,a,!1)},endExportProgress:function(){this._progressManager.close()},setExportProgress:function(a,b,c){this._progressManager.setProperties(0,a,b,c)},print:function(a){(new Gn).print(this,a)},measureText:function(a,b){return this._container.measureText(a,b)},setContextMenu:function(a){return a?(this.$_contextMenuHandler||(this.$_contextMenuHandler=function(a){var b=a.target||a.srcElement,c=b.getBoundingClientRect(),d=a.clientX-c.left,e=a.clientY-c.top;this._fireContextMenuPopup(d,e),this._contextMenu&&(a.preventDefault(),this._popupMenuManager.showContext(this._contextMenu,d,e))}.bind(this),wa?this._container._canvas.addEventListener("contextmenu",this.$_contextMenuHandler):this._container._canvas.attachEvent("contextmenu",this.$_contextMenuHandler)),this._contextMenu=new fd("gridContextMenu",this,a)):(this._contextMenu=null,this.$_contextMenuHandler&&(wa?this._container._canvas.removeEventListener("contextmenu",this.$_contextMenuHandler):this._container._canvas.detachEvent("contextmenu",this.$_contextMenuHandler),this.$_contextMenuHandler=null)),this._contextMenu},container:function(){return this._container},addElement:function(a,b){this._rootElement.addElement(a,b)},invalidate:function(){this._container.invalidate()},_beforeRender:function(a){this._linesLayer.invalidate()},$_setEditFocused:function(a,b){if(a!=this.$_editFocused&&(this.$_editFocused=a,a)){var c=this.focusedIndex();c&&this.isValid(c)||(c=this.getFirstCell(),c&&this.setFocusedIndex(c))}},_resetFocusMask:function(){var a=this._layoutManager,b=a.gridBounds(),c=this._focusedIndex.item(),d=this.getFocusedCellView();if(!a.isRowGrouped()||this.isMergedRowGrouped()||c instanceof Xf){if(this.isValid(this._focusedIndex)&&(a.fixedColCount()>0||a.rfixedColCount()>0)&&(d instanceof Wi||c instanceof Yf||c instanceof $f)){var e=this._focusedIndex.column().root().displayIndex();c instanceof sj||c instanceof tj||(e<a.fixedColCount()?b.copyHorz(a.fixedBounds()):e>=a.rfixedStartCol()?b.copyHorz(a.rfixedBounds()):b.copyHorz(a.nonfixedBounds()))}}else b.setLeft(a.rowGroupBounds().x);this._focusLayer._mask=b},_doDraw:function(a){a.clipRect(this.clientRect()),!this.isEmpty()},_doDrawHtml:function(){},setFocus:function(){this._editController.setFocus(!0)},_isColumnsDirty:function(){return this._columnsDirty},_isStylesDirty:function(){return this._stylesDirty},_rootGroup:function(){return this._rootColumn},_checkEditing:function(){if(this.itemSource()instanceof jg&&this.itemSource().isEditing())throw"Item is editing"},_focusHandler:function(a){this._editController.setFocus()},_validateScrollBars:function(){this._hscrollBar&&this._hscrollBar._mouseOut(),this._hscrollBar&&this._hscrollBar._mouseOut()},_addGroupView:function(){this.addElement(this._rowGroupView)},_addGridObject:function(a){this._gridObjects.push(a)},_cleanGridObjects:function(){for(var a=0,b=this._gridObjects.length;b>a;a++)this._gridObjects[a].clean();this._stylesDirty=!1},_visualObjectChanged:function(a){a instanceof kh?this._panelView.invalidate():a instanceof th?this._bodyView.invalidate():a instanceof qh?this._indicatorView.invalidate():a instanceof rh?this._stateBarView.invalidate():a instanceof sh?this._checkBarView.invalidate():a instanceof mh||a instanceof lh?(this._doHeaderSummaryMergeChanged(a),this._headerView.invalidate()):a instanceof oh&&(this._doFooterMergeChanged(a),this._footerView.invalidate())},_doLayout:function(a){this._resetting=!1;try{this.$_doLayout(a)}finally{this._loading&&(this._loading=!1),this._dataChanged=!1}this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._rootColumn.clean()),this._columnLayoutChanged=!1;var b=this.layoutManager();if(b.itemCount()>0){var c=b.topIndex()+b.itemCount();c!=this._prevLast&&c==this.itemCount()&&setTimeout(function(){this._fireScrollToBottom()}.bind(this),0),this._prevLast=c}this.$_checkCurrentRow()},$_doLayout:function(a){Ea(">>> GridBase.doLayout");var b,c,d,e=this._rootColumn.visibleCount(),f=this.$_fixedColCount=this._fixedOptions.colCount(),g=this.$_rfixedColCount=this._fixedOptions.rightColCount(),h=this._body.styles(),i=this._header.styles(),j=this._header.groupStyles(),k=this._header.subStyles(),l=this._header.summary().styles(),m=this._footer.styles(),n=h.sysDefault(),o=i.sysDefault(),p=k.sysDefault(),q=l.sysDefault(),r=m.sysDefault(),s=this._rowGroup,t=this._layoutManager,u=t.yU(),v=a.clone();if(this.$_fixedRowCount=this._fixedOptions.rowCount(),this.$_fixedColEditable=this._fixedOptions.isEditable(),this.$_fixedRowEditable=this._fixedOptions.isRowEditable(),this.$_editOptionsWritable=this._editOptions.isWritable(),this._body._prepareUpdate(),1>e)return this._rootElement.setVisible(!1),this._emptyView.setVisible(!0),this._emptyView.setSize(v.width,v.height),void this._emptyView.invalidate();for(b=0;e>b;b++)c=this._rootColumn.getVisibleItem(b),c.prepare(this,f>b,b>=e-g),c.styles().setSysDefault(n),c instanceof pk?(c.styles().setParent(h,!1),c._header.styles().setParentAndDefault(i,o),c._header.subStyles().setParentAndDefault(k,p),c._header.summary().styles().setParentAndDefault(l,q),c._footer.styles().setParentAndDefault(m,r),c.rendererObj().prepareRuntime(this)):c instanceof ak&&this.$_setColumnGroupStyles(c,h,j,i,k,l,m);for(b=0,e=s.levelCount();e>b;b++)d=s.getLevel(b),d.headerStyles().setParent(s.headerStyles()),d.footerStyles().setParent(s.footerStyles()),d.barStyles().setParent(s.barStyles()),d.headerBarStyles().setParent(s.headerBarStyles()),d.footerBarStyles().setParent(s.footerBarStyles());this._linesLayer.invalidate(),this._columnWidthsDirty&&(this._columnWidthsDirty=!1,this.$_resetColumnWidths()),this._emptyView.setVisible(!1),this._rootElement.setVisible(!0),t.setHeightMeasurer(this.heightMeasurer()),t.measure(v,this._leftPos,this._topIndex,this._scrollBarWidth,this._scrollBarHeight),this._topIndex=t.topIndex();var w=this._leftPos=t.leftPos();t.layout(v),u.getChild(0).setSize(v.width,v.height),this.activeTool()&&this.activeTool().layoutChanged(),this._updateScrollBars(t,v),this._footerView.isVisible()&&(t.isRowGrouped()&&w>0?(v=t.footerBounds(),v.x=w,v.y=0,this._footerView.setMask(v)):this._footerView.setMask(null)),this._layoutSelectionViews(),this._layouted=!0;var x=this.getCellView(null,this._focusedIndex);x&&x.setFocused(!0),this._editController.resetEditor(),this._debugView&&(this._debugView.setBounds(0,0,this._width,this._height),this._debugView.invalidate())},groupingOptionsChanged:function(){this._doGroupingOptionsChanged()},_doGroupingOptionsChanged:function(){},_createEmptyView:function(a){return new Uh(a)},_createPanelModel:function(){return new kh(this)},_createPanelView:function(a,b){return new Vh(a,b)},_createFooterModel:function(){return new oh(this)},_createFooterView:function(a,b){return new Yh(a,b)},_createBodyView:function(a,b,c,d){return new ai(a,b,c,d)},_createDelegate:function(){return new xk(this)},_createLayoutManager:function(){return new Dk(this)},_createEditController:function(){return this.isReadMode()?new im(this):gb()?new Tl(this):new Zk(this)},_columnIndexChanged:function(a){this.clearSelection(),this._resetColumnIndicies(),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this.refreshView()},_columnVisibleIndexChanged:function(a){this.clearSelection(),this._resetVisibleColumns(),this._resetColumnPositions(),this._resetFooterMerge(),this._resetHeaderSummaryMerge(),this.refreshView()},_columnCheckedChanged:function(a){this._fireColumnCheckedChanged(a)},_dataColumnChanged:function(a){this.refreshView(),this._editController&&this._editController.dataColumnChanged(a)},_updateScrollBars:function(a,b){if(a._hscrollBar){this._hscrollBar||(this._hscrollBar=new vm(this._dom,!1),this._scrollLayer.addElement(this._hscrollBar),this._hscrollBar.addListener(this));var c=a.bodyBounds().width,d=Math.min(b.width-a.gridBounds().x-a.fixedWidth()-a.rfixedWidth()-(a._vscrollBar?this._scrollBarWidth:0),a.columnsLength()-a.leftPos());this._hscrollBar.setProperties(0,c,d),this._hscrollBar.setPosition(a.leftPos()),this._hscrollBar.setVisible(!0)}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.setVisible(!1));if(a._vscrollBar){this._vscrollBar||(this._vscrollBar=new vm(this._dom,!0),this._scrollLayer.addElement(this._vscrollBar),this._vscrollBar.addListener(this));var e=this.itemCount(),f=e-a.fixedItemCount(),g=Math.min(a.fullItemCount(),e-a.topIndex());this._vscrollBar.setProperties(0,f,g),this._vscrollBar.setPosition(a.topIndex()),this._vscrollBar.setVisible(!0)}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.setVisible(!1));this._layoutScrollBars(a,b)},_layoutScrollBars:function(a,b){this._scrollLayer.setBounds(b.x,b.y,b.width,b.height);var c=this._scrollBarWidth,d=this._scrollBarHeight,e=this._hscrollBar,f=this._vscrollBar;a._hscrollBar&&(e.setBounds(b.x,b.bottom()-d,b.width-(a._vscrollBar?c:0),d),e.layoutContent(a)),a._vscrollBar&&(f.setBounds(b.right()-c,b.y,c,b.height-(a._hscrollBar?d:0),c),f.layoutContent(a))},_addSelectionElement:function(a){return a&&!this._selectionLayer.contains(a)?(this._selectionLayer.addElement(a,this._toolContext),!0):!1},_removeSelectionElement:function(a){return this._selectionLayer.contains(a)?(this._selectionLayer.removeElement(a),!0):!1},_addSelectionView:function(a){var b=null;return this._selectionViews.get(a)||(b=this._delegate.borrowSelectionView(a),this._selectionViews.set(a,b),this._addSelectionElement(b)),b},_clearSelectionViews:function(){this._selectionViews.each(function(a,b){this._removeSelectionElement(b),this._delegate.returnSelectionView(b)}.bind(this)),this._selectionViews.clear()},_layoutSelectionViews:function(){this._layouted&&!this._resetting&&this._selectionViews.each(function(a,b){var c=gb(),d=this.layoutManager();if(this._selections.isSingleCell()&&!c)b.setVisible(!1);else{var e=!1,f=new kd;e=a instanceof Jl?this.$_getSelectionRowsRect(d,a,f):a instanceof Kl?this.$_getSelectionColumnsRect(d,a,f):this.$_getSelectionRangeRect(d,a,f),b.setVisible(e),b.isVisible()&&(b.setRectI(f),b.updateElement(a,c?this._selectOptions.mobileStyles():this._selectOptions.maskStyles()),b.invalidate())}}.bind(this))},$_getSelectionRowsRect:function(a,b,c){var d,e,f,g=b.getBounds(),h=a.fixedItemCount(),i=this.topIndex();if(h>0){if(g.R1()>=i+h+a.itemCount()||g.R2()<0||g.R1()>=h&&g.R2()<i+h)return!1;f=a.fixedHeight()+this.fixedOptions().rowBarHeight(),g.R1()<h?d=a.itemBounds(Math.max(0,g.R1())):(d=a.itemBounds(Math.max(0,g.R1()-i)),d.y=Math.max(d.y,f)),g.R2()<h?e=a.itemBounds(g.R2()):g.R1()<=h&&g.R2()<h+i?e=a.itemBounds(Math.min(h+i,h)-1):g.R2()>=i?(e=a.itemBounds(Math.min(a.itemCount()+h-1,g.R2()-i)),e.y=Math.max(e.y,f)):e=d}else{if(!(a.itemCount()>0))return!1;if(g.R1()>=i+a.itemCount()||g.R2()<i)return!1;d=a.itemBounds(Math.max(0,g.R1()-i)),e=a.itemBounds(Math.min(a.itemCount()-1,g.R2()-i))}return c.copy(d.union(e)),c.offset(0,a.bodyBounds().y),c.setRight(a.bodyBounds().right()+a.rfixedWidth()),!0},$_getSelectionColumnsRect:function(a,b,c){var d,e,f=b.getBounds(),g=a.fixedColCount(),h=a.rfixedColCount(),i=a.rfixedStartCol(),j=f.C1().root().displayIndex(),k=f.C2().root().displayIndex(),l=this.fixedOptions().colBarWidth(),d=a.dataRootRect(f.C1()),e=a.dataRootRect(f.C2());if(g>0){var m=a.columnRect(g-1).right(),n=m+l;j>=g&&(d.setRight(Math.max(n,d.right())),d.setLeft(Math.max(n,d.x))),k>=g&&(e.setRight(Math.max(g>j?m:n,e.right())),e.setLeft(Math.max(n,e.x)))}if(h>0){var n=a.rfixedLeft(),m=n+l;i>j&&(d.setRight(Math.min(n,d.right())),d.setLeft(Math.min(k>=i?m:n,d.x))),i>k&&(e.setRight(Math.min(n,e.right())),e.setLeft(Math.min(n,e.x)))}return c.setLeft(Math.min(d.x,e.x)),c.setRight(Math.max(d.right(),e.right())),e.setBottom(a.itemRect(a.itemCount()-1).bottom()),c.setTop(a.headerBounds().y),c.setBottom(e.bottom()),!0},$_getSelectionRangeRect:function(a,b,c){var d=new kd;return this.$_getSelectionRowsRect(a,b,d)?(c.setTop(d.y),c.setBottom(d.bottom()),this.$_getSelectionColumnsRect(a,b,d),c.setLeft(d.x),c.setRight(d.right()),!0):!1},initStyles:function(){var a=this.styles(),b=this.header().styles(),c=this.header().summary().styles(),d=this.footer().styles();this.panel().styles().setParent(a,!1),this.body().styles().setParent(a,!1),this.body().emptyStyles().setParent(a,!1),this.fixedOptions().styles().setParent(a,!1),this.fixedOptions().colBarStyles().setParent(a,!1),this.fixedOptions().rowBarStyles().setParent(a,!1),this.header().styles().setParent(a,!1),this.header().groupStyles().setParent(a,!1),this.header().subStyles().setParent(a,!1),this.header().summary().styles().setParent(a,!1),this.footer().styles().setParent(a,!1),this.footer().groupStyles().setParent(a,!1),this.indicator().styles().setParent(a,!1),this.indicator().headStyles().setParent(b,!1),this.indicator().footStyles().setParent(d,!1),this.indicator().summaryStyles().setParent(c,!1),this.checkBar().styles().setParent(a,!1),this.checkBar().headStyles().setParent(b,!1),this.checkBar().footStyles().setParent(d,!1),this.checkBar().summaryStyles().setParent(c,!1),this.stateBar().styles().setParent(a,!1),this.stateBar().headStyles().setParent(b,!1),this.stateBar().footStyles().setParent(d,!1),this.stateBar().summaryStyles().setParent(c,!1),this.rowGroup().headStyles().setParent(b,!1),this.rowGroup().footStyles().setParent(d,!1),this.rowGroup().summaryStyles().setParent(c,!1),this.rowGroup().headerStyles().setParent(a,!1),this.rowGroup().footerStyles().setParent(a,!1),this.rowGroup().panelStyles().setParent(b,!1),this.rowGroup().barStyles().setParent(this.rowGroup().headerStyles(),!1),this.rowGroup().headerBarStyles().setParent(this.rowGroup().headerStyles(),!1),this.rowGroup().footerBarStyles().setParent(this.rowGroup().footerStyles(),!1),this.selectOptions().maskStyles().setParent(null,!1),c=og.Default,this.styles().setSysDefault(c.getGrid(),!1),this.panel().styles().setSysDefault(c.panel(),!1),this.body().styles().setSysDefault(c.body(),!1),this.body().emptyStyles().setSysDefault(c.bodyEmpty(),!1),this.fixedOptions().styles().setSysDefault(c.fixed(),!1),this.fixedOptions().colBarStyles().setSysDefault(c.fixedColBar(),!1),this.fixedOptions().rowBarStyles().setSysDefault(c.fixedRowBar(),!1),this.header().styles().setSysDefault(c.header(),!1),this.header().groupStyles().setSysDefault(c.headerGroup(),!1),this.header().subStyles().setSysDefault(c.headerSub(),!1),this.header().summary().styles().setSysDefault(c.headerSummary(),!1),this.footer().styles().setSysDefault(c.footer(),!1),this.footer().groupStyles().setSysDefault(c.footerGroup(),!1),this.indicator().styles().setSysDefault(c.indicator(),!1),this.indicator().headStyles().setSysDefault(c.indicatorHead(),!1),this.indicator().footStyles().setSysDefault(c.indicatorFoot(),!1),this.indicator().summaryStyles().setSysDefault(c.indicatorSum(),!1),this.checkBar().styles().setSysDefault(c.checkBar(),!1),this.checkBar().headStyles().setSysDefault(c.checkBarHead(),!1),this.checkBar().footStyles().setSysDefault(c.checkBarFoot(),!1),this.checkBar().summaryStyles().setSysDefault(c.checkBarSum(),!1),this.stateBar().styles().setSysDefault(c.stateBar(),!1),this.stateBar().headStyles().setSysDefault(c.stateBarHead(),!1),this.stateBar().footStyles().setSysDefault(c.stateBarFoot(),!1),this.stateBar().summaryStyles().setSysDefault(c.stateBarSum(),!1),this.rowGroup().headStyles().setSysDefault(c.rowGroupHead(),!1),this.rowGroup().footStyles().setSysDefault(c.rowGroupFoot(),!1),this.rowGroup().summaryStyles().setSysDefault(c.rowGroupSummary(),!1),this.rowGroup().headerStyles().setSysDefault(c.rowGroupHeader(),!1),this.rowGroup().footerStyles().setSysDefault(c.rowGroupFooter(),!1),this.rowGroup().panelStyles().setSysDefault(c.rowGroupPanel(),!1),this.rowGroup().barStyles().setSysDefault(c.rowGroupBar(),!1),this.rowGroup().headerBarStyles().setSysDefault(c.rowGroupHeaderBar(),!1),this.rowGroup().footerBarStyles().setSysDefault(c.rowGroupFooterBar(),!1),this.selectOptions().maskStyles().setSysDefault(c.selection(),!1)},$_setColumnGroupStyles:function(a,b,c,d,e,f,g){var h=a.count(),i=b.sysDefault(),j=d.sysDefault(),k=e.sysDefault(),l=f.sysDefault(),m=g.sysDefault();a.styles().setParent(b,!1),a.header().styles().setParentAndDefault(c,c.sysDefault());for(var n=0;h>n;n++){var o=a.getItem(n);if(o.prepare(this,a.$_fixed,a.$_rightFixed),o.styles().setSysDefault(i),o instanceof pk){var p=o.header();o.styles().setParent(b,!1),p.styles().setParentAndDefault(d,j),p.subStyles().setParentAndDefault(e,k),p.summary().styles().setParentAndDefault(f,l),o.footer().styles().setParentAndDefault(g,m),o.rendererObj().prepareRuntime(this),o instanceof rk&&o.dynamicStyles().prepare()}else o instanceof ak&&this.$_setColumnGroupStyles(o,b,c,d,e,f,g)}},$_resetColumnWidths:function(){for(var a=this._rootColumn.visibleCount();a--;){var b=this._rootColumn.getVisibleItem(a);b._displayWidth=b._groupWidth=b._width=Na(b.width()),b instanceof ak&&b.resetGroupWidths()}},_canMerge:function(){return!1},_populateMerges:function(){if(this._canMerge()){var a,b,c,d,e=this.getHorzColumns();for(a=0,cnt=e.length;a<cnt;a++)b=ab(e[a],pk),b&&b.canMerge()&&(c=b.stateFor(rj.MERGE_ROOMS),c||(c=new rj(b),b.setState(rj.MERGE_ROOMS,c)),c.clear(),b instanceof rk&&b.isMergeGrouped()?(d=this.getGroupLevel(b.dataIndex()),d>0&&c.initialize(nj.INIT_COUNT)):c.initialize(oj.INIT_COUNT))}},_sortItems:function(a,b,c){var d=a.concat(),e=b?b.concat():[],f=c?c.concat():[];this._fireSorting(d,e)&&this._toastManager.show(this.sortingOptions().toast(),!0,function(){var b=this.sortingOptions().isKeepFocusedRow()&&this.focusedIndex()?this.focusedIndex().dataRow():-1;if(this._doSortItems(a,e,f),b>=0){var c=Ye.temp(this,this.getItemIndexOfRow(b),this.focusedIndex().C());this.setFocusedIndex(c,!0,!0)}}.bind(this))},_doSortItems:function(a,b,c){},_clearFitWidths:function(){this._rootColumn.clearFitWidths()},_doGroupingOptionsChanged:function(){},$_rowGroupMergeModeChanged:function(){this._doRowGroupMergeModeChanged()},_doRowGroupMergeModeChanged:function(){},$_rowGroupFooterMergeChanged:function(){this._doRowGroupFooterMergeChanged()},_doRowGroupFooterMergeChanged:function(){},$_footerMergeChanged:function(){this._doFooterMergeChanged()},_doFooterMergeChanged:function(){var a=this.footer();a._footerMergeDirty&&this._footerMergeManager.buildRooms(this,a._mergeCells)},$_headerSummaryMergeChanged:function(){this._doHeaderSummaryMergeChanged()},_doHeaderSummaryMergeChanged:function(){var a=this.header().summary();a._headerSummaryMergeDirty&&this._headerSummaryMergeManager.buildRooms(this,a._mergeCells)},$_rowGroupAdornmentsChanged:function(){this._doRowGroupAdornmentsChanged()},_doRowGroupAdornmentsChanged:function(){},$_summaryModeChanged:function(){this._doSummaryModeChanged()},_doSummaryModeChanged:function(){},$_groupSummaryModeChanged:function(){this._doGroupSummaryModeChanged()},_doGroupSummaryModeChanged:function(){},_columnMergeRuleChanged:function(a){this._populateMerges(),this.refreshView()},$_columnFiltersChanged:function(a){this._doColumnFiltersChanged(a)},_doColumnFiltersChanged:function(a){this._fireFilteringChanged()},$_columnFilterActionsChanged:function(a){this._doColumnFilterActionsChanged(a)},_doColumnFilterActionsChanged:function(a){this.invalidateLayout()},$_columnFilterActionClicked:function(a,b,c){this._fireFilterActionClicked(a,b,c)},_editorStarted:function(a,b){this.edit(b)},_editorChange:function(a,b,c){this._fireEditChange(b,c)},getEditValue:function(a,b,c){this._doGetEditValue(b,c)},_doGetEditValue:function(a,b){this._fireGetEditValue(a,b)},editorCommit:function(a,b,c,d){return this._doCellCommit(b,c,d)},_doCellCommit:function(a,b,c){return this._fireEditCommit(a,b,c)},editorCancel:function(a,b){this._doCellCancel(b)},editorCanceled:function(){this.activeTool().resetFocused()},_doCellCancel:function(a){return this._fireEditCanceled(a)},_editorSearch:function(a,b,c){this._fireEditSearch(b,c)},$_validateCell:function(a,b,c){try{this._fireValidateCell(a,c,b)}catch(d){if(d instanceof Zg&&d.level!==ze.IGNORE)throw d.column=a.column(),d;throw d}},$_validateRow:function(a,b){for(var c=this.getDataColumns(),d=0,e=c.length;e>d;d++){var f=c[d],g=Ye.temp(this,a.index(),f),h=a.getData(f.dataIndex());this.$_validateCell(g,h,b)}var i=a.getRowObject();try{this._fireValidateRow(a,b,i)}catch(j){if(j instanceof Zg&&j.level!==ze.IGNORE)throw j;throw j}},$_validateCellValue:function(a,b){try{var c=me.isInserting(a.item().itemState());return this._validationManager.validateCell(a,c),this.$_validateCell(a,b,c),a.dataColumn().setError(null),a.dataColumn().setErrorLevel(ze.IGNORE),!0}catch(d){if(!(d instanceof Zg))throw d;a.dataColumn().setError(d.message||d),a.dataColumn().setErrorLevel(d.level||ze.ERROR)}return!1},validateCellCommit:function(a,b){this.editOptions().isValidateOnEdited()&&this.$_validateCellValue(a,b)},scrollRow:function(a){var b=this.topIndex();this.setTopIndex(b+a),a=this.topIndex()-b},$_getFieldDefaults:function(a){function b(a,c){for(var d=0;d<a.count();d++){var e=ab(a.getItem(d),rk);if(e&&e.dataIndex()==d){var f=e.defaultValue();if(f!=ta)return f}var g=ab(a.getItem(d),ak);if(g&&(f=b(g,d),f!=ta))return f}return ta}for(var c=this.dataSource().fieldCount(),d=[],e=0;c>e;e++)d.push(ta);for(e=0;c>e;e++)b(this._rootColumn,e);return d},$_getColumnDefaults:function(a,b){for(var c=0,d=a.count();d>c;c++){var e=a.getItem(c);e instanceof rk?b[e.dataIndex()]=e.defaultValue():e instanceof ak&&this.$_getColumnDefaults(e,b)}},$_getItemDefaults:function(a,b){},$_readDefaultValues:function(a){},$_getInsertDefaults:function(a){var b=this.$_getFieldDefaults(this.itemSource().dataSource());return this.$_getColumnDefaults(this._rootColumn,b),this.$_getItemDefaults(null,b),this.$_readDefaultValues(b),b},_clearColumnErrors:function(){function a(b){for(var c=0,d=b.count();d>c;c++){var e=b.getItem(c);e instanceof rk?e.setError(null):e instanceof ak&&a(e)}}a(this._rootColumn)},$_checkCurrentRow:function(a){if(this._focusedIndex){var b=this._focusedIndex.dataId(),c=this._focusedIndex.dataRow();if(a||b!=this._currentRowId){clearTimeout(this._rowChangeTimer);var d=this._currentRow,e=this._displayOptions.rowChangeDelay(),f=a||0>=e;return this._currentRowId=b,this._currentRow=c,f?this._fireCurrentRowChanged(d,c):e>0&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(d,c)}.bind(this),e)),!0}}return!1},$_checkLastCellCommit:function(a){a&&a.isLast()},_fireCurrentChanging:function(a,b){return this.fireConfirmEvent(em.CURRENT_CHANGING,a,b)},_fireCurrentChanged:function(a){return this.fireEvent(em.CURRENT_CHANGED,a)},_fireCurrentRowChanged:function(a,b){return this.fireEvent(em.CURRENT_ROW_CHANGED,a,b)},_fireValidateCell:function(a,b,c){return this.fireEvent(em.VALIDATE_CELL,a,b,c)},_fireValidateRow:function(a,b,c){return this.fireEvent(em.VALIDATE_ROW,a,b,c)},_fireValidationFail:function(a,b,c){return this.fireObjectEvent(em.VALIDATION_FAIL,a,b,c)},_fireColumnHeaderClicked:function(a){return this.fireEvent(em.COLUMN_HEADER_CLICKED,a)},_fireColumnHeaderDblClicked:function(a){return this.fireEvent(em.COLUMN_HEADER_DBL_CLICKED,a)},_fireColumnCheckedChanged:function(a){return this.fireEvent(em.COLUMN_CHECKED_CHANGED,a)},_fireFooterCellClicked:function(a){return this.fireEvent(em.FOOTER_CELL_CLICKED,a)},_fireFooterCellDblClicked:function(a){return this.fireEvent(em.FOOTER_CELL_DBL_CLICKED,a)},_fireHeaderSummaryCellClicked:function(a){return this.fireEvent(em.HEADERSUMMARY_CELL_CLICKED,a)},_fireHeaderSummaryCellDblClicked:function(a){return this.fireEvent(em.HEADERSUMMARY_CELL_DBL_CLICKED,a)},_fireCheckBarHeadClicked:function(){return this.fireEvent(em.CHECK_BAR_HEAD_CLICKED)},_fireCheckBarFootClicked:function(){return this.fireEvent(em.CHECK_BAR_FOOT_CLICKED)},_fireIndicatorCellClicked:function(a){return this.fireEvent(em.INDICATOR_CELL_CLICKED,a)},_fireStateBarCellClicked:function(a){return this.fireEvent(em.STATE_BAR_CELL_CLICKED,a)},_fireRowGroupHeadClicked:function(){return this.fireEvent(em.ROWGROUP_HEAD_CLICKED)},_fireRowGroupFootClicked:function(){return this.fireEvent(em.ROWGROUP_FOOT_CLICKED)},_fireRowGroupHeaderFooterClicked:function(a,b){return this.fireEvent(em.ROWGROUP_HEADER_FOOTER_CLICKED,a,b)},_fireRowGroupBarClicked:function(a){return this.fireEvent(em.ROWGROUP_BAR_CLICKED,a)},_fireCheckBarFootDblClicked:function(){return this.fireEvent(em.CHECK_BAR_FOOT_DBL_CLICKED)},_fireIndicatorCellDblClicked:function(a){return this.fireEvent(em.INDICATOR_CELL_DBL_CLICKED,a)},_fireStateBarCellDblClicked:function(a){return this.fireEvent(em.STATE_BAR_CELL_DBL_CLICKED,a)},_fireRowGroupHeadDblClicked:function(){return this.fireEvent(em.ROWGROUP_HEAD_DBL_CLICKED)},_fireRowGroupFootDblClicked:function(){return this.fireEvent(em.ROWGROUP_FOOT_DBL_CLICKED)},_fireRowGroupHeaderFooterDblClicked:function(a,b){return this.fireEvent(em.ROWGROUP_HEADER_FOOTER_DBL_CLICKED,a,b)},_fireRowGroupBarDblClicked:function(a){return this.fireEvent(em.ROWGROUP_BAR_DBL_CLICKED,a)},_firePanelClicked:function(){return this.fireEvent(em.PANEL_CLICKED)},_firePanelDblClicked:function(){return this.fireEvent(em.PANEL_DBL_CLICKED)},_fireRowGroupPanelClicked:function(a){return this.fireEvent(em.ROWGROUP_PANEL_CLICKED,a)},_fireRowGroupPanelDblClicked:function(a){return this.fireEvent(em.ROWGROUP_PANEL_DBL_CLICKED,a)},_fireMenuItemClicked:function(a,b){return this.fireEvent(em.MENU_ITEM_CLICKED,a,b)},_fireContextMenuPopup:function(a,b){return this.fireEvent(em.CONTEXT_MENU_POPUP,a,b)},_fireContextMenuItemClicked:function(a,b){return this.fireEvent(em.CONTEXT_MENU_ITEM_CLICKED,a,b)},_fireCellButtonClicked:function(a){return this.fireEvent(em.CELL_BUTTON_CLICKED,a)},_fireEditButtonClicked:function(a){return this.fireEvent(em.EDIT_BUTTON_CLICKED,a)},_fireImageButtonClicked:function(a){return this.fireEvent(em.IMAGE_BUTTON_CLICKED,a)},_fireScrollToBottom:function(){return this.fireEvent(em.SCROLL_TO_BOTTOM)},_fireDataCellClicked:function(a){return this.fireEvent(em.DATA_CELL_CLICKED,a)},_fireDataCellDblClicked:function(a){return this.fireEvent(em.DATA_CELL_DBL_CLICKED,a)},_fireRowsDeleting:function(a){return this.fireConfirmEvent(em.ROWS_DELETING,a)},_fireRowInserting:function(a,b){return this.fireConfirmEvent(em.ROW_INSERTING,a,b)},_fireItemCommit:function(a,b){return this.fireEvent(em.ITEM_COMMIT)},_fireSelectionChanged:function(){return this.fireEvent(em.SELECTION_CHANGED)},_fireSelectionAdded:function(a){return this.fireEvent(em.SELECTION_ADDED,a)},_fireSelectionRemoved:function(){return this.fireEvent(em.SELECTION_REMOVED)},_fireSelectionCleared:function(){return this.fireEvent(em.SELECTION_CLEARED)},_fireSelectionResized:function(){return this.fireEvent(em.SELECTION_RESIZED)},_fireSelectionEnded:function(a){return this.fireEvent(em.SELECTION_ENDED,a)},_fireUpdateStarted:function(a,b){return this.fireEvent(em.UPDATE_STARTED,a)},_fireInsertStarted:function(a,b){return this.fireEvent(em.INSERT_STARTED,a,b)},_fireShowEditor:function(a){return this.fireConfirmEvent(em.SHOW_EDITOR,a)},_fireHideEditor:function(){return this.fireEvent(em.HIDE_EDITOR)},_fireEditChange:function(a,b){return this.fireEvent(em.EDIT_CHANGE,a,b)},_fireGetEditValue:function(a,b){return this.fireEvent(em.GET_EDIT_VALUE,a,b)},_fireEditCommit:function(a,b,c){return this.fireConfirmEvent(em.EDIT_COMMIT,a,b,c)},_fireEditCanceled:function(a){return this.fireEvent(em.EDIT_CANCELED,a)},_fireItemEditCanceled:function(a){return this.fireEvent(em.ITEM_EDIT_CANCELED,a)},_fireEditSearch:function(a,b){this.fireEvent(em.EDIT_SEARCH,a,b)},_fireCellEdited:function(a,b){this.fireEvent(em.CELL_EDITED,a,b)},_fireEditRowChanged:function(a,b,c,d){this.fireEvent(em.EDIT_ROW_CHANGED,a,b,c,d)},_fireEditItemPasted:function(a,b,c,d){this.fireEvent(em.EDIT_ROW_PASTED,a,b,c,d)},_fireItemsPasted:function(a){this.fireEvent(em.ROWS_PASTED,a)},_fireItemChecked:function(a){this.fireEvent(em.ITEM_CHECKED,a,a.isChecked())},_fireItemsChecked:function(a,b){this.fireEvent(em.ITEMS_CHECKED,a,b)},_fireItemAllChecked:function(a){this.fireEvent(em.ITEM_ALL_CHECKED,a)},_fireErrorClicked:function(a,b){this.fireEvent(em.ERROR_CLICKED,b)},_fireSorting:function(a,b){return this.fireConfirmEvent(em.SORTING,a,b)},_fireFiltering:function(){return this.fireConfirmEvent(em.FILTERING)},_fireFilterActionClicked:function(a,b,c){this.fireEvent(em.FILTER_ACTION_CLICKED,a,b,c)},_fireKeyDown:function(a,b,c,d){return this.fireConfirmEvent(em.KEY_DOWN,a,b,c,d)},_fireKeyPress:function(a){this.fireEvent(em.KEY_PRESS,a)},_fireKeyUp:function(a,b,c,d){this.fireEvent(em.KEY_UP,a,b,c,d)},_fireShowTooltip:function(a,b){return this.fireObjectEvent(em.SHOW_TOOLTIP,a,b)},_fireShowHeaderTooltip:function(a,b){return this.fireObjectEvent(em.SHOW_HEADER_TOOLTIP,a,b)},onPopupMenuManagerMenuItemClicked:function(a,b,c){this._fireMenuItemClicked(b,c)},onScrollBarScrolled:function(a,b,c,d){if(a.isVertical())switch(b){case um.LINE_DOWN:case um.LINE_UP:this.scrollRow(c);break;case um.PAGE_DOWN:case um.PAGE_UP:this.setTopIndex(this.topIndex()+c*a._page);break;case um.THUMB_TRACK:this.displayOptions().isLiveScroll()?this.setTopIndex(d):this._vscrollBar.setPosition(d,!0);break;default:this.setTopIndex(d)}else switch(b){case um.LINE_RIGHT:case um.LINE_LEFT:this.setLeftPos(this.leftPos()+8*c);break;case um.PAGE_RIGHT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToNextColumn()):this.setLeftPos(this.leftPos()+a._page);break;case um.PAGE_LEFT:this._layoutManager?this.setLeftPos(this._layoutManager.scrollToPrevColumn()):this.setLeftPos(this.leftPos()-a._page);
break;case um.THUMB_TRACK:this.displayOptions().isHorizLiveScroll()?this.setLeftPos(d):this._hscrollBar.setPosition(d,!0);break;default:this.setLeftPos(d)}},onImageListImageLoaded:function(a,b){var c=a.getImage(b);Ea(a.name()+"'s image loaded at "+b+" ["+c.width+","+c.height+"]"),this.invalidateLayout()},onItemProviderReset:function(a){k(">> onItemProviderReset"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.resetGrid()},onItemProviderRefresh:function(a){k(">> onItemProviderRefresh"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.refreshView()},onItemProviderRefreshClient:function(a){k(">> onItemProviderRefreshClient"),this.hideEditor(),this._dataChanged=!0,this._resetColumnIndicies(),this._populateMerges(),this.refreshView()},onItemProviderItemInserted:function(a,b){k(">> onItemProviderItemInserted: "+b.dataRow()),this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.refreshView()},onItemProviderItemDeleted:function(a,b){k(">> onItemProviderItemDeleted: "+b.dataRow()),this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.refreshView()},onItemProviderItemUpdated:function(a,b){k(">> onItemProviderItemUpdated: "+b.dataRow()),this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.refreshView()},onItemProviderCheckableChanged:function(a,b){k(">> onItemProviderCheckableChanged: "+b.dataRow()+", "+b.isCheckable()),this.refreshView()},onItemProviderItemChecked:function(a,b){k(">> onItemProviderItemChecked: "+b.dataRow()+", "+b.isChecked()),this.refreshView(),this._fireItemChecked(b)},onItemProviderItemsChecked:function(a,b,c){k(">> onItemProviderItemsChecked: "+b.length+" items, "+c),this.refreshView(),this._fireItemsChecked(b,c)},onItemProviderItemAllChecked:function(a,b){k(">> onItemProviderItemAllChecked: "+b),this.refreshView(),this._fireItemAllChecked(b)},onItemProviderRowStateChanged:function(a,b){k(">> onItemProviderRowStateChanged: "+b.dataRow()),this.refreshView()},onItemProviderRowStatesChanged:function(a,b){k(">> onItemProviderRowStatesChanged"),this.refreshView()},onItemProviderRowStatesCleared:function(a){k(">> onItemProviderRowStatesCleared"),this.refreshView()},onItemProviderSort:function(a,b,c){k(">> onItemProviderSort"),this.refreshView()},onItemProviderSorted:function(a){k(">> onItemProviderSorted"),this.refreshView(),this.fireEvent(em.SORTING_CHANGED)},onItemProviderFilterAdded:function(a){k(">> onItemProviderFilterAdded")},onItemProviderFilterRemoved:function(a){k(">> onItemProviderFilterRemoved")},onItemProviderFilterCleared:function(a){k(">> onItemProviderFilterCleared")},onItemProviderFilterAllCleared:function(a){k("onItemProviderFilterAllCleared")},onItemProviderFiltered:function(a){this.refreshView(),this.fireEvent(em.FILTERING_CHANGED)},$_focusEditItem:function(a){var b=this.getIndex(a.index(),this.focusedIndex()?this.focusedIndex().column():null);!b.C()&&this.visibleColumnCount()>0&&(b._column=this.getVisibleColumn(0)),this.setFocusedIndex(b,!0),this.makeCellVisible(this.focusedIndex())},onItemEditUpdateStarted:function(a,b){this._clearColumnErrors(),this.refreshView(),this._fireUpdateStarted(b)},onItemEditAppendStarted:function(a,b){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(b),this._fireInsertStarted(b,!0)},onItemEditInsertStarted:function(a,b){this.hideEditor(),this.reprepareEditor(),this._clearColumnErrors(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(b),this._fireInsertStarted(b,!1)},onItemEditCellEdited:function(a,b,c){this.refreshView(),this._fireCellEdited(b,c)},onItemEditCellUpdated:function(a,b,c,d,e){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(b,c,d,e)},onItemEditCommitting:function(a,b){},onItemEditCommitted:function(a,b){this.hideEditor(),this.refreshView()},onItemEditCanceled:function(a){this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(a._editingItem)},onItemEditCommitRequest:function(a){this.commit(!1)},onItemEditCancelReuqest:function(a){this.cancel()},onLookupSourceProviderChanged:function(a){this.refreshView()},onSelectionChanged:function(a){this._fireSelectionChanged()},onSelectionAdded:function(a,b){this._addSelectionView(b),this._layoutSelectionViews(),this._fireSelectionAdded(b),this._fireSelectionChanged()},onSelectionRemoved:function(a){this._fireSelectionRemoved(),this._fireSelectionChanged()},onSelectionCleared:function(a){this._clearSelectionViews(),this._fireSelectionCleared(),this._fireSelectionChanged()},onSelectionResized:function(a,b){this._layoutSelectionViews(),this._fireSelectionResized(),this._fireSelectionChanged()},onSelectionEnded:function(a,b){this._fireSelectionEnded(b)},onMenuItemClick:function(a,b){this._fireContextMenuItemClicked(a,b)}},{setGridMapper:function(a){em._gridMapper=a},createColumn:function(a){if(a){var b;b="group"==a.type||a.columns?new ak:"series"==a.type?new tk:new rk,b.assign(a);var c,d=em._gridMapper;if(d&&(c=d.column))for(var e in c){var f=c[e];a.hasOwnProperty(f)&&b.setProperty(e,a[f])}if(b instanceof ak&&a.columns){var g=em.createColumns(a.columns);b.setColumns(g)}return b}return null},createColumns:function(a){if(s(a)){for(var b=[],c=0,d=a.length;d>c;c++){var e=em.createColumn(a[c]);e&&b.push(e)}return b}return null}});em.CURRENT_CHANGING="onGridBaseCurrentChanging",em.CURRENT_CHANGED="onGridBaseCurrentChanged",em.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",em.VALIDATE_CELL="onGridBaseValidateCell",em.VALIDATE_ROW="onGridBaseValidateRow",em.VALIDATION_FAIL="onGridBaseValidationFail",em.COLUMN_HEADER_CLICKED="onGridBaseColumnHeaderClicked",em.COLUMN_HEADER_DBL_CLICKED="onGridBaseColumnHeaderDblClicked",em.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",em.FOOTER_CELL_CLICKED="onGridBaseFooterCellClicked",em.FOOTER_CELL_DBL_CLICKED="onGridBaseFooterCellDblClicked",em.HEADERSUMMARY_CELL_CLICKED="onGridBaseHeaderSummaryCellClicked",em.HEADERSUMMARY_CELL_DBL_CLICKED="onGridBaseHeaderSummaryCellDblClicked",em.CHECK_BAR_HEAD_CLICKED="onGridBaseCheckBarHeadClicked",em.CHECK_BAR_FOOT_CLICKED="onGridBaseCheckBarFootClicked",em.INDICATOR_CELL_CLICKED="onGridBaseIndicatorCellClicked",em.STATE_BAR_CELL_CLICKED="onGridBaseStateBarCellClicked",em.ROWGROUP_HEAD_CLICKED="onGridBaseRowGroupHeadClicked",em.ROWGROUP_FOOT_CLICKED="onGridBaseRowGroupFootClicked",em.ROWGROUP_BAR_CLICKED="onGridBaseRowGroupBarClicked",em.ROWGROUP_HEADER_FOOTER_CLICKED="onGridBaseRowGroupHeaderFooterClicked",em.CHECK_BAR_FOOT_DBL_CLICKED="onGridBaseCheckBarFootDblClicked",em.INDICATOR_CELL_DBL_CLICKED="onGridBaseIndicatorCellDblClicked",em.STATE_BAR_CELL_DBL_CLICKED="onGridBaseStateBarCellDblClicked",em.ROWGROUP_HEAD_DBL_CLICKED="onGridBaseRowGroupHeadDblClicked",em.ROWGROUP_FOOT_DBL_CLICKED="onGridBaseRowGroupFootDblClicked",em.ROWGROUP_BAR_DBL_CLICKED="onGridBaseRowGroupBarDblClicked",em.ROWGROUP_HEADER_FOOTER_DBL_CLICKED="onGridBaseRowGroupHeaderFooterDblClicked",em.PANEL_CLICKED="onGridBasePanelClicked",em.PANEL_DBL_CLICKED="onGridBasePanelDblClicked",em.ROWGROUP_PANEL_CLICKED="onGridBaseRowGroupPanelClicked",em.ROWGROUP_PANEL_DBL_CLICKED="onGridBaseRowGroupPanelDblClicked",em.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",em.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",em.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",em.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",em.IMAGE_BUTTON_CLICKED="onGridBaseImageButtonClicked",em.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",em.CLICKABLE_CELL_CLICKED="onGridBaseClickableCellClicked",em.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",em.DATA_CELL_CLICKED="onGridBaseDataCellClicked",em.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",em.ROWS_DELETING="onGridBaseRowsDeleting",em.ROW_INSERTING="onGridBaseRowInserting",em.SELECTION_ADDED="onGridBaseSelectionAdded",em.SELECTION_CHANGED="onGridBaseSelectionChanged",em.SELECTION_REMOVED="onGridBaseSelectionRemoved",em.SELECTION_CLEARED="onGridBaseSelectionCleared",em.SELECTION_RESIZED="onGridBaseSelectionResized",em.SELECTION_ENDED="onGridBaseSelectionEnded",em.INSERT_STARTED="onGridBaseInsertStarted",em.UPDATE_STARTED="onGridBaseUpdateStarted",em.SHOW_EDITOR="onGridBaseShowEditor",em.HIDE_EDITOR="onGridBaseHideEditor",em.EDIT_CHANGE="onGridBaseEditChange",em.GET_EDIT_VALUE="onGridBaseGetEditValue",em.EDIT_COMMIT="onGridBaseEditCommit",em.EDIT_CANCELED="onGridBaseEditCanceled",em.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",em.EDIT_SEARCH="onGridBaseEditSearch",em.CELL_EDITED="onGridBaseCellEdited",em.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",em.EDIT_ROW_PASTED="onGridBaseEditRowPasted",em.ROWS_PASTED="onGridBaseRowsPasted",em.ITEM_CHECKED="onGridBaseItemChecked",em.ITEMS_CHECKED="onGridBaseItemsChecked",em.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",em.ERROR_CLICKED="onGridBaseErrorClicked",em.SORTING="onGridBaseSorting",em.SORTING_CHANGED="onGridBaseSortingChanged",em.FILTERING="onGridBaseFiltering",em.FILTERING_CHANGED="onGridBaseFilteringChanged",em.FILTER_ACTION_CLICKED="onGridBaseFilterActionClicked",em.KEY_PRESS="onGridBaseKeyPress",em.KEY_DOWN="onGridBaseKeyDown",em.KEY_UP="onGridBaseKeyUp",em.SHOW_TOOLTIP="onGridBaseShowTooltip",em.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip";var fm=Xa("GridBaseObserver",null,{init:function(){this._super()},onGridBaseCurrentChanging:function(a,b,c){},onGridBaseCurrentChanged:function(a,b){},onGridBaseCurrentRowChanged:function(a,b,c){},onGridBaseValidateCell:function(a,b,c,d){},onGridBaseValidateRow:function(a,b,c,d){},onGridBaseColumnHeaderClicked:function(a,b){},onGridBaseMenuItemClicked:function(a,b){},onGridBaseCellButtonClicked:function(a,b){},onGridBaseEditButtonClicked:function(a,b){},onGridBaseScrollToBottom:function(a){}}),gm=Xa("RootColumn",ak,{init:function(a){this._super(),this._owner=a,this._columnMap={},this._header._visible=!1},grid:function(){return this._owner},_columnAdded:function(a){this._super(a),this._columnMap[a.$_hash]=a;var b=ab(a,ak);b&&this.$_groupAdded(b)},_columnRemoved:function(a){},$_groupAdded:function(a){for(var b=0,c=a.count();c>b;b++){var d=a.getItem(b),e=ab(d,ak);this._columnMap[d.$_hash]=d,e&&this.$_groupAdded(e)}}}),hm=Xa("DataRootCollection",null,{init:function(){this._super(),this._root=null,this._dataRoots=[],this._list=[]},roots:function(){return this._dataRoots},collect:function(a){this._root=a,this._dataRoots.length=0,a.visibleCount()>0&&(this.$_collectGroup(a),this.$_checkValid(a))},collectDataColumns:function(a,b){var c=[];a.dataRoot()!==a&&(a=a.dataRoot()),b.dataRoot()!=b&&(b=b.dataRoot());var d=ab(a,ak);d&&(a=ak.getFirstDataRoot(d)),d=ab(b,ak),d&&(b=ak.getLastDataRoot(d));var e,f,g,h,i=this._dataRoots.indexOf(a),j=this._dataRoots.indexOf(b);for(i>j&&(h=i,i=j,j=h),h=i;j>=h;h++)if(e=this._dataRoots[h],e.isVisible())if(d=ab(e,ak))for(this._list.length=0,this.$_collectDataColumns(d,this._list),f=0,g=this._list.length;g>f;f++)c.push(this._list[f]);else e instanceof rk&&c.push(e);return c},$_collectGroup:function(a){var b,c,d,e=a.visibleCount();if(1>e)this._dataRoots.push(a);else if(1==e)b=a.getVisibleItem(0),c=ab(b,ak),c?this.$_collectGroup(c):this._dataRoots.push(b);else if(a.isVertical())this._dataRoots.push(a);else for(d=0;e>d;d++)b=a.getVisibleItem(d),c=ab(b,ak),c?this.$_collectGroup(c):this._dataRoots.push(b)},$_collectDataColumns:function(a,b){for(var c=0,d=a.visibleCount();d>c;c++){var e=a.getVisibleItem(c);e instanceof rk?b.push(e):e instanceof ak&&this.$_collectDataColumns(e,b)}},$_checkValid:function(a){}}),im=Xa("DummyEditController",null,{init:function(a){this._super(),this._grid=a,this._editIndex=new Ye},editIndex:function(){return this._editIndex.clone()},isEditing:function(){return!1},setFocus:function(){this._grid.container().setFocus()},resetEditor:function(a){},reprepareEditor:function(a){},invalidateEditor:function(){},closeList:function(){},focusedIndexChanging:function(){return this._grid._readMode?!0:void 0},focusedIndexChanged:function(a,b){},showEditor:function(a){},hideEditor:function(){},commitEditor:function(a){return!0},cancelEditor:function(a){},fillSearchItems:function(a,b,c,d){},buttonClicked:function(a){},_focusHandler:function(a){},onEditorStart:function(a){},onEditorKeyDown:function(a,b,c,d){},onEditorChange:function(a){},onEditorSearch:function(a,b){}}),jm=Xa("GridView",em,{init:function(a,b,c){if(this._super(a,b,c),this._items=this._createItemSource(),!this._items)throw new Error("ItemProvider can not be null");this.setItemSource(this._items),this.groupingOptionsChanged()},pageCount:0,rowGroupLevels:function(){return this._items.groupLevels()},rowGroupFields:function(){return this._items.groupByFields()},isRowGrouped:function(){return this._items.isGrouped()},isMergedRowGrouped:function(){return this._items.isMergedRowGrouped()},page:function(){return this._items.page()},pageCount_:function(){return this._items.pageCount()},setPageCount:function(a){var b=this._items.pageCount();this._items.setPageCount(a),this._items.pageCount()!=b&&this._firePageCountChanged(this._items.pageCount())},isGrouped:function(a){return a&&a.groupLevel()>0},groupByFieldNames:function(a,b,c){var d=this.dataSource();if(d&&a&&a.length>0){for(var e,f,g,h=[],e=0;e<a.length;e++){var f=parseInt(a[e]),g=isNaN(f)?d.getFieldIndex(a[e]):f;g>=0&&h.push(g)}h.length>0&&this.groupBy(h,b,c)}else this.ungroupBy()},groupBy:function(a,b,c){this.isItemEditing(null)||this._toastManager.show(this.groupingOptions().toast(),!0,function(){this.$_doGroupBy(a,b,c)}.bind(this))},$_getVisibleRootByField:function(a){var b,c,d=this.visibleColumnCount();for(b=0;d>b;b++)if(c=ab(this.getVisibleColumn(b),rk),c&&c.dataIndex()==a)return c;return null},$_doGroupBy:function(a,b,c){var d,e=this.dataSource();if(this.clearColumnMergeGrouped(),e&&a&&(d=a.length)>0){var f,g=[];for(f=0;d>f;f++)a[f]>=0&&a[f]<e.fieldCount()&&g.push(a[f]);if(g.length>0){if(this.rowGroup().isMergeMode())for(f=g.length-1;f>=0;f--){var h=this.$_getVisibleRootByField(g[f]);h?h._setMergeGrouped(!0):g.splice(f,1)}g.length>0&&this._items.groupBy(g,b,c)}}else this._items.groupBy(null,!0,te.ASCENDING);this._doRowGroupFooterMergeChanged()},clearGroupBy:function(){this.isItemEditing(null)||(this._items.groupBy(null,!0,te.ASCENDING),this._doRowGroupFooterMergeChanged())},ungroupBy:function(){this.clearGroupBy()},getGroupByFields:function(){return this._items.groupByFields()},addGroupBy:function(a,b){this.isItemEditing(null)||this.isGrouped(b)||b.isVisible()&&(b.isRoot()||!this.rowGroup().isMergeMode())&&b.dataIndex()>=0&&this._toastManager.show(this.groupingOptions().toast(),!0,function(){this.$_doAddGroupBy(a,b)}.bind(this))},$_doAddGroupBy:function(a,b){b._setMergeGrouped(this.rowGroup().isMergeMode());try{this._items.addGroupBy(a,b.dataIndex()),this._doRowGroupFooterMergeChanged()}catch(c){throw b._setMergeGrouped(!1),c}},removeGroupBy:function(a){if(!this.isItemEditing(null)&&this.isGrouped(a)){var b=this.groupingOptions().isRemoveIncludeLower();this._items.removeGroupBy(a.dataIndex(),b),this._doRowGroupFooterMergeChanged()}},expand:function(a,b,c){this.isItemEditing(null)||this._items.expand(a,b,c)},collapse:function(a,b){this.isItemEditing(null)||this._items.collapse(a,b)},getCheckedItems:function(a){for(var b=[],c=0,d=this.itemCount();d>c;c++){var e=this.getItem(c);e.isChecked()&&(a||e.dataRow()>=0)&&b.push(e)}return b},getCheckedItemIndices:function(a){for(var b=[],c=0,d=this.itemCount();d>c;c++){var e=this.getItem(c);e.isChecked()&&(a||e.dataRow()>=0)&&b.push(e.index())}return b},getCheckedRows:function(a,b){var c,d,e;if(b){e=[];for(var f=0,g=this.itemCount();g>f;f++)d=this.getItem(f),d.isChecked()&&(c=d.dataRow())>=0&&e.push(c)}else e=this._items.getCheckedRows();return a&&e.sort(function(a,b){return a-b}),e},getMergedItems:function(a,b){"string"==typeof b?b=this.columnByName(b):b&&b.$_hash&&(b=this.columnByHash(b.$_hash));var c=Ye.temp(this,a,b),d=this.layoutManager().getMergedCell(c),e=[];if(d)for(var f=d.headItem(),g=d.tailItem();g>=f;f++){var h=this.getItem(f);h instanceof Xf&&e.push(f)}return e},setPaging:function(a,b,c,d){b=arguments.length>1?b:10,c=arguments.length>2?c:-1,this._items.setPaging(a,b,c,null)},setPage:function(a,b){if(b=arguments.length>1?b:-1,a=Math.max(0,Math.min(a,this._items.pageCount()-1)),a!=this._items.page()){var c=!1;this._firePageChanging(a)&&(this._items.setPage(a,b),c=!0),c&&this._firePageChanged(this._items.page())}},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},dataSource:function(){return this._items&&this._items.dataSource()},setDataSource:function(a){var b=this.dataSource();this._items&&this._items.setDataSource(a),this.dataSource()!==b&&this.dataSource()&&this.applyFilters()},maxItemCount:function(){return this._items.maxItemCount()},setMaxItemCount:function(a){this._items.setMaxItemCount(a)},_createLayoutManager:function(){return new km(this)},_createItemSource:function(){var a=new lg(!0);return a.setSummaryMode(this.summaryMode()),a.setRowGroupSummaryMode(this.rowGroup().summaryMode()),a},_createPanelView:function(){return new mm(this._dom)},_doColumnsReset:function(a){this.ungroupBy(),this._super(a)},_visualObjectChanged:function(a){this._super(a),a instanceof sh&&this._items.setCheckableExpression(a.checkableExpression())},getSummarizer:function(){return this._items.summarizer()},_doSortItems:function(a,b,c){this._items.orderBy(a,b,c)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},isGroupedColumn:function(a){return a&&this._items.isGroupedField(a.dataIndex())},getGroupLevels:function(){return this._items.getGroupLevels()},getGroupLevel:function(a){return this._items.getGroupLevel(a)},_doGroupingOptionsChanged:function(){this._items.setExpandWhenGrouping(this.groupingOptions().isExpandWhenGrouping())},_doRowGroupAdornmentsChanged:function(){this._items.setGroupedStyle(this.rowGroup().expandedAdornments(),this.rowGroup().collapsedAdornments())},_canMerge:function(){return!0},_doRowGroupMergeModeChanged:function(){if(this.clearColumnMergeGrouped(),this.rowGroup().isMergeMode()){var a,b=this._items.groupByFields();if(b&&b.length>0)for(a=b.length-1;a>=0;a--){var c=this.$_getVisibleRootByField(b[a]);c?c._setMergeGrouped(!0):b.splice(a,1)}b&&b.length>0?this._items.groupByMode(b,!0):this._items.groupByMode(null,!0)}else this._items.setMergeMode(!1)},_doRowGroupFooterMergeChanged:function(){this._groupFooterMergeManager.buildRooms(this)},_doColumnFiltersChanged:function(a){this.applyFilters(),this.invalidateLayout()},_doSummaryModeChanged:function(){this._items.setSummaryMode(this.summaryMode())},_doGroupSummaryModeChanged:function(){this._items.setRowGroupSummaryMode(this.rowGroup().summaryMode())},_doGroupingOptionsChanged:function(){this._items.setExpandWhenGrouping(this.groupingOptions().isExpandWhenGrouping())},getIndicatorIndex:function(a){return this._items.getDisplayItemIndex(a)},updatePastedRow:function(a,b,c){var d=a.dataRow();if(d>=0){var e=ab(this.dataSource(),Df);e&&(c?e.updateStrictRow(d,b):e.updateRow(d,b))}},appendPastedRow:function(a){var b=ab(this.dataSource(),Df);b&&b.appendRow(a)},canMoveIndex:function(a){var b=this._super(a);return b&&this.isMergedRowGrouped()&&this.groupingOptions().isFixMergedColumns()&&(b=a>=this.rowGroupLevels()),b},canMoveToIndex:function(a){var b=this._super(a);return b&&this.isMergedRowGrouped()&&this.groupingOptions().isFixMergedColumns()&&(b=a>=this.rowGroupLevels()),b},_firePageChanging:function(a){return this.fireConfirmEvent(jm.PAGE_CHANGING,a)},_firePageChanged:function(a){return this.fireEvent(jm.PAGE_CHANGED,a)},_firePageCountChanged:function(a){return this.fireEvent(jm.PAGE_COUNT_CHANGED,a)},_fireGrouping:function(a){return this.fireConfirmEvent(jm.GROUPING,a)},_fireGrouped:function(){return this.fireEvent(jm.GROUPED)},_fireExpanding:function(a){return this.fireConfirmEvent(jm.EXPANDING,a)},_fireExpanded:function(a){return this.fireEvent(jm.EXPANDED,a)},_fireCollapsing:function(a){return this.fireConfirmEvent(jm.COLLAPSING,a)},_fireCollapsed:function(a){return this.fireEvent(jm.COLLAPSED,a)},onGroupedItemProviderGrouping:function(a,b){return this._fireGrouping(b)},$_clearGroupedIndex:function(a){var b,c,d;for(b=a.count()-1;b>=0;b--)c=a.getItem(b),d=ab(c,rk),d&&d.setGroupLevel(-1),c instanceof ak&&this.$_clearGroupedIndex(c)},$_setGroupedIndex:function(a){var b,c,d;for(b=a.count()-1;b>=0;b--)c=a.getItem(b),d=ab(c,rk),d&&d.setGroupLevel(this._items.getGroupLevel(d.dataIndex())),c instanceof ak&&this.$_setGroupedIndex(c)},onGroupedItemProviderGrouped:function(a){this.selections().clear(),this.$_clearGroupedIndex(this._rootGroup());var b=this._items.groupByFields();b&&b.length>0&&this.$_setGroupedIndex(this._rootGroup());var c,d,e,f;if(this.rowGroup().isMergeMode()){var g=[];for(c=this.visibleColumnCount(),d=0;c>d;d++)e=ab(this.getVisibleColumn(d),rk),e&&(e.isMergeGrouped()&&e.groupLevel()<=0?(f=ab(e.stateFor(rj.MERGE_ROOMS),rj),f&&f.clear(),e._setMergeGrouped(!1)):e.isMergeGrouped()&&(f=ab(e.stateFor(rj.MERGE_ROOMS),rj),f||(f=new rj(e),e.setState(rj.MERGE_ROOMS,f)),g.push(e)));if(c=g.length,c>0)for(g=g.sort(function(a,b){return a.groupLevel()-b.groupLevel()}),d=0;c>d;d++)g[d].setDisplayIndex(d),f=g[d].stateFor(rj.MERGE_ROOMS),f.clear(),f.initialize(nj.INIT_COUNT);for(c=this.visibleColumnCount(),d=0;c>d;d++)e=ab(this.getVisibleColumn(d),rk),e&&!e.isMergeGrouped()&&(f=e.stateFor(rj.MERGE_ROOMS),f&&(f.clear(),f.initialize(nj.INIT_COUNT)))}return this._fireGrouped()},onGroupedItemProviderExpand:function(a,b){return this._fireExpanding(b)},onGroupedItemProviderExpanded:function(a,b){return this._fireExpanded(b)},onGroupedItemProviderCollapse:function(a,b){return this._fireCollapsing(b)},onGroupedItemProviderCollapsed:function(a,b){return this._fireCollapsed(b)}});jm.PAGE_CHANGING="onGridViewPageChanging",jm.PAGE_CHANGED="onGridViewPageChanged",jm.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",jm.GROUPING="onGridViewGrouping",jm.GROUPED="onGridViewGrouped",jm.EXPANDING="onGridViewExpanding",jm.EXPANDED="onGridViewExpanded",jm.COLLAPSING="onGridViewCollapsing",jm.COLLAPSED="onGridViewCollapsed";var km=(Xa("GridViewObserver",fm,{init:function(){this._super()},onGridViewPageChanging:function(a,b){return!0},onGridViewPageChanged:function(a,b){},onGridViewPageCountChanged:function(a,b){},onGridGrouping:function(a,b){return!0},onGridGrouped:function(a){},onGridExpanding:function(a,b){return!0},onGridExpanded:function(a,b){},onGridCollapsing:function(a,b){return!0},onGridGCollapsed:function(a,b){}}),Xa("GridViewLayoutManager",Dk,{init:function(a){this._super(a)},isRowGrouped:function(){return!this.grid().rowGroup().isMergeMode()&&this.grid().isRowGrouped()},rowGroupLevels:function(){return this.grid().rowGroupLevels()}})),lm=Xa("GridViewSelectionTool",al,{init:function(a){this._super(a)},_getEditRequest:function(a,b,c,d,e){if(a instanceof om)return new sm(a);var f=this._super(a,b,c,d,e);if(f)return f;var g=this.grid();if(a instanceof vi){var h=a.index(),i=h.dataColumn();if(g.groupingOptions().isEnabled&&g.panel().isVisible()&&i&&i.isGroupable())return new qm(a)}return null},_getDragTracker:function(a,b,c){return a instanceof sm?new tm(this.grid(),a):a instanceof qm?new rm(this.grid(),a):this._super(a,b,c)},_doColumnHeaderClicked:function(a,b,c){if(this._super(a),!b){var d=this.grid(),e=ab(a,rk);!d.isEmpty()&&e&&e.isSortable()&&d.sortingOptions().isEnabled()&&d.sortColumn(e,c)}},_doHandleClicked:function(a){var b,c=this.grid();if(a instanceof ii){var d=c.leftPos;c.sortColumn(a.cellView().index().dataColumn()),c.setLeftPos(d)}else if(a instanceof bj)b=ab(a.cellView().item(),Zf),b&&(b.isExpanded()?c.collapse(b):c.expand(b,!1,!1));else if(a instanceof qi){if(b=a.group(),b&&(b.isExpanded()?c.collapse(b):c.expand(b,!1,!1),!b.isExpanded())){var e=b.index()>=0?b.index():b.firstItem().index();if(0>e&&b.footer()&&(e=b.footer().index()),e>=0){var f=c.getIndex(e);c.makeCellVisible(f)}}}else this._super(a)}}),mm=Xa("GridPanelElement",Vh,{init:function(a){this._super(a),this._messageView=new nm(a,"messageView"),this.addElement(this._messageView),this._groupByView=new pm(a,"groupByView"),this.addElement(this._groupByView),this._state=mm.NORMAL},state:0,groupingIndex:-1,setState:function(a){if(a!=this._state){switch(this._state=a,a){case mm.NORMAL:this._groupingIndex=-1;break;case mm.GROUPING:this._groupingIndex=this._groupByView.childCount();break;case mm.UNGROUPING:this._groupingIndex=0}this.layoutContent(null),this.invalidate()}},setGroupingIndex:function(a){a!=this._groupingIndex&&(this._groupingIndex=a,this.layoutContent(null),this.invalidate())},_doMeasure:function(a,b,c){var d,e,f=a.groupingOptions();return this._messageView.setText(f.prompt()),this._messageView.updateStyles(this.model().styles()),this._groupByView.setLinear(f.isLinear()),d=this._groupByView.measure(b,c).clone(),this._groupByView.fieldCount()<1&&(d=this._messageView.measure(b,c).clone()),e=this._super(a,b,c),d.width=Math.max(d.width,e.width),d.height=Math.max(d.height,e.height,30),d},_doLayoutContent:function(a){var b=this.width(),c=this.height();if(this._messageView.setVisible(this._state==mm.NORMAL&&!this.grid().isRowGrouped()),this._messageView.isVisible()){var d=this._messageView.measure(b,c);this._messageView.setBounds(4,0,d.width+10,c)}this._groupByView.setVisible(!0),this._groupByView.isVisible()&&(this._groupByView.setBounds(0,0,b,c),this._groupByView.layoutContent(a))}},{NORMAL:0,GROUPING:1,UNGROUPING:2}),nm=Xa("PanelMessageView",Vd,{init:function(a,b){this._super(a,b),this._paddingLeft=4},font:null,foreground:yd.BLACK,textAlignment:Ne.NEAR,text:null,measure:function(a,b){return new ld(a,20)},updateStyles:function(a){this._paddingLeft=a.paddingLeft(),this.setForeground(a.foreground()),this.setFont(a.font())},_doDraw:function(a){var b=this.getClientRect();a.drawTextRect(this.font(),this.foreground(),this._text,b,this.textAlignment())},_doDrawHtml:function(){var a=this.$_prepareSpan(),b=this.getClientRect();Jc.renderTextRect(a,this.font(),this.foreground(),this._text,b,this.textAlignment())}}),om=Xa("ColumnView",vi,{init:function(a,b,c){this._super(a,b,c),this._acceptable=!0,this._stroke=new Dd(2281701376,3),this.setShowHandles(!1)},setAcceptable:function(a){a!=this._acceptable&&(this._acceptable=a,this.invalidate())},_doMeasure:function(a,b,c){var d=this.container().measureText(this.font(),this.text())+this.paddingHorz()+2*this.borderWidth();return new ld(d,c)},_doPrepareElement:function(a){this._super(a),this.setShowHandles(!1)},_doRender:function(a,b){var c=this.border(),d=c?c.width():0,e=null;e=this.isHovered()?this.hoveredBackground()||this.background():this.background(),e&&a.drawRectI(e,null,b),d>0&&b.inflate(d,d),e=null,this.isHovered()?(e=this.hoveredForeground(),e||(e=this.foreground())):e=this.foreground(),e&&a.drawTextRect(this.font(),e,this.text(),b,id.CENTER),c&&(b.inflate(-d,-d),a.drawBoundsI(null,c,b.x,b.y,b.right()-1,b.bottom()-1)),this._acceptable||(b.inflate(-3,-3),a.drawLine(this._stroke,b.x,b.y,b.right(),b.bottom()),a.drawLine(this._stroke,b.right(),b.y,b.x,b.bottom()))}}),pm=Xa("GroupByView",Vd,{init:function(a,b){this._super(a,b),this._columnViews=[],this._fields=[],this._paddingLeft=8,this._paddingTop=4,this._paddingBottom=5,this._columnWidth=80,this._columnHeight=20},verticalGap:12,horizontalGap:12,linear:!1,fieldCount:function(){return this._fields?this._fields.length:0},measure:function(a,b){return this._fields=this.container().gridView().getGroupByFields(),this._fields&&this._fields.length>0?(this.$_prepareColumnViews(this._fields),new ld(a,this._paddingTop+this._paddingBottom+this._columnHeight+(this._linear?0:(this._fields.length-1)*this._verticalGap))):new ld(a,b)},layoutContent:function(a){this.$_layoutColumnViews(this._fields),this.invalidate()},_doDraw:function(a){if(this._fields&&!(this._fields.legnth<1)){var b=this.container().gridView().rowGroup().panelStyles().line();if(b){var c,d=this._fields.length;if(1>d)return;var e=this._columnViews[0],f=e.getBounds(),g=new kd;for(c=1;d>c;c++)e=this._columnViews[c],g=e.getBounds(),this._linear?a.drawLineI(b,f.right(),f.y+f.height/2,g.x,f.y+f.height/2):a.drawLinesI(b,f.right(),f.y+f.height/3,g.x+g.width/4,f.y+f.height/3,g.x+g.width/4,g.y),f.copy(g)}}},$_prepareColumnViews:function(a){if(this._fields&&this._fields.length>0)for(var b=this._fields.length;this._columnViews.length<b;)this._columnViews.push(new om(this.container().gridView(),this._dom))},$_layoutColumnViews:function(a){if(this.hideAll(),a&&!(a.length<1)){var b,c,d,e,f,g=this.container().gridView(),h=g.layoutManager(),i=a.length,j=this._paddingLeft,k=this._paddingTop;for(b=0;i>b;b++)c=g.getDataColumn(a[b]),d=g.header().getGroupingCell(c),e=this._columnViews[b],e.parent()==this?(e.setVisible(!0),e.invalidate()):this.addElement(e),e.updateCell(d),f=Math.max(this._columnWidth,e.measure(g,this._columnWidth,this._columnHeight).width),e.setBounds(j,k,f,this._columnHeight),e.layoutContent(h),j+=f+this._horizontalGap,this._linear||(k+=this._verticalGap)}}}),qm=Xa("RowGroupingRequest",el,{init:function(a){this._super(a)},groupIndex:-1,column:function(){return ab(this.cell().index().column(),rk)},cursor:function(){return null}}),rm=Xa("RowGroupingTracker",dl,{init:function(a,b){this._super(a,"rowGroupingTracker"),this._request=b,this._columnView=null,this._panelView=a.panelView()},request:function(){return this._request},_doStart:function(a,b){return this._panelView.setState(mm.GROUPING),!0},_canAccept:function(a,b){return b-2<this.grid().layoutManager().headerBounds().y},_doCompleted:function(){var a=this.grid();a.isGrouped(this._request.column())||a.addGroupBy(this._panelView.groupingIndex(),this._request.column())},_doEnded:function(){this._panelView.setState(mm.NORMAL)},_showFeedback:function(a,b){var c=this.grid(),d=Ye.temp(c,-1,this._request.column());this._columnView||(this._columnView=new om(c,c._dom)),this._columnView.updateCell(c.header().getCell(d)),this._columnView.setBounds(0,0,100,20),this._columnView.invalidate(),this._columnView.setAcceptable(!c.isGrouped(this._request.column())),c.addFeedbackElement(this._columnView),this._columnView.move(c.containerToGridX(a)-4,c.containerToGridY(b)-2)},_moveFeedback:function(a,b){var c=this.grid();this._columnView.move(c.containerToGridX(a)-4,c.containerToGridY(b)-2)},_hideFeedback:function(){this.grid().removeFeedbackElement(this._columnView)}}),sm=Xa("PanelCellRequest",el,{init:function(a){this._super(a)},groupIndex:-1,column:function(){return ab(this.cell().index().column(),rk)},cursor:function(){return null}}),tm=Xa("PanelCellTracker",dl,{init:function(a,b){this._super(a,"panelCellTracker"),this._request=b,this._columnView=null,this._panelView=a.panelView()},request:function(){return this._request},_doStart:function(a,b){return this._panelView.setState(mm.NORMAL),!0},_canAccept:function(a,b){return b-2>=this.grid().layoutManager().headerBounds().y},_showFeedback:function(a,b){var c=this.grid(),d=Ye.temp(c,-1,this._request.column());this._columnView||(this._columnView=new om(c,c._dom)),this._columnView.updateCell(c.header().getCell(d)),this._columnView.setBounds(0,0,100,20),this._columnView.invalidate(),c.addFeedbackElement(this._columnView),this._columnView.move(c.containerToGridX(a)-4,c.containerToGridY(b)-2)},_moveFeedback:function(a,b){var c=this.grid();this._columnView.move(c.containerToGridX(a)-4,c.containerToGridY(b)-2)},_hideFeedback:function(){var a=this.grid();a.removeFeedbackElement(this._columnView)},_doCompleted:function(){var a=this.grid();a.removeGroupBy(this._request.column())}}),um={LINE_UP:"lineUp",LINE_DOWN:"lineDown",LINE_LEFT:"lineLeft",LINE_RIGHT:"lineRight",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",PAGE_LEFT:"pageLeft",PAGE_RIGHT:"pageRight",THUMB_TRACK:"thumbTrack",THUMB_END:"thumbEnd"},vm=Xa("ScrollBar",Sh,{init:function(a,b){
this._super(a,"scrollBar"),this._nearButton=new wm(a,this,!1),this.addElement(this._nearButton),this._farButton=new wm(a,this,!0),this.addElement(this._farButton),this._thumb=new xm(a,this),this.addElement(this._thumb),this._vertical=b,this._buttonSize=20,this._min=0,this._max=0,this._pos=0,this._page=0,this._maxPosition=0},lineScrollSize:1,pageScrollSize:1,minThumbSize:20,isVertical:function(){return this._vertical},maxPosition:function(){return this._maxPosition},setProperties:function(a,b,c){a=Math.max(0,a),b=Math.max(a,b),(a!=this._min||b!=this._max||c!=this._page)&&(this._min=a,this._max=b,this._page=c,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate())},setPosition:function(a,b){a=Math.min(this._maxPosition,Math.max(this._min,a)),a!=this._pos&&(this._pos=a,this.invalidate(),b&&this._doLayoutContent())},ptInTrack:function(a,b,c){var d=this.containerToElement(a,b);if(this._vertical){if(d.y>=this._nearButton.height()&&d.x<this._farButton.y())return!c&&d.y<this._thumb.y()||c&&d.y>=this._thumb.bottom()}else if(a>=this._nearButton.width()&&a<this._farButton.x())return!c&&d.x<this._thumb.x()||c&&d.x>=this._thumb.right();return!1},_doLayoutContent:function(a){var b=this._vertical,c=this._buttonSize,d=(b?this._height:this._width)-2*c,e=Math.min(d,Math.max(this._minThumbSize,Na(d*this._page/(this._max-this._min+1)))),f=c+Math.min(d-e,Math.max(0,Na((d-e)*this._pos/(this._maxPosition-this._min))));b?(this._nearButton.setBounds(0,0,this._width,c),this._farButton.setBounds(0,this._height-c,this._width,c),d>=e&&this._thumb.setBounds(1,f,this._width-2,e)):(this._nearButton.setBounds(0,0,c,this._height),this._farButton.setBounds(this._width-c,0,c,this._height),d>=e&&this._thumb.setBounds(f,1,e,this._height-2))},_doRender:function(a,b){var c=new yd("#fff0f0f0");a.drawRectI(c,null,b),this._vertical},_doRenderHtml:function(){var a=new yd("#fff0f0f0");Vc?this.$_setCssFill(a):this._css.background=a?a.css():null},_doScroll:function(a,b,c){this.fireEvent(vm.SCROLLED,a,b,c)},_mouseOut:function(){this._nearButton.setPressed(!1),this._farButton.setPressed(!1),this._thumb.setPressed(!1)}});vm.SCROLLED="onScrollBarScrolled";var wm=Xa("ScrollButton",Vd,{init:function(a,b,c){this._super(a),this._scrollBar=b,this._far=c,this._enabled=!0},pressed:!1,enabled:!0,isVertical:function(){return this._scrollBar._vertical},isFar:function(){return this._far},scrollBar:function(){return this._scrollBar},_hoveredChanged:function(){this.invalidate()},_doDraw:function(a){var b=this.getClientRect(),c=Na(b.width/2),d=Na(b.height/2),e=new yd(this._pressed?"#ff808080":this.isHovered()?"#ffd0c0d0":"#fff0f0f0"),f=new Dd(this._pressed?"#ffffffff":"#ff333333");a.drawRectI(e,null,b),this._scrollBar._vertical?this._far?(a.drawVertLineI(f,d-1,d+3,c),a.drawHorzLineI(f,c-3,c+4,d-1),a.drawHorzLineI(f,c-2,c+3,d),a.drawHorzLineI(f,c-1,c+2,d+1)):(a.drawVertLineI(f,d-2,d+1,c),a.drawHorzLineI(f,c-3,c+4,d+1),a.drawHorzLineI(f,c-2,c+3,d),a.drawHorzLineI(f,c-1,c+2,d-1)):this._far?(a.drawHorzLineI(f,c-1,c+3,d),a.drawVertLineI(f,d-3,d+4,c-1),a.drawVertLineI(f,d-2,d+3,c),a.drawVertLineI(f,d-1,d+2,c+1)):(a.drawHorzLineI(f,c-2,c+1,d),a.drawVertLineI(f,d-3,d+4,c+1),a.drawVertLineI(f,d-2,d+3,c),a.drawVertLineI(f,d-1,d+2,c-1))},_doDrawHtml:function(){var a=this.getClientRect(),b=(Na(a.width/2),Na(a.height/2),new yd(this._pressed?"#ff808080":this.isHovered()?"#ffd0c0d0":"#fff0f0f0"));Vc?this.$_setCssFill(b):this._css.background=b?b.css():null}}),xm=Xa("ScrollThumb",Vd,{init:function(a,b){this._scrollBar=b,this._super(a)},pressed:!1,scrollBar:function(){return this._scrollBar},isVertical:function(){return this._scrollBar._vertical},_hoveredChanged:function(){this.invalidate()},_doDraw:function(a){var b=this.getClientRect(),c=new yd(this._pressed?"#ff808080":this.isHovered()?"#ffa0a0a0":"#ffc0c0c0");a.drawRectI(c,null,b)},_doDrawHtml:function(a){var b=(this.getClientRect(),new yd(this._pressed?"#ff808080":this.isHovered()?"#ffa0a0a0":"#ffc0c0c0"));Vc?this.$_setCssFill(b):this._css.background=b?b.css():null}}),ym=Xa("ScrollThumbRequest",ll,{init:function(a){this._super(),this._thumb=a},thumb:function(){return this._thumb},scrollBar:function(){return this._thumb.scrollBar()},cursor:function(){return Zd.ARROW},isSelectable:function(){return!1}}),zm=Xa("ScrollThumbTracker",dl,{init:function(a,b,c){this._super(a.scrollBar().grid(),"scrollThumbTracker"),this._request=a,this._thumb=a.thumb(),this._scrollBar=a.scrollBar(),this._vertical=this._scrollBar.isVertical();var d=this._scrollBar.containerToElement(b,c);this._scrollBar.isVertical()?this._offset=d.y-this._thumb.y():this._offset=d.x-this._thumb.x()},isStartWhenCreated:function(){return!0},_doStart:function(a,b){return this._thumb.setPressed(!0),!0},_doDrag:function(a,b){return this.$_doScroll(a,b,um.THUMB_TRACK)},_doCompleted:function(a,b){return this.$_doScroll(a,b,um.THUMB_END)},_doCanceled:function(a,b){},_doEnded:function(){this._thumb.setPressed(!1)},$_doScroll:function(a,b,c){var d=this._scrollBar._maxPosition-this._scrollBar._min+1,e=this._scrollBar._buttonSize,f=this._scrollBar.containerToElement(a,b);if(this._scrollBar.isVertical()){var g=this._scrollBar.height()-2*e-this._thumb.height();if(0>=g)return;f.y-=this._offset,f.y=(f.y-e)*d/g,this._scrollBar._doScroll(c,0,Na(f.y))}else{var g=this._scrollBar.width()-2*e-this._thumb.width();if(0>=g)return;f.x-=this._offset,f.x=(f.x-e)*d/g,this._scrollBar._doScroll(c,0,Na(f.x))}return!0}}),Am=Xa("ScrollButtonTimer",bb,{init:function(a){this._super(),this._button=a,this._scrollBar=a.scrollBar(),this._active=!1,this._timer=ta,this._ready=!1},start:function(){this._button.setPressed(!0),this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(a,b){var c=this._button.containerToElement(a,b);this._active=this._button.containsInClient(c.x,c.y)},stop:function(a,b){this._ready=!1,this._timer&&clearInterval(this._timer),this._button.setPressed(!1)},$_fireEvent:function(){var a=null,b=1;this._scrollBar.isVertical()?this._button.isFar()?a=um.LINE_DOWN:(a=um.LINE_UP,b=-1):this._button.isFar()?a=um.LINE_RIGHT:(a=um.LINE_LEFT,b=-1),this._scrollBar._doScroll(a,this._scrollBar.lineScrollSize()*b,0)}}),Bm=Xa("ScrollTrackTimer",bb,{init:function(a,b){this._super(a),this._scrollBar=a,this._isFar=b,this._active=!1,this._timer=ta,this._ready=!1},start:function(){this._active=!0,this.$_fireEvent(),setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),200),this._ready=!0},move:function(a,b){var c=this._scrollBar.containerToElement(a,b);this._active=this._scrollBar.ptInTrack(c.x,c.y,this._isFar)},stop:function(a,b){this._ready=!1,this._timer&&clearInterval(this._timer)},$_fireEvent:function(){var a=null,b=0,c=this._scrollBar._thumb;if(this._scrollBar.isVertical()){var d=this._scrollBar.mouseY();this._isFar&&d>c.bottom()?(a=um.PAGE_DOWN,b=1):d<c.y()&&(a=um.PAGE_UP,b=-1)}else{var e=this._scrollBar.mouseX();this._isFar&&e>c.right()?(b=1,a=um.PAGE_RIGHT):e<c.x()&&(a=um.PAGE_LEFT,b=-1)}0!=b&&this._scrollBar._doScroll(a,this._scrollBar.pageScrollSize()*b,0)}}),Cm=Xa("DataRowExpressionRuntime",wc,{init:function(){this._super(),this._item=null,this._group=null,this._dataSource=null,this._fieldCount=null},index:function(){return this._item.index()},item:function(){return this._item},setDataSource:function(a){this._dataSource=a,this._fieldCount=a?a.fieldCount():0},setItem:function(a){this._item=a,this._group=ab(a,Yf)},isIdentifier:function(a){return a=a.toLowerCase(),Cm.IDENTS.hasOwnProperty(a)?Cm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(Qa(null!=this._item,"item is null"),a){case Cm.ID_ROW:return this._item.index();case Cm.ID_DATA_ROW:return this._item.dataRow();case Cm.ID_CHECKED:return this._item.isChecked();case Cm.ID_STATE:switch(this._item.rowState()){case je.CREATED:return"c";case je.UPDATED:return"u";case je.DELETED:return"d";case je.CREATE_AND_DELETED:return"x"}return ta;case Cm.ID_COUNT:return this._group?this._group.count():0;case Cm.ID_DCOUNT:return this._group?this._group.descendantCount():0}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(this._item){if(a==Cm.ID_VALUE||a==Cm.ID_VALUES){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(b)}throw new da("Invalid identifier indexer: "+a)}return ta},evaluateIndexerS:function(a,b,c){if(a==Cm.ID_VALUE||a==Cm.ID_VALUES){if(this._dataSource){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exists:"+b);return this._item.getData(d)}return ta}throw new da("Invalid identifier indexer: "+a)}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_STATE:5,ID_COUNT:6,ID_DCOUNT:7},function(a){a.IDENTS={row:a.ID_ROW,datarow:a.ID_DATA_ROW,checked:a.ID_CHECKED,value:a.ID_VALUE,values:a.ID_VALUES,state:a.ID_STATE,count:a.ID_COUNT,dcount:a.ID_DCOUNT}}),Dm=Xa("DataCellExpressionRuntime",wc,{init:function(){this._super(),this._cell=null,this._item=null,this._dataSource=null,this._fieldCount=0},setDataSource:function(a){this._dataSource=a,this._fieldCount=a?a.fieldCount():0},setCell:function(a){this._cell=a,this._item=a.index().item()},isIdentifier:function(a){return a=a.toLowerCase(),Dm.IDENTS.hasOwnProperty(a)?Dm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(a){case Dm.ID_VALUE:return this._cell.value();case Dm.ID_ROW:return this._cell.index().I();case Dm.ID_DATA_ROW:return this._cell.index().dataRow();case Dm.ID_INDEX:return this._cell.index().column().index();case Dm.ID_FIELD:return this._cell.index().dataField();case Dm.ID_CHECKED:return this._item.isChecked();case Dm.ID_STATE:switch(this._item.rowState()){case je.CREATED:return"c";case je.UPDATED:return"u";case je.DELETED:return"d";case je.CREATE_AND_DELETED:return"x"}return ta;case Dm.ID_TAG:return this._cell.index().C().tag();case Dm.ID_BASE:var b=this._cell.index().dataColumn().baseIndex();return b>=0?this._item.getData(b):ta;case Dm.ID_COUNT:return this._item instanceof Yf?this._item.count():0;case Dm.ID_DCOUNT:return this._item instanceof Yf?this._item.descendantCount():0}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(this._item){if(a==Dm.ID_VALUE||a==Dm.ID_VALUES){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(b)}throw new da("Invalid identifier indexer: "+a)}return void 0},evaluateIndexerS:function(a,b,c){if(a==Dm.ID_VALUE||a==Dm.ID_VALUES){if(this._dataSource){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exists:"+b);return this._item.getData(d)}return void 0}throw new da("Invalid identifier indexer: "+a)}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11},function(a){a.IDENTS={value:a.ID_VALUE,row:a.ID_ROW,datarow:a.ID_DATA_ROW,index:a.ID_INDEX,field:a.ID_FIELD,checked:a.ID_CHECKED,state:a.ID_STATE,tag:a.ID_TAG,base:a.ID_BASE,values:a.ID_VALUES,count:a.ID_COUNT,dcount:a.ID_DCOUNT}}),Em=Xa("FooterExpressionRuntime",wc,{init:function(){this._super(),this._cell=null},setCell:function(a){this._cell=a},isIdentifier:function(a){return a=a.toLowerCase(),Em.IDENTS.hasOwnProperty(a)?Em.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(a){case Em.ID_VALUE:return this._cell.value();case Em.ID_FIELD:return this._cell.index().dataField();case Em.ID_LEVEL:return this._cell.level()}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){return void 0},evaluateIndexerS:function(a,b,c){return void 0}},{ID_VALUE:0,ID_FIELD:1,ID_LEVEL:2},function(a){a.IDENTS={value:a.ID_VALUE,field:a.ID_FIELD,level:a.ID_LEVEL}}),Fm=Xa("RowGroupStatementRuntime",wc,{init:function(){this._super(),this._grid=null,this._group=null},setGrid:function(a){this._grid=a},setGroup:function(a){this._group=a},isIdentifier:function(a){return a=a.toLowerCase(),Fm.IDENTS.hasOwnProperty(a)?Fm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){Qa(null!=this._group,"group is null");var b,c;switch(a){case Fm.ID_GROUP_FIELD:return b=this._group.dataSource().getField(this._group.groupField()),b?b.fieldName():"";case Fm.ID_FIELD_HEADER:return b=this._group.dataSource().getField(this._group.groupField()),b?b.header():"";case Fm.ID_GROUP_COLUMN:return c=this._grid?this._grid.columnByField(this._group.groupField()):null,c?c.displayText():this._group.dataSource().getFieldName(this._group.groupField());case Fm.ID_COLUMN_HEADER:if(c=this._grid?this._grid.columnByField(this._group.groupField()):null){var d=c.header();return d?d.text():c.displayText()}return this._group.dataSource().getFieldName(this._group.groupField());case Fm.ID_COLUMN_FOOTER:if(c=this._grid?this._grid.columnByField(this._group.groupField()):null){var e=c.footer();return e?e.groupText():c.displayText()}return this._group.dataSource().getFieldName(this._group.groupField());case Fm.ID_GROUP_VALUE:var f=this._group.firstItem();return f?f.getData(this._group.groupField()):ta;case Fm.ID_ROW_COUNT:return this._group.descendantCount()}throw new da("Invalid identifier key: "+a)}},{ID_GROUP_FIELD:0,ID_FIELD_HEADER:1,ID_GROUP_COLUMN:2,ID_COLUMN_HEADER:3,ID_COLUMN_FOOTER:4,ID_GROUP_VALUE:5,ID_ROW_COUNT:6},function(a){a.IDENTS={groupfield:a.ID_GROUP_FIELD,fieldheader:a.ID_FIELD_HEADER,groupcolumn:a.ID_GROUP_COLUMN,columnheader:a.ID_COLUMN_HEADER,columnfooter:a.ID_COLUMN_FOOTER,groupvalue:a.ID_GROUP_VALUE,rowcount:a.ID_ROW_COUNT}}),Gm=Xa("ColumnMergeRuntime",wc,{init:function(){this._super(),this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0},setDataSource:function(a){this._dataSource=a,this._fieldCount=a?a.fieldCount():0},setCell:function(a){this._item=a.item(),this._field=a.dataField()},setItem:function(a,b){this._item=a,this._field=b},isIdentifier:function(a){return a=a.toLowerCase(),Gm.IDENTS.hasOwnProperty(a)?Gm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){if(this._item){switch(a){case Gm.ID_VALUE:return this._item.getData(this._field);case Gm.ID_ROW:return this._item.index();case Gm.ID_DATA_ROW:return this._item.dataRow();case Gm.ID_CHECKED:return this._item.isChecked();case Gm.ID_GROUP:return this._item.parent()}throw new da("Invalid identifier key: "+a)}return ta},evaluateIndexerI:function(a,b){if(this._item){if(a==Gm.ID_VALUE||a==Gm.ID_VALUES){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(b)}throw new da("Invalid identifier indexer: "+a)}return ta},evaluateIndexerS:function(a,b,c){if(this._item&&this._dataSource){if(a==Gm.ID_VALUE||a==Gm.ID_VALUES){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(d)}throw new da("Invalid identifier indexer: "+a)}return ta}},{ID_ROW:0,ID_DATA_ROW:1,ID_CHECKED:2,ID_VALUE:3,ID_VALUES:4,ID_GROUP:5},function(a){a.IDENTS={row:a.ID_ROW,datarow:a.ID_DATA_ROW,checked:a.ID_CHECKED,value:a.ID_VALUE,values:a.ID_VALUES,group:a.ID_GROUP}}),Hm=Xa("ColumnFilterRuntime",wc,{init:function(){this._super(),this._item=null,this._field=-1,this._dataSource=null,this._fieldCount=0},setDataSource:function(a){this._dataSource=a,this._fieldCount=this._dataSource?this._dataSource.fieldCount():0},setData:function(a,b){this._item=a,this._field=b},isIdentifier:function(a){return a=a.toLowerCase(),Hm.IDENTS.hasOwnProperty(a)?Hm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(a){case Hm.ID_VALUE:return this._item.getData(this._field);case Hm.ID_FIELD:return this._field;case Hm.ID_MAX:return 0;case Hm.ID_MIN:return 0;case Hm.ID_MEAN:return 0}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(this._item){if(a==Hm.ID_VALUE||a==Hm.ID_VALUES){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(b)}throw new da("Invalid identifier indexer: "+a)}return void 0},evaluateIndexerS:function(a,b,c){if(a==Hm.ID_VALUE||a==Hm.ID_VALUES){if(this._dataSource){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exists:"+b);return this._item.getData(d)}return void 0}throw new da("Invalid identifier indexer: "+a)}},{ID_VALUE:0,ID_FIELD:1,ID_VALUES:2,ID_MAX:10,ID_MIN:11,ID_MEAN:12},function(a){a.IDENTS={value:a.ID_VALUE,field:a.ID_FIELD,values:a.ID_VALUES,min:a.ID_MAX,max:a.ID_MIN,mean:a.ID_MEAN}}),Im=Xa("SummaryExpressionRuntime",wc,{init:function(){this._super()},isIdentifier:function(a){return a=a.toLowerCase(),Im.IDENTS.hasOwnProperty(a)?Im.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(a){case Im.ID_COUNT:return this._getCount();case Im.ID_SUM:return this._getSum();case Im.ID_MAX:return this._getMax();case Im.ID_MIN:return this._getMin();case Im.ID_AVG:return this._getAvg();case Im.ID_VAR:return this._getVar();case Im.ID_VARP:return this._getVarp();case Im.ID_STDEV:return this._getStdev();case Im.ID_STDEVP:return this._getStdevp()}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){throw new da("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b,c){throw new da("Invalid identifier indexer: "+a)},_getCount:function(){return NaN},_getSum:function(){return NaN},_getMax:function(){return NaN},_getMin:function(){return NaN},_getAvg:function(){return NaN},_getVar:function(){return NaN},_getVarp:function(){return NaN},_getStdev:function(){return NaN},_getStdevp:function(){return NaN}},{ID_COUNT:0,ID_SUM:1,ID_MAX:2,ID_MIN:3,ID_AVG:4,ID_VAR:5,ID_VARP:6,ID_STDEV:7,ID_STDEVP:8},function(a){a.IDENTS={count:a.ID_COUNT,sum:a.ID_SUM,max:a.ID_MAX,min:a.ID_MIN,avg:a.ID_AVG,"var":a.ID_VAR,varp:a.ID_VARP,stdev:a.ID_STDEV,stdevp:a.ID_STDEVP}}),Jm=Xa("ColumnSummaryRuntime",Im,{init:function(){this._super(),this._grid=null,this._dataSource=null,this._column=null,this._summarizer=null},setColumn:function(a,b){this._column=a,this._grid=a&&a.grid(),this._dataSource=this._grid?this._grid.dataSource():null,this._fieldCount=this._dataSource?this._dataSource.fieldCount():0,this._summarizer=this._grid?b:null},_getCount:function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex()):0},_getSum:function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex()):0},_getMax:function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex()):NaN},_getMin:function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex()):NaN},_getAvg:function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex()):NaN},_getVar:function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex()):NaN},_getVarp:function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex()):NaN},_getStdev:function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex()):NaN},_getStdevp:function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex()):NaN},evaluateIndexerI:function(a,b){if(this._summarizer){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds: "+b);switch(a){case Im.ID_SUM:return this._summarizer.getSum(b);case Im.ID_COUNT:return this._summarizer.getCount(b);case Im.ID_MAX:return this._summarizer.getMax(b);case Im.ID_MIN:return this._summarizer.getMin(b);case Im.ID_AVG:return this._summarizer.getAvg(b);case Im.ID_VAR:return this._summarizer.getVar(b);case Im.ID_VARP:return this._summarizer.getVarp(b);case Im.ID_STDEV:return this._summarizer.getStdev(b);case Im.ID_STDEVP:return this._summarizer.getStdevp(b)}throw new da("Invalid identifier indexer: "+a)}switch(a){case Im.ID_SUM:case Im.ID_COUNT:return 0;case Im.ID_MAX:case Im.ID_MIN:case Im.ID_AVG:case Im.ID_VAR:case Im.ID_VARP:case Im.ID_STDEV:case Im.ID_STDEVP:return NaN}return void 0},evaluateIndexerS:function(a,b,c){if(this._summarizer&&this._dataSource){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field index out of bounds: "+d);switch(a){case Im.ID_SUM:return this._summarizer.getSum(d);case Im.ID_COUNT:return this._summarizer.getCount(d);case Im.ID_MAX:return this._summarizer.getMax(d);case Im.ID_MIN:return this._summarizer.getMin(d);case Im.ID_AVG:return this._summarizer.getAvg(d);case Im.ID_VAR:return this._summarizer.getVar(d);case Im.ID_VARP:return this._summarizer.getVarp(d);case Im.ID_STDEV:return this._summarizer.getStdev(d);case Im.ID_STDEVP:return this._summarizer.getStdevp(d)}throw new da("Invalid identifier indexer: "+a)}switch(a){case Im.ID_SUM:case Im.ID_COUNT:return 0;case Im.ID_MAX:case Im.ID_MIN:case Im.ID_AVG:case Im.ID_VAR:case Im.ID_VARP:case Im.ID_STDEV:case Im.ID_STDEVP:return NaN}return void 0}}),Km=Xa("RowGroupSummaryRuntime",Jm,{init:function(){this._super(),this._item=null},item:null,setItem:function(a){this._item=a},_getCount:function(){return this._item.getNumber(this._column.dataIndex())},_getSum:function(){return this._item.getSum(this._column.dataIndex())},_getMax:function(){return this._item.getMax(this._column.dataIndex())},_getMin:function(){return this._item.getMin(this._column.dataIndex())},_getAvg:function(){return this._item.getAvg(this._column.dataIndex())},_getVar:function(){return this._item.getVar(this._column.dataIndex(),1)},_getVarp:function(){return this._item.getVar(this._column.dataIndex(),0)},_getStdev:function(){return this._item.getStdev(this._column.dataIndex(),1)},_getStdevp:function(){return this._item.getStdev(this._column.dataIndex(),0)}}),Lm=Xa("CheckableExpressionRuntime",Cm,{init:function(){this._super()}}),Mm=Xa("DataCellRendererRuntime",wc,{init:function(){this._super(),this._target=null,this._item=null,this._dataSource=null,this._fieldCount=0},setDataSource:function(a){this._dataSource=a,this._fieldCount=a?a.fieldCount():0},setTarget:function(a){this._target=a,this._item=a.index().item()},isIdentifier:function(a){return a=a.toLowerCase(),Mm.IDENTS.hasOwnProperty(a)?Mm.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){switch(Qa(null!=this._target,"target is null"),a){case Mm.ID_VALUE:return this._target.value();case Mm.ID_ROW:return this._target.index().I();case Mm.ID_DATA_ROW:return this._target.index().dataRow();case Mm.ID_INDEX:return this._target.index().column().index();case Mm.ID_FIELD:return this._target.index().dataField();case Mm.ID_CHECKED:return this._item&&this._item.isChecked();case Mm.ID_STATE:if(this._item)switch(this._item.rowState()){case je.CREATED:return"c";case je.UPDATED:return"u";case je.DELETED:return"d";case je.CREATE_AND_DELETED:return"x"}return ta;case Mm.ID_TAG:return this._target.index().C().tag();case Mm.ID_BASE:var b=this._target.index().dataColumn().baseIndex();return b>=0?this._item.getData(b):ta;case Mm.ID_COUNT:return this._target.index().childCount();case Mm.ID_DCOUNT:return this._target.index().descendantCount()}throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(a==Mm.ID_VALUE){var c=this._target.value();if(s(c)&&b<c.length)return c[b];throw new da("Value index out of bounds:"+b)}if(a==Mm.ID_VALUES){if(this._dataSource){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._item.getData(b)}return void 0}throw new da("Invalid identifier indexer: "+a)},evaluateIndexerS:function(a,b,c){if(a==Mm.ID_VALUES){if(this._dataSource){var d=c?this._dataSource.getFieldIndexC(b):this._dataSource.getFieldIndex(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exits:"+b);return this._item.getData(d)}return void 0}throw new da("Invalid identifier indexer: "+a)}},{ID_VALUE:0,ID_ROW:1,ID_DATA_ROW:2,ID_INDEX:3,ID_FIELD:4,ID_CHECKED:5,ID_STATE:6,ID_TAG:7,ID_BASE:8,ID_VALUES:9,ID_COUNT:10,ID_DCOUNT:11},function(a){a.IDENTS={value:a.ID_VALUE,row:a.ID_ROW,datarow:a.ID_DATA_ROW,index:a.ID_INDEX,field:a.ID_FIELD,checked:a.ID_CHECKED,state:a.ID_STATE,tag:a.ID_TAG,base:a.ID_BASE,values:a.ID_VALUES,count:a.ID_COUNT,dcount:a.ID_DCOUNT}}),Nm=Xa("LinkCellRendererRuntime",wc,{init:function(){this._super(),this._item=null,this._dataSource=null,this._requiredFields=null},setIndex:function(a){this._item=a.item(),this._dataSource=a.grid().dataSource()},setRequiredFields:function(a){this._requiredFields=a},isIdentifier:function(a){if(this._dataSource){var b=this._dataSource.getFieldIndex(a);if(b>=0)return b}return this._super(a)},evaluateIdentifier:function(a){if(a>=0){var b,c,d=this._item.getData(a),e=this._dataSource.getField(a);if(e.isEmpty(d)&&this._requiredFields&&(b=this._requiredFields.length)>0){var f=this._dataSource.getFieldName(a);if(f)for(var g=0;b>g;g++)if(c=this._requiredFields[g],c==f)throw new Error("Required field error: "+f)}return d}this._invalidIdentError(a)}}),Om=Xa("CalculateExpressionRuntime",wc,{init:function(){this._super(),this._values=null,this._fields=null,this._fieldCount=0},setValues:function(a,b){this._values=a,this._fields=b,this._fieldCount=b?b.length:0},isIdentifier:function(a){return a=a.toLowerCase(),Om.IDENTS.hasOwnProperty(a)?Om.IDENTS[a]:this._super(a)},evaluateIdentifier:function(a){throw new da("Invalid identifier key: "+a)},evaluateIndexerI:function(a,b){if(this._values){if(a==Om.ID_VALUE||a==Om.ID_VALUES){if(0>b||b>=this._fieldCount)throw new da("Data field index out of bounds:"+b);return this._values[b]}throw new da("Invalid identifier indexer: "+a)}return void 0},evaluateIndexerS:function(a,b,c){if(a==Om.ID_VALUE||a==Om.ID_VALUES){if(this._values&&this._fields){var d=this._fields.indexOf(b);if(0>d||d>=this._fieldCount)throw new da("Data field is not exists:"+b);return this._values[d]}return void 0}throw new da("Invalid identifier indexer: "+a)}},{ID_VALUE:0,ID_VALUES:1},function(a){a.IDENTS={value:a.ID_VALUE,values:a.ID_VALUES}}),Pm=Xa("CellButtonRenderer",null,{init:function(a){this._super(),this._name=a},name:function(){return this._name},measure:function(a,b,c){return this._doMeasure(a,b,c)},render:function(a,b,c,d,e,f){this._doRender(a,b,c,d,e,f)},hitTest:function(a,b,c,d){return this._doHitTest(a,b,c,d)},toString:function(){return this._name},_doMeasure:function(a,b,c){return new ld(b,c)},_doRender:function(a,b,c,d,e,f){},_doHitTest:function(a,b,c,d){return!0}}),Qm=Xa("DefaultCellButtonRenderer",Pm,{init:function(a){this._super(a),this._inited=!1,this._imageUrls={ed:"ellipsis_down.png",eh:"ellipsis_hover.png",eu:"ellipsis_up.png",dd:"dropdown_down.png",dh:"dropdown_hover.png",du:"dropdown_up.png",cd:"calendar_down.png",ch:"calendar_hover.png",cu:"calendar_up.png"},this._images={}},prepare:function(a){if(!this._inited){for(var b in this._imageUrls)a.getImage(la+ma+this._imageUrls[b]);this._inited=!0}},_doMeasure:function(a,b,c){return new ld(Qm.BUTTON_WIDTH+4,c)},_doRender:function(a,b,c,d,e,f){var g=a.dataColumn();if(g){var h=c.clone();f&&a.grid().isEditing()?(h.leftBy(2),h.rightBy(-2)):(h.leftBy(1),h.rightBy(-3));var i=g.button();i==we.ACTION?this.$_drawEllipsisButton(a.grid(),b,h,!0,d,e):i==we.POPUP&&this.$_drawMenuButton(a.grid(),b,h,!0,d,e)}},$_getImage:function(a,b,c){var d=this._images[b];return d||(d=a.getImage(la+ma+c),d&&(this._images[b]=d)),d},$_drawEllipsisButton:function(a,b,c,d,e,f){var g,h,i=f?"ed":e?"eh":"eu";if(i=this.$_getImage(a,i,this._imageUrls[i]),i&&(g=i.width)>0&&(h=i.height)>0){var j=Na(c.x+(c.width-g)/2),k=Na(c.y+(c.height-h)/2);b.drawImage(i,j,k,g,h)}},$_drawMenuButton:function(a,b,c,d,e,f){var g,h,i=f?"dd":e?"dh":"du";if(i=this.$_getImage(a,i,this._imageUrls[i]),i&&(g=i.width)>0&&(h=i.height)>0){var j=Na(c.x+(c.width-g)/2),k=Na(c.y+(c.height-h)/2);b.drawImage(i,j,k,g,h)}},$_drawCalendarButton:function(a,b,c,d,e,f){var g,h,i=f?"cd":e?"ch":"cu";if(i=this.$_getImage(a,i,this._imageUrls[i]),i&&(g=i.width)>0&&(h=i.height)>0){var j=Na(c.x+(c.width-g)/2),k=Na(c.y+(c.height-h)/2);b.drawImage(i,j,k,g,h)}}},{BUTTON_WIDTH:16,BUTTON_HEIGHT:14}),Rm=Q({COMBO:"combo",ELLIPSIS:"ellipsis",CALENDAR:"calendar"}),Sm=Xa("EditButtonRenderer",Qm,{init:function(a){this._super(a)},buttonType:Rm.COMBO,_doRender:function(a,b,c,d,e,f){var g=a.dataColumn();if(g){var h=c.clone();switch(h.leftBy(1),h.rightBy(-3),h.topBy(Math.max(1,Na((c.height-Qm.BUTTON_HEIGHT)/2))),h.setBottom(Math.min(h.y+Qm.BUTTON_HEIGHT,h.bottom()-3)),this._buttonType){case Rm.COMBO:this.$_drawMenuButton(a.grid(),b,h,!0,d,e);break;case Rm.ELLIPSIS:this.$_drawEllipsisButton(a.grid(),b,h,!0,d,e);break;case Rm.CALENDAR:this.$_drawCalendarButton(a.grid(),b,h,!0,d,e)}}}}),Tm=Xa("DynamicRendererOption",null,{init:function(a){this._super(),Ra(null!=a,"owner is null"),this._owner=a},owner:function(){return this._owner},apply:function(a,b){},_changed:function(){}}),Um=Xa("DynamicRendererOptionImpl",Tm,{init:function(a,b){this._super(a),this._exprNode=null,this._propMap={},b&&(b.hasOwnProperty("criteria")&&this.setCriteria(b.criteria),b.hasOwnProperty("options")?this.setOptions(b.options):b.hasOwnProperty("styles")&&this.setOptions(b.styles))},criteria:null,options:null,setCriteria:function(a){a!=this._criteria&&(this._criteria=a,this.$_buildExpression(),this._changed())},setOptions:function(a){a!=this._options&&(this._options=a,this.$_buildStyles(),this._changed())},apply:function(a,b){if(this._exprNode&&this._exprNode.evaluate(a))for(var c in this._propMap){var d=this._owner._readOption(c,this._propMap[c]);void 0!==d&&(b[c]=d)}},$_buildExpression:function(){this._criteria?(this._exprNode=vc.Default.parse(this._criteria,this._owner?this._owner.capitalIndexers():null),null==this._exprNode&&(this._exprNode=Vb.Default)):this._exprNode=Vb.Default},$_buildStyles:function(){var a,b,c,d,e;if(this._propMap={},"string"==typeof this._options)for(c=this._options.split(";"),a=0,b=c.length;b>a;a++)d=c[a],e=d.split("="),e.length>1?this._propMap[e[0]]=e[1]:this._propMap[e[0]]=ta;else if(this._options)for(var f in this._options)this._propMap[f]=this._options[f]}}),Vm=Xa("DynamicRendererOptionCase",Tm,{init:function(a,b){this._super(a),this._exprNodes=[],this._propMaps=[],b&&(b.hasOwnProperty("criteria")&&this.setCriteria(b.criteria),b.hasOwnProperty("options")?this.setStyles(b.options):b.hasOwnProperty("styles")&&this.setOptions(b.styles))},criteria:null,styles:null,setCriteria:function(a){a!=this._criteria&&(this._criteria=a,this.$_buildExpressions(),this._changed())},setStyles:function(a){a!=this._options&&(this._options=a,this.$_buildStyles(),this._changed())},apply:function(a,b){for(var c=0,d=this._exprNodes.length;d>c;c++){var e=this._exprNodes[c];if(e&&e.evaluate(a)){var f=this._propMaps[c];for(var g in f){var h=this._owner._readOption(g,f[g]);void 0!==h&&(b[g]=h)}break}}},$_buildExpressions:function(){var a,b=this.owner();if(this._exprNodes=[],this._criteria&&(a=this._criteria.length)>0)for(var c=0;a>c;c++){var d=this._criteria[c];if(d){var e=vc.Default.parse(d,b?b.capitalIndexers():null);null==e&&(e=Vb.Default),this._exprNodes.push(e)}else this._exprNodes.push(Vb.Default)}},$_buildStyles:function(){this._propMaps=[];for(var a=0,b=this._exprNodes.length;b>a;a++){var c=this._options.length>a?this._options[a]:this._options[b-1],d=c.split(";"),e={};this._propMaps.push(e);for(var f=0;f<d.length;f++){var g=d[f],h=g.split(/\s*=/);h.length>1?e[h[0]]=h[1]:e[h[0]]=null}}}}),Wm=Xa("DynamicRendererOptionCollection",null,{init:function(a){this._super(),this._owner=a,this._items=[]},owner:function(){return this._owner},count:function(){return this._items.length},getItem:function(a){return this._items[a]},clear:function(){this._items=[]},add:function(a){var b=this.$_createOption(a);b&&this._items.indexOf(b)<0&&this._items.push(b)},setItems:function(a){if(this._items=[],a){if(a instanceof Wm&&(a=a.toArray()),!s(a))return;var b,c,d=a.length;
for(b=0;d>b;b++)c=this.$_createOption(a[b]),c&&this._items.push(c)}},prepare:function(){},apply:function(a,b){var c,d,e=this._items.length;for(c=0;e>c;c++)d=this._items[c],d.apply(a,b)},toArray:function(){return this._items.concat()},$_createOption:function(a){var b=null;if(a instanceof Tm)a._owner=this._owner,b=a;else if(s(a)){var c;s(a.options)||s(a.styles)?(c=new Vm(this._owner,a),b=c):(c=new Vm(this._owner,a),b=c)}else if(a&&a.criteria){var d=new Um(this._owner,a);b=d}return b}}),Xm=Xa("DataCellRenderer",hh,{init:function(){this._super(),this._rect=new kd,this._runtime=null,this._dynamicOptions=null,this._runtimeOptions={}},minWidth:4,dynamicOptions:null,dynamicOptions_:function(){return this._dynamicOptions?this._dynamicOptions.toArray():null},setDynamicOptions:function(a){a!=this._dynamicOptions&&(a?(this._runtime||(this._runtime=new Mm),this._dynamicOptions||(this._dynamicOptions=new Wm(this)),this._dynamicOptions.setItems(a),this._changed()):this._dynamicOptions&&(this._dynamicOptions=null,this._changed()))},capitalIndexers:function(){return null},isEditable:function(){return!1},isStartEditOnClick:function(){return!1},isDblClickEnabled:function(){return!1},isClickable:function(a){return!1},isButton:function(){return!1},setOptions:function(a){},prepareRuntime:function(a){this._runtime&&this._runtime.setDataSource(a.dataSource())},applyDynamicStyles:function(a){this._dynamicOptions&&this._dynamicOptions.count()>0&&(this._runtime.setTarget(a),this._dynamicOptions.apply(this._runtime,this._runtimeOptions={}))},measure:function(a,b,c,d){return this._doMeasure(a,b,c,d)},render:function(a,b,c){},renderHtml:function(a,b){},getButtonRenderer:function(){return null},isEditableKey:function(a,b){return!1},performEdit:function(a){},performClick:function(a,b,c){return!1},getTooltip:function(a){return void 0},assign:function(a){this._super(a),a&&!a.hasOwnProperty("dynamicOptions")&&a.hasOwnProperty("dynamicStyles")&&this.setDynamicOptions(a.dynamicStyles)},propertyChanged:function(a,b){this._changed()},_readOption:function(a,b){return b},_getOption:function(a){if(this._runtimeOptions.hasOwnProperty(a)){var b=this._runtimeOptions[a];if(void 0!==b)return b}return this[a]()},_doMeasure:function(a,b,c,d){return new ld(Math.max(this._minWidth,c),d)},_getText:function(a){var b,c=a.text();return(null===c||c===ta)&&(c=""),null!=(b=a.prefix())&&(c=b+c),null!=(b=a.suffix())&&(c+=b),c},_changed:function(){}},{consumeKey:function(a,b,c,d){var e=a?a.grid():null;if(e&&!e.isEditing()&&a.dataColumn()&&b==Yd.SPACE){var f=e.body().getCell(a),g=f?f.styles().renderer():null,h=g?e.dataCellRenderers().getRenderer(g):a.dataColumn().rendererObj();if(h&&!e.isReadOnly(a)&&h.isEditable()&&h.isEditableKey(a,b,c,d)&&e.edit(a)){var i=a.item();if((e.isItemEditing(i)||e.canUpdate(i,a.dataField()))&&e.canWrite(a))return e.makeCellVisible(a,!0),h.performEdit(a),!0}}return!1}}),Ym=function(a){var b={},c={};this.addRenderers=function(a){if(a){var c=a;s(c)||(c=[a]);for(var d=0,e=c.length;e>d;d++){var f=c[d];f&&f.hasOwnProperty("id")&&f.id&&(b[f.id]=R({},f))}}},this.getRenderer=function(d){var e=b[d];if(e){var f=ab(c[d],Xm);return f||(f=a.createRenderer(e),f&&(c[d]=f)),f}return null}},Zm=Xa("TextCellRenderer",Xm,{init:function(){this._super()},showTooltip:!1,getTooltip:function(a){if(this.isShowTooltip()){var b=this._getText(a);return b?b:void 0}return void 0},_doMeasure:function(a,b,c,d){return B(a.measureText(b.font(),this._getText(b))+b.paddingHorz(),d)},render:function(a,b,c){var d=this._getText(a);c=this._rect.copy(c),a.inflatePadding(c),Zm.renderWrapText(a,b,c.x,c.y,c.width,c.height,d)},renderHtml:function(a,b){var c=a.$_prepareSpan(),d=this._getText(a);b=this._rect.copy(b),a.inflatePadding(b),Jc.renderTextBounds(c,a.font(),a.foreground(),d,b.x,b.y,b.width,b.height,a.textAlign(),a.lineAlign())}},{renderWrapText:function(a,b,c,d,e,f,g){switch(a.textWrap()){case Me.EXPLICIT:b.drawTextBoundsExplicit(a.font(),a.foreground(),g,c,d,e,f,a.textAlign(),a.lineAlign());break;case Me.NORMAL:b.drawTextBoundsWrap(a.font(),a.foreground(),g,c,d,e,f,a.textAlign(),a.lineAlign());break;default:b.drawTextBounds(a.font(),a.foreground(),g,c,d,e,f,a.textAlign(),a.lineAlign())}}});Zm.Default=new Zm;var $m=Xa("BarCellRenderer",Xm,{init:function(){this._super(),this.setMinWidth(100)},minimum:0,maximum:100,showLabel:!1,origin:"default",render:function(a,b,c){if(this._maximum>this._minimum){var d=a.value(),e=Math.min(1,(d-this._minimum)/(this._maximum-this._minimum)),f=a.figureBorder(),g=a.figureBackground();if(f||g)switch(this.origin()){case $m.ORIGIN_LEFT:this.$_drawLeft(a,b,g,f,c,e);break;case $m.ORIGIN_RIGHT:this.$_drawRight(a,b,g,f,c,e);break;case $m.ORIGIN_BOTTOM:this.$_drawBottom(a,b,g,f,c,e);break;case $m.ORIGIN_TOP:this.$_drawTop(a,b,g,f,c,e);break;default:this.$_drawLeft(a,b,g,f,c,e)}}if(this.isShowLabel()){var h=this._getText(a);Zm.renderWrapText(a,b,c.x,c.y,c.width,c.height,h)}},$_drawLeft:function(a,b,c,d,e,f){var g=a.paddingLeft(),h=(e.width-g-a.paddingRight())*f;if(h>=0){var i=a.paddingTop(),j=e.height-a.paddingBottom()-i,k=j,l=a.figureSize();l&&(k=l.getDimension(j)),k>=0&&b.drawBoundsI(c,d,e.x+g,e.y+i+(j-k)/2,h,k)}},$_drawRight:function(a,b,c,d,e,f){var g=a.paddingRight(),h=(e.width-a.paddingLeft()-g)*f;if(h>=0){var i=a.paddingTop(),j=e.height-a.paddingBottom()-i,k=j,l=a.figureSize();l&&(k=l.getDimension(j)),k>=0&&b.drawBoundsI(c,d,e.right()-g-h,e.y+i+(j-k)/2,h,k)}},$_drawBottom:function(a,b,c,d,e,f){var g=a.paddingBottom(),h=(e.height-g-a.paddingTop())*f;if(h>=0){var i=a.paddingLeft(),j=e.width-a.paddingRight()-i,k=j,l=a.figureSize();l&&(k=l.getDimension(j)),k>=0&&b.drawBoundsI(c,d,e.x+i+(j-k)/2,e.bottom()-g-h,k,h)}},$_drawTop:function(a,b,c,d,e,f){var g=a.paddingTop(),h=(e.height-g-a.paddingBottom())*f;if(h>=0){var i=a.paddingLeft(),j=e.width-a.paddingRight()-i,k=j,l=a.figureSize();l&&(k=l.getDimension(j)),k>=0&&b.drawBoundsI(c,d,e.x+i+(j-k)/2,e.y+g,k,h)}}});$m.ORIGIN_DEFAULT="default",$m.ORIGIN_LEFT="left",$m.ORIGIN_RIGHT="right",$m.ORIGIN_TOP="top",$m.ORIGIN_BOTTOM="bottom";var _m=(Xa("ProgressCellRenderer",Xm,{init:function(){this._super(),this.setMinWidth(100)},render:function(a,b,c){}}),Xa("CheckCellRenderer",Xm,{init:function(){this._super(),this._values={},this._falseValue=void 0,this._trueValues=void 0},trueValues:null,falseValues:null,shape:void 0,labelPosition:"hidden",labelGap:4,spaceKey:!0,editable:!1,dblClickEditable:!1,startEditOnClick:!1,threeState:!1,setTrueValues:function(a){a!=this._trueValues&&(this._trueValues=a,this.$_resetValues())},falseValues:null,setFalseValues:function(a){a!=this._falseValues&&(this._falseValues=a,this.$_resetValues())},_doMeasure:function(a,b,c,d){var e=B(b.paddingHorz(),d),f=12,g=b.figureSize();return g&&(f=g.getDimension(12)),e.width+=f,this.labelPosition()!=_m.HIDDEN&&(e.width+=this.labelGap()+a.measureText(b.font(),b.value())),e},render:function(a,b,c){var d,e,f,g,h,i,j,k=a.value(),l=this.$_getValue(k),m=this._threeState&&void 0===l,n=m?null:a.figureBorder(),o=m?null:l?a.figureBackground():a.figureInactiveBackground();if(o||n){switch(this._shape==_m.SHAPE_BOX?(f=12,g=12):(f=12,g=10),j=a.figureSize(),j&&(f=j.getDimension(f),g=10*f/12),h=null,this._labelPosition){case _m.RIGHT:d=a.paddingLeft()+c.x,e=c.y+(c.height-g)/2,h=this._rect,h.copy(c),h.leftBy(f+this._labelGap),h.rightBy(-a.paddingRight());break;case _m.LEFT:d=c.right()-a.paddingRight()-f,e=c.y+(c.height-g)/2,h=this._rect,h.copy(c),h.leftBy(a.paddingLeft()),h.right(d-this._labelGap);break;case _m.BOTTOM:d=c.x+(c.width-f)/2,e=a.paddingTop(),h=this._rect,h.copy(c),h.leftBy(a.paddingLeft()),h.rightBy(-a.paddingRight()),h.topBy(g+this._labelGap);break;case _m.TOP:d=c.x+(c.width-f)/2,e=c.bottom()-g-a.paddingBottom(),h=this._rect,h.copy(c),h.leftBy(a.paddingLeft()),h.rightBy(-a.paddingRight()),h.bottomBy(-g-this._labelGap);break;default:d=c.x+(c.width-f)/2,e=c.y+(c.height-g)/2}if(h&&(i=this._getText(a),h.topBy(a.paddingTop()),h.bottomBy(-a.paddingBottom()),Zm.renderWrapText(a,b,h.x,h.y,h.width,h.height,i)),this._shape==_m.SHAPE_BOX){var p=n?n:Dd.DKGRAY,q=new kd(d,e,f,g);b.drawRectI(null,p,q),q.inflate(-1,-1),b.drawPolygonArray(o,n,[q.x+1.25*q.width/8,q.y+2.65*q.height/7,q.x+0*q.width,q.y+4.25*q.height/7,q.x+3.45*q.width/8,q.y+7*q.height/7,q.x+8*q.width/8,q.y+1.2*q.height/7,q.x+6.5*q.width/8,q.y+.1*q.height,q.x+3.45*q.width/8,q.y+4.25*q.height/7])}else b.drawPolygonArray(o,n,[d+1.25*f/8,e+2.65*g/7,d+0*f,e+4.25*g/7,d+3.95*f/8,e+7*g/7,d+8*f/8,e+1.2*g/7,d+6.3*f/8,e+0*g,d+3.45*f/8,e+4.25*g/7])}if(this.isEditable()&&a.isFocused()){var r=a.grid();r&&!r.isReadOnly(a.index())&&(c.inflate(-3,-3),!c.isEmpty()&&b.drawRect(null,Dd.FOCUS,c))}},isEditableKey:function(a,b){return this.isSpaceKey()&&b==Yd.SPACE},performEdit:function(a){var b=this.$_getValue(a.value()),c=a.dataField(),d=a.grid().dataSource(),e=a.item();b=c>=0&&d.getValueType(c)==ie.BOOLEAN?this._threeState&&void 0!==b&&!b?void 0:!b:b?this._falseValue?this._falseValue:!1:void 0!==b&&this._threeState?void 0:this._trueValue?this._trueValue:!0,e.setData(c,b),a.grid()&&a.grid().validateCellCommit(a,b)},$_resetValues:function(){var a,b,c;if(this._values={},this._falseValues)if(a=this._falseValues.split(","))for(this._falseValue=(b=a.length)>0?a[0]:void 0,c=0;b>c;c++)this._values[a[c]]=!1;else this._falseValue=void 0;if(this._trueValues)if(a=this._trueValues.split(","))for(this._trueValue=(b=a.length)>0?a[0]:void 0,c=0;b>c;c++)this._values[a[c]]=!0;else this._trueValue=void 0},$_getValue:function(a){if("boolean"==typeof a)return a;var b=String(a);return this._values.hasOwnProperty(b)?this._values[b]:!this._threeState||""!=a&&void 0!==a&&null!==a?Boolean(a):void 0}}));_m.HIDDEN="hidden",_m.RIGHT="right",_m.LEFT="left",_m.BOTTOM="bottom",_m.TOP="top",_m.SHAPE_DEFAULT="default",_m.SHAPE_BOX="box";var an=Xa("ShapeCellRenderer",Xm,{init:function(){this._super(),this._ellipse=null,this._polygon=null,this._rect=new kd},sizeRate:.6,render:function(a,b,c){var d=a.figureName(),e=this._getShape(d);switch(a.iconLocation()){case Oe.RIGHT:this._drawRight(a,e,b,c);break;case Oe.TOP:this._drawTop(a,e,b,c);break;case Oe.BOTTOM:this._drawBottom(a,e,b,c);break;case Oe.CENTER:this._drawCenter(a,e,b,c);break;case Oe.LEFT:default:this._drawLeft(a,e,b,c)}},_getShape:function(a){var b=null;return a&&(a=a.toLowerCase(),"null"==a?b=Pd.Default:"ellipse"==a?b=this._ellipse?this._ellipse:this._ellipse=new Od:(b=this._polygon?this._polygon:this._polygon=new Ld,this._polygon.setShape(a))),b},_drawLeft:function(a,b,c,d){var e=a.iconOffset(),f=a.iconPadding()+e,g=d.x+a.paddingLeft(),h=d.y+a.paddingTop(),i=d.width-a.paddingHorz(),j=d.height-a.paddingVert(),k=0;if(b){k=Math.min(i,j);var l=k,m=a.figureSize();m?(k=m.getDimension(k),l=m.getDimension(l)):(k*=this._sizeRate,l*=this._sizeRate);var n=g+e,o=h;switch(a.iconAlignment()){case Ne.CENTER:o+=(j-l)/2;break;case Ne.FAR:o+=j-a.paddingVert()-l}this._rect.set(n,o,k,l),b.draw(c,this._rect,a.figureBackground(),a.figureBorder())}var p=this._getText(a);p&&(g+=k+f,i-=k+f,Zm.renderWrapText(a,c,g,h,i,j,p))},_drawRight:function(a,b,c,d){var e=a.iconOffset(),f=a.iconPadding()+e,g=d.x+a.paddingLeft(),h=d.y+a.paddingTop(),i=d.width-a.paddingHorz(),j=d.height-a.paddingVert(),k=0;if(b){k=Math.min(i,j);var l=k,m=a.figureSize();m?(k=m.getDimension(k),l=m.getDimension(l)):(k*=this._sizeRate,l*=this._sizeRate);var n=d.right()-k-e-a.paddingRight(),o=h;switch(a.iconAlignment()){case Ne.CENTER:o+=(j-l)/2;break;case Ne.FAR:o+=j-a.paddingVert()-l}this._rect.set(n,o,k,l),b.draw(c,this._rect,a.figureBackground(),a.figureBorder())}var p=this._getText(a);p&&(i-=k+f,Zm.renderWrapText(a,c,g,h,i,j,p))},_drawTop:function(a,b,c,d){var e=a.iconOffset(),f=a.iconPadding()+e,g=d.x+a.paddingLeft(),h=d.y+a.paddingTop(),i=d.width-a.paddingHorz(),j=d.height-a.paddingVert(),k=0;if(b){k=Math.min(i,j);var l=k,m=a.figureSize();m?(l=m.getDimension(l),k=m.getDimension(k)):(l*=this._sizeRate,k*=this._sizeRate);var n=g,o=h+e;switch(a.iconAlignment()){case Ne.CENTER:n+=(i-l)/2;break;case Ne.FAR:n+=i-a.paddingHorz()-l}this._rect.set(n,o,l,k),b.draw(c,this._rect,a.figureBackground(),a.figureBorder())}var p=this._getText(a);p&&(h+=k+f,j-=k+f,Zm.renderWrapText(a,c,g,h,i,j,p))},_drawBottom:function(a,b,c,d){var e=a.iconOffset(),f=a.iconPadding()+e,g=d.x+a.paddingLeft(),h=d.y+a.paddingTop(),i=d.width-a.paddingHorz(),j=d.height-a.paddingVert(),k=0;if(b){k=Math.min(i,j);var l=k,m=a.figureSize();m?(l=m.getDimension(l),k=m.getDimension(k)):(l*=this._sizeRate,k*=this._sizeRate);var n=g,o=d.bottom()-k-e-a.paddingBottom();switch(a.iconAlignment()){case Ne.CENTER:n+=(i-l)/2;break;case Ne.FAR:n+=i-a.paddingHorz()-l}this._rect.set(n,o,l,k),b.draw(c,this._rect,a.figureBackground(),a.figureBorder())}var p=this._getText(a);p&&(j-=k+f,Zm.renderWrapText(a,c,g,h,i,j,p))},_drawCenter:function(a,b,c,d){var e=a.iconOffset(),f=(a.iconPadding()+e,d.x+a.paddingLeft()),g=d.y+a.paddingTop(),h=d.width-a.paddingHorz(),i=d.height-a.paddingVert(),j=0;if(b){j=Math.min(h,i);var k=j,l=a.figureSize();l?(j=l.getDimension(j),k=l.getDimension(k)):(j*=this._sizeRate,k*=this._sizeRate);var m=f+e,n=g+e;m+=(h-j)/2,n+=(i-k)/2,this._rect.set(m,n,j,k),b.draw(c,this._rect,a.figureBackground(),a.figureBorder())}}}),bn=Xa("SignalBarCellRenderer",Xm,{init:function(){this._super()},barCount:4,minimum:NaN,maximum:NaN,setBarCount:function(a){a=Math.max(2,a),a!=this._barCount&&(this._barCount=a,this._changed())},render:function(a,b,c){var d=NaN,e=a.figureState(),f=e&&"string"==typeof e&&"value"==e.toLowerCase(),g=f?d=a.value():parseInt(e),h=a.figureBorder(),i=a.figureBackground();if(!f||isNaN(this._minimum)||isNaN(this._maximum)||(g=this._barCount*(d-this._minimum)/(this._maximum-this._minimum)),h||i){var j,k=a.figureInactiveBackground(),l=c.width-a.paddingHorz(),m=c.height-a.paddingVert(),n=a.paddingLeft(),o=a.paddingTop(),p=2,q=(l-(this._barCount+1)*p)/this._barCount,r=n,s=o+m/2,t=m/2/(this._barCount-1);for(j=0;j<this._barCount;j++)i=g>j?i:k,b.drawBounds(i,h,r,s,q,m-s),r+=q+p,s-=t}}}),cn=Xa("IconCellRenderer",Xm,{init:function(){this._super()},textVisible:!0,render:function(a,b,c){var d=this._textVisible?this._getText(a):void 0;cn.renderBitmapText(a,d,b,c)}},{renderBitmapText:function(a,b,c,d){var e=a.paddingHorz(),f=a.paddingVert(),g=a.iconOffset(),h=a.iconPadding()+g,i=d.x+a.paddingLeft(),j=d.y+a.paddingTop(),k=d.width-e,l=d.height-f,m=a.iconIndex(),n=a.iconLocation(),o=null;if("string"==typeof m&&0==m.indexOf("value"))if(5==m.length)m=a.value();else if("["==m.charAt(5)){var p=m.lastIndexOf("]");p>=0&&(m=m.substring(6,p),m=parseInt(a.getValueOf(m)))}if(m>=0){var q=a.index().dataColumn().images();o=q?q.getImage(m):null}if(o){var r=i,s=j,t=o.width,u=o.height;switch(n){case Oe.RIGHT:switch(r=d.right()-t-g-a.paddingRight(),a.iconAlignment()){case Ne.CENTER:s+=(l-u)/2;break;case Ne.FAR:s+=l-f-u}k-=t+h;break;case Oe.TOP:switch(s+=g,a.iconAlignment()){case Ne.CENTER:r+=(k-t)/2;break;case Ne.FAR:r+=k-e-t}j+=u+h,l-=u+h;break;case Oe.BOTTOM:switch(s=d.bottom()-u-g-a.paddingBottom(),a.iconAlignment()){case Ne.CENTER:r+=(k-t)/2;break;case Ne.FAR:r+=k-e-t}l-=u+h;break;case Oe.CENTER:r+=(k-t)/2,s+=(l-u)/2;break;case Oe.LEFT:default:switch(r+=g,a.iconAlignment()){case Ne.CENTER:s+=(l-u)/2;break;case Ne.FAR:s+=l-f-u}i+=t+h,k-=t+h}c.drawImageI(o,r,s)}b&&n!=Oe.CENTER&&Zm.renderWrapText(a,c,i,j,k,l,b)}}),dn=Xa("ImageCellRenderer",Xm,{init:function(){this._super()},render:function(a,b,c){var d=a.value();if(d){var e=a.grid().getImage(d);if(e){c=this._rect.copy(c),a.inflatePadding(c);var f,g,h,i=c.x,j=c.y,k=e.width,l=e.height;switch(a.contentFit()){case Pe.CENTER:i+=(c.width-k)/2,j+=(c.height-l)/2;break;case Pe.BOTH:g=c.width/k,h=c.height/l,k=c.width,l=c.height;break;case Pe.WIDTH:f=c.width/k,k=c.width,j+=(c.height-l)/2;break;case Pe.HEIGHT:f=c.height/l,l=c.height,i+=(c.width-k)/2;break;case Pe.AUTO:g=c.width/k,h=c.height/l,f=Math.min(g,h),k*=f,l*=f,g>h?i+=(c.width-k)/2:j+=(c.height-l)/2}b.drawImage(e,i,j,k,l)}}}}),en=(Xa("RatingCellRenderer",Xm,{init:function(){this._super()},base:0,delta:1,rangeType:"match",ranges:null,render:function(a,b,c){}}),Xa("Code39CellRenderer",Xm,{init:function(){this._super(),this._barcode=new rf,this.setMinWidth(100)},render:function(a,b,c){var d=a.value();if(d){var e=a.figureBackground();if(e){this._rect.copy(c);var f=a.inflatePadding(this._rect);this._barcode.setValue(d.toUpperCase()),this._barcode.setBarFill(e),this._barcode.render(b,f)}}}})),fn=Xa("Code128CellRenderer",Xm,{init:function(){this._super(),this._barcode=new pf,this.setMinWidth(100)},render:function(a,b,c){var d=a.value();if(d){var e=a.figureBackground();if(e){this._rect.copy(c);var f=a.inflatePadding(this._rect);this._barcode.setValue(d),this._barcode.setBarFill(e),this._barcode.render(b,f)}}}}),gn=Xa("ClickableCellRenderer",Xm,{init:function(){this._super()},spaceKey:!0,isClickable:function(a){return!0},performClick:function(a,b,c){return this._doClick(a.index())},render:function(a,b,c){},_getClickSource:function(){return null},_getClickData:function(){return null},_doClick:function(a,b,c){var d=this._getClickData(a);return d?(this._fireClicked(a,this._getClickSource(),d),!0):!1},_fireClicked:function(a,b,c){var d=a.grid();d&&d.fireEvent(em.CLICKABLE_CELL_CLICKED,a,b,c)}});gn.LINKABLE_CELL="linkableCell",gn.IMAGE_BUTTON_CELL="imageButtonCell";var hn=Xa("LinkCellRenderer",gn,{init:function(){this._super(),this._urlStatement=new uf(null,!0),this._urlRuntime=new Nm},urlField:null,url:null,showUrl:!0,openUrl:!1,requiredFields:null,isClickable:function(a){return a&&this._getClickData(a)?!0:!1},setUrl:function(a){a!=this._url&&(this._url=a,this._urlStatement.setSource(a),this._changed())},setRequiredFields:function(a){if(a!=this._requiredFields)if(this._requiredFields=a,a){for(var b=a.split(","),c=b.length;c--;)b[c]=b[c].trim().toUpperCase();this._urlRuntime.setRequiredFields(b)}else this._urlRuntime.setRequiredFields(null)},render:function(a,b,c){var d=a.iconLocation()!=Oe.CENTER?this._getText(a):null;cn.renderBitmapText(a,d,b,c)},_getClickSource:function(){return gn.LINKABLE_CELL},_getClickData:function(a){return this._getUrl(a)},getTooltip:function(a){if(this._showUrl){var b;if(a instanceof vj){if(b=a.index().clone(),!a.item()||!a.item().firstItem())return null;b.setItemIndex(a.item().firstItem().index())}else b=a.index();return this._getUrl(b)}return null},_getUrl:function(a){if(this._url)return this._urlRuntime.setIndex(a),this._urlStatement.evaluate(this._urlRuntime);if(this._urlField){var b=a.item();if(b){var c=b.dataSource();if(c){var d=c.getFieldIndex(this._urlField);if(d>=0)return b.getData(d)}}}return null}}),jn=Xa("ImageButtonCellRenderer",gn,{init:function(){this._super()},imageUrl:null,disabledUrl:null,hoverUrl:null,activeUrl:null,text:"Click",hoverText:void 0,disabledText:void 0,enabledExpression:null,downOffset:Ta,ptInButton:function(a,b,c){var d=a.grid(),e=this._hoverUrl?this._hoverUrl:this._imageUrl,f=d.getImage(e);if(f&&this._rect){var g=this._rect,h=g.x+(g.width-f.width)/2,i=g.y+(g.height-f.height)/2,j=h+f.width,k=i+f.height;return b>=h&&c>=i&&j>=b&&k>=c}},isButton:function(){return!0},render:function(a,b,c){var d=a.grid(),e=this._text||this._getText(a);c=this._rect.copy(c),a.inflatePadding(c);var f=this._imageUrl;a.isPressed()?f=this._activeUrl:a.isHovered()&&(f=this._hoverUrl);var g,h,i,j,k=d.getImage(f)||d.getImage(this._imageUrl);k&&(i=k.width)>0&&(j=k.height)>0&&(g=c.x+(c.width-i)/2,h=c.y+(c.height-j)/2,b.drawImage(k,g,h,i,j)),Zm.renderWrapText(a,b,c.x,c.y,c.width,c.height,e)},renderHtml:function(a,b){var c=this._text||a.$_prepareSpan(),d=this._getText(a);b=this._rect.copy(b),a.inflatePadding(b),Jc.renderTextBounds(c,a.font(),a.foreground(),d,b.x,b.y,b.width,b.height,a.textAlign(),a.lineAlign())}}),kn=Xa("SeriesTextCellRenderer",Zm,{init:function(){this._super()},_getText:function(a){var b=a.value();return Kh.getText(b)}});kn.Default=new kn;var ln=Xa("SeriesCellRenderer",Xm,{init:function(){this._super(),this.setMinWidth(100)},_getValues:function(a){return a.value()||[]}}),mn=Xa("SparkChartRenderer",ln,{init:function(){this._super()},baseValue:NaN,firstFill:null,lastFill:null,highFill:null,lowFill:null,belowFill:null,setFirstFill:function(a){a!=this._firstFill&&(this._firstFill=ng.getFill(a),this._changed())},setLastFill:function(a){a!=this._lastFill&&(this._lastFill=ng.getFill(a),this._changed())},setHighFill:function(a){a!=this._highFill&&(this._highFill=ng.getFill(a),this._changed())},setLowFill:function(a){a!=this._lowFill&&(this._lowFill=ng.getFill(a),this._changed())},setBelowFill:function(a){a!=this._belowFill&&(this._belowFill=ng.getFill(a),this._changed())},render:function(a,b,c){var d=this._getValues(a);if(d&&d.length){var e,f,g,h=d.length,i=d[0],j=d[0];for(e=1;isNaN(i)&&h>e;)j=i=d[e++];for(;h>e;e++)f=Number(d[e]),isNaN(f)||(i>f&&(i=f),f>j&&(j=f));g=isNaN(this._baseValue)?i:this._baseValue,isNaN(i)||this._renderChart(a,b,c,d,i,j,g)}},_renderChart:function(a,b,c,d,e,f,g){},_getPoints:function(a,b,c,d,e){var f,g,h,i,j=c.length,k=[],l=b.x+a.paddingLeft(),m=b.width-a.paddingHorz(),n=b.y+a.paddingTop(),o=b.height-a.paddingVert(),p=e-d;for(f=0;j>f;f++)i=Number(c[f]),g=l+f/(j-1)*m,h=n+(isNaN(i)?o:(1-(i-d)/p)*o),k.push(g,h);return k},_getBasePoint:function(a,b,c,d,e){var f=b.height-a.paddingVert(),g=b.y+a.paddingTop(),h=d-c,i=g+(isNaN(e)?f:(1-(e-c)/h)*f);return i}}),nn=Xa("SparkLineRenderer",mn,{init:function(){this._super()},curved:!1,_renderChart:function(a,b,c,d,e,f,g){var h=a.line();if(h){var i,j,k,l,m=isNaN(g)?f:Math.max(f,g),n=isNaN(g)?e:Math.min(e,g),o=this._getPoints(a,c,d,n,m),p=d.length;for(i=0;p-1>i;i++)b.drawLine(h,o[2*i],o[2*i+1],o[2*(i+1)],o[2*(i+1)+1]);if((l=this.firstFill())&&(j=o[0],k=o[1],b.drawCircle(l,null,j,k,2)),(l=this.lastFill())&&(j=o[2*(p-1)],k=o[2*(p-1)+1],b.drawCircle(l,null,j,k,2)),l=this.highFill())for(i=0;p>i;i++)d[i]>=f&&(j=o[2*i],k=o[2*i+1],b.drawCircle(l,null,j,k,2));if(l=this.lowFill())for(i=0;p>i;i++)d[i]<=e&&(j=o[2*i],k=o[2*i+1],b.drawCircle(l,null,j,k,2))}}}),on=Xa("SparkColumnRenderer",mn,{init:function(){this._super()},barWidth:.8,_renderChart:function(a,b,c,d,e,f,g){var h=a.figureBackground();if(h){var i=isNaN(g)?f:Math.max(f,g),j=isNaN(g)?e:Math.min(e,g);j==g&&(j=g-=.2*(i-j));var k,l,m,n,o=d.length,p=Na(this._getBasePoint(a,c,j,i,g)),q=(c.width-a.paddingHorz())/o,r=c.height-a.paddingVert(),s=c.x+a.paddingLeft()+q/2,t=i-j,u=Na(q*this._barWidth);for(k=0;o>k;k++)l=d[k],isNaN(l)||(m=e>=l&&this._lowFill?this._lowFill:l>=f&&this._highFill?this._highFill:g>l&&this._belowFill?this._belowFill:h,n=Na((l-j)*r/t),b.drawBoundsI(m,null,Na(s-u/2),p,u,-n)),s+=q}}}),pn=Xa("SparkWinLossRenderer",mn,{init:function(){this._super(),this.setBaseValue(0)},barWidth:.8,belowHeight:.4,_renderChart:function(a,b,c,d,e,f,g){var h=a.figureBackground();if(h){var i,j,k,l,m=d.length,n=(c.width-a.paddingHorz())/m,o=c.height-a.paddingVert(),p=c.x+a.paddingLeft()+n/2,q=c.y+a.paddingTop(),r=n*this._barWidth,s=q+o*(1-this._belowHeight);for(i=0;m>i;i++)j=d[i],isNaN(j)||j==g||(k=h,g>j&&this._belowFill&&(k=this._belowFill),l=g>j?q+o:q,b.drawBoundsI(k,null,Na(p-r/2),Na(l),Na(r),Na(s-l))),p+=n}}}),qn=Xa("TargetActualRenderer",ln,{init:function(){this._super(),this.setMinWidth(100)},minValue:0,maxValue:100,render:function(a,b,c){var d=this._getValues(a);d.length>=2&&this._doRender(a,b,c,d[0],d[1])},_getValueRate:function(a){return(a-this._minValue)/(this._maxValue-this._minValue)},_doRender:function(a,b,c,d,e){}}),rn=Xa("ActualTargetBulletRenderer",qn,{init:function(){this._super(),this.setMinWidth(100)},maximumBackground:null,setMaximumBackground:function(a){a!=this._maximumBackground&&(this._maximumBackground=ng.getFill(a),this._changed())},_doRender:function(a,b,c,d,e){var f=a.paddingLeft(),g=a.paddingTop(),h=c.width-f-a.paddingRight(),i=c.height-g-a.paddingBottom(),j=this._maximumBackground;if(j&&b.drawBounds(j,null,f,g,h,i),j=a.figureBackground()){var k,l=i;(k=a.figureSize())&&(l=k.getDimension(i));var m=h*this._getValueRate(e),n=a.figureBorder();b.drawBoundsI(j,n,f,g+(i-l)/2,m,l)}var o=f+h*this._getValueRate(d);n=a.line(),n||(n=Dd.DKGRAY),b.drawLine(n,o,g,o,g+i)}}),sn=Xa("ActualTargetTextRenderer",ln,{init:function(){this._super(),this._actualForeground=yd.BLACK,this._targetForeground=yd.BLACK},separator:" / ",actualForeground:null,actualFont:null,targetForeground:null,targetFont:null,setActualForeground:function(a){a!=this._actualForeground&&(this._actualForeground=ng.getFill(a)||yd.BLACK,this._changed())},setActualFont:function(a){a!=this._actualFont&&(this._actualFont=ng.getFont(a))},setTargetForeground:function(a){a!=this._targetForeground&&(this._targetForeground=ng.getFill(a)||yd.BLACK,this._changed())},setTargetFont:function(a){a!=this._targetFont&&(this._targetFont=ng.getFont(a))},_readOption:function(a,b){switch(a){case"actualForeground":case"targetForeground":if(b)return ng.getFill(b);break;case"actualFont":case"targetFont":if(b)return ng.getFont(b)}return b},render:function(a,b,c){var d=this._getOption("actualFont"),e=this._getOption("targetFont"),f=this._getValues(a),g=String(f[0]),h=String(f[1]),i=b.getTextWidth(a.font(),this._separator),j=b.getTextWidth(this._actualFont,h),k=b.getTextWidth(this._targetFont,g),l=i+j+k,m=c.x+a.paddingLeft(),n=c.y;switch(a.textAlignment()){case Ne.CENTER:m=c.x+(c.width-a.paddingHorz()-l)/2;break;case Ne.FAR:m=c.right()-a.paddingRight()-l}b.drawTextBounds(d,this._getOption("actualForeground"),h,m,n,j,c.height),m+=j,b.drawTextBounds(a.font(),a.foreground(),this._separator,m,n,i,c.height),m+=i,b.drawTextBounds(e,this._getOption("targetForeground"),g,m,n,k,c.height)}}),tn=Xa("MockItem",Xf,{init:function(a){this._super(),this._index=a},getDataRow:function(){return this._index},getData:function(a){return"data("+this._index+","+a+")"}}),un=(Xa("MockItemSource",ag,{init:function(a){this._super(),this.setCount(a)},count:0,setCount:function(a){if(a=Math.max(0,a),a!=this._count){this._count=a,this._items=new Array(a);for(var b=0;a>b;b++)this._items[b]=new tn(b)}},getDataSource:function(){return null},setDataSource:function(a){},getItem:function(a){return this._items[a]},getItemCount:function(){return this._items.length}}),function(a){this.column=a,this.dataColumn=ab(a,rk),this.colIndex=0,this.colSpan=0,this.rowIndex=0,this.rowSpan=0,this.width=0,this.valueType="s",this.tag=void 0,this.data=void 0}),vn=Xa("ColumnArray",null,{init:function(a,b){this._super(),this._grid=a,this._headerRows=[],this._dataRows=[],this.$_parse(a,b)},grid:function(){return this._grid},colCount:function(){return this._headerRows.length&&this._headerRows[0].length},headerRowCount:function(){return this._headerRows.length},dataRowCount:function(){return this._dataRows.length},getHeader:function(a,b){return this._headerRows[a][b]},getItem:function(a,b){return this._dataRows[a][b]},setItem:function(a,b,c){this._dataRows[a][b]=c},$_parse:function(a,b){var c=1,d=1,e=a.visibleColumnCount();if(!b)for(var f=0;e>f;f++){var g=a.getVisibleColumn(f);g instanceof ak&&(c=Math.max(c,g.calcHeaderLevels()),d=Math.max(d,g.calcDataLevels()))}for(f=0;c>f;f++)this._headerRows.push([]);for(f=0;d>f;f++)this._dataRows.push([]);this.$_parseRows(a,!0,this._headerRows,b),this.$_parseRows(a,!1,this._dataRows,b)},$_parseRows:function(a,b,c,d){function e(a,b,d,e,f){var g,h,i;for(g=0;e>g;g++)for(h=0;d>h;h++){if(i=new un(f),i.colIndex=h,i.colSpan=d,i.rowIndex=g,i.rowSpan=e,i instanceof rk)switch(f.valueType()){case ie.NUMBER:i.valueType="n";break;case ie.BOOLEAN:i.valueType="b";break;case ie.DATETIME:i.valueType="d";break;default:i.valueType="s"}else i.valueType="s";c[b+g][a+h]=i}}function f(a,c,d,g,h){var i=h.visibleCount();if(1>i)return void e(a,c,d,g,h);if(b&&h.header().isVisible()){if(h.isHideChildHeaders())return void e(a,c,d,g,h);e(a,c,d,1,h),c++,g--}if(b&&h.isHideChildHeaders())return void e(a,c,d,g,h);var j,k,l,m;if(h.isVertical())for(j=0;i>j;j++)k=h.getVisibleItem(j),k instanceof ak?(l=i-1>j?b?k.calcHeaderLevels():k.calcDataLevels():g,f(a,c,d,l,k),c+=l,g-=l):i-1>j?(e(a,c,d,1,k),c++,g--):e(a,c,d,g,k);else for(j=0;i>j;j++)k=h.getVisibleItem(j),k instanceof ak?(m=i-1>j?k.calcHorz():d,f(a,c,m,g,k),a+=m,d-=m):i-1>j?(e(a,c,1,g,k),a++,d--):e(a,c,d,g,k)}var g=c.length,h=0,i=0,j=0;if(d)for(var k=a.getLeafColumns(!0),l=0,m=k.length;m>l;l++)e(i+l,j,1,g,k[l]);else for(var m=a.visibleColumnCount(),l=0;m>l;l++){var n=a.getVisibleColumn(l);n instanceof ak?(h=n.calcHorz(),f(i,j,h,g,n)):(h=1,e(i,j,h,g,n)),i+=h}}}),wn="default",xn="hidden",yn="visible",zn="default",An="item",Bn="row",Cn=7,Dn=Xa("DocumentTitle",null,{init:function(a){"string"==typeof a?(this._message=a,this._styles=new ng(null,"DocumentTitleStyle"),this.$_initStyles(),this._visible=!0,this._spaceTop=0,this._spaceBottom=0,this._height=-1):"object"==typeof a&&(this._message=a.message,this._visible=a.hasOwnProperty("visible")?a.visible:!0,this._styles=new ng(null,"DocumentTitleStyle"),this.$_initStyles(),a.styles&&this._styles.extend(a.styles),this._spaceTop=a.spaceTop?isNaN(parseInt(a.spaceTop))?0:parseInt(a.spaceTop):0,this._spaceBottom=a.spaceBottom?isNaN(parseInt(a.spaceBottom))?0:parseInt(a.spaceBottom):0,this._height=a.height?isNaN(parseInt(a.height))?-1:parseInt(a.height):-1)},$_initStyles:function(){var a="#ff555555,1px";this._styles.borderLeft(a),this._styles.borderRight(a),this._styles.borderTop(a),this._styles.borderBottom(a)},proxy:function(){var a={message:this._message,visible:this._visible};return this._styles&&(a.styles=this._styles.toProxy()),a},message:null,visible:!0,styles:null,spaceTop:0,spaceBottom:0,height:-1}),En=Xa("GridExportOptions",null,{init:function(a){this._super(),this._datetimeWriter=null,a&&this.assign(a)},target:"remote",url:void 0,fileName:null,linear:!1,allItems:!0,indicator:wn,header:wn,footer:wn,headerSummary:wn,indicatorValue:zn,indenting:!0,checkNumber:!1,datetimeFormat:void 0,nullDateText:"",datetimeCallback:null,numberFormat:void 0,numberCallback:null,booleanFormat:null,booleanCallback:null,separateRows:!1,showConfirm:!0,confirmMessage:"Excel 문서로 저장하시겠습니까?",confirmTitle:"Excel 저장",lookupDisplay:!1,compatibility:!1,showLevelOutline:!0,documentTitle:null,documentSubtitle:null,documentTail:null,start:0,count:-1,showProgress:!1,progressMessage:null,applyDynamicStyles:!1,applyDefaultColumnFormat:!1,setFileName:function(a){a=N(a),a&&a.indexOf(".")<0&&(a+=".xlsx"),this._fileName=a},setDatetimeFormat:function(a){a!=this._datetimeFormat&&(this._datetimeFormat=a)},setBooleanFormat:function(a){a!=this._booleanFormat&&(this._booleanFormat=a,a?this._booleanFormatter=new lb(a):this._booleanFormatter=null)},setNumberFormat:function(a){a!=this._numberFormat&&(this._numberFormat=a)},isIndicatorVisible:function(a){if(a)switch(this._indicator){case yn:return!0;case xn:return!1;case wn:default:return a.indicator().isVisible()}return!1},isHeaderVisible:function(a){if(a)switch(this._header){case yn:return!0;case xn:return!1;case wn:default:return a.header().isVisible()}return!1},isHeaderSummaryVisible:function(a){if(a)switch(this._headerSummary){case yn:return!0;case xn:return!1;case wn:default:return a.header().summary().isVisible()}return!1},isFooterVisible:function(a){if(a)switch(this._footer){case yn:return!0;case xn:return!1;case wn:default:return a.footer().isVisible()}return!1},isIndicatorDataRow:function(a){if(a)switch(this._indicatorValue){case An:return!1;case Bn:return!0;case zn:default:return a.indicator().displayValue()==Ae.ROW}return!1},setDocumentTitle:function(a){this._documentTitle=a?new Dn(a):null},setDocumentSubtitle:function(a){this._documentSubtitle=a?new Dn(a):null},setDocumentTail:function(a){this._documentTail=a?new Dn(a):null}}),Fn=Xa("GridExcelExporter",null,{init:function(){this._super(),this._runStyles=new ng,this._seriesCell=new Kh},"export":function(a,b){function c(a){var c=m();e=c-e,k("E X C E L: buildBook "+e),e=c;var f=d.book.createParts();c=m(),e=c-e,k("E X C E L: createParts "+e),e=c;var g=[];for(var h in f)g.push({key:h,body:f[h]});a.$_export(g,b),c=m(),e=c-e,k("E X C E L: zip "+e),e=c}if(a){b=b instanceof En?b:new En(b);var d={grid:a,book:new Ic,options:b,indicator:b.isIndicatorVisible(a)?a.indicator():null,
header:b.isHeaderVisible(a)?a.header():null,headerSummary:b.isHeaderSummaryVisible(a)?a.header().summary():null,footer:b.isFooterVisible(a)?a.footer():null,colArr:new vn(a,b.isLinear()),numberFormatId:0,textFormatId:49,dateFormatId:14,columnStyles:{},columnWrapStyles:{},fixedStyles:void 0,fixedWrapStyles:void 0,allItems:null,indicatorHead:a.indicator().headText()||"No",indicatorFoot:a.indicator().footText()||"",indicatorSummary:a.indicator().summaryText(),compatibility:b.isCompatibility(),showLevelOutline:b.isShowLevelOutline(),rowGrouped:!1,rowLevels:0,indents:0,indentWidth:3,indicatorStyle:void 0,indentHeadStyle:void 0,indentFootStyle:void 0,columnMerged:!1,mergeHeads:{},showProgress:b.isShowProgress(),progressMessage:b.progressMessage()||"Exporting...",progressMax:0,prepareProgress:10,setProgress:function(b){a.setExportProgress(this.progressMax,b+this.prepareProgress,this.progressMessage)}},e=m(),f=this;if(a instanceof po)b.isAllItems()&&(d.allItems=a.getAllItems()),this.$_buildTreeBook(d,function(){c(f)});else{if(b.isAllItems()&&a.isRowGrouped()){d.allItems=a.getAllItems();var g=a.layoutManager().fixedItemCount();if(g>0)for(var h=0;g>h;h++)d.allItems.splice(h,0,a.getItem(h))}this.$_buildBook(d,function(){c(f)})}}},$_buildBook:function(a,b){var c=a.grid;a.rowGrouped=c.isRowGrouped(),a.mergedGrouped=c.isMergedRowGrouped(),a.rowGrouped&&!c.rowGroup().isMergeMode()&&(a.rowLevels+=c.rowGroupLevels()),a.start=0;var d=a.allItems,e=d?d.length:c.itemCount();if(!c.isRowGrouped()){a.start=a.options.start()>0?a.options.start():0;var f=a.options.count();e=f>0?a.start+f>e?e-a.start:f:e-a.start}a.last=a.start+e,this.$_prepareFormats(a),this.$_prepareStyles(a),this.$_buildColumns(a);var g=0,h=0;if(g+=this.$_buildDocumentTitle(a,g,h),g+=a.header?this.$_buildHeader(a,g,h):0,g+=a.headerSummary?this.$_buildHeaderSummary(a,g,h):0,a.showProgress){c.beginExportProgress(a.progressMessage),a.progressMax=e+a.prepareProgress,a.progressStep=Math.max(Na(e/10),1),a.setProgress(0);var i=this;g+=this.$_buildItemsAsync(a,g,h,function(){g=a.row,a.footer&&(g+=i.$_buildFooter(a,g,h)),g+=i.$_buildDocumentTail(a,g,h),c.endExportProgress(),b()})}else g+=this.$_buildItems(a,g,h),a.footer&&(g+=this.$_buildFooter(a,g,h)),g+=this.$_buildDocumentTail(a,g,h),b()},$_buildTreeBook:function(a,b){var c=a.grid;a.rowLevels=a.grid.getLevels(),this.$_prepareFormats(a),this.$_prepareStyles(a),this.$_buildColumns(a),a.start=0,a.last=a.allItems?a.allItems.length:c.itemCount();var d=0,e=0;if(d+=this.$_buildDocumentTitle(a,d,e),d+=a.header?this.$_buildTreeHeader(a,d,e):0,d+=a.headerSummary?this.$_buildTreeHeaderSummary(a,d,e):0,a.showProgress){c.beginExportProgress(a.progressMessage),a.progressMax=a.last+a.prepareProgress,a.progressStep=Math.max(Na(a.last/10),1),a.setProgress(0);var f=this;d+=this.$_buildTreeItemsAsync(a,d,e,function(){d=a.row,a.footer&&(d+=f.$_buildTreeFooter(a,d,e)),d+=f.$_buildDocumentTail(a,d,e),c.endExportProgress(),b()})}else d+=this.$_buildTreeItems(a,d,e),a.footer&&(d+=this.$_buildTreeFooter(a,d,e)),d+=this.$_buildDocumentTail(a,d,e),b()},$_prepareFormats:function(a){var b=a.options,c=a.book,d=b.numberFormat();"number"==typeof d||Na(d)>0?a.numberFormatId=Na(d):d&&(a.numberFormatId=c.addNumberFormat(ExcelFormatConverter.convertNumberFormat(d))),d=b.datetimeFormat(),"number"==typeof d||Na(d)>0?a.dateFormatId=Na(d):d&&(a.dateFormatId=c.addNumberFormat(d))},$_createStyles:function(a,b,c,d,e){var f,g=b.numberFormat(),h=b.datetimeFormat();if(g&&g.length>0?f=ExcelFormatConverter.convertNumberFormat(g):h&&(f=ExcelFormatConverter.convertDateFormat(h)),f){var i=b.prefix();i&&(f='"'+i+'"'+f);var j=b.suffix();j&&(f=f+'"'+j+'"');var k=a.addNumberFormat(f)}c=arguments.length>2?c:!0,d=arguments.length>3?d:!0;var l;if(e){l=new Cc;var m=b.background();if(m instanceof Ad)switch(l.gradient="linear",l.color=m._colors[0].toColorHex(),l.color2=m._colors[1].toColorHex(),l.tint=1-m._colors[0]._a,m._angle){case 180:l.degree="0";break;case 90:l.degree="90";break;case 0:l.degree="180";break;case 270:l.degree="270"}else l.patternType="solid",l.color=m._color.toColorHex(),l.tint=1-m._color._a}a.addFill(l);var n=null;c&&(n=new Dc,n.right=b.borderRight(),n.bottom=b.borderBottom(),n.left=b.borderLeft(),n.top=b.borderTop(),a.addBorder(n));var o=null;d&&(o=new Bc,o.name=b.fontFamily(),o.size=72*b.fontSize()/96,o.color=b.foreground()._color.toColorHex(),o.bold=b.fontBold(),o.italic=b.fontItalic(),a.addFont(o));var p=new Ec;switch(p.fill=l,p.border=n,p.font=o,k&&(p.formatId=k),b.textAlignment()){case Ne.CENTER:p.horzAlign=Ec.ALIGN_CENTER;break;case Ne.FAR:p.horzAlign=Ec.ALIGN_FAR;break;default:p.horzAlign=Ec.ALIGN_NEAR}switch(b.lineAlignment()){case Ne.CENTER:p.vertAlign=Ec.VALIGN_CENTER;break;case Ne.FAR:p.vertAlign=Ec.VALIGN_FAR;break;default:p.vertAlign=Ec.VALIGN_NEAR}return p},$_addStyle:function(a,b,c,d,e){c=arguments.length>2?c:!0,d=arguments.length>3?d:!0,e=arguments.length>4?e:!0;var f=this.$_createStyles(a,b,c,d,e);return a.addStyle(f),f},$_prepareStyles:function(a){function b(a,b,c){if(b instanceof rk){var d=j.getField(b.dataIndex());if(d){var e=b.excelFormat();if("number"==typeof e||Na(e)>0)a.formatId=e;else switch(d.dataType()){case ie.TEXT:a.formatId=e?c.book.addNumberFormat(e):a.formatId?a.formatId:c.textFormatId;break;case ie.NUMBER:a.formatId=e?c.book.addNumberFormat(e):a.formatId?a.formatId:c.numberFormatId;break;case ie.DATETIME:a.formatId=e?c.book.addNumberFormat(e):a.formatId?a.formatId:c.dateFormatId}}}}for(var c=a.colArr,d=!1,e=c.colCount(),f=a.columnStyles,g=a.columnWrapStyles,h=a.grid,i=h.layoutManager().fixedItemCount(),j=h.dataSource(),k=a.options,l=a.book,m=0,n=c.dataRowCount();n>m;m++)for(var o=0;e>o;o++){var p=c.getItem(m,o);if(0==p.colIndex&&0==p.rowIndex){var q=p.column;if(q&&!f[q.$_hash]){var r=this.$_addStyle(l,q.styles());if(b(r,q,a),f[q.$_hash]=r,r=this.$_addStyle(l,q.styles()),b(r,q,a),r.wrapText=!0,g[q.$_hash]=r,!k.isSeparateRows()){var s=q.stateFor(rj.MERGE_ROOMS);s&&(s.refresh(i,h.itemCount()-1),d=!0)}}}}if(a.columnMerged=d,a.fixedStyles=this.$_addStyle(l,h.fixedOptions().styles()),a.fixedWrapStyles=this.$_addStyle(l,h.fixedOptions().styles()),a.fixedWrapStyles.wrapText=!0,h instanceof jm&&h.isRowGrouped()){var t=h.rowGroup();a.rowGroupHeadStyle=this.$_addStyle(l,t.headStyles()),a.rowGroupFootStyle=this.$_addStyle(l,t.footStyles()),a.headerBarStyle=this.$_addStyle(l,t.headerBarStyles(),!1),a.groupBarStyle=this.$_addStyle(l,t.headerStyles(),!1),a.rowGroupHeaderStyle=this.$_addStyle(l,t.headerStyles(),!1),a.rowGroupFooterStyles={},a.rowGroupBarStyles=this.$_addStyle(l,t.barStyles())}},$_buildColumns:function(a){var b,c,d,e,f,g=a.grid,h=a.options,i=a.book,j=a.colArr,k=1,l=[];if(a.indicator&&(c=a.indicatorStyle=this.$_addStyle(i,a.indicator.styles()),d=new Gc,d.index=k++,d.width=Oa(g.indicator().minWidth()/Cn),l.push(d)),h.isIndenting()&&(a.rowGrouped&&!a.mergedGrouped?a.indents=a.rowLevels-1:g instanceof po&&(a.indents=a.rowLevels-1),a.indents)){for(b=0;b<a.indents;b++)d=new Gc,d.width=Math.max(a.indentWidth,1),d.index=k++,l.push(d);a.indentHeadStyle=this.$_addStyle(i,g.header().styles()),a.indentFootStyle=this.$_addStyle(i,g.footer().styles())}var m=j.colCount();for(b=0;m>b;b++){e=j.getItem(0,b),f=e.column,d=new Gc,d.index=k++,d.width=Oa(f.groupWidth()/Cn);var n=g.dataSource(),o=n.getField(f.dataIndex()),p=f.excelFormat();if(p||h._applyDefaultColumnFormat){if(c=this.$_addStyle(i,f.styles(),!1,!0,!1),"number"==typeof p||Na(p)>0)c.formatId=p;else switch(o.dataType()){case ie.TEXT:c.formatId=p?a.book.addNumberFormat(p):c.formatId?c.formatId:a.textFormatId;break;case ie.NUMBER:c.formatId=p?a.book.addNumberFormat(p):c.formatId?c.formatId:a.numberFormatId;break;case ie.DATETIME:c.formatId=p?a.book.addNumberFormat(p):c.formatId?c.formatId:a.dateFormatId}d.style=c}l.push(d)}a.book.sheet().setColumns(l)},$_buildDocumentTitle:function(a,b,c){var d,e,f=(a.grid,a.options),g=a.book,h=g.sheet(),i=h._columns.length,j=b;if((e=f.documentTitle())&&e._visible){j+=e.spaceTop();var k=e.message();d=this.$_addStyle(g,e.styles()),k&&k.match(Da)&&(d.wrapText=!0),h.addText(j,c,k,d,e.height()),h.addMerge(j,c,1,i);for(var l=1;i>l;l++)h.addBlank(j,c+l,d);j++,j+=e.spaceBottom()}if((e=f.documentSubtitle())&&e._visible){j+=e.spaceTop();var k=e.message();d=this.$_addStyle(g,e.styles()),k&&k.match(Da)&&(d.wrapText=!0),h.addText(j,c,k,d,e.height()),h.addMerge(j,c,1,i);for(var l=1;i>l;l++)h.addBlank(j,c+l,d);j++,j+=e.spaceBottom()}return j-b},$_buildDocumentTail:function(a,b,c){var d,e,f=(a.grid,a.options),g=a.book,h=g.sheet(),i=h._columns.length,j=b;if((e=f.documentTail())&&e._visible){j+=e.spaceTop();var k=e.message();d=this.$_addStyle(g,e.styles()),k&&k.match(Da)&&(d.wrapText=!0),h.addText(j,c,k,d,e.height()),h.addMerge(j,c,1,i);for(var l=1;i>l;l++)h.addBlank(j,c+l,d);j++,j+=e.spaceBottom()}return j-b},$_buildHeader:function(a,b,c){var d,e,f,g,h=a.grid,i=a.book,j=i.sheet(),k=a.colArr,l=k.colCount(),m=k.headerRowCount(),n=a.indents;if(a.indicator){if(e=this.$_addStyle(i,h.indicator().headStyles()),j.addText(b,c,a.indicatorHead,e),m>1){for(d=1;m>d;d++)j.addBlank(b+d,c,e);j.addMerge(b,c,m,1)}c++}if(n>0){for(g=0;n>g;g++){for(d=0;m>d;d++)j.addBlank(d+b,g+c,a.indentHeadStyle);j.addMerge(b,g+c,m,1)}c+=n}for(d=0;m>d;d++)for(f=b+d,g=0;l>g;g++){var o=k.getHeader(d,g),p=o.column,q=g+c;if(o.colIndex>0||o.rowIndex>0)j.addBlank(f,q,e);else{var r=p.header();e=this.$_addStyle(i,r.styles());var s=r.displayText();s&&s.match(Da)&&(e.wrapText=!0),j.addText(f,q,s,e),(o.rowSpan>1||o.colSpan>1)&&j.addMerge(f,q,o.rowSpan,o.colSpan)}}return m},$_buildFooter:function(a,b,c){function d(a,b,c,d){var e=h.footer().getCell(h.getIndex(-1,c)),f=e.value();isNaN(f)?void 0===f||"number"==typeof f?k.addText(a,b,e.displayText()||"",d):k.addText(a,b,f||"",d):k.addNumber(a,b,f,d)}var e,f,g,h=a.grid,i=h.footerMergeManager(),j=a.book,k=j.sheet(),l=a.colArr,m=l.colCount(),n=l.dataRowCount(),o=a.indents;if(a.indicator){if(f=this.$_addStyle(j,h.indicator().footStyles()),k.addText(b,c,a.indicatorFoot,f),n>1){for(e=1;n>e;e++)k.addBlank(b+e,c,f);k.addMerge(b,c,n,1)}c++}if(o>0){for(g=0;o>g;g++){for(e=0;n>e;e++)k.addBlank(e+b,g+c,a.indentFootStyle);k.addMerge(b,g+c,n,1)}c+=o}for(e=0;n>e;e++){var p=b+e;for(g=0;m>g;g++){var q=l.getItem(e,g),r=q.column,s=g+c;if(q.colIndex>0||q.rowIndex>0)k.addBlank(p,s,f);else{var t=i.findRoom(g);t&&g==t.start()&&g!=t.base()&&(colItem=l.getItem(e,t.base()),r=colItem.column);var u=r.footer();f=this.$_addStyle(j,u.styles()),t?t.start()==g?(d(p,s,r,f),k.addMerge(p,s,q.rowSpan,t.count())):k.addBlank(p,s,f):(d(p,s,r,f),(q.rowSpan>1||q.colSpan>1)&&k.addMerge(p,s,q.rowSpan,q.colSpan))}}}return a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&k.setRowLevel(p,1),n},$_buildHeaderSummary:function(a,b,c){function d(a,b,c,d){var e=h.header().summary().getCell(h.getIndex(-1,c)),f=e.value();isNaN(f)?void 0===f||"number"==typeof f?k.addText(a,b,e.displayText()||"",d):k.addText(a,b,f||"",d):k.addNumber(a,b,f,d)}var e,f,g,h=a.grid,i=h.headerSummaryMergeManager(),j=a.book,k=j.sheet(),l=a.colArr,m=l.colCount(),n=l.dataRowCount(),o=a.indents;if(a.indicator){if(f=this.$_addStyle(j,h.indicator().summaryStyles()),k.addText(b,c,a.indicatorSummary,f),n>1){for(e=1;n>e;e++)k.addBlank(b+e,c,f);k.addMerge(b,c,n,1)}c++}if(o>0){for(g=0;o>g;g++){for(e=0;n>e;e++)k.addBlank(e+b,g+c,a.indentHeadStyle);k.addMerge(b,g+c,n,1)}c+=o}for(e=0;n>e;e++){var p=b+e;for(g=0;m>g;g++){var q=l.getItem(e,g),r=q.column,s=g+c;if(q.colIndex>0||q.rowIndex>0)k.addBlank(p,s,f);else{var t=i.findRoom(g);t&&g==t.start()&&g!=t.base()&&(colItem=l.getItem(e,t.base()),r=colItem.column);var u=r.header().summary();f=this.$_addStyle(j,u.styles()),t?t.start()==g?(d(p,s,r,f),k.addMerge(p,s,q.rowSpan,t.count())):k.addBlank(p,s,f):(d(p,s,r,f),(q.rowSpan>1||q.colSpan>1)&&k.addMerge(p,s,q.rowSpan,q.colSpan))}}}return a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&k.setRowLevel(p,1),n},$_buildIndicatorCell:function(a,b,c,d,e){var f=a.grid,g=a.book,h=g.sheet(),i=a.indicatorStyle?a.indicatorStyle:this.$_addStyle(g,f.indicator().styles());if(h.addNumber(c,d,b,i),e>1){for(var j=1;e>j;j++)h.addBlank(c+j,d,i);h.addMerge(c,d,e,1)}return 1},$_buildValueCell:function(a,b,c,d,e){var f=a.grid,g=f.body(),h=a.options,i=a.book.sheet(),j=Ye.temp(f,d.index(),e),k=!1,l=e.isFixed()&&f.fixedOptions()._ignoreColumnStyles?a.fixedStyles:a.columnStyles[e.$_hash];if(h.isApplyDynamicStyles()&&g.checkDynamicStyle(j,d)&&(l=this.$_addStyle(a.book,g.getCell(j,!1,d)._styles),k=!0),e._blankWhenExport)i.addText(b,c,"",l);else if(e instanceof rk){var m=e.dataIndex(),n=f.dataSource().getField(m),o=d.getData(m);if(n)switch(n.dataType()){case"number":isNaN(o)?i.addText(b,c,"",l):h._numberCallback?(o=h._numberCallback(d.index(),e.name(),o),"number"==typeof o?i.addNumber(b,c,o,l):i.addText(b,c,o,l)):i.addNumber(b,c,o,l);break;case"datetime":case"date":o?h._datetimeCallback?(o=h._datetimeCallback(d.index(),e.name(),o),o instanceof Date?i.addDate(b,c,o,l,void 0,void 0,a.compatibility):i.addText(b,c,o,l)):i.addDate(b,c,o,l,void 0,void 0,a.compatibility):h._nullText?i.addText(b,c,h._nullText,l):i.addText(b,c,"",l);break;case"boolean":h._booleanCallback?(o=h._booleanCallback(d.index(),e.name(),o),i.addText(b,c,o,l)):h._booleanFormatter?(o=h._booleanFormatter.formatValue(o),i.addText(b,c,o,l)):i.addBool(b,c,o,l);break;default:var p=g.getCellSimple(j);if(h._lookupDisplay&&(e.labelField()||e.isLookupDisplay()))o=p.getTextFromItem(d),o&&o.match(Da)&&(k?l.wrapText=!0:l=a.columnWrapStyles[e.$_hash]),i.addText(b,c,o,l);else if(o)if(h.isCheckNumber())o=Number(o),isNaN(o)?i.addText(b,c,"",l):i.addNumber(b,c,o,l);else{var q,r;(q=e.displayRegExp())&&(r=e.displayReplace())&&(o=o.replace(q,r)),o.match(Da)&&(k?l.wrapText=!0:l=e.isFixed()&&f.fixedOptions()._ignoreColumnStyles?a.fixedWrapStyles:a.columnWrapStyles[e.$_hash]),i.addText(b,c,o,l)}else i.addText(b,c,"",l)}else i.addBlank(b,c,l)}else if(e instanceof tk){this._seriesCell.setIndex(j);var s=this._seriesCell.value();if(s){var t=Kh.getText(s);i.addText(b,c,t,l)}else i.addBlank(b,c,l)}},$_buildRow:function(a,b,c,d,e){var f,g=a.grid,h=a.book,i=h.sheet(),j=a.colArr,k=j.dataRowCount(),l=j.colCount(),m=a.columnStyles,n=a.rowGroupBarStyles,o=g.layoutManager(),p=a.columnMerged,q=a.mergeHeads,r=g.rowGroup(),s=a.indents;b.level();a.indicator&&(d+=this.$_buildIndicatorCell(a,e,c,d,k));for(var t=0;k>t;t++){var u=c+t,v=d;for(f=0;s>f;f++)i.addBlank(u,v,n),v++;for(f=0;l>f;f++){var w=f+v,x=j.getItem(t,f),y=x.column,z=m[y.$_hash];if(x.colIndex>0||x.rowIndex>0)i.addBlank(u,w,z);else{var A=x.rowSpan,B=x.colSpan,C=!1;if(p){var D=Ye.temp(g,b.index(),y),E=o.getMergedCell(D);E?E.isHead(D)&&0==t||a.start>0&&b.index()==a.start?(this.$_buildValueCell(a,u,w,b,y),q[y.$_hash]=u,C=!0):(i.addBlank(u,w,z),(E.isTail(D)||a.last>0&&b.index()==a.last-1)&&(A=u-q[y.$_hash]+k,i.addMerge(q[y.$_hash],w,A,1)),C=!0):a.allItems&&!b.isVisible()&&(Ce.isHeader(r.expandedAdornments())||b!=b.parent().firstItem()?g.isGroupedColumn(y)&&(i.addBlank(u,w,z),Ce.isFooter(r.expandedAdornments())||b!=b.parent().lastItem()||(A=u-q[y.$_hash]+k,i.addMerge(q[y.$_hash],w,A,1)),C=!0):(this.$_buildValueCell(a,u,w,b,y),q[y.$_hash]=u,C=!0))}C||(this.$_buildValueCell(a,u,w,b,y),(A>1||B>1)&&i.addMerge(u,w,A,B))}}a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&i.setRowLevel(u,b.level())}return k},$_buildGroupItem:function(a,b,d,e,f){var g=a.grid,h=a.book,i=h.sheet(),j=a.colArr,k=j.colCount(),l=b.level()-1,m=a.rowGroupBarStyles;for(a.indicator&&(e+=this.$_buildIndicatorCell(a,f,d,e,1)),c=0;c<l;c++)i.addBlank(d,e,m),e++;var n=g.rowGroup().getHeaderText(b);i.addText(d,e,n,a.rowGroupHeaderStyle),a.indents>0&&(k+=a.indents-(b.level()-1));for(var o=1;k>o;o++)i.addBlank(d,o+e,a.rowGroupHeaderStyle);return i.addMerge(d,e,1,k),!a.compatibility&&a.showLevelOutline&&i.setRowLevel(d,b.level()),1},$_buildGroupFooter:function(a,b,c,d,e){function f(a,c,d,e){var f=Mh.getValue(b,d);if(isNaN(f)){var g,h="",i=b.index(),h="";if(i>-1){var j=Ye.temp(l,i,d),k=m.getFooterCell(j);h=void 0===f||"number"==typeof f?k.displayText()||"":f}else(g=d.footer().groupText())&&(h=g);p.addText(a,c,h,e)}else p.addNumber(a,c,f,e)}var g,h,i,j,k,l=a.grid,m=l.rowGroup(),n=(l.fixedOptions().rowCount(),l.groupFooterMergeManager()),o=a.book,p=o.sheet(),q=a.colArr,r=q.getItem(0,0).column,s=(Ye.temp(l,b.index(),r),q.dataRowCount()),t=q.colCount(),u=l.rowGroup().footerStyles(),v=a.rowGroupFooterStyles,w=a.rowGroupBarStyles,x=a.indents,y=b.level();l.layoutManager();a.indicator&&(d+=this.$_buildIndicatorCell(a,e,c,d,s));for(var z=0;s>z;z++){var A=c+z,B=d;if(x>0)for(j=r,g=0;x>g;g++)p.addBlank(A,B,w),B++;for(var C=r.root(),D=0,g=0;t>g;g++){h=g+B,i=q.getItem(z,g),j=i.column,j.group()&&j.root()==C||(C=j.root(),D++);var E=n.findRoom(y-1,D);if(E&&D==E.start()&&D!=E.base()&&(i=q.getItem(z,E.base()+(g-D)),j=i.column),k=v[j.$_hash],!k){var F=j.footer();this._runStyles.assign(F.groupStyles()),this._runStyles.copy(F.styles()),this._runStyles.setParent(u),k=this.$_addStyle(o,this._runStyles),v[j.$_hash]=k}i.colIndex>0||i.rowIndex>0?p.addBlank(A,h,k):E?E.start()==D?(f(A,h,j,k),p.addMerge(A,h,1,E.count())):p.addBlank(A,h,k):(f(A,h,j,k),(i.rowSpan>1||i.colSpan>1)&&p.addMerge(A,h,i.rowSpan,i.colSpan)),a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&p.setRowLevel(A,b.level())}}return s},$_buildMergedGroupHeader:function(a,b,c,d,e){var f=a.grid,g=a.book,h=g.sheet(),i=a.colArr,j=i.colCount(),k=b.level();if(a.indicator&&(d+=this.$_buildIndicatorCell(a,e,c,d,1)),a.columnMerged){var l=k-1,m=i.getItem(0,l).column;this.$_buildValueCell(a,c,d+l,b.firstItem(),m),a.mergeHeads[m.$_hash]=c}var n=f.rowGroup().getHeaderText(b),o=d+k;for(h.addText(c,o++,n,a.rowGroupHeaderStyle);j+d>o;o++)h.addBlank(c,o,a.rowGroupHeaderStyle);return h.addMerge(c,k+d,1,j-k),1},$_buildMergedGroupFooter:function(a,b,c,d,e){function f(a,c,d,e){var f=Mh.getValue(b,d);if(isNaN(f)){var g=b.index(),h="";if(g>-1){var i=Ye.temp(n,g,d),j=o.getFooterCell(i);h=void 0===f||"number"==typeof f?j.displayText()||"":f}else d.footer().groupText()&&(h=d.footer().groupText());r.addText(a,c,h,e)}else r.addNumber(a,c,f,e)}var g,h,i,j,k,l,m,n=a.grid,o=n.rowGroup(),p=n.groupFooterMergeManager(),q=a.book,r=q.sheet(),s=a.colArr,t=s.getItem(0,0).column,u=s.dataRowCount(),v=s.colCount(),w=n.rowGroup().footerStyles(),x=a.rowGroupFooterStyles,y=a.columnStyles,z=(a.options.isIndicatorDataRow(n),b.level()-1);n.layoutManager();for(a.indicator&&(d+=this.$_buildIndicatorCell(a,e,c,d,u)),h=0;z>h;h++)if(i=s.getItem(0,h).column,j=y[i.$_hash],a.allItems||b.parent().isExpanded())for(g=0;u>g;g++)r.addBlank(c+g,d+h,j);else for(g=0;u>g;g++)this.$_buildValueCell(a,c+g,d+h,b.parent().firstItem(),i);for(a.columnMerged&&(a.allItems||b.parent().isExpanded())&&(g=a.mergeHeads[i.$_hash],r.addMerge(g,d+z-1,c+u-g,1)),g=0;u>g;g++){k=c+g;var A=t.root(),B=0;for(h=z;v>h;h++){l=h+d,m=s.getItem(g,h),i=m.column,i.group()&&i.root()==A||(A=i.root(),B++);var C=p.findRoom(z,B);if(C&&B==C.start()&&B!=C.base()&&(m=s.getItem(g,C.base()+(h-B)),i=m.column),j=x[i.$_hash],!j){var D=i.footer();this._runStyles.assign(D.groupStyles()),this._runStyles.copy(D.styles()),this._runStyles.setParent(w),j=this.$_addStyle(q,this._runStyles),x[i.$_hash]=j}m.colIndex>0||m.rowIndex>0?r.addBlank(k,l,j):C?C.start()==B?(f(k,l,i,j),r.addMerge(k,l,1,C.count())):r.addBlank(k,l,j):(f(k,l,i,j),(m.rowSpan>1||m.colSpan>1)&&r.addMerge(k,l,m.rowSpan,m.colSpan)),a.rowGrouped&&!a.compatibility&&a.showLevelOutline&&r.setRowLevel(k,z)}}return u},$_buildItems:function(a,b,c){for(var d=a.grid,e=a.options.isIndicatorDataRow(d),f=a.allItems,g=b,h=a.start;h<a.last;h++){var i=f?f[h]:d.getItem(h);if(i instanceof Xf)g+=this.$_buildRow(a,i,g,c,e?i.dataRow():h+1);else if(i instanceof Zf)g+=this.$_buildGroupItem(a,i,g,c,h+1);else if(i instanceof tj)g+=this.$_buildMergedGroupHeader(a,i,g,c,h+1);else if(i instanceof sj)g+=this.$_buildMergedGroupFooter(a,i,g,c,h+1);else{if(!(i instanceof $f))throw"Unkown item type";g+=this.$_buildGroupFooter(a,i,g,c,h+1)}}return g-b},$_buildItemsAsync:function(a,b,c,d){var e=a.options.isIndicatorDataRow(a.grid);try{this.$_buildItemAsync(a,b,c,e,a.start,d)}catch(f){throw a.grid.endExportProgress(),f}},$_buildItemAsync:function(a,b,c,d,e,f){for(var g=e+Math.min(a.progressStep,a.last-e),h=e;g>h;h++){var i=a.allItems?a.allItems[h]:a.grid.getItem(h);if(i instanceof Xf)b+=this.$_buildRow(a,i,b,c,d?i.dataRow():h+1);else if(i instanceof Zf)b+=this.$_buildGroupItem(a,i,b,c,h+1);else if(i instanceof tj)b+=this.$_buildMergedGroupHeader(a,i,b,c,h+1);else if(i instanceof sj)b+=this.$_buildMergedGroupFooter(a,i,b,c,h+1);else{if(!(i instanceof $f))throw"Unkown item type";b+=this.$_buildGroupFooter(a,i,b,c,h+1)}}if(a.row=b,a.setProgress(g-a.start),e=g,e>=a.last)f();else{var j=this;setTimeout(function(){j.$_buildItemAsync(a,b,c,d,e,f)},0)}},$_buildTreeHeader:function(a,b,c){var d,e,f,g=a.grid,h=a.book,i=h.sheet(),j=a.colArr,k=j.colCount(),l=j.headerRowCount(),m=a.indents;if(a.indicator){if(e=this.$_addStyle(h,g.indicator().headStyles()),i.addText(b,c,a.indicatorHead,e),l>1){for(d=1;l>d;d++)i.addBlank(b+d,c,e);i.addMerge(b,c,l,1)}c++}if(m>0){for(n=0;m>n;n++){for(d=0;l>d;d++)i.addBlank(d+b,n+c,a.indentHeadStyle);i.addMerge(b,n+c,l,1)}c+=m}for(d=0;l>d;d++){f=b+d;for(var n=0;k>n;n++){var o=j.getHeader(d,n),p=o.column,q=n+c;if(o.colIndex>0||o.rowIndex>0)i.addBlank(f,q,e);else{var r=p.header();e=this.$_addStyle(h,r.styles());var s=r.displayText();s&&s.match(Da)&&(e.wrapText=!0),i.addText(f,q,s,e),(o.rowSpan>1||o.colSpan>1)&&i.addMerge(f,q,o.rowSpan,o.colSpan)}}}return l},$_buildTreeHeaderSummary:function(a,b,c){function d(a,b,c,d){var e=g.header().summary().getCell(g.getIndex(-1,c)),f=e.value();isNaN(f)?j.addText(a,b,e.displayText()||"",d):j.addNumber(a,b,f,d)}var e,f,g=a.grid,h=g.headerSummaryMergeManager(),i=a.book,j=i.sheet(),k=a.colArr,l=k.colCount(),m=k.dataRowCount(),n=a.indents;if(a.indicator){if(f=this.$_addStyle(i,g.indicator().summaryStyles()),j.addText(b,c,a.indicatorSummary,f),m>1){for(e=1;m>e;e++)j.addBlank(b+e,c,f);j.addMerge(b,c,m,1)}c++}if(n>0){for(p=0;n>p;p++){for(e=0;m>e;e++)j.addBlank(e+b,p+c,a.indentHeadStyle);j.addMerge(b,p+c,m,1)}c+=n}for(e=0;m>e;e++)for(var o=b+e,p=0;l>p;p++){var q=k.getItem(e,p),r=q.column,s=p+c;if(q.colIndex>0||q.rowIndex>0)j.addBlank(o,s,f);else{var t=h.findRoom(p);t&&p==t.start()&&p!=t.base()&&(colItem=k.getItem(e,t.base()),r=colItem.column);var u=r.header().summary();f=this.$_addStyle(i,u.styles()),t?t.start()==p?(d(o,s,r,f),j.addMerge(o,s,1,t.count())):j.addBlank(o,s,f):(d(o,s,r,f),(q.rowSpan>1||q.colSpan>1)&&j.addMerge(o,s,q.rowSpan,q.colSpan))}}return!a.compatibility&&a.showLevelOutline&&j.setRowLevel(b,1),m},$_buildTreeFooter:function(a,b,c){function d(a,b,c,d){var e=g.footer().getCell(g.getIndex(-1,c)),f=e.value();isNaN(f)?j.addText(a,b,e.displayText()||"",d):j.addNumber(a,b,f,d)}var e,f,g=a.grid,h=g.footerMergeManager(),i=a.book,j=i.sheet(),k=a.colArr,l=k.colCount(),m=k.dataRowCount(),n=a.indents;if(a.indicator){if(f=this.$_addStyle(i,g.indicator().footStyles()),j.addText(b,c,a.indicatorFoot,f),m>1){for(e=1;m>e;e++)j.addBlank(b+e,c,f);j.addMerge(b,c,m,1)}c++}if(n>0){for(p=0;n>p;p++){for(e=0;m>e;e++)j.addBlank(e+b,p+c,a.indentFootStyle);j.addMerge(b,p+c,m,1)}c+=n}for(e=0;m>e;e++)for(var o=b+e,p=0;l>p;p++){var q=k.getItem(e,p),r=q.column,s=p+c;if(q.colIndex>0||q.rowIndex>0)j.addBlank(o,s,f);else{var t=h.findRoom(p);t&&p==t.start()&&p!=t.base()&&(colItem=k.getItem(e,t.base()),r=colItem.column);var u=r.footer();f=this.$_addStyle(i,u.styles()),t?t.start()==p?(d(o,s,r,f),j.addMerge(o,s,1,t.count())):j.addBlank(o,s,f):(d(o,s,r,f),(q.rowSpan>1||q.colSpan>1)&&j.addMerge(o,s,q.rowSpan,q.colSpan))}}return!a.compatibility&&a.showLevelOutline&&j.setRowLevel(b,1),m},$_buildTreeItems:function(a,b,c){for(var d=a.grid,e=a.options.isIndicatorDataRow(d),f=b,g=0;g<a.last;g++){var h=a.allItems?a.allItems[g]:d.getItem(g);if(!(h instanceof $n))throw"Unkonw tree item type";f+=this.$_buildTreeItem(a,h,e?h.dataRow():g+1,f,c)}return f-b},$_buildTreeItemsAsync:function(a,b,c,d){var e=a.options.isIndicatorDataRow(a.grid);this.$_buildTreeItemAsync(a,b,c,e,0,d)},$_buildTreeItemAsync:function(a,b,c,d,e,f){for(var g=a.allItems?a.allItems[e]:a.grid.getItem(e),h=e+Math.min(a.progressStep,a.last-e),i=e;h>i;i++){if(!(g instanceof $n))throw"Unkonw tree item type";b+=this.$_buildTreeItem(a,g,d?g.dataRow():i+1,b,c)}if(a.row=b,a.setProgress(h-a.start),e=h,e>=a.last)f();else{var j=this;setTimeout(function(){j.$_buildTreeItemAsync(a,b,c,d,e,f)},0)}},$_buildTreeItem:function(a,b,c,d,e){var f,g=(a.grid,a.book),h=g.sheet(),i=a.colArr,j=i.dataRowCount(),k=i.colCount(),l=a.columnStyles,m=a.indents,n=b.level();a.indicator&&(e+=this.$_buildIndicatorCell(a,c,d,e,j));for(var o=0;j>o;o++){var p=d+o,q=m>0?e+n-1:e,r=i.getItem(o,0),s=r.column,t=l[s.$_hash],u=m>0?m-n+1:0;if(r.colIndex>0||r.rowIndex>0)for(h.addBlank(p,q,t),f=0;u>f;f++)h.addBlank(p,1+f+q,t);else{for(this.$_buildValueCell(a,p,q,b,s),f=0;u>f;f++)h.addBlank(p,1+f+q,t);h.addMerge(p,q,r.rowSpan,r.colSpan+u)}for(q=m>0?e+m:e,f=1;k>f;f++){var v=f+q;r=i.getItem(o,f),s=r.column,t=l[s.$_hash],r.colIndex>0||r.rowIndex>0?h.addBlank(p,v,t):(this.$_buildValueCell(a,p,v,b,s),(r.rowSpan>1||r.colSpan>1)&&h.addMerge(p,v,r.rowSpan,r.colSpan))}!a.compatibility&&a.showLevelOutline&&h.setRowLevel(d,b.level())}return j},$_exportZip:function(a,b){function c(b){function c(a){b.add(a.key,new zip.TextReader(a.body),function(){j("success"),f++,f==e.length?b.close(d):c(e[f])},function(a,b){j(a+"/"+b)})}var e=a,f=0;c(e[f])}function d(a){var c="local"==b.target();if(c){var d=document.createElement("a");document.body.appendChild(d);var e=URL.createObjectURL(a);d.href=e,d.download="realgrid.xlsx",d.click()}else{var f=new window.FileReader;f.onloadend=function(){var a=b.url(),c='<form name="tempForm" action="'+a+'" method="post">',d=f.result,e=d.indexOf(",");d=d.substr(e+1),d=d.replace(/xmlns=""/g,""),c+='<input type="hidden" name="fileName" value = "realgrid.xlsx"/>',c+='<input type="hidden" name="data" value = "'+d+'"/>',c+='<input id="submitBtn" type="submit"/>',c+="</form>";var g=document.createElement("div");g.innerHTML=c,document.body.appendChild(g),document.getElementById("submitBtn").click()},f.readAsDataURL(a)}}zip.useWebWorkers=!1;var e=new zip.BlobWriter("application/zip");zip.createWriter(e,c,function(a){j("##### ZIP WRITE ERROR: "+a)})},$_export:function(a,b){function c(a){if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(a,e);else if(window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,e);else{var b=document.createElement("a");document.body.appendChild(b);var c=URL.createObjectURL(a);b.href=c,b.download=e,b.click(),document.body.removeChild(b)}}function d(a){var c=b.url(),d='<form name="tempForm" action="'+c+'" method="post">';d+='<input type="hidden" name="fileName" value = "'+e+'"/>',d+='<input type="hidden" name="data" value = "'+a+'"/>',d+='<input id="submitBtn" type="submit"/>',d+="</form>";var f=document.createElement("div");f.innerHTML=d,document.body.appendChild(f),document.getElementById("submitBtn").click(),document.body.removeChild(f)}var e=b.fileName()||"realgrid.xlsx",f="local"==b.target();if(JSZip.support.blob||!f){for(var g=navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&navigator.userAgent.toLowerCase().indexOf("edge/")<0,h=new JSZip,i=0;i<a.length;i++){var j=a[i].body;g||(j=j.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),h.file(a[i].key,j)}f?h.generateAsync?h.generateAsync({type:"blob",compression:"DEFLATE"}).then(function(a){c(a)}):c(h.generate({type:"blob",compression:"DEFLATE"})):h.generateAsync?h.generateAsync({type:"base64",compression:"DEFLATE"}).then(function(a){d(a)}):d(h.generate({type:"base64",compression:"DEFLATE"}))}else alert("not supported on this browser")}}),Gn=(Xa("PrintOptions",null,{init:function(a){this._super(),a&&this.assign(a)}}),Xa("HtmlPrinter",null,{init:function(){this._super(),this._options=null},print:function(a,b){var c=Jc.createElement("iframe");c.id="printFrame",c.onload=function(){var a=Jc.createElement("div");a.innerHTML="Hello?",c.contentDocument.body.appendChild(a),c.focus(),c.contentWindow.print(),ja.body.removeChild(c)},c.style.visibility="hidden",ja.body.appendChild(c)}})),Hn=Q({LEAF:"leaf",ROOT:"root",ALL:"all",CUSTOM:"custom"}),In=(Xa("TreeDataTag",null,{init:function(){this._super()},connect:function(a){},disconnect:function(){},clearRows:function(){},setRows:function(){},addRow:function(a){},addRows:function(a){},removeRow:function(a){},removeRows:function(a){},updateRow:function(){}}),Xa("TreeDataTagCollection",null,{init:function(a){this._super(),this._owner=a,this._items=null,this._tag=null},add:function(a){a&&(null==this._items&&null==this._tag?this._tag=a:a!==this._tag?(this._items=[],this._items.push(this._tag,a),this._tag=null):this._items.indexOf(a)<0&&this._items.push(a),a.connect(this._owner))},remove:function(a){if(a)if(a==this._tag)this._tag=null,a.disconnect();else{var b=this._items.indexOf(a);b>=0&&(this._items.splice(b,1),1==this._items.length&&(this._tag=this._items[0],this._items.length=0,this._items=null),a.disconnect())}},clearRows:function(){if(this._tag)this._tag.clearRows();else if(this._items){var a,b=this._items;for(a=b.length-1;a>=0;a--)b[a].clearRows()}},setRows:function(){if(this._tag)this._tag.setRows();else if(this._items){var a,b=this._items;for(a=b.length-1;a>=0;a--)b[a].setRows()}},addRow:function(a){if(this._tag)this._tag.addRow(a);else if(this._items){var b,c=this._items;for(b=c.length-1;b>=0;b--)c[b].addRow(a)}},addRows:function(a){if(this._tag)this._tag.addRows(a);else if(this._items){var b,c=this._items;for(b=c.length-1;b>=0;b--)c[b].addRows(a)}},removeRow:function(a){if(this._tag)this._tag.removeRow(a);else if(this._items){var b,c=this._items;for(b=c.length-1;b>=0;b--)c[b].removeRow(a)}},removeRows:function(a){if(this._tag)this._tag.removeRows(a);else if(this._items){var b,c=this._items;for(b=c.length-1;b>=0;b--)c[b].removeRows(a)}},updateRow:function(a){if(this._tag)this._tag.updateRow(a);else if(this._items){var b,c=this._items;for(b=c.length-1;b>=0;b--)c[b].updateRow(a)}}})),Jn=Xa("TreeDataSource",null,{init:function(a,b){Ya.init.call(this,a,b),this._provider=a,this._rootRow=b,this._rows=null,this._rowCount=0},provider:function(){return this._provider},rootRow:function(){return this._rootRow},insertedRows:function(){return this._rows},insertedCount:function(){return this._rowCount},_prepareLoad:function(a){this._rowCount=0,this._rows=[]},_objectToArray:function(a,b){var c,d,e=b.fieldCount(),f=new Array(e);for(c=0;e>c;c++)d=b.getOrgFieldName(c),a.hasOwnProperty(d)&&(f[c]=a[d]);return f},_createRow:function(a,b,c){var d=new Un(this._provider,c);return this.provider().$_internalCalculateValues(d._values,d.rowId()),a>=0&&this._provider.setHasChildren(d,c[a]),b>=0&&this._provider.setIconIndex(d,c[b]),d},_createRow2:function(a,b,c){var d=new Un(this._provider,c);return this.provider().$_internalCalculateValues(d._values,d.rowId()),void 0!==a&&this._provider.setHasChildren(d,a),void 0!==b&&this._provider.setIconIndex(d,b),d},_rowAdded:function(a,b){this._rowCount++,this._rows&&b.parent()===a&&this._rows.push(b)},_addRow:function(a,b,c,d,e){var f=this._createRow(c,d,e);return b._insertChild(b.count(),f,!0,!0),this._rowAdded(a,f),f},_addRow2:function(a,b,c,d,e){var f=this._createRow2(c,d,e);return b._insertChild(b.count(),f,!0,!0),this._rowAdded(a,f),f}}),Kn=Jn.prototype,Ln=Xa("ArraySourceImpl",Jn,{init:function(a,b){Kn.init.call(this,a,b),this.checkParentProc=null},_loadData:function(a,b,c,d,e,f){if(this._prepareLoad(b),!a||a.length<1)return this._rowCount;var g,h=this.provider(),i=a.length,j=[];for(g=0;i>g;g++)j[g]=g,s(a[g])||(a[g]=this._objectToArray(a[g],h));d&&this.$_sortRows(j,a,c,0,i-1),this.provider().beginUpdate();try{this.$_buildTree(b?b:this.rootRow(),j,a,c,e,f)}finally{this.provider().endUpdate(!1)}return this.insertedCount()},$_sortRows:function(a,b,c,d,e){function f(a,d){var e=b[a][c],f=b[d][c];return e==f?0:f>e?-1:1}var g,h,i,j,k,l;do{g=d,h=e,i=a[Ma((d+e)/2)];do{for(;;){if(k=a[g],l=f(i,k),0>=l)break;g++}for(;;){
if(k=a[h],l=f(i,k),l>=0)break;h--}h>=g&&(g!=h&&(j=a[g],a[g]=a[h],a[h]=j),g++,h--)}while(h>=g);h>d&&this.$_sortRows(a,b,c,d,h),d=g}while(e>d)},$_buildTree:function(a,b,c,d,e,f){function g(b,c,e){for(var f,g=e[d];b!=a;){if(f=b.getValue(d),this.checkParentProc){if(this.checkParentProc(f,g))return b}else if(0==g.indexOf(f))return b;b=b.parent()}return a}var h=b[0],i=this._createRow(e,f,c[h]),j=g(a,i,c[h]);if(j._insertChild(j.count(),i,!0,!0),this._rowAdded(a,i),b.length>1){var k,l=b.length,m=i;for(k=1;l>k;k++)h=b[k],i=this._createRow(e,f,c[h]),j=g(m,i,c[h]),j._insertChild(j.count(),i,!0,!0),this._rowAdded(a,i),m=i}}}),Mn=Ln.prototype,Nn=Xa("ArrayTreeSource",Ln,{init:function(a,b){Mn.init.call(this,a,b)},load:function(a,b,c,d,e,f){return this._loadData(b,a,c,d,e,f)}}),On=(Nn.prototype,Xa("CsvTreeSource",Ln,{init:function(a,b){Mn.init.call(this,a,b)},load:function(a,b,c,d,e,f){var g=Jf.csvToArray(this.provider(),b);return this._loadData(g,a,c,d,e,f)}})),Pn=(On.prototype,Xa("JsonTreeSource",Jn,{init:function(a,b){Kn.init.call(this,a,b)},load:function(a,b,c,d,e){if(this._prepareLoad(a),b){var f=Nf.extractJson(b,c);if(f&&f.length>0){this.provider().beginUpdate();try{this.$_buildTree(this.provider(),a?a:this.rootRow(),f,c,d,e)}finally{this.provider().endUpdate(!1)}}}return this._rowCount},load2:function(a,b,c,d,e,f){if(this._prepareLoad(a),b){var g=Nf.extractJson(b,c);if(g&&g.length>0){this.provider().beginUpdate();try{this.$_buildTree2(this.provider(),a?a:this.rootRow(),g,d,e,f)}finally{this.provider().endUpdate(!1)}}}return this._rowCount},$_buildTree:function(a,b,c,d,e,f){function g(a,c,h,i){for(var j=i.length,k=0,l=h.length;l>k;k++){for(var m=h[k],n=new Array(j),o=0;j>o;o++){var p=i[o];m.hasOwnProperty(p)&&(n[o]=m[p])}var q=a._addRow(b,c,e,f,n);if(m.hasOwnProperty(d)){var r=m[d];s(r)&&r.length>0&&g(a,q,r,i)}}}var h=a.getOrgFieldNames();g(this,b,c,h)},$_buildTree2:function(a,b,c,d,e,f){function g(a,c,h,i){for(var j=i.length,k=0,l=h.length;l>k;k++){for(var m=h[k],n=new Array(j),o=0;j>o;o++){var p=i[o];m.hasOwnProperty(p)&&(n[o]=m[p])}var q=a._addRow2(b,c,m[e],m[f],n);if(m.hasOwnProperty(d)){var r=m[d];s(r)&&r.length>0&&g(a,q,r,i)}}}var h=a.getOrgFieldNames();g(this,b,c,h)}})),Qn=(Pn.prototype,Xa("XmlTreeSource",Jn,{init:function(a,b){Kn.init.call(this,a,b)},load:function(a,b,c,d,e){if(this._prepareLoad(a),b){var f="string"==typeof b?X(b):b;if(f){var g=Nf.extractXml(f.documentElement,c);if(g&&g.length>0){this.provider().beginUpdate();try{this.$_buildTree(this.provider(),a?a:this.rootRow(),g,c,d,e)}finally{this.provider().endUpdate(!1)}}}}return this._rowCount},$_buildTree:function(a,b,c,d,e,f){function g(a,c,j){for(var k=0,l=j.length;l>k;k++){var m=j[k],n=Jf.xmlToRow(m,h,i),o=a._addRow(b,c,e,f,n),p=Nf.extractXml(m,d);p&&p.length>0&&g(a,o,p)}}var h=a.getFields(),i=a.getOrgFieldNames();g(this,b,c,a.getFields())}})),Rn=(Qn.prototype,0),Sn=Xa("TreeDataRow",null,{init:function(){Ya.init.call(this,!0),this._rowId=Rn++,this._children=null,this._descendantCount=0},rowId:function(){return this._rowId},provider:function(){return null},parent:function(){return null},index:function(){return-1},level:function(){return 0},iconIndex:function(){return-1},hasChildren:function(){return!1},count:function(){return this._children?this._children.length:0},descendantCount:function(){return this._descendantCount},children:function(){return this._children?this._children.concat():null},descendants:function(){function a(b,c){var d,e,f=b.count();for(d=0;f>d;d++)c.push(e=b.getChild(d)),a(e,c)}if(this._children){var b=[];return a(this,b),b}return null},ancestors:function(){var a=null,b=this.parent();if(b)for(a=[];b&&b.rowId()>=0;)a.push(b),b=b.parent();return a},getChild:function(a){if(a>=0){if(!this._children||a>=this._children.length)throw new RangeError("Index is invalid: "+a);return this._children[a]}throw new RangeError("Index is invalid: "+a)},getChildObjects:function(a,b,c,d){var e=this._children;if(e){var f=[];b=b||"rows",c=c||"iconIndex";for(var g=0,h=e.length;h>g;g++){var i=e[g],j=i.getObject();d&&(j._rowId=i._rowId),a&&(j[b]=i.getChildObjects(a,b,c,d)),j[c]=i.iconIndex(),f.push(j)}return f}return null},$_createTreeOutputRows:function(a,b,c){function d(a,b,c){for(var e=0,f=a.length;f>e;e++){var g=a[e];b.push(a[e]),c&&g[c]&&g[c].length&&d(g[c],b,c)}}var e=[];d(a,e,c);var f,g,h=this.provider(),i=h.fieldCount(),j=e.length;b instanceof Af||(b=new Af(b));for(var k=b.nullDateText(),l=0;i>l;l++){var m,n,o=h.getField(l),p=o.orgFieldName();if(o._dataType==ie.DATETIME&&((m=b._datetimeCallback)||(n=b._datetimeWriter)||null!=k&&void 0!=k))if(m)for(f=0;j>f;f++)g=e[f],g[p]=m(g._rowId,p,g[p]);else for(f=0;j>f;f++){g=e[f];var q=g[p];g[p]=q?n?n.getText(g[p]):q:k}else if(o._dataType==ie.BOOLEAN&&((m=b._booleanCallback)||(n=b._booleanFormatter)))if(m)for(f=0;j>f;f++)g=e[f],g[p]=m(g._rowId,p,g[p]);else for(f=0;j>f;f++)g=e[f],g[p]=n.formatValue(g[p])}for(var l=0,r=e.length;r>l;l++)delete e[l]._rowId},getOutput:function(a,b){if(a){var c=this.getObject();return c[b||"iconIndex"]=this.iconIndex(),c._rowId=this._rowId,this.$_createTreeOutputRows([c],a),c}return null},getChildOutputObjects:function(a,b,c,d){var e=this.getChildObjects(b,c,d,!0);return e&&a&&this.$_createTreeOutputRows(e,a,c),e},findById:function(a){if(this._children){var b,c,d,e=this._children.length;for(b=0;e>b;b++){if(c=this._children[b],c.rowId()==a)return c;if(d=c.findById(a))return d}}return null},indexOf:function(a){return this._children?this._children.indexOf(a):-1},_moveChild:function(a,b){if(0>a||a>=this._children.length)throw new RangeError("index is out of range: "+a);if(0>b||b>=this._children.length)throw new RangeError("newIndex is out of range: "+b);var c=this._children[a];if(a>b)for(var d=a;d>b;d--)this._children[d]=this._children[d-1];else for(var d=a;b>d;d++)this._children[d]=this._children[d+1];this._children[b]=c},_changeParent:function(a,b){if(0>b||b>a._children.length)throw new RangeError("index is out of range: "+b);var c=this.parent(),d=this.index();c._children.splice(d,1),c._descendantCountChanged(-1-this.descendantCount()),c._detach(this),a._children.splice(b,0,this),a._descendantCountChanged(1+this.descendantCount()),a._attach(this)},_insertChild:function(a,b,c,d){var e=this.provider();if(e&&!c){if(!e._checkClientState())return;e.refreshFieldFormats()}if(!b)throw new Error("child is null");if(this._children=this._children||[],0>a||a>this._children.length)throw new RangeError("Insert index is invalid: "+a);return c||this._doChildAdding(a,b)?(this._children.splice(a,0,b),this._descendantCountChanged(1+b.descendantCount()),this._attach(b),d||b._changeRowState(je.CREATED,!0),this._doChildAdded(a,b),!0):!1},insertChild:function(a,b,c){return this._insertChild(a,b,!1,c)},_addChild:function(a,b,c){return this._insertChild(this.count(),a,b,c)},addChild:function(a,b){return this._insertChild(this.count(),a,!1,b)},$_removeChild:function(a,b,c){return c||this._doChildRemoving(a)?(this._children.splice(b,1),this._descendantCountChanged(-1-a.descendantCount()),this._detach(a),this._doChildRemoved(a),!0):!1},_removeChild:function(a,b){var c=this.provider();if(!c||b||c._checkClientState()){if(a&&this._children){var d,e;for(d=this._children.length;d--;)if(this._children[d]===a){if(e=this.provider(),!e.isSoftDeleting()||!e.isCheckStates())return this.$_removeChild(a,d,b);switch(a.rowState()){case je.CREATED:if(e.isDeleteCreated())return this.$_removeChild(a,d,b);a._changeRowState(je.CREATE_AND_DELETED,!0);break;case je.DELETED:case je.CREATE_AND_DELETED:break;default:a._changeRowState(je.DELETED,!0)}}}return!1}},removeChild:function(a){return this._removeChild(a,!1)},_removeChildren:function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},clearChildren:function(){var a=this.provider();(!a||a._checkClientState())&&this._removeChildren()},_setChildren:function(a){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var b,c=-this._descendantCount;if(a&&(b=a.length)>0){this._children||(this._children=[]);for(var d=0;b>d;d++){var e=a[d];this._children.push(e),c+=1+e.descendantCount(),this._attach(e)}}this._descendantCountChanged(c)},findChild:function(a,b){var c=this.provider();if(!c||!a||a.length<1||!b||b.length<a.length)return null;var d,e,f,g,h=[],i=[];for(f=a.length,d=0;f>d;d++)e="string"==typeof a[d]?c.getFieldIndex(a[d]):Number(a[d]),e>=0&&e<c.fieldCount()&&h.indexOf(e)<0&&(h.push(e),i.push(b[d]));for(g=h.length,d=0;g>d;d++)h[d]=c.getField(h[d]);return this.$_findChild(h,i)},$_findChild:function(a,b){var c,d,e,f,g=a.length,h=this.count();for(c=0;h>c;c++){for(e=this._children[c],f=!0,d=0;g>d;d++)if(!a[d].equalValues(b[d],e.getValue(a[d].index))){f=!1;break}if(f)return e;if(e=e.$_findChild(a,b))return e}return null},isAncestorOf:function(a){if(a&&a!==this){for(var b=a.parent();b&&b!==this;)b=b.parent();return b===this}return!1},_descendantCountChanged:function(a){this._descendantCount+=a;var b=this.parent();b&&b._descendantCountChanged(a)},clearRowStates:function(a,b){var c=this.provider();if(c){var d,e,f=[],g=a?[]:null;this._collectStateRows(f,g);var h=f.length,i=g?g.length:0;if(0!=h||0!=i){if(b)for(e=f.length,d=0;e>d;d++)f[d]._changeRowState(je.NONE,!0);else h&&c.changeRowStates(f,je.NONE);i&&c.deleteRows(g)}}},_collectStateRows:function(a,b){for(var c=this.count();c--;){var d=this.getChild(c),e=d.rowState();!b||e!=je.DELETED&&e!=je.CREATE_AND_DELETED?(e!=je.NONE&&a.push(d),d._collectStateRows(a,b)):b.push(d)}},$_clearOrgValues:function(){for(var a=this.count();a--;)this.getChild(a).$_clearOrgValues()},$_restoreState:function(a,b){if(a)for(var c=this.count();c--;)this.getChild(c).$_restoreState(!0,b);return!1},$_restoreRow:function(a,b){if(a)for(var c=this.count();c--;)this.getChild(c).$_restoreRow(!0,b);return!1},toTreeString:function(){for(var a=this.rowId(),b=new Array(this.level()+1).join("  "),c=0;c<this.count();c++)a+="\n"+b+this.getChild(c).toTreeString();return a},_attach:function(a){_a()},_deatach:function(a){_a()},_checkFieldIndex:function(a){var b=this.provider().fieldCount();if(0>a||a>=b)throw new yf("Field index is out of bounds: "+a)},_doChildAdding:function(a,b){var c=this.provider();return c?c._rowAdding(this,a,b):!0},_doChildAdded:function(a,b){var c=this.provider();c&&c._rowAdded(b)},_doChildRemoving:function(a){var b=this.provider();return b?b._rowRemoving(a):!0},_doChildRemoved:function(a){var b=this.provider();b&&b._rowRemoved(a)},_doCleared:function(){var a=this.provider();a&&a._rowCleared(this)}}),Tn=Sn.prototype,Un=Xa("TreeDataRowImpl",Sn,{init:function(a,b){if(Tn.init.call(this),this._parent=null,this._iconIndex=-1,this._hasChildren=!1,this._values=null,this._orgValues=null,this._state=je.NONE,a&&b){var c,d=a.fieldCount(),e=Math.min(b.length,d);for(this._values=new Array(d),c=0;e>c;c++)this._values[c]=a.getField(c).readValue(b[c])}},provider:function(){return this._parent?this._parent.provider():null},parent:function(){return this._parent},index:function(){return this._parent?this._parent.indexOf(this):-1},level:function(){return this._parent?this._parent.level()+1:0},hasChildren:function(){return this._hasChildren},setHasChildren:function(a){if(a!=this._hasChildren){this._hasChildren=a;var b=this.provider();b&&b.hasChildrenChanged(this)}},iconIndex:function(){return this._iconIndex},setIconIndex:function(a){if(a=parseInt(a),isNaN(a)&&(a=-1),a!=this._iconIndex){this._iconIndex=a;var b=this.provider();b&&b._iconIndexChanged(this)}},values:function(){return this._values?this._values.concat():[]},rowState:function(){return this._state},_changeRowState:function(a,b){var c=this.provider();if(c&&c.isCheckStates()&&a!=this._state){var d=this._state;return this._state=a,a==je.UPDATED&&c._needOrgValues?this._orgValues=this._values.concat():d==je.updated&&this._orgValues&&(this._orgValues=null),b&&c._stateChanged(this),!0}return!1},getValue:function(a){var b=this.provider();if(b){if(this._checkFieldIndex(a),this._values)return this._values[a];throw new Error("Row data is not loaded")}return void 0},setValue:function(a,b,c){var d=this.provider();if(d){if(!d._checkClientState())return;if(d.refreshFieldFormats(),this._checkFieldIndex(a),this._values){if(b!=this._values[a]){var e,f=d.isCheckStates()&&(this._state==je.NONE||!this._state);!c&&f&&d._needOrgValues&&(e=this._values.concat()),this._values[a]=b,d.$_internalCalculateValues(this._values,this.rowId()),!c&&f?(d._needOrgValues&&(this._orgValues=e),this._state=je.UPDATED,d._stateChanged(this)):d._needRestore&&this.$$_restoreState(d),d._valueChanged(this,a)}return}throw new Error("Row data is not loaded")}},getObject:function(){var a=this.provider();if(a){var b,c,d=a.fieldCount(),e={};for(b=0;d>b;b++)c=a.getOrgFieldName(b),e[c]=this._values[b];return e}return null},update:function(a){return this.$_update(a,!1,!1)},updateStrict:function(a){return this.$_update(a,!0,!1)},_update:function(a,b){return this.$_update(a,!1,b)},_updateStrict:function(a,b){return this.$_update(a,!0,b)},$_update:function(a,b,c){var d=this.provider();if(d){if(!c){if(!d._checkClientState())return;d.refreshFieldFormats()}if(a&&(c||d._rowUpdating(this)))return this._internalUpdate(a,b,!0),d._rowUpdated(this),!0}return!1},copy:function(){var a=new Un(null,null);a._rowId=this._rowId,a._iconIndex=this._iconIndex,a._hasChildren=this._hasChildren,a._state=this._state,a._values=this._values?this._values.concat():null;var b,c,d=this.count();for(b=0;d>b;b++)c=this.getChild(b).copy(),a._addChild(c,!0,!0);return a},_attach:function(a){a._parent=this},_detach:function(a){a._parent===this&&(a._parent=null)},$_clearOrgValues:function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),this._super()},$_restoreState:function(a,b){var c=$$_restoreState(this.provider());return c&&b&&b.push(this),this._super(a,b),c},$_restoreRow:function(a,b){var c=!1;if(this._state===je.UPDATED){var d=this._orgValues;if(d){for(var e=this._values,f=0,g=Math.min(d.length,this.provider().fieldCount());g>f;f++)e[f]=d[f];this._state=je.NONE,b&&b.push(this),c=!0}}return this._super(!0,b),c},$$_restoreState:function(a){if(this._state==je.UPDATED&&this._orgValues){for(var b=this._orgValues,c=this._values,a=this.provider(),d=a.isStrictRestore(),e=0,f=a.fieldCount();f>e;e++){var g=c.length>e?c[e]:void 0,h=b.length>e?b[e]:void 0;if(d){if(!a.getField(e).equalValues(g,h))return!1}else if(!a.getField(e).sameValues(g,h))return!1}return this._state=je.NONE,!0}return!1},$_getUpdatedCells:function(){var a=this._orgValues,b=this._values,c=this.provider(),d=c.isStrictRestore(),e=[];if(!a||a.length<=0)return null;for(var f=0,g=c.fieldCount();g>f;f++){var h=b.length>f?b[f]:void 0,i=a.length>f?a[f]:void 0;c._fields[f].isCalculated()||(d?c.getField(f).equalValues(h,i)||e.push({fieldName:c.getOrgFieldName(f),oldValue:a[f],newValue:b[f]}):c.getField(f).sameValues(h,i)||e.push({fieldName:c.getOrgFieldName(f),oldValue:a[f],newValue:b[f]}))}return e},_setHasChildren:function(a){this._hasChildren=a},_setIconIndex:function(a){a=parseInt(a),this._iconIndex=isNaN(a)?-1:parseInt(a)},_internalUpdate:function(a,b,c){var d,e=!1,f=s(a),g=this.provider();if(g){var h,i,j,k=Math.min(g.fieldCount(),f?a.length:g.fieldCount()),l=g.isCheckStates()&&(this._state==je.NONE||!this._state);for(l&&g._needOrgValues&&(j=this._values.concat()),h=0;k>h;h++)d=g.getField(h),(f||a.hasOwnProperty(d._orgFieldName))&&(i=f?a[h]:a[d._orgFieldName],b&&void 0===i||(e=g._needRestore?e||(b?!d.equalValues(this._values[h],d.readValue(i)):!d.sameValues(this._values[h],d.readValue(i))):!0,this._values[h]=g.getField(h).readValue(i)));g.$_internalCalculateValues(this._values,this.rowId()),l&&e?(j&&(this._orgValues=j),this._state=je.UPDATED,c&&g._stateChanged(this)):g._needRestore&&this.$$_restoreState(g)}}}),Vn=Xa("RootTreeRow",Sn,{init:function(a){this._super(),this._provider=a},copy:function(){var a,b,c=this.count(),d=new Vn(null);for(a=0;c>a;a++)b=this.getChild(a).copy(),d._addChild(b,!0,!0);return d._provider=this._provider,d},set:function(a){for(var b=[],c=0,d=a.count();d>c;c++)b.push(a.getChild(c).copy());this._setChildren(b)},provider:function(){return this._provider},rowId:function(){return-1},parent:function(){return null},level:function(){return 0},index:function(){return 0},hasChildren:function(){return!0},iconIndex:function(){return-1},setIconIndex:function(a){},values:function(){return null},rowState:function(){return je.NONE},_setHasChildren:function(){},_changeRowState:function(a,b){return!1},getValue:function(a){return ta},setValue:function(a,b,c){},getObject:function(){return null},update:function(a,b){return!1},updateStrict:function(a,b){return!1},_attach:function(a){a._parent=this},_detach:function(a){a._parent===this&&(a._parent=null)}}),Wn=Xa("TreeDataProvider",Cf,{init:function(){this._super()},rootRow:function(){return null}}),Xn=Xa("LocalTreeDataProvider",Wn,{init:function(){this._super(),this._eventLock=0,this._resetLock=0,this._countDirty=!1,this._tagLock=!1,this._points=[],this._nextPoint=0,this._rootRow=new Vn(this),this._rowMap=[],this._tags=new In(this),this._needOrgValues=!1,this._needRestore=!1,this._nextRowId=0,this.checkParentProc=null,this.calculateRuntime()},needOrgValues:function(){return this._needOrgValues},needRestore:function(){return this._needRestore},addTag:function(a){this._tags.add(a)},removeTag:function(a){this._tags.remove(a)},setRows:function(a,b,c,d,e){if(this._checkClientState()){var f,g=0,h=this.getFieldIndex(b);if(h>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),f=new Nn(this,this._rootRow),f.checkParentProc=this.checkParentProc,g=f.load(null,a,h,c,this.getFieldIndex(d),this.getFieldIndex(e)),this._checkSum(g)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),g}},setCsvRows:function(a,b,c,d,e){if(this._checkClientState()){var f,g=0,h=this.getFieldIndex(b);if(h>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),f=new On(this,this._rootRow),f.checkParentProc=this.checkParentProc,g=f.load(null,a,h,c,this.getFieldIndex(d),this.getFieldIndex(e)),this._checkSum(g)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),g}},setXmlRows:function(a,b,c,d){if(this._checkClientState()){var e,f=0;if(a){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),e=new Qn(this,this._rootRow),f=e.load(null,a,b,this.getFieldIndex(c),this.getFieldIndex(d)),this._checkSum(f)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),f}},setJsonRows:function(a,b,c,d){if(this._checkClientState()){if(a){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var e=new Pn(this,this._rootRow);this._rowCount=e.load(null,a,b,this.getFieldIndex(c),this.getFieldIndex(d))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this._rowCount}},setJsonRows2:function(a,b,c,d,e){if(this._checkClientState()){if(a){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var f=new Pn(this,this._rootRow);this._rowCount=f.load2(null,a,b,c,d,e)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this._rowCount}},appendDataRows:function(a,b,c,d,e,f){if(this._checkClientState()){var g=0,h=this.getFieldIndex(c);if(h>=0){var i=new Nn(this,this._rootRow);i.checkParentProc=this.checkParentProc,this.beginUpdate();try{this.refreshFieldFormats(),g=i.load(a,b,h,d,this.getFieldIndex(e),this.getFieldIndex(f))}finally{if(this.endUpdate(!1),g>0){var j=i.insertedRows();j&&(g=j.length)>0&&this._rowsAdded(a,j)}i=null}}return g}},appendCsvRows:function(a,b,c,d,e,f){if(this._checkClientState()){var g,h=0,i=this.getFieldIndex(c);if(i>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),g=new On(this,this._rootRow),g.checkParentProc=this.checkParentProc,h=g.load(a,b,i,d,this.getFieldIndex(e),this.getFieldIndex(f)),this._checkSum(h)}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),h}},appendXmlRows:function(a,b,c,d,e){if(this._checkClientState()){var f=0;if(b){var g=new Qn(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),f=g.load(a,b,c,this.getFieldIndex(d),this.getFieldIndex(e))}finally{if(this.endUpdate(!1),f>0){var h=g.insertedRows();h&&(f=h.length)>0&&this._rowsAdded(a,h)}g=null}}return this.fireRowCountChanged(),f}},appendJsonRows:function(a,b,c,d,e){if(this._checkClientState()){var f=0;if(b){var g=new Pn(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),f=g.load(a,b,c,this.getFieldIndex(d),this.getFieldIndex(e))}finally{if(this.endUpdate(!1),f>0){var h=g.insertedRows();h&&(f=h.length)>0&&this._rowsAdded(a,h)}g=null}}return this._fireRowCountChanged(),f}},setIconIndex:function(a,b){return a instanceof Un&&a.iconIndex()!=b?(a._setIconIndex(b),!0):a.iconIndex()!=b?(a.setIconIndex(b),!0):!1},setHasChildren:function(a,b){return a instanceof Sn&&a.hasChildren()!=b?(a._setHasChildren(b),!0):a.hasChildren()!=b?(a._setHasChildren(b),!0):!1},getAllRows:function(){var a=[];return a},getJsonRows:function(a,b,c){var d=[];return d},getChildCount:function(a){var b=a||this._rootRow;return b.count()},getRows:function(a){var b=a?a:this._rootRow;return b.children()},getDescendantCount:function(a){var b=a||this._rootRow;return b.descendantCount()},getDescendants:function(a,b){function c(a,b,d){var e,f,g=a.count();for(e=0;g>e;e++)b.push(f=a.getChild(e)),d>f.level()&&c(f,b,d)}b=arguments.length>1?b:0;var d=a||this._rootRow;if(0>=b)return d.descendants();if(b>d.level()){var e=[];return c(d,e,b),e}return null},getRow:function(a,b){var c=a||this._rootRow;return c.getChild(b)},hasData:function(a){return null!=this.rowById(a)},rowById:function(a){var b=this._rowMap[a];return b||(b=this._findRowById(a),b&&(this._rowMap[a]=b)),b},createRow:function(a,b,c){var d=null;if(this.refreshFieldFormats(),s(a))d=new Un(this,a);else if(a){var e=new Array(this.fieldCount());for(var f in a){var g=this.getFieldIndex(f);g>=0&&(e[g]=a[f])}d=new Un(this,e)}return d&&(this.$_internalCalculateValues(d._values,d.rowId()),d._iconIndex=b,d._hasChildren=c),d},clearRows:function(){this._checkClientState()&&(this._clearRows(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged()))},removeRows:function(a){function b(b,c){for(var d=c;d>=0;d--)if(a[d].isAncestorOf(b))return!1;return!0}if(this._checkClientState()&&a&&!(a.length<1)){a.sort(function(a,b){return a.level()-b.level()});var c,d,e,f=a;for(c=a.length;c--;)a[c].level()>1&&!b(a[c],c-1)&&a.splice(c,1);if(a.length<1||!this._rowsRemoving(a))return!1;if(this._softDeleting&&this._checkStates){var g,h=[];for(c=a.length-1;c>=0;c--){switch(d=a[c],e=d.rowState(),g=!1,e){case je.CREATED:this.isDeleteCreated()||(g=d._changeRowState(je.CREATE_AND_DELETED,!1),a.splice(c,1));break;case je.DELETED:case je.CREATE_AND_DELETED:a.splice(c,1);break;default:g=d._changeRowState(je.DELETED,!0),a.splice(c,1)}g&&h.push(d)}h.length>0&&this._fireRowStatesChanged(h)}return this.deleteRows(f),!0}},deleteRows:function(a){if(this._checkClientState()&&a&&a.length>0){var b=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var c=a.length-1;c>=0;c--){var d=a[c],e=d&&d.parent();e=e._removeChild(d,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=b,this.endUpdate(!1)}this._rowsRemoved(a)}},moveRowSibling:function(a,b){if(!(a instanceof Sn))throw new TypeError("row is not TreeDataRow.");if(0==b)return!1;if(!this._checkClientState())return!1;var c=a.parent(),d=c.children().length,e=a.index(),f=Math.min(Math.max(e+b,0),d-1);return b=f-e,0==b?!1:this._fireRowSiblingMoving(a,b)?(c._moveChild(e,f),this._fireRowSiblingMoved(a,b),!0):!1},changeRowParent:function(a,b,c){if(!(a instanceof Sn))throw new TypeError("row is not TreeDataRow.");if(!(a instanceof Sn))throw new TypeError("parent is not TreeDataRow.");if(a===b)throw new Error("parent must not be self.");if(a.isAncestorOf(b))throw new Error("can`t move to child of descendant.");var d=a.parent();if(d===b&&c==a.index())return!1;if(!this._checkClientState())return!1;b._children||(b._children=[]);var e=b._children.length;return c=Math.min(Math.max(c,0),e),this._fireRowParentChanging(a,b,c)?(a._changeParent(b,c),b instanceof Vn||this.setHasChildren(b,!0),d instanceof Vn||0!=d.count()||this.setHasChildren(d,!1),this._fireRowParentChanged(a,b,c),!0):!1},getRowState:function(a){var b=this.rowById(a);return b?b.rowState():je.NONE},setRowState:function(a,b,c){var d=this.rowById(a);if(d&&(this._checkStates||c)){var e=d.rowState();b!=e&&d._changeRowState(b,!0)}},changeRowStates:function(a,b){var c,d,e=a.length,f=[];for(c=0;e>c;c++)d=a[c],d._changeRowState(b,!1)&&f.push(d);f.length>0&&this._fireRowStatesChanged(f)},clearRowStates:function(a,b){this._checkClientState()&&this._rootRow.clearRowStates(a,b)},setRowStates:function(a,b,c,d){if(this._checkClientState()){var e,f,g=d?null:[],h=a.length;for(e=0;h>e;e++)f=this.rowById(a[e]),f&&(this._checkStates||c)&&f._changeRowState(b,d)&&!d&&g.push(f);!d&&g.length>0&&this._fireRowStatesChanged(g)}},$_collectStateRows:function(a,b,c){var d,e,f=a.count();for(d=0;f>d;d++)e=a.getChild(d),e.rowState()==b&&c.push(e.rowId()),this.$_collectStateRows(e,b,c)},getStateRows:function(a){var b=[];return this.$_collectStateRows(this._rootRow,a,b),b},$_collectAllStateRows:function(a,b){var c,d,e=a.count();for(c=0;e>c;c++){switch(d=a.getChild(c),d.rowState()){case je.CREATED:b.created.push(d.rowId());break;case je.UPDATED:b.updated.push(d.rowId());break;case je.DELETED:b.deleted.push(d.rowId());break;case je.CREATE_AND_DELETED:b.createAndDeleted.push(d.rowId())}this.$_collectAllStateRows(d,b)}},getAllStateRows:function(){var a={created:[],updated:[],deleted:[],createAndDeleted:[]};return this.$_collectAllStateRows(this._rootRow,a),a},$_getRowStateCount:function(a,b){var c,d=a.count(),e=0;for(c=0;d>c;c++){var f=a.getChild(c);b.indexOf(f.rowState())>=0&&e++,e+=this.$_getRowStateCount(f,b)}return e},getRowStateCount:function(a){return this.$_getRowStateCount(this._rootRow,a)},restoreUpdatedStates:function(a){if(this._checkClientState()){var b;if(s(a)&&1==a.length)b=this.rowById(a[0]),b&&b.$_restoreRow(!1,null)&&this._fireRowStateChanged(b);else{var c=[];if(s(a))for(var d=a.length;d--;)b=this.rowById(a[d]),b&&b.$_restoreRow(!1,c);else a?(b=this.rowById(a),b&&(b.$_restoreRow(!1,null),this._fireRowStateChanged(b))):this._rootRow.$_restoreRow(!0,c);1==c.length?this._fireRowStateChanged(c[0]):c.length>1&&this._fireRowStatesChanged(c)}}},restoreUpdatedRows:function(a){if(this._checkClientState()){var b;if(s(a)&&1==a.length)b=this.rowById(a[0]),b&&b.$_restoreRow(!1,null)&&this._fireRowStateChanged(b);else{var c=[];if(s(a))for(var d=a.length;d--;)b=this.rowById(a[d]),b&&b.$_restoreRow(!1,c);else a||0==a?(b=this.rowById(a),b&&(b.$_restoreRow(!1,c),this._fireRowStateChanged(b))):this._rootRow.$_restoreRow(!0,c);1==c.length?this._fireRowStateChanged(c[0]):c.length>1&&this._fireRowStatesChanged(c)}}},getUpdatedCells:function(a){var b=this.restoreMode();if(b!=ke.AUTO&&b!=ke.EXPLICIT)return null;if(null==a)a=this.getStateRows(je.UPDATED);else if(!s(a)){if("number"!=typeof a)return null;a=[a]}if(!s(a))return null;for(var c=[],d=0,e=a.length;e>d;d++){var f=this.rowById(a[d]);if(f){var g=f.$_getUpdatedCells();g&&g.length>0&&c.push({__rowId:f._rowId,updatedCells:g})}}return c},canUpdateRow:function(a){return!0},canInsertRow:function(a){return!0},canDeleteRow:function(a){return!0},equalValues:function(a,b,c){if(b!==c){var d=this._fields[a],e=b.getValue(a),f=c.getValue(a);return d.equalValues(e,f)}return!0},sameValues:function(a,b,c){if(b!==c){var d=this._fields[a],e=b.getValue(a),f=c.getValue(a);return d.sameValues(e,f)}return!0},compareValues:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return null===d?null===e?0:-1:null===e?1:d>e?1:e>d?-1:0}return 0},compareNumbers:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return isNaN(d)?isNaN(e)?0:-1:isNaN(e)?1:d>e?1:e>d?-1:0}return 0},compareDates:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return d instanceof Date?e instanceof Date?d>e?1:e>d?-1:0:1:e instanceof Date?-1:0}return 0},compareBools:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return d&&!e?1:!d&&e?-1:0}return 0},toTreeString:function(){return this._rootRow.toTreeString()},rootRow:function(){return this._rootRow},rowCount:function(){return this._rootRow._descendantCount},immediateUpdate:function(){return!0},isSummarized:function(){return!0},beginUpdate:function(){this._checkClientState(),this._eventLock++},endUpdate:function(a){this._checkClientState(),a=arguments.length>0?a:!0,this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(a&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},findRow:function(a,b){if(a&&a.length>0&&b&&b.length>=a.length){var c=this._rootRow.findChild(a,b);return c}return null},setOptions:function(a){this._super(a)},getOptions:function(){var a=this._super();R(a,{})},_doCheckStatesChanged:function(){this.$_resetOrgValues()},_doRestoreModeChanged:function(a,b){this.$_resetOrgValues()},$_getSortedRows:function(a){var b;switch(this.getField(a).dataType()){case ie.NUMBER:b=this.compareNumbers;break;case ie.DATETIME:b=this.compareDates;break;case ie.BOOLEAN:b=this.compareBools;break;default:b=this.compareValues}var c=this.getDescendants(this._rootRow,0);return this.$_sortRows(c,a,b.bind(this),0,c.length-1),c},getDistinctValues:function(a,b){b=arguments.length>1?b:-1,this._checkFieldIndex(a);var c=[];if(0>b&&(b=this.getDescendantCount(this._rootRow)),b>0){var d=this.getField(a).dataType()==ie.NUMBER,e=this.$_getSortedRows(a);c.push(e[0]._values[a]);for(var f=1,g=e.length;g>f;f++)if(!this.equalValues(a,e[f-1],e[f])){var h=e[f]._values[a];if(-1!=c.indexOf(h)||d&&isNaN(h)||c.push(h),c.length>=b)break}}return c},_doFieldsReset:function(){this._super(),this._clearRows(),this._fireReset()},refreshClients:function(){this._fireRefreshClient()},hasData:function(a){return this.rowById(a)},savePoint:function(a){if(this._checkClientState()){a=arguments.length>0?a:!0;var b=this._fields.length;if(b>0&&this._rootRow.count()>0){var c=this._rootRow.copy(),d=this._nextPoint++;return a||c.clearRowStates(!1,!1),this._points.push({id:d,data:c}),d}return-1}},rollback:function(a){if(this._checkClientState()){a=arguments.length>0?a:0;for(var b=this._points.length-1;b>=0;b--){var c=this._points[b];if(c.id==a){this.$_removeSavePoints(b+1),this._rowMap=[],this._rootRow.set(c.data),this._fireReset();break}}}},$_removeSavePoints:function(a){for(var b,c=this._points,d=c.length-1;d>=a;d--)b=c[d],b.data=null,c.pop()},clearSavePoints:function(){this.$_removeSavePoints(0)},getSavePoints:function(){for(var a=[],b=0,c=this._points.length;c>b;b++)a.push(this._points[b].id);return a},equalValues:function(a,b,c){if(b!==c){var d=this._fields[a],e=b.getValue(a),f=c.getValue(a);return d.equalValues(e,f)}return!0},compareValues:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return null===d?null===e?0:-1:null===e?1:d>e?1:e>d?-1:0}return 0},compareNumbers:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return isNaN(d)?isNaN(e)?0:-1:isNaN(e)?1:d>e?1:e>d?-1:0}return 0},compareBools:function(a,b,c){if(b!==c){var d=b.getValue(a),e=c.getValue(a);return d&&!e?1:!d&&e?-1:0}return 0},$_summarizeChildren:function(a,b){var c,d,e,f=b.field,g=a.count();for(c=0;g>c;c++)d=a.getChild(c),e=d.getValue(f),isNaN(e)||(b.sum+=e,e<b.min&&(b.min=e),e>b.max&&(b.max=e)),this.$_summarizeChildren(d,b)},$_summarizeVars:function(a,b){var c,d,e,f=b.field,g=b.avg,h=a.count(),i=0;for(c=0;h>c;c++)d=a.getChild(c),e=d.getValue(f),isNaN(e)||(i+=Math.pow(e-g,2)),i+=this.$_summarizeVars(d,b);return i},summarize:function(a,b){if(null==a)return!1;a.clear();
var c=this.rowCount();if(1>c)return!1;if(a.count=c,a.sum=0,a.min=Number.MAX_VALUE,a.max=Number.MIN_VALUE,this.$_summarizeChildren(this._rootRow,a),a.avg=a.sum/a.count,b){var d=this.$_summarizeVars(this._rootRow,a);a.varsp=d/a.count,a.vars=d/(a.count-1)}return!0},summarizeRange:function(a,b,c){if(null==a||null==b)return!1;a.clear();var d=b.length;if(1>d)return!1;var e,f,g,h=0,i=a.field,j=0,k=NaN,l=NaN;for(e=0;d>e;)if(f=b[e++],g=f.getValue(i),!isNaN(g)){j=k=l=g,h++;break}for(;d>e;)f=b[e++],g=f.getValue(i),isNaN(g)||(j+=g,k>g&&(k=g),g>l&&(l=g),h++);if(a.count=d,h>0&&(a.sum=j,a.min=k,a.max=l,a.avg=j/d,c))if(d>1){var m=0,n=a.avg;for(e=0;d>e;e++)f=b[e++],g=f.getValue(i),isNaN(g)||(m+=Math.pow(g-n,2));a.varsp=m/d,a.vars=m/(d-1)}else a.varsp=0,a.vars=0;return!0},$_resetOrgValues:function(){this._needOrgValues=this._checkStates&&this._restoreMode!=ke.NONE,this._needRestore=this._needOrgValues&&this._restoreMode==ke.AUTO,this._rootRow.$_clearOrgValues()},_findRowById:function(a){return this._rootRow.findById(a)},_checkSum:function(a){if(a!=this.rowCount())throw new Error("Invalid row count: "+a+" <> "+this.rowCount())},_clearRows:function(){this._rootRow._removeChildren(),this._rowMap=[],this._nextRowId=0,this._tags.clearRows(),this._checkSum(0)},_summarizeChildren:function(a,b){var c,d,e,f=b.field,g=a.count();for(c=0;g>c;c++)d=a.getChild(c),e=d.getValue(f),isNaN(e)||(b.sum+=e,e<b.min&&(b.min=e),e>b.max&&(b.max=e)),this.summarizeChildren(d,b)},_summarizeVars:function(a,b){var c,d,e,f=b.field,g=b.avg,h=a.count(),i=0;for(c=0;h>c;c++)d=a.getChild(c),e=d.getValue(f),isNaN(e)||(i+=Math.pow(e-g,2)),i+=summarizeChildren(d,b);return i},_summarize:function(a,b){if(null==a)return!1;a.clear();var c=this.rowCount();if(1>c)return!1;if(a.count=0,a.sum=0,a.min=Number.MIN_VALUE,a.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,a),a.avg=a.sum/a.count,b){var d=this._summarizeVars(this._rootRow,a);a.vars=d/a.count}return!0},summarizeRange:function(a,b,c){return!1},_iconIndexChanged:function(a){this._fireIconIndexChanged(a)},_hasChildrenChanged:function(a){this._fireHasChildrenChanged(a)},_stateChanged:function(a){this._fireRowStateChanged(a)},_valueChanged:function(a,b){this._fireValueChanged(a,b)},_rowAdding:function(a,b,c){return this._fireRowAdding(a,b,c)},_rowAdded:function(a){this._tagLock||this._tags.addRow(a),this._eventLock<=0&&(this._fireRowAdded(a),this._fireRowCountChanged())},_rowsAdded:function(a,b){this._tagLock||this._tags.addRows(b),this._eventLock<=0&&(this._fireRowsAdded(a,b),this._fireRowCountChanged())},_rowRemoving:function(a){return this._fireRowRemoving(a)},_rowRemoved:function(a){this._tagLock||this._tags.removeRow(a),this._eventLock<=0&&(this._fireRowRemoved(a),this._fireRowCountChanged())},_rowsRemoving:function(a){return this._fireRowsRemoving(a)},_rowsRemoved:function(a){this._tagLock||this._tags.removeRows(a),this._eventLock<=0&&(this._fireRowsRemoved(a),this._fireRowCountChanged())},_rowCleared:function(a){if(a){var b=a.children();this._tags.removeRows(b),this._eventLock<=0&&(this._fireRowsRemoved(b),this._fireRowCountChanged())}},_rowUpdating:function(a){return this._fireRowUpdating(a)},_rowUpdated:function(a){this._tags.updateRow(a),this._eventLock<=0&&this._fireRowUpdated(a)},_fireDisposed:function(){this._eventLock<=0&&this.fireEvent(Xn.DISPOSED)},_fireReset:function(){this._eventLock<=0&&this.fireEvent(Xn.RESET)},_fireRefresh:function(){this._eventLock<=0&&this.fireEvent(Xn.REFRESH)},_fireRefreshClient:function(){this._eventLock<=0&&this.fireEvent(Xn.REFRESH_CLIENT)},_fireCleared:function(){this._eventLock<=0&&this.fireEvent(Xn.CLEARED)},_fireRowCountChanged:function(){this._eventLock<=0&&this.fireEvent(Xn.ROW_COUNT_CHANGED,this.rowCount())},_fireRowAdding:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROW_ADDING,a,b,c):!0},_fireRowAdded:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROW_ADDED,a)},_fireRowsAdded:function(a,b){this._eventLock<=0&&this.fireEvent(Xn.ROWS_ADDED,a,b)},_fireRowRemoving:function(a){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROW_REMOVING,a):!0},_fireRowRemoved:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROW_REMOVED,a)},_fireRowsRemoving:function(a){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROWS_REMOVING,a):!0},_fireRowsRemoved:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROWS_REMOVED,a)},_fireRowUpdating:function(a){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROW_UPDATING,a):!0},_fireRowUpdated:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROW_UPDATED,a)},_fireValueChanging:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(Xn.VALUE_CHNAGED,a,b,c):!0},_fireValueChanged:function(a,b){this._eventLock<=0&&this.fireEvent(Xn.VALUE_CHNAGED,a,b)},_fireIconIndexChanged:function(a){this._eventLock<=0&&this.fireEvent(Xn.ICON_INDEX_CHANGED,a)},_fireHasChildrenChanged:function(a){this._eventLock<=0&&this.fireEvent(Xn.HAS_CHILDREN_CHANGED,a)},_fireRowStateChanged:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROW_STATE_CHANGED,a)},_fireRowStatesChanged:function(a){this._eventLock<=0&&this.fireEvent(Xn.ROW_STATES_CHANGED,a)},_fireRowSiblingMoving:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROW_SIBLING_MOVING,a,b):!0},_fireRowSiblingMoved:function(a,b){this._eventLock<=0&&this.fireEvent(Xn.ROW_SIBLING_MOVED,a,b)},_fireRowParentChanging:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(Xn.ROW_PARENT_CHANGING,a,b,c):!0},_fireRowParentChanged:function(a,b,c){this._eventLock<=0&&this.fireEvent(Xn.ROW_PARENT_CHANGED,a,b,c)}});Xn.DISPOSED="onTreeDataProviderDisposed",Xn.RESET="onTreeDataProviderReset",Xn.REFRESH="onTreeDataProviderRefresh",Xn.REFRESH_CLIENT="onTreeDataProviderRefreshClient",Xn.CLEARED="onTreeDataProviderCleared",Xn.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",Xn.ROW_ADDING="onTreeDataProviderRowAdding",Xn.ROW_ADDED="onTreeDataProviderRowAdded",Xn.ROWS_ADDED="onTreeDataProviderRowsAdded",Xn.ROW_REMOVING="onTreeDataProviderRowRemoving",Xn.ROW_REMOVED="onTreeDataProviderRowRemoved",Xn.ROWS_REMOVING="onTreeDataProviderRowsRemoving",Xn.ROWS_REMOVED="onTreeDataProviderRowsRemoved",Xn.ROW_UPDATING="onTreeDataProviderRowUpdating",Xn.ROW_UPDATED="onTreeDataProviderRowUpdated",Xn.VALUE_CHANGING="onTreeDataProviderValueChanging",Xn.VALUE_CHNAGED="onTreeDataProviderValueChanged",Xn.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",Xn.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",Xn.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",Xn.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",Xn.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",Xn.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",Xn.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",Xn.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged";var Yn=Xa("LocalTreeDataProviderObserver",Ff,{init:function(){this._super()},onTreeDataProviderDisposed:function(a){},onTreeDataProviderReset:function(a){},onTreeDataProviderRefresh:function(a){},onTreeDataProviderRefreshClient:function(a){},onTreeDataProviderCleared:function(a){},onTreeDataProviderRowCountChanged:function(a,b){},onTreeDataProviderRowAdding:function(a,b,c){return!0},onTreeDataProviderRowAdded:function(a,b){},onTreeDataProviderRowsAdded:function(a,b,c){},onTreeDataProviderRowRemoving:function(a,b){return!0},onTreeDataProviderRowRemoved:function(a,b){},onTreeDataProviderRowsRemoving:function(a,b){return!0},onTreeDataProviderRowsRemoved:function(a,b){},onTreeDataProviderRowUpdating:function(a,b){return!0},onTreeDataProviderRowUpdated:function(a,b){},onTreeDataProviderValueChanging:function(a,b,c,d){return!0},onTreeDataProviderValueChanged:function(a,b,c){},onTreeDataProviderIconIndexChanged:function(a,b){},onTreeDataProviderHasChildrenChanged:function(a,b){},onTreeDataProviderRowStateChanged:function(a,b){},onTreeDataProviderRowStatesChanged:function(a,b){},onTreeDataProviderRowSiblingMoving:function(a,b,c){return!0},onTreeDataProviderRowSiblingMoved:function(a,b,c){},onTreeDataProviderRowParentChanging:function(a,b,c,d){return!0},onTreeDataProviderRowParentChanged:function(a,b,c,d){}}),Zn=Xa("TreeDataLoader",null,{init:function(a){Ya.init.call(this),this._provider=a},load:function(a,b,c){if(c=new Pf(c),this.$_checkEmpty(b,c))return 0;switch(this.$_prepareLoad(b,c),a=a&&a.toLowerCase()){case"json":return this.$_loadJson(b,c);case"xml":return this.$_loadXml(b,c);case"csv":return this.$_loadCsv(b,c)}return 0},$_loadJson:function(a,b){if("string"==typeof a&&(a=JSON.parse(a)),a){var c=b.childrenField||b.children,d=b.iconField||b.icon;if(b.fillMode==Of.APPEND){var e=this._provider.rowById(b.parentId);return this._provider.appendJsonRows(e,a,b.rows,c,d)}return this._provider.setJsonRows(a,b.rows,c,d)}return 0},$_loadXml:function(a,b){if("string"==typeof a&&(a=X(a)),a&&a.documentElement){var c=b.childrenField||b.children,d=b.iconField||b.icon;if(b.fillMode==Of.APPEND){var e=this._provider.rowById(b.parentId);return this._provider.appendXmlRows(e,a,b.rows,c,d)}return this._provider.setXmlRows(a,b.rows,c,d)}return 0},$_loadCsv:function(a,b){var c=b.start,d=b.count,e=b.quoted,f=b.delimiter,g=Jf.csvToArray(this._provider,a,c,d,e,f);if(g&&(d=g.length)>0){var h=b.treeField||b.tree,i=b.childrenField||b.children,j=b.iconField||b.icon,k=b.needSorting||b.sorting;if(b.fillMode==Of.APPEND){var l=this._provider.rowById(b.parentId);return this._provider.appendDataRows(l,g,h,k,i,j)}return this._provider.setRows(g,h,k,i,j)}return 0},$_fillEmpty:function(a){a.fillMode===Of.SET&&this._provider.setRows(null)},$_checkEmpty:function(a,b){return a?!1:(this.$_fillEmpty(b),!0)},$_prepareLoad:function(a){var b=null;a.filters&&(b=new If(this._provider.filterRuntime(),a.filters),a.filterMode&&b.setFilterMode(a.filterMode))}}),$n=Xa("TreeItem",Yf,{init:function(a){this._super(),this._dataRow=a,this._footer=null},iconHeight:0,row:function(){return this._dataRow},rowId:function(){return this._dataRow?this._dataRow.rowId():-1},iconIndex:function(){return this._dataRow.iconIndex()},hasChildren:function(){return this.count()>0||this._dataRow.hasChildren()},rootItem:function(){for(var a=this;a.level()>1;)a=a.parent();return a},lastVisible:function(){return this.isExpanded()&&this.count()>0?this.isLastVisible():this},createFooter:function(){this._footer||(this._footer=new TreeItemFooter,this._attachItem(this._footer))},dataRow:function(){return this._dataRow?this._dataRow.rowId():-1},dataId:function(){return this._dataRow?this._dataRow.rowId():-1},descendantCount:function(){return this._dataRow.descendantCount()},rowState:function(){return this._dataRow.rowState()},isLeaf:function(){return 0==this.count()},footer:function(){return this._footer},isEditable:function(){return!0},summaryMode:function(){return Fe.AGGREGATE},setExpanded:function(a){var b;a!=this.isExpanded()&&(b=this.provider())&&(a?b.expand(this,!1,!1):b.collapse(this))},isResizable:function(){return!0},canEdit:function(){return!0},getData:function(a){return this._dataRow.getValue(a)},setData:function(a,b){this._dataRow.setValue(a,b)},setItem:function(a,b){this._super(a,b),b._addChildren(a.children()),a.clear()},exchange:function(a,b){this.exchangeItems(a,b)},moveChild:function(a,b){var c=a+b,d=this._children[a];if(0>b)for(var e=a;e>c;e--)this._children[e]=this._children[e-1];else for(var e=a;c>e;e++)this._children[e]=this._children[e+1];this._children[c]=d},changeParent:function(a,b){var c=this._parent;c.remove(this),a&&a.insert(b,this)}});$n.$_tempTreeItem=new $n,$n.getTemp=function(a){return $n.$_tempTreeItem._dataRow=a,$n.$_tempTreeItem};var _n=($n.prototype,Xa("RootTreeItem",$n,{init:function(a){this._super(null),this._provider=a},id:function(){return NaN},provider:function(){return this._provider},level:function(){return 0},isExpanded:function(){return!0},setExpanded:function(a){},isLeaf:function(){return!1},isVisible:function(){return!0},dataSource:function(){return this._provider.dataSource()}})),ao=function(a){Ra(null!=a&&void 0!==a,"provider is null");var b=a,c=0,d=[],e=[];this.provider=function(){return b},this.count=function(){return d.length},this.fixedCount=function(){return c},this.getItem=function(a){return d[a]},this.setItem=function(a,b){d[a]=b},this.indexOf=function(a){return d.indexOf(a)},this.clear=function(){d.length=0};var f=function(a,b,c,d){var e,g,h=a.count();for(e=0;h>e;e++)g=a.getItem(e),g&&(b.push(g),(c&&g.level()<d||g.isExpanded())&&f(g,b,c,d));var i=a.footer();i&&b.push(a.footer())},g=function(a,b,g){var h,i,j,k=e;if(j=a instanceof _n?c:a.index()+1,g=Math.max(0,g),k.length=0,f(a,k,b,g>0?a.level()+g:1e6),b){for(h=j,i=d.length;i>h&&!(d[h].level()<=a.level());h++);d.splice(j,h-j)}for(h=0,i=k.length;i>h;h++)d.splice(j+h,0,k[h])};this.expand=function(a,b,c){c=arguments.length>0?c:0,a&&g(a,b,c)},this.collapse=function(a){if(a)for(var c=a.index()+1;c<d.length&&d[c].level()>a.level();){if(d[c]==a.footer()){b.footerWhenCollapsed()||d.splice(c,1);break}d.splice(c,1)}},this.getNext=function(a){return a&&a.isVisible()&&a.index()<this.count()-1?d[a.index()+1]:null},this.getPrior=function(a){return a&&a.isVisible()&&a.index()>0?d[a.index()-1]:null},this.insert=function(a,b){d.splice(b,0,a)},this.remove=function(a){var b=d.indexOf(a);if(b>=0&&(d.splice(b,1),a.isExpanded()))for(;b<d.length&&a.isDescendant(d[b]);)d.splice(b,1)},this._clearAndInit=function(a){this.clear(),c=Math.min(a,b.itemCount());for(var e=0;c>e;e++)d.push(b.getItem(e))}},bo=Xa("TreeItemProvider",ag,{init:function(){this._super(!0),this._cellStyles=new eo(this),this._filters={},this._filterRuntime=new Hm,this._filtered=!1,this._sorter=new mo,this._sortFields=[],this._sortDirections=[],this._sortCases=[],this._visibleItems=new ao(this),this._itemMap=[],this._itemCount=0,this._summaryMap=null,this._checkableExpression=null,this._checkableTag=null},onTreeDataProviderDisposed:function(a){this.provider().removeTag(this._cellStyls),this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.setDataSource(null)},onTreeDataProviderReset:function(a){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},onTreeDataProviderRefresh:function(a){this._refreshItems()},onTreeDataProviderRefreshClient:function(a){this._fireRefreshClient()},onDataProvderCleared:function(a){this._refreshItems()},onTreeDataProviderRowCountChanged:function(a,b){},onTreeDataProviderRowAdding:function(a,b,c){return!0},onTreeDataProviderRowAdded:function(a,b){if(this.isSorted())this._saveAndRefresh();else{var c=this._itemMap[b.parent().rowId()],d=this.$_internalAddItem(c,b);d&&(this.$_buildItems(d),this.$_clearSummary(),c.isExpanded()?this._expandItem(c,!0,!1,0,!1):this._fireItemChanged(c))}this._checkableTag&&(this._checkableTag.addRow(b),b.parent().level()>0&&this._checkableTag.addRow(b.parent()))},$_buildItems:function(a){var b,c,d,e=a.row(),f=e.count();for(b=0;f>b;b++)c=e.getChild(b),d=this.$_internalAddItem(a,c),d&&c.count()>0&&this.$_buildItems(d)},onTreeDataProviderRowsAdded:function(a,b,c){if(this.isSorted())return void this._saveAndRefresh();var d,e,f,g,h=this._itemMap[b.rowId()];if(h&&c&&(g=c.length)>0){for(d=0;g>d;d++)e=c[d],f=this.$_internalAddItem(h,e),f&&this.$_buildItems(f);this.$_clearSummary(),h.isExpanded()?this._expandItem(h,!0,!1,0,!1):this._fireItemChanged(h),this._checkableTag&&(this._checkableTag.addRows(c),b.level()>0&&this._checkableTag.addRow(b))}},onTreeDataProviderRowRemoving:function(a,b){return!0},onTreeDataProviderRowRemoved:function(a,b){var c=this._itemMap[b.rowId()];if(c){var d=c.parent();this.$_internalRemoveItem(c),this.$_clearSummary(),d.isExpanded()&&d.isVisible()&&(this._visibleItems.remove(c),this._fireRefresh())}},onTreeDataProviderRowsRemoving:function(a,b){return!0},onTreeDataProviderRowsRemoved:function(a,b){var c,d,e,f,g=b.length,h=!1;for(c=0;g>c;c++)d=b[c],e=this._itemMap[d.rowId()],e&&(f=e.parent(),this.$_internalRemoveItem(e),f.isExpanded()&&f.isVisible()&&(this._visibleItems.remove(e),h=!0));this.$_clearSummary(),h&&this._fireRefresh()},onTreeDataProviderRowUpdating:function(a,b){return!0},onTreeDataProviderRowUpdated:function(a,b){if(this.isSorted())this._saveAndRefresh();else{var c=this._itemMap[b.rowId()];this.$_clearSummary(),this._fireItemUpdated(c)}this._checkableTag&&this._checkableTag.updateRow(b)},onTreeDataProviderValueChanging:function(a,b,c){return!0},onTreeDataProviderValueChanged:function(a,b,c){if(this.isSorted())this._saveAndRefresh();else{var d=this._itemMap[b.rowId()];this.$_clearSummary(),this._fireItemUpdated(d)}this._checkableTag&&this._checkableTag.updateRow(b)},onTreeDataProviderIconIndexChanged:function(a,b){var c=this._itemMap[b.rowId()];c&&c.isVisible()&&this._fireItemChanged(c)},onTreeDataProviderHasChildrenChanged:function(a,b){var c=this._itemMap[b.rowId()];c&&c.isVisible()&&this._fireItemChanged(c)},onTreeDataProviderRowStateChanged:function(a,b){var c=this._itemMap[b.rowId()];this.$_internalRowStateChanged(c),this._checkableTag&&this._checkableTag.updateRow(b)},onTreeDataProviderRowStatesChanged:function(a,b){var c,d,e,f,g,h,i=b.length;if(1==i)e=b[0],d=this._itemMap[e.rowId()],this.$_internalRowStateChanged(d),this._checkableTag&&this._checkableTag.updateRow(e);else if(i>0){if(h=!1,this._hideDeleted)for(f=0,g=b.length;g>f;f++)d=this._itemMap[b[f].rowId()],d&&je.isDeleted(d.rowState())&&(c=d.parent(),this.$_internalRemoveItem(d),c.isExpanded()&&c.isVisible()&&this._visibleItems.remove(d),h=!0);this._checkableTag&&this._checkableTag.changeStates(b),h&&this.$_clearSummary(),this._fireRefresh()}},onTreeDataProviderRowSiblingMoved:function(a,b,c){if(!this.isSorted()){var d=this._itemMap[b.rowId()];if(d){var e=d.parent();e.moveChild(d.childIndex(),c),this.$_resetVisibleItems(),this._fireRefresh()}}},onTreeDataProviderRowParentChanged:function(a,b,c,d){var e=this._itemMap[b.rowId()];if(e){var f=this._itemMap[c.rowId()];this.isSorted()&&(d=f?f.count():0),e.changeParent(f,d),this.$_resetVisibleItems(),this._fireRefresh()}},dataSource:function(){return this._dataSource},setDataSource:function(a){a!==this._dataSource&&(this.$_clearItems(),this.$_resetSummary(),this._dataSource&&(this._dataSource.removeTag(this._cellStyles),this._dataSource.removeListener(this)),this._dataSource=ab(a,Wn),this._dataSource&&(this.$_buildTree(),this._dataSource.addTag(this._cellStyles),this._dataSource.addListener(this,0)),this._fireReset())},itemCount:function(){return this._visibleItems.count()},rowCount:function(){return this._itemCount},getItem:function(a){return a>=0&&a<this._visibleItems.count()?this._visibleItems.getItem(a):null},_refreshItems:function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},_saveAndRefresh:function(){var a=[];this.$_saveExpanded(a,this._rootItem),this.$_clearItems(),this.$_buildTree(a),this._fireRefresh()},getIndexOfRow:function(a){var b=this._itemMap[a];return b&&b.isVisible()?b.index():-1},getItemOfRow:function(a){return this._itemMap[a]},fixedCount:function(){return 0},setFixed:function(a,b,c){},maxItemCount:function(){return 0},setMaxItemCount:function(a){},findItem:function(a,b,c,d,e){var f=ab(this.dataSource(),Wn);if(!f)return-1;var g=this.itemCount();if(1>g)return-1;var h=Math.min(a.length,b.length);if(1>h)return-1;var i,j,k,l,m=!c||c.allFields,n=c&&c.caseSensitive,o=c&&c.partialMatch;for(d=Math.max(0,d),e=Math.min(this._visibleItems.count()-1,e),i=d;e>=i;i++){if(j=this._visibleItems.getItem(i),k=j.dataRow()>=0)for(l=0;h>l;l++){if(k=cb(b[l],j.getData(a[l]),n,o),k&&!m)return i;if(!k&&m)break}if(k)return i}return-1},findCell:function(a,b,c,d,e,f){var g=this.dataSource();if(!g)return null;var h=this.itemCount();if(1>h)return null;var i,j,k,l,m=c&&c.caseSensitive,n=c&&c.partialMatch,o=this.dataSource().fieldCount(),p=a.length;for(d=Math.max(0,d),e=Math.min(this._visibleItems.count()-1,e),f=Math.max(0,f),f>=a.length&&(d++,f=0),i=d;e>=i;i++)if(j=this._visibleItems.getItem(i),j.dataRow()>=0)for(l=i>d?0:f;p>l;l++){var q=a[l];if(q>=0&&o>q&&(k=cb(b,j.getData(q),m,n))){var r={itemIndex:i,fieldIndex:q,searchFieldIndex:l};return r}}return null},expandWhenGrouping:!0,footerWhenExpanded:!0,setFooterWhenExpanded:function(a){a!=this._footerWhenExpanded&&(this._footerWhenExpanded=a,this.$_resetVisibleItems(),this._resetItemIndicies(),this._fireRefresh())},footerWhenCollapsed:!0,setFooterWhenCollapsed:function(a){a!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=a,this.$_resetVisibleItems(),this._resetItemIndicies(),this._fireRefresh())},aggregateMode:"leaf",setAggregateMode:function(){value!=this._aggregateMode&&(this._aggregateMode=value,this.$_resetSummary(),this._fireRefresh())},summaryMode:"aggregate",setSummaryMode:function(a){a!=this._summaryMode&&(this._summaryMode=a,this.$_resetSummary(),this._fireRefresh())},groupSummaryMode:"aggregate",setGroupSummaryMode:function(a){a!=this._groupSummaryMode&&(this._groupSummaryMode=a,this.$_resetGroupSummary(),this._fireRefresh())},hideDeleted:!1,setHideDeleted:function(a){a!=this._hideDeleted&&(this._hideDeleted=a,this._saveAndRefresh())},checkableExpression:null,setCheckableExpression:function(a){a!=this._checkableExpression&&(this._checkableExpression=a,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),a&&(this._checkableTag=new fo(this,a),this._dataSource&&this._checkableTag.connect(this._dataSource)))},isSorted:function(){return this._sortFields&&this._sortFields.length>0},addObserver:function(a){a&&this._observers.indexOf(a)<0&&this._observers.push(a)},removeObserver:function(a){var b=this._observers.indexOf(a);b>=0&&this._observers.splice(b,1)},insertItem:function(a,b,c,d){var e=this._visibleItems;a.isCollapsed()&&e.expand(a,!1);var f=e.indexOf(a.getItem(c));if(d){a.insert(c+1,b);for(var g=e.count(),h=a.level()+1;++f<g&&!(e.getItem(f).level()<=h););e.insert(b,f)}else a.insert(c,b),e.insert(b,f)},appendItem:function(a,b){var c=this._visibleItems;a.isCollapsed()&&c.expand(a,!1);var d;d=a.count()>0?c.indexOf(a.getItem(a.count()-1)):c.indexOf(a);for(var e=c.count(),f=a.level();++d<e&&!(c.getItem(d).level()<=f););a.add(b),c.insert(b,d)},removeItem:function(a){this._visibleItems.remove(a),a.parent().remove(a)},$_calcLevel:function(a,b,c){var d,e,f=a.count(),g=b;for(d=0;f>d;d++)e=a.getItem(d),e&&(g=Math.max(g,b+1),(!c||e.isExpanded())&&(g=Math.max(g,this.$_calcLevel(e,b+1,c))));return g},getLevels:function(a){return this.$_calcLevel(this._rootItem,0,a)},$_setExpanded:function(a,b,c){if(this._setExpanded(a,!0),this._dataSource.setHasChildren(a.row(),!1),b){var d,e,f=a.count();for(d=0;f>d;d++)e=a.getItem(d),e instanceof $n&&(e.isExpanded()||e.level()<c)&&this.$_setExpanded(e,!0,c)}},_expandItem:function(a,b,c,d,e){if(a&&(b||!a.isExpanded())){if(e&&!this._fireExpanding(a))return;this._visibleItems.collapse(a),this._visibleItems.expand(a,c,d),this._resetItemIndicies(a===this._rootItem?0:a.index()),this.$_setExpanded(a,c,d>0?a.level()+d:1e6);try{this._fireRefresh()}finally{e&&this._fireExpanded(a)}}},expand:function(a,b,c){this._expandItem(a,c,b,0,!0)},expandAll:function(a){this._expandItem(this._rootItem,!0,!0,a>0?a+1:0,!0)},$_setCollapsed:function(a,b){if(this._setExpanded(a,!1),b){var c,d,e=a.count();for(c=0;e>c;c++)d=a.getItem(c),d instanceof $n&&this.$_setCollapsed(d,!0)}},_collapseItem:function(a,b,c,d){if(a&&(b||a.isExpanded())){if(d&&!this._fireCollapsing(a))return;this._visibleItems.collapse(a),this.$_setCollapsed(a,c),a==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(a===this._rootItem?0:a.index());try{this._fireRefresh()}finally{d&&this._fireCollapsed(a)}}},collapse:function(a,b){this._collapseItem(a,!1,b,!0)},collapseAll:function(){this._collapseItem(this._rootItem,!0,!0,!0)},$_saveExpanded:function(a,b){var c,d,e=b.count();for(c=0;e>c;c++)d=ab(b.getItem(c),$n),d&&(d._extents=d.isExpanded()?d._extents|Tf:d._extents&~Tf,a[d.rowId()]=d._extents,d.count()>0&&this.$_saveExpanded(a,d))},orderBy:function(a,b,c,d){d=arguments.length>3?d:!0,this._fireSort(a,b,c),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var e=a?a.length:0,f=b?b.length:0,g=c?c.length:0,h=0;e>h;h++)this._sortFields.push(a[h]),f>h?this._sortDirections.push(b[h]):f>0?this._sortDirections.push(b[f-1]):this._sortDirections.push(te.ASCENDING),g>h?this._sortCases.push(c[h]):g>0?this._sortCases.push(c[g-1]):this._sortCases.push(ue.SENSITIVE);var i=[];this.$_saveExpanded(i,this._rootItem),this.$_clearItems(),this.$_buildTree(i);try{d&&this._fireRefresh()}finally{this._fireSorted()}},getSortFields:function(){return this._sortFields.concat()},getSortDirections:function(){return this._sortDirections.concat()},getSortCases:function(){return this._sortCases.concat()},beginFiltering:function(){this._filterLock=!0},$_prepareFiltering:function(a,b){for(var c=b._dataRow.count(),d=b.rowId(),e=-1>=d?!0:this.$_selectItem(b),f=0;c>f;f++)child=new $n(b._dataRow._children[f]),child&&(e=this.$_prepareFiltering(a,child)||e);return a[d]=e&&d>=0?a[d]|Uf:a[d]&~Uf,e},endFiltering:function(a){a=arguments.length>0?a:!0;var b=[];a&&this._addParentNodeOnFiltering&&this.$_prepareFiltering(b,this._rootItem),this._filterLock&&(this._filterLock=!1,a&&this.applyFilters(b))},hasFilter:function(a){var b=this._filters[a];return b?b.length>0:!1},addFilter:function(a,b){this._fireFilterAdded();var c=this._filters[a];c||(c=[],this._filters[a]=c);var d=new Pg(b);return c.push(d),this.applyFilters(),d},removeFilter:function(a,b){if(this._filtered&&this._filters[a]){this._fireFilterRemoved(a,b);for(var c=this._filters[a],d=c.length;d--;)if(c[d]===b){c.splice(d,1),this.applyFilters();break}}},clearFilters:function(a){if(this._filtered&&this._filters[a]){this._fireFilterCleared(a);var b=this._filters[a];b&&b.length>0&&(b.splice(0,b.length),this._filters[a]=null,this.applyFilters())}},clearAllFilters:function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters())},hasFilters:function(){for(var a in this._filters){var b=this._filters[a];if(b&&b.length>0)return!0}return!1},applyFilters:function(a){var b=this.dataSource(),c=b.fieldCount();for(var d in this._filters)d>=c&&(this._filters[d]=null);if(this._filtered=this.hasFilters(),this._filtered)for(var e in this._filters){var f=this._filters[e];if(f)for(var g=f.length;g--;)f[g].prepare(this._filterRuntime,this._dataSource)}this.$_clearItems(),this.$_buildTree(a);try{this._fireRefresh()}finally{this._fireFiltered()}},getItemByRow:function(a){return a?this._itemMap[a.rowId()]:null},getCheckedRows:function(){function a(b,c){if(b instanceof $n){var d,e,f,g=b.count();for(d=0;g>d;d++)f=b.getItem(d),f.isChecked()&&(e=f.row())&&c.push(e),a(f,c)}}var b=[];return a(this._rootItem,b),b},getCheckedRowIds:function(){function a(b,c){if(b instanceof $n){var d,e,f,g=b.count();for(d=0;g>d;d++)f=b.getItem(d),f.isChecked()&&(e=f.dataRow())>=0&&c.push(e),a(f,c)}}var b=[];return a(this._rootItem,b),b},resetCheckables:function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},applyCheckables:function(){this._checkableTag?this._checkableTag.setRows():fo.clearCheckables(this),this._fireRefresh()},_createRootItem:function(){return this._rootItem=new _n(this),this._setExpanded(this._rootItem,!0),this._rootItem},$_collectItems:function(a,b){var c,d,e=a.count();for(c=0;e>c;c++)d=a.getItem(c),d instanceof $n&&(b.push(d),this.$_collectItems(d,b))},getAllItems:function(){var a=[];return this.$_collectItems(this._rootItem,a),a},$_checkChildren:function(a,b,c){var d,e,f=a.count();for(d=0;f>d;d++)e=a.getItem(d),e&&(c?e.isCheckable()&&this._setCheckItem(e,b):this._setCheckItem(e,b)),e instanceof $n&&this.$_checkChildren(e,b,c)},_clearChecked:function(){this.$_checkChildren(this._rootItem,!1,!1)},checkAll:function(a,b,c){b?this._super(a,b,c):(this.$_checkChildren(this._rootItem,a,c),this._fireItemAllChecked(a))},hasCellstyle:function(){return!this._cellStyles.isEmpty()},setCellStyle:function(a,b,c){this._cellStyles.setCellStyle(a,b,c)},setCellStyles:function(a,b,c){this._cellStyles.setCellStyles(a,b,c)},removeCellStyle:function(a){this._cellStyles.removeCellStyle(a)},clearCellStyles:function(){this._cellStyles.clearCellStyles()},checkCellStyle:function(a,b){return this._cellStyles.checkCellStyle(a,b)},getCellStyle:function(a,b){return this._cellStyles.getCellStyle(a,b)},getSum:function(a){var b=this.$_getSummary(a);return b?b.sum:NaN},getMax:function(a){var b=this.$_getSummary(a);return b?b.max:NaN},getMin:function(a){var b=this.$_getSummary(a);return b?b.min:NaN},getAvg:function(a){var b=this.$_getSummary(a);return b?b.avg:NaN},getVar:function(a){var b=this.$_getSummary(a);return b?b.vars:NaN},getVarp:function(a){var b=this.$_getSummary(a);return b?b.varsp:NaN},getStdev:function(a){var b=this.$_getSummary(a);return b?Math.sqrt(b.vars):NaN},getStdevp:function(a){var b=this.$_getSummary(a);return b?Math.sqrt(b.varsp):NaN},$_internalAddItem:function(a,b,c){var d=$n.getTemp(b);if(this._hideDeleted&&je.isDeleted(d.rowState())&&(d=null),c&&c[b.rowId()]&Uf||this.$_selectItem(d)){var d=new $n(b);return a.insert(b.index(),d),this._itemCount++,this._itemMap[b.rowId()]=d,d}return null},$_internalRemoveItem:function(a){a&&(a.parent().remove(a),this._itemCount--,this._itemMap[a.row().rowId()]=void 0)},$_internalRowStateChanged:function(a){if(a&&a.isVisible())if(this._hideDeleted&&je.isDeleted(a.rowState())){var b=a.parent();this.$_internalRemoveItem(a),this.$_clearSummary(),b.isExpanded()&&b.isVisible()&&(this._visibleItems.remove(a),this._fireRefresh())}else this._fireItemChanged(a)},_setItem:function(a,b){this._visibleItems.setItem(a.index(),b),this._resetItemIndex(a.index())},$_resetVisibleItems:function(){this._visibleItems._clearAndInit(this.fixedCount()),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},$_clearItems:function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},$_selectField:function(a,b,c){var d,e,f=a.length;for(d=0;f>d;d++)if(e=a[d],e.select(this._filterRuntime,b,c))return!0;return!1},$_selectItem:function(a){var b;for(var c in this._filters)if(b=this._filters[c],b&&!this.$_selectField(b,a,c))return!1;return!0},$_buildItems:function(a,b){var c,d,e,f=a.row(),g=f.count();for(c=0;g>c;c++)d=f.getChild(c),e=this.$_internalAddItem(a,d,b),e&&(b&&(e._extents=b[d.rowId()]?b[d.rowId()]&~Tf:0,this._setExpanded(e,0!=(b[d.rowId()]&Tf))),d.count()>0&&this.$_buildItems(e,b))},$_sortItem:function(a){var b,c,d=a.count();for(d>1&&this.$_sort(a,0,0,d-1),b=0;d>b;b++)c=a.getItem(b),c instanceof $n&&this.$_sortItem(c)},$_sort:function(a,b,c,d){var e=this._sortFields[b],f=this._sortDirections[b],g=this._dataSource,h=this._sortCases[b]==ue.INSENSITIVE;this._sorter.run(a,e,f,h,c,d,b+1==this._sortFields.length);var i,j=g.getField(e).dataType();if(i=j==ie.TEXT&&h?g.equalTexts.bind(g):g.equalValues.bind(g),b+1<this._sortFields.length){for(var k=c,l=k;d>k;)k++,i(e,a.getItem(k).row(),a.getItem(k-1).row())||(this.$_sort(a,b+1,l,k-1),l=k);d>l&&this.$_sort(a,b+1,l,d)}},$_buildTree:function(a){this._rootItem._dataRow=this._dataSource.rootRow(),this._itemMap[this._rootItem._dataRow.rowId()]=this._rootItem,this.$_buildItems(this._rootItem,a),this.$_clearSummary();for(var b=this._dataSource.fieldCount(),c=this._sortFields,d=this._sortDirections,e=this._sortCases,f=c.length;f--;)(c[f]<0||c[f]>=b)&&(c.splice(f,1),d.splice(f,1),e.splice(f,1));this.isSorted()&&this._rootItem.count()>1&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},$_resetSummary:function(){this._summaryMap=[]},$_resetGroupSummary:function(){},$_clearSummary:function(){if(this._summaryMap)for(var a=this._summaryMap.length;a--;)this._summaryMap[a]&&this._summaryMap[a].clear()},$_getSummary:function(a){var b=this._summaryMap[a];if(!b){var c=this.dataSource();c&&c.canSummarize(a)&&(b=new Lf(a),this._summaryMap[a]=b)}return b&&0==b.count&&this.itemCount()>0&&this.$_summarize(b),b},$_summarize:function(a){var b=this.dataSource();if(b)if(this._filtered){for(var c=this._rootItem.getDescendants(!1),d=c.length,e=[],f=0;d>f;f++){
var g=c[f];g instanceof $n&&e.push(g.row())}a.count=e.length,b.summarizeRange(a,e,this._summaryMode==Fe.STATISTICAL)}else a.count=b.rowCount(),b.summarize(a,this._summaryMode==Fe.STATISTICAL)},_fireItemChanged:function(a){this._eventLock<=0&&this.fireEvent(bo.ITEM_CHANGED,a)},_fireExpanding:function(a){return this._eventLock<=0?this.fireConfirmEvent(bo.EXPANDING,a):!0},_fireExpanded:function(a){this._eventLock<=0&&this.fireEvent(bo.EXPANDED,a)},_fireCollapsing:function(a){return this._eventLock<=0?this.fireConfirmEvent(bo.COLLAPSING,a):!0},_fireCollapsed:function(a){this._eventLock<=0&&this.fireEvent(bo.COLLAPSED,a)},_fireParentChanging:function(a,b,c){return this._eventLock<=0?this.fireConfirmEvent(bo.PARENT_CHANGING,a,b,c):!0},_fireParentChanged:function(a,b,c){this._eventLock<=0&&this.fireEvent(bo.PARENT_CHANGED,a,b,c)}});bo.ITEM_CHANGED="onTreeItemProviderItemChanged",bo.EXPANDING="onTreeItemProviderExpanding",bo.EXPANDED="onTreeItemProviderExpanded",bo.COLLAPSING="onTreeItemProviderCollapsing",bo.COLLAPSED="onTreeItemProviderCollapsed";var co=Xa("TreeEditItem",$n,{init:function(a,b,c){this._super(b?b.row():null),this._provider=a,this._item=b,this._state=c,this._values=[],this._started=!1,this._checkDiff=!1,this._strictDiff=!1},values:function(){return this._values.concat()},setValues:function(a){var b,c,d,e,f,g=this.dataSource(),h=g.fieldCount();if(s(arr))for(h=Math.min(h,a.length),b=0;h>b;b++)d=g.getField(b),e=this._values[b],f=d.readValue(arr[b]),this._values[b]=f,this._started&&parent&&!d.equalValues(e,f)&&this._provider._editItemCellUpdated(this,b,e,f);else if(a)for(b=0;h>b;b++)c=g.getOrgFieldName(b),a.hasOwnProperty(c)&&(d=g.getField(b),e=this._values[b],f=d.readValue(a[c]),this._values[b]=f,this._started&&parent&&!d.equalValues(e,f)&&this._provider._editItemCellUpdated(this,b,e,f))},beginEdit:function(a,b){this._started=!0,this._checkDiff=a,this._strictDiff=b},setValue:function(a,b){var c=this.dataSource();if(0>a&&a>=c.fieldCount())throw new RangeError("field index is out of bounds: "+a);var d=c.getField(a),e=this._values[a];b=d.readValue(b),this._values[a]=b,this._started&&this.parent()&&!d.equalValues(e,b)&&this._provider._editItemCellUpdated(this,a,e,b)},dataSource:function(){return this._provider.dataSource()},itemState:function(){return this._state},rowState:function(){return this._item?this._item.rowState():je.NONE},iconIndex:function(){return this._item?this._super():-1},hasChildren:function(){return this._item?this._super():!1},dataRow:function(){return this._item?this._super():-1},isExpanded:function(){return this._item?this._item.isExpanded():!1},getData:function(a){if(0>a&&a>=this.dataSource().fieldCount())throw new RangeError("field index is out of bounds: "+a);return this._values[a]},setData:function(a,b){var c=this.dataSource();if(0>a&&a>=c.fieldCount())throw new RangeError("field index is out of bounds: "+a);var d=c.getField(a),e=this._values[a];b=d.readValue(b);var f=!this._checkDiff;f||(f=this._strictDiff?!d.equalValues(e,b):!d.sameValues(e,b)),f&&(this._values[a]=b,this.parent()&&(this._provider._editItemCellUpdated(this,a,e,b),this._provider._editItemCellEdited(this,a)))},getRowData:function(){return this._values.concat()},getRowObject:function(){var a=this.dataSource();if(a){var b,c,d=a.fieldCount(),e={};for(b=0;d>b;b++)c=a.getOrgFieldName(b),e[c]=this._values[b];return e}return null}}),eo=Xa("TreeCellStyleMap",null,{init:function(a){this._super(),this._owner=a,this._styleMap={}},isEmpty:function(){for(var a in this._styleMap)return!1;return!0},connect:function(a){},disconnect:function(){},clearRows:function(){this._styleMap={}},setRows:function(){},addRow:function(a){},addRows:function(a){},removeRow:function(a){if(a){var b=a.descendants();if(b){for(var c=b.length;c--;)delete this._styleMap[b[c].rowId];delete this._styleMap[a.rowId()]}}},removeRows:function(a){for(var b=a.length;b--;)this.removeRow(a[b])},updateRow:function(){},setCellStyle:function(a,b,c){var d=this._owner.getItemOfRow(a),e=d?d.row():null;if(null!=e)if(0>b)this._styleMap[e.rowId()]=c;else{var f,g=this._styleMap[e.rowId()];if(g)if(s(g))g[b]=c;else{var h,i=this._owner.dataSource().fieldCount();for(f=[],h=0;i>h;h++)f[h]=g;this._styleMap[e.rowId()]=f}f=this._styleMap[e.rowId()],s(f)||(f=[]),f[b]=c,this._styleMap[e.rowId()]=f}},setCellStyles:function(a,b,c){function d(b,c,d,e){var f,g,h,i,j,k=d.length,l=Math.min(e.length,c.fieldCount());for(f=0;k>f;f++)if(j=d[f],s(j))for(g=0;l>g;g++)h=e[g],h>=0&&(i=a.getStyle(j[h]),i&&b.setCellStyle(f,g,i))}function e(b,c,d,e){var f,g,h,i,j,k=d.length;for(f=0;k>f;f++)if(j=d[f])for(g in e)h=e[g],i=a.getStyle(j[g]),i&&b.setCellStyle(f,h,i)}if(b&&!(b.length<1)&&c){var f,g,h,i,j=this._owner.dataSource(),k=j.fieldCount();if(s(c)){for(i=c.concat(),h=Math.min(k,i.length),f=0;h>f;f++)g=parseInt(i[f]),isNaN(g)||0>g?i[f]=-1:i[f]=g;d(this,j,b,i)}else{i={};for(var l in c)g=parseInt(c[l]),isNaN(g)&&(g=j.getFieldIndex(c[l])),g>=0&&k>g&&(i[l]=g);e(this,j,b,i)}}},removeCellStyle:function(a){for(var b in this._styleMap){var c=this._styleMap[b];if(s(c))for(var d=c.length;d--;)c[d]===a&&(c[d]=null);else this._styleMap[b]===a&&delete this._styleMap[b]}},clearCellStyles:function(){this._styleMap={}},checkCellStyle:function(a,b){var c=this._styleMap[a];return s(c)?!!c[b]:!!c},getCellStyle:function(a,b){var c=this._owner.getItemOfRow(a),d=c?c.row():null;if(d){var e=this._styleMap[d.rowId()];return s(e)?e[b]:e}return null}}),fo=Xa("TreeCheckableTag",null,{init:function(a,b){this._super(),this._owner=a,this._exprNode=vc.Default.parse(b,["value","values"]),this._runtime=new Lm},connect:function(a){this._runtime.setDataSource(a)},disconnect:function(){},clearRows:function(){fo.clearCheckables(this._owner)},setRows:function(){for(var a=this._owner.itemCount();a--;){var b=this._owner.getItem(a);b instanceof $n&&this.$_setCheckable(b)}},addRow:function(a){var b=this._owner.getItemOfRow(a.rowId());b instanceof $n&&this.$_setCheckable(b)},addRows:function(a){for(var b=a.length;b--;){var c=this._owner.getItemOfRow(a[b].rowId());c instanceof $n&&this.$_setCheckable(c)}},updateRow:function(a){var b=this._owner.getItemOfRow(a.rowId());b instanceof $n&&this.$_setCheckable(b)},changeStates:function(a){for(var b=a.length;b--;){var c=this._owner.getItemOfRow(a[b].rowId());c instanceof $n&&this.$_setCheckable(c)}},$_setCheckable:function(a){if(a){this._runtime.setItem(a),a.setCheckable(this._exprNode.evaluate(this._runtime));for(var b=a.count();b--;){var c=a.getItem(b);c instanceof $n&&this.$_setCheckable(c)}}}},{clearCheckables:function(a){for(var b=function(a){if(a){a.setCheckable(!0);for(var c=a.count();c--;){var d=a.getItem(c);d instanceof $n&&b(d)}}},c=a.itemCount();c--;){var d=a.getItem(c);d instanceof $n&&b(d)}}}),go=Xa("TreeGridItemProvider",jg,{init:function(a){this._super(null,a),this._observers=[],this._items=new bo,this.setSource(this._items),this._summarizer=new ef(this._items),this._editingItem=null,this._appending=!1,this._insertAfter=!1,this._insertIndex=-1},onItemProviderFilterAdd:function(a,b,c){},onItemProviderFilterRemove:function(a,b,c){},onItemProviderFilterClear:function(a,b){},onItemProviderFilterClearAll:function(a){},onItemProviderFiltered:function(a){},onItemProviderSort:function(a,b,c){this._fireSort(b,c)},onItemProviderSorted:function(a){this._fireSorted()},setAggregateMode:function(a){this._items.setAggregateMode(a)},setSummaryMode:function(a){this._items.setSummaryMode(a)},setGroupSummaryMode:function(a){this._items.setGroupSummaryMode(a)},summarizer:function(){return this._summarizer},getLevels:function(a){return this._items.getLevels(a)},orderBy:function(a,b,c){this._items.orderBy(a,b,c)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},addFilter:function(a,b){this._items.addFilter(a,b)},removeFilter:function(a,b){this._items.removeFilter(a,b)},clearFilters:function(a){this._items.clearFilters(a)},clearAllFilters:function(){this._items.clearAllFilters()},beginFiltering:function(){this._items.beginFiltering()},endFiltering:function(){this._items._addParentNodeOnFiltering=this._addParentNodeOnFiltering,this._items.endFiltering()},expand:function(a,b,c){this._items.expand(a,b,c)},collapse:function(a,b){this._items.collapse(a,b)},expandAll:function(a){this._items.expandAll(a)},collapseAll:function(){this._items.collapseAll()},getCheckedRows:function(){return this._items.getCheckedRows()},getCheckedRowIds:function(){return this._items.getCheckedRowIds()},setCheckableExpression:function(a){this._items.setCheckableExpression(a)},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},hideDeleted:function(){return this._items.hideDeleted},setHideDeleted:function(a){this._items.setHideDeleted(a)},getAllItems:function(){return this._items.getAllItems()},getItem:function(a){return this._items.getItem(a)},getItemOfRow:function(a){return this._items.getItemOfRow(a)},findItem:function(a,b,c,d,e){return this._items.findItem(a,b,c,d,e)},findCell:function(a,b,c,d,e,f){return this._items.findCell(a,b,c,d,e,f)},checkItem:function(a,b,c){this._items.checkItem(a,b,c)},checkAll:function(a,b,c){this._items.checkAll(a,b,c)},hasCellStyle:function(){return this._items.hasCellstyle()},setCellStyle:function(a,b,c){this._items.setCellStyle(a,b,c)},setCellStyles:function(a,b,c){this._items.setCellStyles(a,b,c)},removeCellStyle:function(a){this._items.removeCellStyle(a)},clearCellStyles:function(){this._items.clearCellStyles()},checkCellStyle:function(a,b){return this._items.checkCellStyle(a,b)},getCellStyle:function(a,b){return this._items.getCellStyle(a,b)},canAppend:function(){return!1},canInsert:function(a,b){return a?!0:!1},canDelete:function(a,b){return a?!0:!1},$_replaceItem:function(a,b){var c=a.parent();c.setItem(a,b),this._items._setItem(a,b)},_doBeginUpdate:function(a){return this._editingItem=this._createEditItem(a,me.UPDATING,null),this.$_replaceItem(a,this._editingItem),this._editingItem},_doBeginAppend:function(a){return this._editingItem=this._createEditItem(null,me.APPENDING,a),this._editingItem},_doBeginInsert:function(a,b,c,d){if(d)this._appending=!0,a.setExpanded(!0),this._editingItem=this._createEditItem(null,me.INSERTING,b),this._items.appendItem(a,this._editingItem);else{var e=a.parent();this._appending=!1,this._insertAfter=c,this._insertIndex=e.indexOf(a),this._editingItem=this._createEditItem(a,me.INSERTING,b),this._items.insertItem(e,this._editingItem,this._insertIndex,this._insertAfter)}return this._editingItem},_doCompleteUpdate:function(a){var b=!1,c=this.dataSource();if(c){this.$_replaceItem(this._editingItem,a);var d=this._editingItem.row();try{b=d.update(this._editingItem.values())}catch(e){throw this.$_replaceItem(a,this._editingItem),e}b||this.$_replaceItem(a,this._editingItem)}return b},_doCompleteInsert:function(a){var b=!1,c=this.dataSource();if(c){var d=this._editingItem.parent(),e=d.row(),f=c.createRow(this._editingItem.values(),-1,!1),g=this._editingItem.parent().indexOf(this._editingItem);this._items.removeItem(this._editingItem);try{b=this.isAppending()?e.addChild(f):e.insertChild(g,f)}catch(h){throw this._appending?this._items.appendItem(d,this._editingItem):this._items.insertItem(d,this._editingItem,this._insertIndex,this._insertAfter),h}if(b){var i=d.itemOfRow(f.rowId);this._copyExtents(this._editingItem,i)}else this._appending?this._items.appendItem(d,this._editingItem):this._items.insertItem(d,this._editingItem,this._insertIndex,this._insertAfter)}return b},_doCancelEdit:function(a,b){a==me.UPDATING?(this.$_replaceItem(this._editingItem,b),this._copyExtents(this._editingItem,b)):a==me.INSERTING&&this._editingItem.parent()&&this._items.removeItem(this._editingItem),this._super(a,b)},_doCommitEdit:function(a,b){a==me.UPDATING||a==me.INSERTING,this._super(a,b)},remove:function(a){if(a instanceof $n){var b=a.row();b&&b.parent().removeChild(b)}},removeAll:function(a){if(a&&a.length>0){for(var b=[],c=0,d=a.length;d>c;c++){var e=this._items.getItem(a[c]);e instanceof $n&&b.push(e.row())}this.dataSource().removeRows(b)}},getRemovableRows:function(a){if(a.length>0){for(var b=[],c=0,d=a.length;d>c;c++){var e=this._items.getItem(a[c]);e instanceof $n&&b.push(e.row())}return b}},removeRows:function(a){a&&this.dataSource().removeRows(a)},dataSource:function(){return this._items.dataSource()},setDataSource:function(a){this._items.setDataSource(a)},rootItem:function(){return this._items._rootItem},_createEditItem:function(a,b,c){this._editingItem=null;var d=this.dataSource();if(!d)return null;var e,f=d.fieldCount();switch(b){case me.UPDATING:for(this._editingItem=new co(this,a,b),e=0;f>e;e++)this._editingItem.setValue(e,a.getData(e));this._copyExtents(a,this._editingItem);break;case me.INSERTING:case me.APPENDING:if(this._editingItem=new co(this,null,b),c)for(e=0;f>e;e++)c.length>e&&this._editingItem.setValue(e,c[e])}return this._editingItem},onTreeItemProviderItemChanged:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(bo.ITEM_CHANGED,b):void 0},onTreeItemProviderExpanding:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(bo.EXPANDING,b):!0},onTreeItemProviderExpanded:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(bo.EXPANDED,b):void 0},onTreeItemProviderCollapsing:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(bo.COLLAPSING,b):!0},onTreeItemProviderCollapsed:function(a,b){return this._eventLock<=0?this.fireConfirmEvent(bo.COLLAPSED,b):void 0},onItemProviderFilterAdded:function(a,b,c){this._fireFilterAdded(b,c)},onItemProviderFilterRemoved:function(a,b,c){this._fireFilterRemoved(b,c)},onItemProviderFilterCleared:function(a,b){this._fireFilterCleared(b)},onItemProviderFilterAllCleared:function(a){this._fireFilterAllCleared()},onItemProviderFiltered:function(a){this._fireFiltered(ag.FILTERED)},onItemProviderSort:function(a,b,c){this._fireSort(b,c)},onItemProviderSorted:function(a){this._fireSorted()}}),ho=Xa("TreeOptions",hh,{init:function(a){this._super(a),this._expanderStyles=new ng(a,"expanderStyles"),this._footerStyles=new ng(a,"footerStyles"),this._icons=null},expanderStyles:null,expanderWithCellStyles:!0,footerStyles:null,expanderWidth:17,lineVisible:!0,lineStyle:null,showCheckBox:!1,checkBoxSize:17,iconImages:null,iconWidth:0,iconHeight:0,aggregateMode:Hn.LEAF,collapseWhenLeftArrow:!0,collapseWhenCtrlArrow:!0,expandWhenRightArrow:!0,expandWhenCtrlArrow:!0,icons:function(){return this._icons},setLinseVisible:function(a){a!=this._linesVisible&&(this._linesVisible=a,this._changed())},setExpanderWidth:function(a){a!=this._expanderWidth&&(this._expanderWidth=a,this._changed())},setShowCheckBox:function(a){a!=this._showCheckBox&&(this._showCheckBox=a,this._changed())},setCheckBoxSize:function(a){a=Math.max(0,a),a!=this._checkBoxSize&&(this._checkBoxSize=a,this._changed())},setIconImages:function(a){a!=this._iconImages&&(this._iconImages=a,this._icons=this.owner().getImageList(a),this._changed())},setIconWidth:function(a){a=Math.max(0,a),a!=this._iconWidth&&(this._iconWidth=a,this._changed())},setIconHeight:function(a){a=Math.max(0,a),a!=this._iconHeight&&(this._iconHeight=a,this._changed())},setLineStyle:function(a){this._lineStyle=a,this._expanderStyles.line(a)}}),io=Xa("TreeItemExpanderCell",xh,{init:function(){this._super("treeItemExpanderCell")},displayText:function(){return null},value:function(){return null}}),jo=Xa("TreeItemFooterCell",xh,{init:function(){this._super("treeItemFooterCell")},displayText:function(){var a=String(this.value());if(!a){var b=this.index();b.dataColumn()&&(a=b().column().footer().groupText())}return a},value:function(){return null}}),ko=Xa("TreeGridDelegate",xk,{init:function(a){this._super(a),this._rowViews=[],this._footerViews=[]},borrowItemView:function(a,b,c){var d,e,f;return a instanceof $n?(0==this._rowViews.length&&this._rowViews.push(new zo),d=this._rowViews.length-1,e=this._rowViews[d],e.setFixed(b),e.setRightFixed(c),this._rowViews.pop(),e):a instanceof TreeItemFooter?(0==this._footerViews.length&&this._footerViews.push(new Ao),d=this._footerViews.length-1,f=this._footerViews[d],f.setFixed(b),e.setRightFixed(c),this._footerViews.pop(),f):null}}),lo=Xa("TreeGridLayoutManager",Dk,{init:function(a){this._super(a)},_doLayout:function(a){this._super(a);var b=this.grid(),c=b.treeLinesRenderer();if(c){var d=this.fixedColCount()>0?this.fixedBounds():this.bodyBounds();this.columnCount()>0?d.width=Math.max(0,this.columnRect(0).width):d.width=0,c.setRect(d),c.setLevelWidth(b.treeOptions().expanderWidth()),c.setRange(b,this.topIndex(),Math.min(b.itemCount(),this.topIndex()+this.itemCount())-1)}}}),mo=function(){var a,b,c,d,e,f,g=function(a,b,c){return f?f(a,b._rowId,c._rowId):void 0},h=function(a,b,f,g){var i,j,k,l,m,n;do{i=a,j=b,k=Ma((a+b)/2),l=c.getItem(k).dataRow(),m=c.getItem(k).row();do{if(f==te.ASCENDING){for(;j>=i&&(n=e(d,m,c.getItem(i).row()),0==n&&g&&(n=l-c.getItem(i).dataRow()),!(0>=n));)i++;for(;j>=i&&(n=e(d,m,c.getItem(j).row()),0==n&&g&&(n=l-c.getItem(j).dataRow()),!(n>=0));)j--}else{for(;j>=i&&(n=e(d,m,c.getItem(i).row()),0==n&&g&&(n=l-c.getItem(i).dataRow()),!(n>=0));)i++;for(;j>=i&&(n=e(d,m,c.getItem(j).row()),0==n&&g&&(n=l-c.getItem(j).dataRow()),!(0>=n));)j--}j>=i&&(i!=j&&c._exchangeItems(i,j),i++,j--)}while(j>=i);j>a&&h(a,j,f,g),a=i}while(b>a)};this.run=function(i,j,k,l,m,n,o){a=i.provider(),b=a.dataSource(),c=i,d=j;var p=b.getField(j);if(f=p._comparer?p._comparer:b._comparers[j]?b._comparers[j]:null)e=g;else switch(p.dataType()){case ie.NUMBER:e=b.compareNumbers;break;case ie.DATETIME:e=b.compareNumbers;break;case ie.BOOLEAN:e=b.compareBools;break;default:e=l?b.compareTexts:b.compareValues}h(m,n,k,o)}},no=Xa("TreeSelectionTool",al,{init:function(a){this._super(a)},_doKeyDown:function(a,b,c,d){var e,f=this.focused().clone(),g=this.grid()._treeOptions;if(f&&(e=f.item()))switch(a){case Yd.RIGHT:if(e.isExpanded()){if(b&&e.count()>0&&g.isExpandWhenCtrlArrow())return f.down(),this.setFocused(f,!0),!0}else if(1==this.grid().visibleColumnCount()&&f.isRight()&&g.isExpandWhenRightArrow()||b&&g.isExpandWhenCtrlArrow())return e.setExpanded(!0),!0;break;case Yd.LEFT:if(e.isExpanded()){if(f.isLeft()&&g.isCollapseWhenLeftArrow()||b&&g.isCollapseWhenCtrlArrow())return e.setExpanded(!1),!0}else if(f.isLeft()||b)if(b&&!g.isCollapseWhenCtrlArrow());else if(!(e.parent()instanceof _n))return f.itemIndex(e.parent().index()),this.setFocused(f,!0),!0}return this._super(a,b,c,d)},_doColumnHeaderClicked:function(a,b,c){this._super(a);var d=this.grid(),e=ab(a,rk);!d.isEmpty()&&e&&e.isSortable()&&d.sortingOptions().isEnabled()&&d.sortColumn(e,c)},_doElementClicked:function(a){if(this._super(a),a instanceof xo){var b=this.grid();if(b.editOptions().isCheckable()){var c=a.item();c&&c.isCheckable()&&b.itemSource().checkItem(c,!c.isChecked(),b.checkBar().isExclusive())}}},_doHandleClicked:function(a){if(a instanceof qo){var b=a.cellView().item();b&&b.setExpanded(!b.isExpanded())}else this._super(a)}}),oo=Xa("TreeContainer",am,{init:function(a,b,c){am.prototype.init.call(this,a,b,c)},treeView:function(){return this._gridView},_createGridView:function(a,b,c){return new po(a,b,c)},_createDefaultTool:function(){return new no(this)}}),po=Xa("TreeView",em,{init:function(a,b,c){this._treeLinesView=null,this._treeOptions=null,this._focusedRow=-1,this._super(a,b,c),this._expanderCell=new io,this._footerCell=new jo,this.panel().setVisible(!1),this.setItemSource(this._items=this._createItemSource())},treeLinesRenderer:function(){return this._treeLinesView},treeOptions:function(){return this._treeOptions},getOptions:function(){var a=this._super();return a},setOptions:function(a){this._super(a)},getLevels:function(a){return this._items.getLevels(a)},getExpanderCell:function(a){return this._expanderCell.setStyles(this._treeOptions.expanderStyles()),this._expanderCell.setIndex(Ye.temp(this,a)),this._expanderCell},getFooterCell:function(a){return this._footerCell.setStyles(this._treeOptions.footerStyles()),this._footerCell.setIndex(a),this._footerCell},expand:function(a,b,c){this.isItemEditing(null)||this._items.expand(a,b,c)},collapse:function(a,b){this.isItemEditing(null)||this._items.collapse(a,b)},expandAll:function(a){this.isItemEditing(null)||(a=arguments.length>0?a:0,this._items.expandAll(a))},collapseAll:function(){this.isItemEditing(null)||this._items.collapseAll()},getTreeIcon:function(a){var b=this._treeOptions.icons();if(b){var c=a.iconIndex();if(c>=0&&c<b.count())return b.getImage(c)}return null},getCheckedItems:function(){for(var a=[],b=0,c=this.itemCount();c>b;b++){var d=this.getItem(b);d.isChecked()&&a.push(d)}return a},getCheckedItemIndices:function(){for(var a=[],b=0,c=this.itemCount();c>b;b++){var d=this.getItem(b);d.isChecked()&&a.push(d.index())}return a},getCheckedRows:function(a){var b=null;if(a){b=[];for(var c=0,d=this.itemCount();d>c;c++){var e=this.getItem(c);e.isChecked()&&b.push(e.row())}}else b=this._items.getCheckedRows();return b},getCheckedRowIds:function(a){var b=null;if(a){b=[];for(var c=0,d=this.itemCount();d>c;c++){var e=this.getItem(c);e.isChecked()&&b.push(e.dataRow())}}else b=this._items.getCheckedRowIds();return b},checkChildren:function(a,b,c,d,e){if(d=arguments.length>3?d:!0,a){var f,g,h=a.count();for(f=0;h>f;f++)g=a.getItem(f),e?g.isCheckable()&&g.setChecked(b):g.setChecked(b),!c||!g.isExpanded()&&d||this.checkChildren(g,b,!0,d,e)}},resetCheckables:function(){this._items.resetCheckables()},applyCheckables:function(){this._items.applyCheckables()},dataSource:function(){return this._items?this._items.dataSource():null},setDataSource:function(a){this._items&&this._items.setDataSource(a)},maxItemCount:function(){return this._items?this._items.maxItemCount():0},setMaxItemCount:function(a){this._items&&this._items.setMaxItemCount(a)},_addGroupView:function(){this._treeLinesView=new Bo(this._dom,this),this.addElement(this._treeLinesView)},addMasks:function(){},_createDelegate:function(){return new ko(this)},_createLayoutManager:function(){return new lo(this)},_createBodyView:function(a,b,c,d){return new Co(a,b,c,d)},_visualObjectChanged:function(a){this._super(a),a instanceof sh&&this._items.setCheckableExpression(a.checkableExpression())},append:function(){return this.insert(this._items.rootItem(),!1,!0)},_doCanInsert:function(a,b,c){return a&&(a.count()>0||!c||0==a.level()||this.editOptions().isAppendable())},getSummarizer:function(){return this._items.summarizer()},_doMaxRowCountChanged:function(){this._items.setMaxItemCount(this.maxItemCount())},onImageListImageLoaded:function(a,b){this._super(a,b),a===this._treeOptions.icons()&&(this.refreshView(),this._treeLinesView.invalidate())},onImageLoaded:function(a){this._super(a)},getSortFields:function(){return this._items.getSortFields()},getSortDirections:function(){return this._items.getSortDirections()},getSortCases:function(){return this._items.getSortCases()},_doSortItems:function(a,b,c){this._items.orderBy(a,b,c)},_doColumnFiltersChanged:function(a){this.applyFilters()},initStyles:function(){this._super(),this._addGridObject(this._treeOptions=new ho(this)),this._treeOptions.expanderStyles().setParent(this.body().styles());var a=og.Default;this._treeOptions.expanderStyles().setSysDefault(a.treeExpander())},$_doLayout:function(a){var b=this._treeOptions;b.expanderStyles().setParent(this.fixedOptions().colCount()>0?this.fixedOptions().styles():this.body().styles(),!1);var c=this._super(a);return b.isLineVisible()?(this._treeLinesView.setVisible(!0),this._treeLinesView.setStroke(b.expanderStyles().line()),this._treeLinesView.invalidate()):this._treeLinesView.setVisible(!1),c},assignImageList:function(a){this._super(a),this.treeOptions().iconImages()==a.name()&&(this.treeOptions._icons=a)},refreshView:function(){this._treeLinesView&&this._treeLinesView.invalidate(),this._super()},getEditBounds:function(a){return this._super(a)},updatePastedRow:function(a,b,c){if(a instanceof $n){var d=a.row();d&&(c?d.updateStrict(b):d.update(b))}},appendPastedRow:function(a){var b=this.dataSource();if(b){var c=b.createRow(a,-1,!1);b.rootRow().addChild(c)}},_createItemSource:function(){var a=new go(!0);return a._addParentNodeOnFiltering=this._filteringOptions?this._filteringOptions._addParentNodeOnFiltering:void 0,a},$_getVisibleAncestor:function(a){var b=this._items.getItemOfRow(a);if(b){for(;b&&!b.isVisible();)b=b.parent();return b}return null},onTreeItemProviderItemChanged:function(a,b){this._treeLinesView.invalidate(),this.invalidateLayout(),this.fireEvent(po.CHANGED,b)},onTreeItemProviderExpanding:function(a,b){return this._focusedRow=this.focusedIndex()?this.focusedIndex().dataRow:-1,this.editController().isEditing()&&!this._items.isEditing()&&this.editController().cancelEditor(!0),!this.editController().isEditing()&&!this._items.isEditing()&&this.fireConfirmEvent(po.EXPANDING,b)},onTreeItemProviderExpanded:function(a,b){if(this._focusedRow>=0){var c=this.focusedIndex().clone(),b=this.$_getVisibleAncestor(this._focusedRow);c._itemIndex=b?b.index():-1,this.setFocusedIndex(c,!0)}this.fireEvent(po.EXPANDED,b)},onTreeItemProviderCollapsing:function(a,b){return this._focusedRow=this.focusedIndex()?this.focusedIndex().dataRow:-1,this.editController().isEditing()&&!this._items.isEditing()&&this.editController().cancelEditor(!0),!this.editController().isEditing()&&!this._items.isEditing()&&this.fireConfirmEvent(po.COLLAPSING,b)},onTreeItemProviderCollapsed:function(a,b){if(this._focusedRow>=0){var c=this.focusedIndex().clone(),b=this.$_getVisibleAncestor(this._focusedRow);c._itemIndex=b?b.index():-1,this.setFocusedIndex(c,!0)}this.fireEvent(po.COLLAPSED,b)}});po.EXPANDING="onTreeViewExpanding",po.EXPANDED="onTreeViewExpanded",po.COLLAPSING="onTreeViewCollapsing",po.COLLAPSED="onTreeViewCollapsed",po.CHANGED="onTreeViewChanged";var qo=(Xa("TreeViewObserver",fm,{init:function(){this._super()},onTreeViewExpanding:function(a,b){},onTreeViewExpanded:function(a,b){},onTreeViewCollapsing:function(a,b){},onTreeViewCollapsed:function(a,b){},onTreeViewChanged:function(a,b){}}),Xa("TreeExpandHandle",ei,{init:function(a,b){this._super(a,b,"treeItemExpandHandle"),this._figureBackground=yd.BLACK},expanded:!1,figureSize:9,figureBackground:null,background:null,isClickable:function(){return!0},_doDraw:function(a){var b=this.figureSize(),c=this.background(),d=new kd(0,0,this.width(),this.height());this.isExpanded()?Nb(a,d,b,this.figureBackground(),c):Mb(a,d,b,this.figureBackground(),c)}})),ro=12,so=ro-2,to=new Dd(4290493371),uo=new yd(4294967295),vo=new yd(4293848814),wo=new yd(4282664004),xo=Xa("TreeCheckElement",Vd,{init:function(a){this._super(a,"treeCheckView")},item:null,checkable:!0,checked:!1,exclusive:!1,isClickable:function(){return!0},_doDraw:function(a){var b=new kd(0,0,this.width(),this.height());a.drawRectI(null,null,b);var c=ro,d=so,e=Ma(b.x+(b.width-d)/2),f=Ma(b.y+(b.height-d)/2);if(this._exclusive){var g=d/2;a.drawCircle(this._checkable?uo:vo,to,e+g,f+g,g),this._checked&&a.drawCircle(wo,null,e+g,f+g,g/2)}else a.drawBoundsI(this._checkable?uo:vo,to,e,f,d,d),this._checked&&(c*=.9,Ob(a,wo,b,c))}}),yo=Xa("TreeExpanderElement",ri,{init:function(a,b){this._super(a,b),this._handle=new qo(a,this),this.addElement(this._handle),this._checkView=new xo(a,this),this.addElement(this._checkView),this._iconView=new cf(a,"treeIconView"),this._iconView.setMouseEnabled(!1),this.addElement(this._iconView),this._line=null,this._expanderWidth=0,this._dataCell=null,this._useCellStyles=!0},setHandleWidth:function(a){this._handle.setWidth(a)},setShowCheck:function(a){this._checkView.setVisible(a)},setCheckSize:function(a){this._checkView.setWidth(a)},setIconWidth:function(a){this._iconView.setWidth(a)},setExpanderWidth:function(a){this._expanderWidth=a},setExclusive:function(a){this._checkView.setExclusive(a)},getAdapter:function(a){return a==Wi?this._dataCell:this._super(a)},_doPrepareElement:function(a){this._super(a)},_doUpdateContent:function(a){this._super(a);var b=this.grid(),c=a.index().item();this._checkView.isVisible()&&(this._checkView.setItem(c),this._checkView.setCheckable(c.isCheckable()),this._checkView.setChecked(c.isChecked())),this._iconView.setImage(b.getTreeIcon(c)),c.setIconHeight(this._iconView.iconHeight()),this._handle.setVisible(c.hasChildren()),this._handle.setExpanded(c.isExpanded());var d=a.styles();this._handle.setBackground(d.background()),this._handle.setFigureBackground(d.figureBackground()),this._handle.setFigureSize(d.figureSize()?d.figureSize().getDimension(this._handle.width()):9)},_doLayoutContent:function(a){var b=this.grid().treeOptions().expanderStyles(),c=this._handle.width()*(this.index().item().level()-1)+b.paddingLeft(),d=this._checkView.isVisible()?this._checkView.width():0;this._handle.setBounds(c,this.borderTopWidth(),this._handle.width(),this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._handle.invalidate(),d>0&&(this._checkView.setBounds(c+this._handle.width(),this.borderTopWidth(),d,this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._checkView.invalidate());var e=this._iconView.width();e>0?(this._iconView.setVisible(!0),this._iconView.setBounds(c+this._handle.width()+d,this.borderTopWidth(),e,this.height()-this.borderTopWidth()-this.borderBottomWidth()),this._iconView.invalidate()):this._iconView.setVisible(!1)},_doRender:function(a,b){var c=this._useCellStyles?this._dataCell:null,d=c?c.background():this.background();d&&a.drawRectI(d,null,b);var e=c?c.borderBottomWidth():this.borderBottomWidth(),f=this.borderRightWidth();e&&(e=Ma((e+1)/2),a.drawLineI(c?c._borderBottom:this._borderBottom,b.x,b.bottom()-e,b.right(),b.bottom()-e)),this.width()<this._expanderWidth&&f&&(f=Ma((f+1)/2),a.drawLineI(this._borderRight,b.right()-f,b.y,b.right()-f,b.bottom()))},canHovering:function(){return!1},_setDataCell:function(a){this._dataCell=a}}),zo=Xa("TreeItemElement",$i,{init:function(a){this._super(a),this.setName("treeItemView"),this._expander=new yo(a,"treeExpanderView"),this.addElement(this._expander)},_clearChildren:function(){this._super(),this.addElement(this._expander)},_prepareCells:function(a){if(this._super(a),this.childCount()>0&&(0==a.firstCol()||this.isFixed())&&!this.isRightFixed()){var b=this.grid().getExpanderCell(this.index()),c=this._getFirstCell(a);this._expander._setDataCell(c),this._expander.setVisible(!0),this._expander.updateCell(b)}else this._expander.setVisible(!1)},_layoutCells:function(a){if(this._super(a),this._expander.isVisible()){var b=this.grid(),c=this.item(),d=b.treeOptions(),e=this._getFirstCell(a),f=c.level(),g=d.expanderWidth(),h=d.isShowCheckBox()?d.checkBoxSize():0,i=d.iconWidth(),j=this._expander;if(0>=i&&d.icons()){var k=b.getTreeIcon(c);k&&(i=k.width)}var l=d.expanderStyles(),m=g*f+h+i+l.paddingHorz(),n=e.width();e.setWidth(n-m),e.setX(e.x()+m),e.layoutTreeContent(a),j._useCellStyles=d.isExpanderWithCellStyles(),j.setHandleWidth(g),j.setShowCheck(d.isShowCheckBox()),j.setExclusive(b.checkBar().isExclusive()),j.setCheckSize(h),j.setIconWidth(i),j.setExpanderWidth(m),j.setBounds(0,0,Math.min(m,n),this.height()),j.setIndex(Ye.temp(b,this.index(),null)),j.layoutContent(a)}}}),Ao=Xa("TreeItemFooterElement",Zi,{init:function(a,b,c){this._super(a,"treeItemFooterView"),this._fixed=b,this._rightFixed=c,this._cells={}},fixed:!1,_doUpdateElement:function(a){this._super(a)},_doMesasure:function(a,b,c){return{width:b,height:c}},_doLayoutContent:function(a){this._prepareCells(a),this._layoutCells(a)},_doRender:function(a,b){if(this.isFixed()){var c,d,e,f=this.grid().fixedOptions(),g=f.colBarStyles(),h=f.colBarWidth();this._rightFixed?b.setRight(h):b.setLeft(b.right()-h),c=g.background(),c&&a.drawRectI(c,null,b),d=g.borderRight(),d&&a.drawLine(d,b.right()-1,b.y,b.right()-1,b.bottom()),e=g.borderLeft(),e&&this._rightFixed&&a.drawLine(d,b.x,b.y,b.x,b.bottom())}},prepareCells:function(a){this.clear();for(var b=this.grid(),c=a.firstCol(this._fixed,this._rightFixed),d=a.lastCol(this._fixed,this._rightFixed),e=c;d>=e;e++){
var f=a.getColumn(e),g=this._cells[f];g||(g=f instanceof ak?new Ci(this._dom):new Bi(this._dom),this._cells[f.$_hash]=g),this.addElement(g);var h=Ye.temp(b,this.index(),f),i=b.getFooterCell(h);g.updateCell(i)}},layoutCells:function(a){for(var b=this.grid(),c=a.firstCol(this._fixed,this._rightFixed),d=a.lastCol(this._fixed,this._rightFixed),e=c;d>=e;e++){var f=this._cells[a.getColumn(e).$_hash],g=a.columnBounds(e);this.isFixed()||(g.x-=b.leftPos),g.height=this.height(),f.setRect(g),f.layoutContent(a)}}}),Bo=Xa("TreeLinesElement",Xd,{init:function(a,b){this._super(a,"treeLinesView"),this._tree=b,this._startIndex=-1,this._endIndex=-1,this._levelWidth=20,this._handleWidth=9,this._handleHeight=9,this._stroke=Dd.LTGRAY,this._options=null},setLevelWidth:function(a){a!=this._levelWidth&&(this._levelWidth=a,this.invalidate())},setHandleWidth:function(a){a!=this._handleWidth&&(this._handleWidth=a,this.invalidate())},setHandleHeight:function(a){a!=this._handleHeight&&(this._handleHeight=a,this.invalidate())},setStroke:function(a){a!=this._stroke&&(this._stroke=a,this.invalidate())},setRange:function(a,b,c){this._options=a.treeOptions(),(b!=this._startIndex||c!=this._endIndex)&&(this._startIndex=b,this._endIndex=c,this.invalidate())},$_findLevelItem:function(a,b,c){var d,e;for(d=c;d<=this._endIndex;d++)if(e=a.getItem(d),e&&e.level()==b)return e;return null},$_drawVertLine:function(a,b,c,d){var e,f,g=this._tree.layoutManager(),h=g.topIndex(),i=d*this._levelWidth+this._levelWidth/2,j=0,k=this.height();b&&(e=g.itemBounds(b.index()-h),f=b instanceof $n&&b.hasChildren()?this._handleHeight:0,j=e.y+e.height/2+f/2),c&&(e=g.itemBounds(c.index()-h),f=c instanceof $n&&c.hasChildren()?this._handleHeight:0,k=e.y+e.height/2-f/2),i=Ma(i),a.drawLineI(this._stroke,i,j,i,k)},$_drawChildLine:function(a,b,c){var d,e,f,g=this._tree.layoutManager(),h=g.topIndex(),i=b.level()*this._levelWidth+this._levelWidth/2,j=this.height();e=g.itemBounds(b.index()-h),d=this._options.isShowCheckBox()?e.y+e.height/2+so/2:this._options.icons()&&b instanceof $n&&b.iconHeight()>0?e.y+e.height/2+b.iconHeight()/2:e.bottom()-e.height/4,c&&(e=g.itemBounds(c.index()-h),f=c instanceof $n&&c.hasChildren()?this._handleHeight:0,j=e.y+e.height/2-f/2),i=Ma(i),a.drawLineI(this._stroke,i,d,i,j)},$_drawHorzLine:function(a,b){var c,d=this._tree.layoutManager(),e=d.topIndex(),f=b.parent().level()*this._levelWidth+this._levelWidth/2;x2=b.level()*this._levelWidth,y=0,b instanceof $n&&b.hasChildren()&&(f+=this._handleWidth/2),c=d.itemBounds(b.index()-e),y=Ma(c.y+c.height/2),a.drawLineI(this._stroke,f,y,x2,y)},_doDraw:function(a){a.clipBounds(0,0,this.width(),this.height());var b=this._tree;if(!(!b||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var c,d,e,f,g,h;b.layoutManager(),b.topIndex();for(e=null,c=this._startIndex;c<=this._endIndex&&!(e=b.getItem(c));c++);if(e){if(f=e.level(),f>1||e.childIndex()>0){for(d=0;f>d;d++)g=e.getAncestor(d),h=g.last(),h&&h.index()>=c&&(h=this.$_findLevelItem(b,d+1,c),this.$_drawVertLine(a,null,h,g.level()));e.childIndex()>0&&this.$_drawVertLine(a,null,e,e.parent().level())}for(;c<=this._endIndex;c++)e=b.getItem(c),g=e.parent(),d=e.childIndex(),d<g.count()-1&&(h=g.getItem(d+1),h.index()>this._endIndex&&(h=null),this.$_drawVertLine(a,e,h,g.level())),g=e,g&&g.isExpanded()&&g.count()>0&&(h=g.getItem(0),h.index()>this._endIndex&&(h=null),this.$_drawChildLine(a,e,h)),this.$_drawHorzLine(a,e)}}}}),Co=Xa("TreeBodyElement",ai,{init:function(a,b,c,d){this._super(a,b,c,d),this._footers=[],this._footerViews=[]},clearItems:function(){this._super(),this._footers.splice(0,this._footers.length)},addItem:function(a){a instanceof $f?this._footers.push(a):this._super(a)}}),Do="goAAAANSUhEUgAAA",Eo=function(a){if(a instanceof Zj){var b={name:a.name(),tag:a.tag(),parent:a.parent()?a.parent().name():null,visible:a.isVisible(),resizable:a.isResizable(),movable:a.isMovable(),width:a.width(),displayIndex:a.displayIndex(),displayWidth:a.displayWidth(),fillWidth:a.fillWidth(),fillHeight:a.fillHeight(),checked:a.isChecked(),$_hash:a.$_hash};return a instanceof rk?(b.type="data",b.editor=a.editor(),b.fieldIndex=a.fieldIndex(),b.fieldName=a.fieldName(),b.dataIndex=a.dataIndex(),b.sortable=a.isSortable(),b.button=a.button(),b.buttonVisibility=a.buttonVisibility(),b.editButtonVisibility=a.editButtonVisibility(),b.defaultValue=a.defaultValue(),b.required=a.isRequired(),b.requiredLevel=a.requiredLevel(),b.requiredMessage=a.requiredMessage(),b.textInputCase=a.textInputCase(),b.nanText=a.nanText(),b.lookupDisplay=a.isLookupDisplay(),b.labels=a.lookupLabels()||[],b.values=a.lookupValues()||[],b.labelField=a.labelField(),b.lookupSourceId=a.lookupSourceId(),b.lookupKeyFields=a.lookupKeyFields(),b.imageList=a.imageList(),b.imeMode=""):a instanceof ak?(b.type="group",b.orientation=a.orientation(),b.hideChildHeaders=a.isHideChildHeaders()):a instanceof tk&&(b.type="series",b.fieldNames=a.fieldNames()),b}return null},Fo=function(a){if(a instanceof xf){var b={fieldName:a.fieldName(),dataType:a.dataType(),subType:a.subType(),subtypeEnabled:a.isSubtypeEnabled(),length:a.length(),set:a.set(),minimum:a.minimum(),maximum:a.maximum(),required:a.isRequired(),updatable:a.isUpdatable(),defaultValue:a.defaultValue(),booleanFormat:a.booleanFormat(),datetimeFormat:a.datetimeFormat(),amText:a.amText(),pmText:a.pmText(),baseYear:a.baseYear(),header:a.header(),baseField:a.baseField(),$_hash:a.$_hash};return b}return null},Go=function(a){var b=Eo(a);if(a instanceof ak)for(var c=b.columns=[],d=0,e=a.count();e>d;d++)c.push(Go(a.getItem(d)));return b},Ho=function(a,b){var c=b.getBounds(),d=a.getItem(c.R1()),e=a.getItem(c.R2());return{style:b.style(),startItem:c.R1(),startRow:d?d.dataRow():-1,startColumn:c.C1().name(),endItem:c.R2(),endRow:e?e.dataRow():-1,endColumn:c.C2().name()}},Io=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c].index());return b},Jo=function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c].rowId());return b},Ko=function(){this.createGrid=function(a,b,c){var d=new am(!1,a,c);b._gv=d.gridView(),this.initGrid(b._gv),this.setGridHandler(b)},this.createHtmlGrid=function(a,b){var c=new am(!0,a);b._gv=c.gridView(),this.initGrid(b._gv),this.setGridHandler(b)},this.createTree=function(a,b,c){var d=new oo(!1,a,c);b._gv=d.gridView(),b._gv._productName="RealGridJS v1.0",this.initGrid(b._gv),this.setTreeHandler(b)},this.createHtmlTree=function(a,b){var c=new oo(!0,a);b._gv=c.gridView(),b._gv._productName="RealGridJS v1.0",this.initGrid(b._gv),this.setTreeHandler(b)};var a=function(a,b){var c=null;if("string"==typeof b)c=new xf(b,ie.TEXT,0);else if(b&&b.fieldName){c=new xf(b.fieldName,b.dataType,b.length),b.datetimeFormat&&"flash"==b.datetimeFormat&&(b.datetimeFormat="platform"),c._typeLock=!0;try{c.assign(b),b&&(!b.hasOwnProperty("minimum")&&b.hasOwnProperty("min")&&c.setMinimum(b.min),!b.hasOwnProperty("maximum")&&b.hasOwnProperty("max")&&c.setMaximum(b.max))}finally{c._typeLock=!1}return c}return c},b=function(b,c){if(s(c)){for(var d=[],e=0,f=c.length;f>e;e++){var g=a(b,c[e]);g&&d.push(g)}return d}return null};this.setDataFields=function(a,c){var d=b(a,c);a.setFields(d)};var c=function(a,b){var c=a._parent,d={type:void 0,id:a._id,parentId:!c||c instanceof _f?NaN:c.id(),itemIndex:a._index,dataRow:-1,checked:a.isChecked()};return b&&(d.childIndex=a.childIndex(),d.level=a.level()),a instanceof Xf?(d.type="row",d.dataRow=a.dataRow()):a instanceof Yf?(d.count=a._children.length,d.expanded=a._expanded,a instanceof Zf||a instanceof tj?(d.type="group",d.footerId=a._footer?a._footer.id():NaN):a instanceof $n&&(d.type="tree",d.dataRow=a._dataRow?a._dataRow.rowId():-1),d.$_child=d.count>0?a._children[0]._index:-1):a instanceof $f&&(d.type="footer"),d};this.$_setMobile=function(a){fb(a)},this.$_isMobile=function(){return gb()},this.toProxy=function(a){if(s(a)){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];b.push(e instanceof Zj?Eo(e):e&&e.proxy())}return b}return a?a instanceof Zj?Eo(a):a.proxy():null},this.setDataProviderHandler=function(a){new Mo(a)},this.setGridHandler=function(a){new Po(a)},this.setTreeDataProviderHandler=function(a){new No(a)},this.setTreeHandler=function(a){new Qo(a)},this.ping=function(a,b){a instanceof em&&alert(b)},this.refreshGrid=function(a){a.refreshView()},this.getDataOptions=function(a){var b=a.proxy();return b.datetimeFormat=b.datetimeFormat||b.dateFormat,delete b.dateFormat,b},this.setDataOptions=function(a,b){a.assign(b),b.hasOwnProperty("datetimeFormat")&&a.setDateFormat(b.datetimeFormat)},this.getDataFields=function(a){for(var b=a.getFields(),c=[],d=0;d<b.length;d++){var e=b[d];c.push({fieldName:e.fieldName(),orgFieldName:e.orgFieldName(),dataType:e.dataType(),length:e.length(),defaultValue:e.defaultValue(),baseField:e.baseField()})}return c},this.getDataValues=function(a,b){if(a instanceof Xn){var c=a.rowById(b);return c?c.values():null}return a.getRow(b)},this.loadData=function(a,b,c,d){new Qf(a).load(b,c,d)},this.getDataValue=function(a,b,c){return"string"==typeof c&&(c=a.getFieldIndex(c)),a.getValue(b,c)},this.setDataValue=function(a,b,c,d){return"string"==typeof c&&(c=a.getFieldIndex(c)),a.setValue(b,c,d)},this.initGrid=function(a){a.displayOptions()._emptyMessage="Load data...",a._productName="RealGridJS v1.0"},this.resetSize=function(a,b){a.container().resetSize(b)},this.setOptions=function(a,b){b&&a.setOptions(b)},this.isVisible=function(a){return a._container.isVisible()},this.setVisible=function(a,b){a._container.setVisible(b)},this.mouseToIndex=function(a,b,c){var d=a.pointToIndex(b,c,!0);return d?d.proxy():Ye.nullProxy()},this.getColumns=function(a){for(var b=a._rootColumn,c=[],d=0,e=b.count();e>d;d++)c.push(Go(b.getItem(d)));return c},this.$_getColumn=function(a,b){return"string"==typeof b?a.columnByName(b):b&&b.$_hash?a.columnByHash(b.$_hash):null},this.getColumnProperty=function(a,b,c){var d=this.$_getColumn(a,b);if(d&&c){var e="styles"==c?d.styles().toProxy():d.getProperty(c);return e}return void 0},this.setColumnProperty=function(a,b,c,d){var e=this.$_getColumn(a,b);e&&c&&("styles"==c?e.styles().extend(d):e.setProperty(c,d))},this.setColumn=function(a,b){var c=this.$_getColumn(a,b);if(c&&(c.assign(b),c instanceof rk&&(b.hasOwnProperty("values")||b.hasOwnProperty("labels")))){var d={};b.hasOwnProperty("values")&&(d.lookupValues=b.values),b.hasOwnProperty("labels")&&(d.lookupLabels=b.labels),c.assign(d)}},this.fieldByName=function(a,b){var c=a.fieldByName(b);return c&&Fo(c)},this.columnByName=function(a,b){var c=a.columnByName(b);return c&&Eo(c)},this.columnByField=function(a,b){var c=a.columnByFieldName(b);return c&&Eo(c)},this.columnsByField=function(a,b){var c=a.columnsByFieldName(b);if(c){for(var d=[],e=0,f=c.length;f>e;e++)d.push(Eo(c[e]));return d}return null},this.columnByTag=function(a,b){var c=a.columnByTag(b);return c&&Eo(c)},this.columnsByTag=function(a,b){var c=a.columnsByTag(b);if(c){for(var d=[],e=0,f=c.length;f>e;e++)d.push(Eo(c[e]));return d}return null},this.getDisplayColumns=function(a){function b(a){var c={name:a.name(),orientation:a.orientation(),saveWidth:a.saveWidth(),columns:[]};a.header&&a.header()&&(c.header=a.header().text());for(var d=0,e=a.visibleCount();e>d;d++){var f=a.getVisibleItem(d);f.isVisible()&&(f instanceof ak?c.columns.push(b(f)):f.name()&&c.columns.push(f.name()))}return c}var c=[];if(a)for(var d=0,e=a.visibleColumnCount();e>d;d++){var f=a.getVisibleColumn(d);f.isVisible()&&(f instanceof ak?c.push(b(f)):f.name()&&c.push(f.name()))}return c},this.getColumnGroupNames=function(a){var b=[],c=a.collectGroups();if(c)for(var d=0,e=c.length;e>d;d++){var f,g=c[d];g&&(f=g.name())&&b.push(f)}return b},this.saveColumnLayout=function(a){function b(a){var b={name:a.name(),saveWidth:a.saveWidth()?a.saveWidth():a.width(),visible:a.isVisible()},c=a.header&&a.header();return c&&c.fixedHeight()>0&&(b.header={fixedHeight:c.fixedHeight()}),b}function c(a){var d,e={type:"group",name:a.name(),orientation:a.orientation(),saveWidth:a.saveWidth()?a.saveWidth():a.width(),width:a.saveWidth()?a.saveWidth():a.width(),visible:a.isVisible(),hideChildHeaders:a.isHideChildHeaders(),columns:[]},f=a.header&&a.header();f&&(e.header={text:f.text(),visible:f.isVisible()},(d=f.fixedHeight())>0&&(e.header.fixedHeight=d));for(var g=a._columns._orderedColumns,h=0,i=g.length;i>h;h++){var j=g[h];j instanceof ak?e.columns.push(c(j)):j.name&&e.columns.push(b(j))}return e}if(a){for(var d=a.getOrderedColumns(),e=[],f=0,g=d.length;g>f;f++){var h=d[f];h instanceof ak?e.push(c(h)):h.name&&e.push(b(h))}return e}},this.fitColumnWidth=function(a,b,c,d,e){var f=a.layoutManager();if(b)b=this.$_getColumn(a,b),b&&f.fitColumnWidth(b,e,d,c);else for(var g=a.visibleColumnCount();g--;)f.fitColumnWidth(a.getVisibleColumn(g),e,d,c)},this.getGroupLevel=function(a,b){var c=Number(b);return isNaN(c)&&(c=a.dataSource().getFieldIndex(b)),c>=0?a.getGroupLevel(c):-1},this.getDataRow=function(a,b){var c=a.getItem(b);return c?c.dataRow():-1},this.getRowsOfItems=function(a,b){var c=[];if(b)for(var d=0,e=b.length;e>d;d++){var f=a.getItem(b[d]);f&&c.push(f.dataRow())}return c},this.setValues=function(a,b,c,d){var e=a.getItem(b),f=e.dataSource();if(e&&f){var g,h,i,j,k=f.fieldCount(),l=!1;if(a.isItemEditing(e)){var m=ab(e,ig);if(m)m.setValues(c);else for(g=0;k>g;g++)h=f.getOrgFieldName(g),c.hasOwnProperty(h)&&e.setData(g,c[h])}else if((i=e.dataRow())>=0)if(f instanceof Wn){var n=f.rowById(i);if(n){if(l=!1,j=n.values(),s(c))for(g=0;g<c.length&&!(l=!f.getField(g).equalValues(j[g],c[g]));g++);else for(g=0;k>g&&(h=f.getOrgFieldName(g),!c.hasOwnProperty(h)||!(l=!f.getField(g).equalValues(j[g],c[h])));g++);if(!l)return;d?n.updateStrict(c):n.update(c)}}else{if(l=!1,j=f._values[i],s(c))for(g=0;g<c.length&&!(l=!f.getField(g).equalValues(j[g],c[g]));g++);else for(g=0;k>g&&(h=f.getOrgFieldName(g),!c.hasOwnProperty(h)||!(l=!f.getField(g).equalValues(j[g],c[h])));g++);if(!l)return;d?f.updateStrictRow(i,c):f.updateRow(i,c)}}},this.getValues=function(a,b){var c=a.getItem(b);if(c){var d;if(a.isItemEditing(c))return d=c.getRowObject(),d.__rowId=c.dataRow(),d;if(c.dataRow()>=0){var e=c.dataSource();if(e){var f=e.getRowObject(c.dataRow());d={__rowId:c.dataRow()};for(var g in f)d[g]=f[g];return d}}}return null},this.getDisplayValues=function(a,b,c,d){if(b)for(var e=a.body(),f=a.getLeafColumns(),g=0,h=f.length;h>g;g++){var i=f[g],j=i.valueType(),k=i.getField(),l=i.styles(),m=d&&l.numberFormat()&&new kb(l.numberFormat()),n=d&&l.datetimeFormat()&&new Db(l.datetimeFormat()),o=d&&l.booleanFormat()&&new lb(l.booleanFormat()),p=d&&l.prefix(),q=d&&l.suffix(),r=b[k.orgFieldName()],s=null;if(j==ie.NUMBER){var t=Number(r);isNaN(t)?s=i.nanText():m&&(s=m.format(t))}else j==ie.DATETIME&&r instanceof Date&&n?s=n.getText(r):j==ie.BOOLEAN&&o&&(s=o.formatValue(r));if(!s){var u=Ye.temp(a,c,i),v=e.getCell(u);s=v.displayText()}null!=s&&(p&&(s=p+s),q&&(s+=q)),b[k.orgFieldName()]=s}return b},this.getSelectionItem=function(a,b){if(b){var c=b.getBounds(),d=a.getItem(c.R1()),e=a.getItem(c.R2());return{style:b.style(),startItem:c.R1(),startRow:d?d.dataRow():-1,startColumn:c.C1().name(),endItem:c.R2(),endRow:e?e.dataRow():-1,endColumn:c.C2().name()}}return null},this.getSelectionItems=function(a,b){if(b){for(var c=b.getBounds(),d=a.getItem(c.R1()),e=a.getItem(c.R2()),f=d.index(),g=e.index(),h=[];g>=f;f++)h.push(f);return h}return null},this.getSelectionRows=function(a,b){if(b){for(var c,d=b.getBounds(),e=a.getItem(d.R1()),f=a.getItem(d.R2()),g=e.index(),h=f.index(),i=[];h>=g;g++)e=a.getItem(g),(c=e.dataRow())>=0&&i.push(c);return i}return null},this.getSelectionData=function(a,b){if(a.selections().count()>0){var c=a.selections().getItem(0),d=c.getData(b);return d}return null},this.setSelectionItem=function(a,b){if(b.hasOwnProperty("style")){var c=b.style,d=0;if(b.hasOwnProperty("startItem"))d=b.startItem;else if(b.hasOwnProperty("startRow"))d=a.getItemIndexOfRow(b.startRow);else if("singleColumn"!=c&&"columns"!=c)return;var e=new Ye(a,d,a.columnByName(b.startColumn)),f=0;if(b.hasOwnProperty("endItem"))f=b.endItem;else if(b.hasOwnProperty("endRow"))f=a.getItemIndexOfRow(b.endRow);else if("singleColumn"!=c&&"columns"!=c)return;var g=new Ye(a,f,a.columnByName(b.endColumn));a.setFocusedIndex(e,!0),a.selections().clear(),a.selections().add(e,g,c)}},this.resetCheckables=function(a,b){a.resetCheckables(),b&&a.setCheckBar({checkableExpression:null})},this.setCheckableExpression=function(a,b,c){a.setCheckBar({checkableExpression:b}),c&&a.applyCheckables()},this.createColumns=function(a){return em.createColumns(a)},this.orderBy=function(a,b,c,d){if(b){var e=[];if(c)for(var f=0;f<c.length;f++)e.push(c[f]);a.orderByFields(b,e,d)}},this.setColumnFilters=function(a,b,c){var d=this.$_getColumn(a,b);d&&d.setFilters(c)},this.clearColumnFilters=function(a,b){var c=this.$_getColumn(a,b);c&&c.clearFilters()},this.addColumnFilters=function(a,b,c,d){var e=this.$_getColumn(a,b);e&&e.addFilters(c,d)},this.removeColumnFilters=function(a,b,c){var d=this.$_getColumn(a,b);d&&d.removeFilters(c)},this.activateColumnFilters=function(a,b,c,d){var e=this.$_getColumn(a,b);e&&e.activateFilters(c,d)},this.activateAllColumnFilters=function(a,b,c){var d=this.$_getColumn(a,b);d&&d.activateAllFilters(c)},this.toggleColumnFilters=function(a,b,c){var d=this.$_getColumn(a,b);d&&d.toggleFilters(c)},this.toggleAllColumnFilters=function(a,b){var c=this.$_getColumn(a,b);c&&c.toggleAllFilters()},this.getColumnFilter=function(a,b,c){var d=this.$_getColumn(a,b),e=d&&d.getFilter(c);return e&&e.proxy()},this.getColumnFilters=function(a,b){var c=this.$_getColumn(a,b);return c&&this.toProxy(c.getFilters())},this.getActiveColumnFilters=function(a,b,c){var d=this.$_getColumn(a,b);return d&&this.toProxy(d.getActiveFilters(c))},this.setFilterActions=function(a,b,c){var d=this.$_getColumn(a,b);d&&c&&d.setFilterActions(c)},this.clearFilterActions=function(a,b){var c=this.$_getColumn(a,b);c&&c.setFilterActions(null)},this.getGroupIndex=function(a,b){var c=a.getItem(b);if(c){var d=c.parent();return d?d.index():-1}return-1},this.isGroupItem=function(a,b){var c=a.getItem(b);return c&&c instanceof Yf},this.isParentVisible=function(a,b){var c=a.getItem(b);return c&&c.parent()&&c.parent().isVisible()},this.expandGroup=function(a,b,c,d){var e=a.getItem(b);e instanceof Yf&&e&&a.expand(e,c,d)},this.collapseGroup=function(a,b,c){var d=a.getItem(b);d instanceof Yf&&d&&a.collapse(d,c)},this.expandParent=function(a,b,c,d){var e=a.getItem(b);if(e){var f=e.parent();if(f&&f.isExpandable()&&f.isCollapsed()){a.expand(f,c);var g=a.focusedIndex();g.setItemIndex(f.isVisible()?f.index():f.firstVisibleItem().index()),a.setFocusedIndex(g),a.makeCellVisible(g)}}},this.collapseParent=function(a,b,c){var d=a.getItem(b);if(d){var e=d.parent();if(e&&e.isCollapsable()&&e.isExpanded()){a.collapse(e,c);var f=a.focusedIndex();f.setItemIndex(e.isVisible()?e.index():e.firstVisibleItem().index()),a.setFocusedIndex(f),a.makeCellVisible(f)}}},this.getModel=function(a,b,d){var e=a.getItem(b);return e?c(e,d):null},this.getModelAs=function(a,b,d,e){var f=a.getItem(b);switch(d){case"row":f=ab(f,Xf);break;case"group":f=ab(f,Yf);break;case"footer":f=ab(f,$f);break;case"tree":f=ab(f,$n)}return f?c(f,e):null},this.getGroupModel=function(a,b,d){var e=a.getItem(b);return!e||e instanceof Yf||(e=e.parent()),e?c(e,d):null},this.getParentModel=function(a,b,d){if(b){var e=a.getItem(b.itemIndex);if(e){var f=e.parent();if(f&&!isNaN(f.id()))return c(f,d)}}return null},this.getRootModel=function(a,b,d){if(b){var e=a.getItem(b.itemIndex);if(e){var f=e.root();if(f)return c(f,d)}}return null},this.getChildModels=function(a,b,d){if(b){var e=a.getItem(b.itemIndex);if(!(e instanceof Yf)&&b.$_child>=0){var f=a.getItem(b.$_child);f&&(e=f.parent())}if(e instanceof Yf){for(var g=e.count(),h=[],i=0;g>i;i++)h.push(c(e.getItem(i),d));return h}}return null},this.getChildModel=function(a,b,d,e){if(b){var f=a.getItem(b.itemIndex);if(!(f instanceof Yf)&&b.$_child>=0){var g=a.getItem(b.$_child);g&&(f=g.parent())}if(f instanceof Yf&&d>=0&&d<f.count())return c(f.getItem(d),e)}return null},this.getModels=function(a,b,d){if(b){for(var e=[],f=0,g=b.length;g>f;f++){var h=a.getItem(b[f]);h&&e.push(c(h,d))}return e}return null},this.getModelOfRow=function(a,b,d){var e=a.getItemOfRow(b);return e?c(e,d):null},this.getModelsOfRows=function(a,b,d){if(b){for(var e=[],f=0,g=b.length;g>f;f++){var h=a.getItemOfRow(b[f]);h&&e.push(c(h,d))}return e}return null},this.getGroupSummary=function(a,b,c,d){if(b){var e=a.getItem(b.itemIndex),f=isNaN(c)?a.dataSource().getFieldIndex(c):c;if(e instanceof Yf&&f>=0){var g={count:e.getNumber(f),sum:e.getSum(f),max:e.getMax(f),min:e.getMin(f),avg:e.getAvg(f)};return d&&(g["var"]=e.getVar(f,1),g.varp=e.getVar(f,0),g.stdev=e.getStdev(f,1),g.stdevp=e.getStdev(f,0)),g}}return void 0},this.expandModel=function(a,b,c,d){if(b){var e=a.getItem(b.itemIndex);e instanceof Yf&&a.expand(e,c,d)}},this.collapseModel=function(a,b,c){if(b){var d=a.getItem(b.itemIndex);d instanceof Yf&&a.collapse(d,c)}},this.getSortedFields=function(a){var b,c=a.getSortFields(),d=a.getSortDirections();if(c&&(b=c.length)>0){for(var e=a.dataSource(),f=[],g=0;b>g;g++)f.push({fieldName:e.getFieldName(c[g]),orgFieldName:e.getOrgFieldName(c[g]),direction:d[g]});return f}return null},this.getGroupFieldNames=function(a,b){var c=a.getGroupByFields();if(c){var d=a.dataSource();if(d){for(var e=[],f=0;f<c.length;f++)e.push(b?d.getOrgFieldName(c[f]):d.getFieldName(c[f]));return e}return c}return null},this.getStyles=function(a,b,c){var d=a.getStylesOf(b);if(d){var e=ng.STYLE_NAMES,f={};for(var g in e){var h=c||d.hasValue(e[g]);if(h){var i=d[g]();f[g]=i&&i.toText?i.toText():i}}return f}return null},this.hasCellStyle=function(a,b){return Boolean(a.dataCellStyles().get(b))},this.addCellStyle=function(a,b,c,d){d?a.dataCellStyles().set(b,c):a.dataCellStyles().add(b,c)},this.addCellStyles=function(a,b,c){if(s(b))for(var d=0,e=b.length;e>d;d++){var f=b[d];f&&f.id&&(c?a.dataCellStyles().set(f.id,f):a.dataCellStyles().add(f.id,f))}else b&&b.id&&(c?a.dataCellStyles().set(b.id,b):a.dataCellStyles().add(b.id,b))},this.removeCellStyles=function(a,b){if(s(b))for(var c=b.length;c--;)a.dataCellStyles().set(b[c],null);else b&&a.dataCellStyles().set(b,null)},this.removeAllCellStyles=function(a){a.dataCellStyles().clear()},this.beginUpdateRow=function(a,b){var c=a.focusedIndex().clone(),d=a.getItem(b);d&&c.itemIndex(d.index()),a.edit(c)},this.getEditingItem=function(a){var b=a.getEditingItem();if(b){var c=b.dataSource(),d={},e=b.values();if(e)for(var f=c.fieldCount(),g=e.length;f--&&g--;)d[c.getOrgFieldName(f)]=e[f];return{itemIndex:b.index(),dataRow:b.dataRow(),values:d}}return null},this.getItemState=function(a,b){var c=a.getItem(b);if(c){var d=c.itemState();return d==me.NORMAL&&a.focusedIndex().I()==c.index()&&(d=me.FOCUSED),d}return me.NORMAL},this.getCurrent=function(a){var b=a.focusedIndex();return b?b.proxy():Ye.nullProxy()},this.setCurrent=function(a,b,c){a.setCurrent(b,c)},this.resetCurrent=function(a){var b=a.getIndex(0,a.getFirstColumn());a.setFocusedIndex(b),a.makeCellVisible(a.focusedIndex())},this.addPopupMenu=function(a,b,c){return a.popupMenuManager().addMenu(b,c)},this.exportGrid=function(a,b){(new Fn)["export"](a,b)};var d=function(a){if(a){for(var b=a.length,c=new Array(b),d=0;b>d;d++)c[d]=a[d].rowId();return c}return null};this.loadTreeData=function(a,b,c,d){new Zn(a).load(b,c,d)},this.getTreeChildCount=function(a,b){if(b>=0){var c=a.rowById(b);return c?c.count():0}return a.getChildCount(null)},this.getTreeChildren=function(a,b){var c=null;if(b>=0){var e=a.rowById(b);c=e?e.children():0}else c=a.getRows(null);return c?d(c):null},this.getTreeDescendantCount=function(a,b){if(b>=0){var c=a.rowById(b);return c?c.descendantCount():0}return a.getDescendantCount(null)},this.getTreeDescendants=function(a,b,c){var e=null;return b>=0&&(e=a.rowById(b)),d(a.getDescendants(e,c))},this.getTreeAncestors=function(a,b){var c=a.rowById(b);return c?d(c.ancestors()):null},this.getTreeIconIndex=function(a,b){var c=a.rowById(b);return c?c.iconIndex():-1},this.getTreeJsonRow=function(a,b){var c=a.rowById(b);return c?c.getObject():null},this.getTreeJsonRows=function(a,b,c,d,e){var f=void 0===b||0>b?a.rootRow():a.rowById(b);return f?f.getChildObjects(c,d,e):null},this.getTreeOutuputRow=function(a,b,c,d){var e=void 0===c||0>c?a.rootRow():a.rowById(c);return e?e.getOutput(b,d):null},this.getTreeOutputRows=function(a,b,c,d,e,f){var g=void 0===c||0>c?a.rootRow():a.rowById(c);return g?g.getChildOutputObjects(b,d,e,f):null},this.addTreeRow=function(a,b,c,d,e){var f=a.rowById(b),g=a.createRow(c,d,e),h=!1;return h=f?f.addChild(g):a.rootRow().addChild(g),h?g.rowId():-1},this.insertTreeRow=function(a,b,c,d,e,f){var g=a.rowById(b),h=a.createRow(d,e,f),i=!1;return i=g?g.insertChild(c,h):a.rootRow().insertChild(c,h),i?h.rowId():-1},this.removeTreeRow=function(a,b){var c=a.rowById(b);c&&c.parent().removeChild(c)},this.removeTreeRows=function(a,b){if(b&&b.length>0){for(var c=[],d=b.length;d--;){var e=a.rowById(b[d]);e&&c.push(e)}a.removeRows(c)}},this.updateTreeRow=function(a,b,c){var d=a.rowById(b);d&&d.update(c)},this.updateStrictTreeRow=function(a,b,c){var d=a.rowById(b);d&&d.updateStrict(c)},this.getTreeDataValue=function(a,b,c){"string"==typeof c&&(c=a.getFieldIndex(c));var d=a.rowById(b);return d?d.getValue(c):void 0},this.setTreeDataValue=function(a,b,c,d){"string"==typeof c&&(c=a.getFieldIndex(c));var e=a.rowById(b);return e?e.setValue(c,d):void 0},this.moveRowSibling=function(a,b,c){var d=a.rowById(b);d&&a.moveRowSibling(d,c)},this.changeRowParent=function(a,b,c,d){var e=a.rowById(b),f=0>c?a.rootRow():a.rowById(c);e&&f&&a.changeRowParent(e,f,d)},this.getTreeOptions=function(a){return a.treeOptions().proxy()},this.setTreeOptions=function(a,b){this.setOptions(a,b),a.treeOptions().assign(b)},this.getTreeParentIndex=function(a,b){var c=a.getItem(b);return c?c.parentIndex():-1},this.getTreeChildIndices=function(a,b){var c=a.getItem(b);if(c){for(var d=c.children(),e=0,f=d.length;f>e;e++)d[e]=d[e].index();return d}return null},this.getTreeDescendantIndices=function(a,b){var c=a.getItem(b);if(c){var d=c.getDescendants(!0);if(d&&d.length>0){for(var e=d.length-1;e>=0;e--)d[e]instanceof $n||d.splice(e,1);if(d.length>0){for(e=0,cnt=d.length;e<cnt;e++)d[e]=d[e].index();return d}}}return null},this.getTreeAncestorIndices=function(a,b,c){var d=a.getItem(b);if(d){var e=d.getAncestors();if(e&&e.length>0){var f,g;for(f=e.length-1;f>=0;f--)e[f]instanceof $n||e.splice(f,1);if(!c&&e.length>0&&e[e.length-1]instanceof _n&&e.pop(),e.length>0){for(f=0,g=e.length;g>f;f++)e[f]=e[f].index();return e}}}return null},this.expandTreeItem=function(a,b,c,d){var e=a.getItem(b);e&&a.expand(e,c,d)},this.collapseTreeItem=function(a,b,c){var d=a.getItem(b);d&&a.collapse(d,c)},this.checkTreeChildren=function(a,b,c,d,e,f){var g=a.getItem(b);g&&a.checkChildren(g,c,d,e,f)},this.getTreeIconIndex=function(a,b){var c=a.rowById(b);return c?c.iconIndex():-1},this.setTreeIconIndex=function(a,b,c){var d=a.rowById(b);d&&d.setIconIndex(c)},this.getTreeParentId=function(a,b){var c=a.rowById(b);if(c){var d=c.parent();return d?d.rowId():-1}return-1},this.getTreeLevel=function(a,b){var c=a.rowById(b);return c?c.level():0},this.getTreeValues=function(a,b){var c=a.getItem(b);if(c instanceof $n){var d;if(a.isItemEditing(c))return d=c.getRowObject(),d.__rowId=c.dataRow,d;var e=c.dataSource(),f=c.row(),g=f.values();d={__rowId:f.rowId()};for(var h=0,i=e.fieldCount();i>h;h++){var j=e.getOrgFieldName(h),k=g[h];d[j]=k}return d}return null}},Lo=Xa("DataObserverBase",null,{init:function(a){this._super(),this._handler=a,this._handler._dp.addListener(this)}}),Mo=Xa("RealGridDataObserver",Lo,{init:function(a){this._super(a)},onDataProvderDisposed:function(a){},onDataProviderReset:function(a){},onDataProviderRefresh:function(a){},onDataProviderRefreshClient:function(a){},onDataProviderRowCountChanged:function(a){this._handler.onRowCountChanged&&this._handler.onRowCountChanged(this._handler,a.rowCount())},onDataProviderRowUpdating:function(a,b,c){return!this._handler.onRowUpdating||this._handler.onRowUpdating(this._handler,b)},onDataProviderRowUpdated:function(a,b){this._handler.onRowUpdated&&this._handler.onRowUpdated(this._handler,b)},onDataProviderRowsUpdated:function(a,b,c){this._handler.onRowsUpdated&&this._handler.onRowsUpdated(this._handler,b,c)},onDataProviderRowInserting:function(a,b,c){return!this._handler.onRowInserting||this._handler.onRowInserting(this._handler,b,c)},onDataProviderRowInserted:function(a,b){this._handler.onRowInserted&&this._handler.onRowInserted(this._handler,b)},onDataProviderRowsInserted:function(a,b,c){this._handler.onRowsInserted&&this._handler.onRowsInserted(this._handler,b,c)},onDataProviderRowRemoving:function(a,b){return!this._handler.onRowDeleting||this._handler.onRowDeleting(this._handler,b)},onDataProviderRowRemoved:function(a,b){this._handler.onRowDeleted&&this._handler.onRowDeleted(this._handler,b)},onDataProviderRowsRemoving:function(a,b){return!0},onDataProviderRowsRemoved:function(a,b){this._handler.onRowsDeleted&&this._handler.onRowsDeleted(this._handler,b)},onDataProviderRowMoving:function(a,b,c){return!this._handler.onRowMoving||this._handler.onRowMoving(this._handler,b,c)},onDataProviderRowMoved:function(a,b,c){this._handler.onRowMoved&&this._handler.onRowMoved(this._handler,b,c)},onDataProviderRowsMoving:function(a,b,c,d){return!this._handler.onRowsMoving||this._handler.onRowsMoving(this._handler,b,c,d)},onDataProviderRowsMoved:function(a,b,c,d){this._handler.onRowsMoved&&this._handler.onRowsMoved(this._handler,b,c,d)},onDataProviderValueChanging:function(){return!0},onDataProviderValueChanged:function(a,b,c){this._handler.onValueChanged&&this._handler.onValueChanged(this._handler,b,c)},onDataProviderDataChanged:function(a){this._handler.onDataChanged&&this._handler.onDataChanged(this._handler)},onDataProviderStateChanged:function(a,b){this._handler.onRowStateChanged&&this._handler.onRowStateChanged(this._handler,b)},onDataProviderStatesChanged:function(a,b){this._handler.onRowStatesChanged&&this._handler.onRowStatesChanged(this._handler,b)},onDataProviderStatesCleared:function(a){this._handler.onRowStatesCleared&&this._handler.onRowStatesCleared(this._handler)}}),No=Xa("RealTreeDataObserver",Yn,{init:function(a){this._super(),this._handler=a,this._handler._dp.addListener(this)},onTreeDataProvderDisposed:function(a){},onTreeDataProviderReset:function(a){},onTreeDataProviderRefresh:function(a){},onTreeDataProviderRefreshClient:function(a){},onTreeDataProviderRowCountChanged:function(a){this._handler.onRowCountChanged&&this._handler.onRowCountChanged(this._handler,a.rowCount())},onTreeDataProviderCleared:function(a){},onTreeDataProviderRowAdding:function(a,b,c,d){return!this._handler.onRowAdding||this._handler.onRowAdding(this._handler,b.rowId(),c,d._values)},onTreeDataProviderRowAdded:function(a,b){this._handler.onRowAdded&&this._handler.onRowAdded(this._handler,b.rowId())},onTreeDataProviderRowsAdded:function(a,b,c){this._handler.onRowsAdded&&this._handler.onRowsAdded(this._handler,b.rowId(),Jo)},onTreeDataProviderRowRemoving:function(a,b){return!this._handler.onRowDeleting||this._handler.onRowDeleting(this._handler,b.rowId())},onTreeDataProviderRowRemoved:function(a,b){this._handler.onRowDeleted&&this._handler.onRowDeleted(this._handler,b.rowId())},onTreeDataProviderRowsRemoving:function(a,b){return!this._handler.onRowsDeleting||this._handler.onRowsDeleting(this._handler,Jo(b))},onTreeDataProviderRowsRemoved:function(a,b){this._handler.onRowsDeleted&&this._handler.onRowsDeleted(this._handler,Jo(b))},onTreeDataProviderRowUpdating:function(a,b){return!this._handler.onRowUpdating||this._handler.onRowUpdating(this._handler,b.rowId())},onTreeDataProviderRowUpdated:function(a,b){this._handler.onRowUpdated&&this._handler.onRowUpdated(this._handler,b.rowId())},onTreeDataProviderValueChanging:function(a,b,c,d){return!0},onTreeDataProviderValueChanged:function(a,b,c){this._handler.onValueChanged&&this._handler.onValueChanged(this._handler,b.rowId(),c);
},onTreeDataProviderIconIndexChanged:function(a,b){},onTreeDataProviderHasChildrenChanged:function(a,b){},onTreeDataProviderRowStateChanged:function(a,b){this._handler.onRowStateChanged&&this._handler.onRowStateChanged(this._handler,b.rowId())},onTreeDataProviderRowStatesChanged:function(a,b){this._handler.onRowStatesChanged&&this._handler.onRowStatesChanged(this._handler,Jo(b))},onTreeDataProviderRowSiblingMoving:function(a,b,c){return!this._handler.onRowSiblingMoving||this._handler.onRowSiblingMoving(this._handler,b.rowId(),c)},onTreeDataProviderRowSiblingMoved:function(a,b,c){this._handler.onRowSiblingMoved&&this._handler.onRowSiblingMoved(this._handler,b.rowId(),c)},onTreeDataProviderRowParentChanging:function(a,b,c,d){return!this._handler.onRowParentChanging||this._handler.onRowParentChanging(this._handler,b.rowId(),c.rowId(),d)},onTreeDataProviderRowParentChanged:function(a,b,c,d){this._handler.onRowParentChanged&&this._handler.onRowParentChanged(this._handler,b.rowId(),c.rowId(),d)}}),Oo=Xa("RealGridObserverBase",null,{init:function(a){this._super(),this._handler=a,this._handler._gv.addListener(this)},onGridBaseCurrentChanging:function(a,b,c){return!this._handler.onCurrentChanging||this._handler.onCurrentChanging(this._handler,b.proxy(),c.proxy())},onGridBaseCurrentChanged:function(a,b){this._handler.onCurrentChanged&&this._handler.onCurrentChanged(this._handler,b.proxy())},onGridBaseCurrentRowChanged:function(a,b,c){this._handler.onCurrentRowChanged&&this._handler.onCurrentRowChanged(this._handler,b,c)},onGridBaseValidateCell:function(a,b,c,d){if(this._handler.onValidateColumn){var e=this._handler.onValidateColumn(this._handler,Eo(b.column()),c,d);if(e&&e.level&&e.message)throw new Zg(e.level,e.message,null,e.message);if("string"==typeof e||"number"==typeof e)throw new Zg(ze.ERROR,e,null,e)}},onGridBaseValidateRow:function(a,b,c,d){if(this._handler.onValidateRow){var e=this._handler.onValidateRow(this._handler,b.index(),b.dataRow(),c,d);if(e&&e.level&&e.message)throw new Zg(e.level,e.message,null,e.message);if("string"==typeof e||"number"==typeof e)throw new Zg(ze.ERROR,e,null,e)}},onGridBaseValidationFail:function(a,b,c,d){if(!this._handler.onValidationFail)return d;var e=this._handler.onValidationFail(this._handler,b,Eo(c),{level:d.level,message:d.message});return e&&e.level&&e.message?(d.level=e.level,d.message=e.message,d.userMessage=e.message,d):"string"==typeof e||"number"==typeof e?(d.message=e,d.userMessage=e,d):void 0},onGridBaseColumnHeaderClicked:function(a,b){this._handler.onColumnHeaderClicked&&this._handler.onColumnHeaderClicked(this._handler,Eo(b))},onGridBaseColumnHeaderDblClicked:function(a,b){this._handler.onColumnHeaderDblClicked&&this._handler.onColumnHeaderDblClicked(this._handler,Eo(b))},onGridBaseColumnCheckedChanged:function(a,b){this._handler.onColumnCheckedChanged&&this._handler.onColumnCheckedChanged(this._handler,Eo(b),b.isChecked())},onGridBaseFooterCellClicked:function(a,b){this._handler.onFooterCellClicked&&this._handler.onFooterCellClicked(this._handler,Eo(b))},onGridBaseFooterCellDblClicked:function(a,b){this._handler.onFooterCellDblClicked&&this._handler.onFooterCellDblClicked(this._handler,Eo(b))},onGridBaseHeaderSummaryCellClicked:function(a,b){this._handler.onHeaderSummaryCellClicked&&this._handler.onHeaderSummaryCellClicked(this._handler,Eo(b))},onGridBaseHeaderSummaryCellDblClicked:function(a,b){this._handler.onHeaderSummaryCellDblClicked&&this._handler.onHeaderSummaryCellDblClicked(this._handler,Eo(b))},onGridBaseCheckBarHeadClicked:function(a){this._handler.onCheckBarHeadClicked&&this._handler.onCheckBarHeadClicked(this._handler)},onGridBaseCheckBarFootClicked:function(a){this._handler.onCheckBarFootClicked&&this._handler.onCheckBarFootClicked(this._handler)},onGridBaseIndicatorCellClicked:function(a,b){this._handler.onIndicatorCellClicked&&this._handler.onIndicatorCellClicked(this._handler,b)},onGridBaseStateBarCellClicked:function(a,b){this._handler.onStateBarCellClicked&&this._handler.onStateBarCellClicked(this._handler,b)},onGridBaseRowGroupHeadClicked:function(a){this._handler.onRowGroupHeadClicked&&this._handler.onRowGroupHeadClicked(this._handler)},onGridBaseRowGroupFootClicked:function(a){this._handler.onRowGroupFootClicked&&this._handler.onRowGroupFootClicked(this._handler)},onGridBaseRowGroupHeaderFooterClicked:function(a,b,c){this._handler.onRowGroupHeaderFooterClicked&&this._handler.onRowGroupHeaderFooterClicked(this._handler,b,c.proxy())},onGridBaseRowGroupBarClicked:function(a,b){this._handler.onRowGroupBarClicked&&this._handler.onRowGroupBarClicked(this._handler,b)},onGridBaseCheckBarFootDblClicked:function(a,b){this._handler.onCheckBarFootDblClicked&&this._handler.onCheckBarFootDblClicked(this._handler,b)},onGridBaseIndicatorCellDblClicked:function(a,b){this._handler.onIndicatorCellDblClicked&&this._handler.onIndicatorCellDblClicked(this._handler,b)},onGridBaseStateBarCellDblClicked:function(a,b){this._handler.onStateBarCellDblClicked&&this._handler.onStateBarCellDblClicked(this._handler,b)},onGridBaseRowGroupHeadDblClicked:function(a){this._handler.onRowGroupHeadDblClicked&&this._handler.onRowGroupHeadDblClicked(this._handler)},onGridBaseRowGroupFootDblClicked:function(a){this._handler.onRowGroupFootDblClicked&&this._handler.onRowGroupFootDblClicked(this._handler)},onGridBaseRowGroupHeaderFooterDblClicked:function(a,b,c){this._handler.onRowGroupHeaderFooterDblClicked&&this._handler.onRowGroupHeaderFooterDblClicked(this._handler,b,c.proxy())},onGridBaseRowGroupBarDblClicked:function(a,b){this._handler.onRowGroupBarDblClicked&&this._handler.onRowGroupBarDblClicked(this._handler,b)},onGridBasePanelClicked:function(a){this._handler.onPanelClicked&&this._handler.onPanelClicked(this._handler)},onGridBasePanelDblClicked:function(a){this._handler.onPanelDblClicked&&this._handler.onPanelDblClicked(this._handler)},onGridBaseRowGroupPanelClicked:function(a,b){this._handler.onRowGroupPanelClicked&&this._handler.onRowGroupPanelClicked(this._handler,Eo(b))},onGridBaseRowGroupPanelDblClicked:function(a,b){this._handler.onRowGroupPanelDblClicked&&this._handler.onRowGroupPanelDblClicked(this._handler,Eo(b))},onGridBaseMenuItemClicked:function(a,b,c){this._handler.onMenuItemClicked&&this._handler.onMenuItemClicked(this._handler,b.proxy(),c.proxy())},onGridBaseContextMenuPopup:function(a,b,c){this._handler.onContextMenuPopup&&this._handler.onContextMenuPopup(this._handler,b,c)},onGridBaseContextMenuItemClicked:function(a,b,c){this._handler.onContextMenuItemClicked&&this._handler.onContextMenuItemClicked(this._handler,b.proxy(),c.proxy())},onGridBaseCellButtonClicked:function(a,b){this._handler.onCellButtonClicked&&this._handler.onCellButtonClicked(this._handler,b.itemIndex(),Eo(b.column()))},onGridBaseEditButtonClicked:function(a,b){},onGridBaseImageButtonClicked:function(a,b){this._handler.onImageButtonClicked&&this._handler.onImageButtonClicked(this._handler,b.itemIndex())},onGridBaseClickableCellClicked:function(a,b,c,d){c==gn.LINKABLE_CELL&&this._handler.onLinkableCellClicked&&this._handler.onLinkableCellClicked(this._handler,b.proxy(),d)},onGridBaseScrollToBottom:function(a){this._handler.onScrollToBottom&&this._handler.onScrollToBottom(this._handler)},onGridBaseDataCellClicked:function(a,b){this._handler.onDataCellClicked&&this._handler.onDataCellClicked(this._handler,b.proxy())},onGridBaseDataCellDblClicked:function(a,b){this._handler.onDataCellDblClicked&&this._handler.onDataCellDblClicked(this._handler,b.proxy())},onGridBaseRowsDeleting:function(a,b){if(this._handler.onRowsDeleting){var c=this._handler.onRowsDeleting(this._handler,b);if("string"==typeof c&&c)throw c;return c}},onGridBaseRowInserting:function(a,b,c){if(this._handler.onRowInserting){var d=this._handler.onRowInserting(this._handler,b,c);if("string"==typeof d&&d)throw d;return d}},onGridBaseSelectionChanged:function(a){this._handler.onSelectionChanged&&this._handler.onSelectionChanged(this._handler)},onGridBaseSelectionAdded:function(a,b){this._handler.onSelectionAdded&&this._handler.onSelectionAdded(this._handler,Ho(a,b))},onGridBaseSelectionEnded:function(a){this._handler.onSelectionEnded&&this._handler.onSelectionEnded(this._handler)},onGridBaseShowEditor:function(a,b){return this._handler.onShowEditor&&this._handler.onShowEditor(this._handler,b.proxy())},onGridBaseHideEditor:function(a){return this._handler.onHideEditor&&this._handler.onHideEditor(this._handler)},onGridBaseEditChange:function(a,b,c){this._handler.onEditChange&&this._handler.onEditChange(this._handler,b.proxy(),c)},onGridBaseGetEditValue:function(a,b,c){this._handler.onGetEditValue&&this._handler.onGetEditValue(this._handler,b.proxy(),c)},onGridBaseEditCommit:function(a,b,c,d){if(this._handler.onEditCommit){var e=this._handler.onEditCommit(this._handler,b.proxy(),c,d);if("string"==typeof e&&e)return a.editOptions().isShowCommitError()&&alert(e),!1}},onGridBaseEditCanceled:function(a,b){return this._handler.onEditCanceled&&this._handler.onEditCanceled(this._handler,b.proxy())},onGridBaseItemEditCanceled:function(a,b){return this._handler.onItemEditCanceled&&this._handler.onItemEditCanceled(this._handler,b.index(),b.itemState())},onGridBaseEditSearch:function(a,b,c){return this._handler.onEditSearch&&this._handler.onEditSearch(this._handler,b.proxy(),c)},onGridBaseCellEdited:function(a,b,c){return this._handler.onCellEdited&&this._handler.onCellEdited(this._handler,b.index(),b.dataRow(),c)},onGridBaseEditRowChanged:function(a,b,c,d,e){return this._handler.onEditRowChanged&&this._handler.onEditRowChanged(this._handler,b.index(),b.dataRow(),c,d,e)},onGridBaseEditRowPasted:function(a,b,c,d,e){return this._handler.onEditRowPasted&&this._handler.onEditRowPasted(this._handler,b.index(),b.dataRow(),c,d,e)},onGridBaseRowsPasted:function(a,b){return this._handler.onRowsPasted&&this._handler.onRowsPasted(this._handler,b)},onGridBaseItemChecked:function(a,b,c){return this._handler.onItemChecked&&this._handler.onItemChecked(this._handler,b.index(),c)},onGridBaseItemsChecked:function(a,b,c){return this._handler.onItemsChecked&&this._handler.onItemsChecked(this._handler,Io(b),c)},onGridBaseItemAllChecked:function(a,b){return this._handler.onItemAllChecked&&this._handler.onItemAllChecked(this._handler,b)},onGridBaseErrorClicked:function(a,b){this._handler.onErrorClicked&&this._handler.onErrorClicked(this._handler,b)},onGridBaseSorting:function(a,b,c){return this._handler.onSorting&&this._handler.onSorting(this._handler,b,c)},onGridBaseSortingChanged:function(a){return this._handler.onSortingChanged&&this._handler.onSortingChanged(this._handler)},onGridBaseFiltering:function(a){return this._handler.onFiltering&&this._handler.onFiltering(this._handler)},onGridBaseFilteringChanged:function(a){return this._handler.onFilteringChanged&&this._handler.onFilteringChanged(this._handler)},onGridBaseFilterActionClicked:function(a,b,c,d){this._handler.onFilterActionClicked&&this._handler.onFilterActionClicked(this._handler,b.column().name(),b.name(),c,d)},onGridBaseKeyDown:function(a,b,c,d,e){return this._handler.onKeyDown&&this._handler.onKeyDown(this._handler,b,c,d,e)},onGridBaseKeyPress:function(a,b){this._handler.onKeyPress&&this._handler.onKeyPress(this._handler,b)},onGridBaseKeyUp:function(a,b,c,d,e){return this._handler.onKeyUp&&this._handler.onKeyUp(this._handler,b,c,d,e)},onGridBaseShowTooltip:function(a,b,c){return this._handler.onShowTooltip?this._handler.onShowTooltip(this._handler,b.proxy(),c):c},onGridBaseShowHeaderTooltip:function(a,b,c){return this._handler.onShowHeaderTooltip?this._handler.onShowHeaderTooltip(this._handler,b.proxy(),c):c}}),Po=Xa("RealGridObserver",Oo,{init:function(a){this._super(a)},onGridViewPageChanging:function(a,b){return!this._handler.onPageChanging||this._handler.onPageChanging(this._handler,b)},onGridViewPageChanged:function(a,b){this._handler.onPageChanged&&this._handler.onPageChanged(this._handler,b)},onGridViewPageCountChanged:function(a,b){this._handler.onPageCountChanged&&this._handler.onPageCountChanged(this._handler,b)},onGridViewGrouping:function(a,b){return this._handler.onGrouping&&this._handler.onGrouping(this._handler,b)},onGridViewGrouped:function(a){this._handler.onGroupingChanged&&this._handler.onGroupingChanged(this._handler)},onGridViewExpanding:function(a,b){return!0},onGridViewExpanded:function(a,b){},onGridViewCollapsing:function(a,b){return!0},onGridViewCollapsed:function(a,b){}}),Qo=Xa("RealTreeObserver",Oo,{init:function(a){this._super(a)},onTreeViewExpanding:function(a,b){return!this._handler.onTreeItemExpanding||this._handler.onTreeItemExpanding(this._handler,b.index(),b.dataRow())},onTreeViewExpanded:function(a,b){this._handler.onTreeItemExpanded&&this._handler.onTreeItemExpanded(this._handler,b.index(),b.dataRow())},onTreeViewCollapsing:function(a,b){return!this._handler.onTreeItemCollapsing||this._handler.onTreeItemCollapsing(this._handler,b.index(),b.dataRow())},onTreeViewCollapsed:function(a,b){this._handler.onTreeItemCollapsed&&this._handler.onTreeItemCollapsed(this._handler,b.index(),b.dataRow())},onTreeViewChanged:function(a,b){this._handler.onTreeItemChanged&&this._handler.onTreeItemChanged(this._handler,b.index(),b.dataRow())}}),Ro="dkdl",So=function(){return"iVBORw0KG"+Do+"WIAAAAsCAYAAABfebLSAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAALIJJREFUeNrsXQl4VNX1v7Mnk8xM9hCWCAHZdxEVLJVVK7WiQltsiyjiX+tXUBBRrEUt2lK/D5dqpQKCuBergijQUkRZFAEVEGWJ7FvIvs2+/M953Dtz5vLezGSSgGLu990vyeTNe/fd5Xd+59xzztWxltJSWopOquKzEP89RCojP1tK4/qcNaDff9B9HgqFEuqMltJSfqxFT6qB/C4AIUhqgP/8wQNDguDIJMHTVO8t7i/3uVq/B6QxaAHilvKDYXZqi0lrrNUW2YUKNGr9ZeDVDNXCfxo5KGDx8+qF6iF/B5phfEJxxqS5+0KvAopMAsKmEEQCgI1Sv+tJv/t49fLq4/0eOkcMW+t+iaydFiD+kQOwPsZikn+qTU55sV3I7E8AgpEDgRWqDWo61BSoJn4NgoALah3Uel49HBiSGRv5d53GmAQ1xqQ5xkNH+kL0h4mDJeNCRwCiEETBRrRDgHAq1DTe52m83w38vtjHTtLvTv5ZoBkZtk5FS5LHSgbiWGsm1ALEPy4Q1pOFZOaLyKSiaqupnGLiBHgVzMNHmN+FCsiCCSMIZMBicWhdOHToUNP69esr4NdKDg6eGKqyTgUcDATojOQzygLlxe2XxsMnLfqmBmELB0cr7xMz/z8+1w21hv90kbYk8zzxLNv111+f895775k1L9Yp07WMP7ueC4PmYNjyWBnIOjJKY0WBNiBpTVRjCq+ZeEBsbMGxC4bZmcgisnJ2kUImlbwhpTWZPHyxieohEyx4gYGxWHxmzso0S3V1dSbvAxev8e5p0ACHFMI4jZIZhJHxEMDh4c9zc1boJSAYasL5IxhqxpgxYxxTpkzRgfDxHzt2zLBo0aI0qOzo0aPY9grybF+SbRAmIXNtbW1qHDNPHn9nd4x+F31uaSDDFkJNJ4GvGCOxhszEZEXXT4CMkYfMDZdEZOKWFiC+cMBEmYQPP/xwdnl5eeoVV1zBvF6vssBvu+02Z6wbrFixIqWsrMy0du1a+8mTJ0PA/HBy1vJJKyauOwE73Q/ZPJESy9zg8XjS+QKrkoBTTT02kgWdSgXkiBEjTAUFBfrhw4d7AoGADsYmCly2bNli2rVrl6mystK0Y8cOY3FxcRA+E2zUwMejMSAYa/5YEYTffffdMHi0bds2MHv27PpJkyYZunbtmltfXx8kQqIxc0ERgG63O4XPL63i4FqISUOD11Eicn17lvXeKCYYtke6NkX3ojImTNIAjWQOCG0gvXsmsw7MZYarWjNfTgoLjS6MCIJj9cyw+iizfFfDUo7XM9u6EywEP+v5/DDwd0pYe2kxTVwY6rWF2zezQQVKbewNkQU99thj9tdff10HC6+KL4RqohoGLhAwFlpENtR20HeagAAg1G3v3r2l8OthqCUcGAMSCKstaBsIxTQAYAZ9WpfseDz33HPGuXPn1nA1vZYLhabwItCT+ZO7bt26dGTCahdOnjw5a+HChSjUT3BmXM/BuKHAb+bPy7v00ksLPv/886oYpok+8KMY6hGopSqgrSPjmDGsNcv/38+1WSgAMTLsY/xeNRyIzXy8UNg6BuUz+x3dWOCWzgr5SLgAMJtf3c9CrxUzYcKq5eslGM80oW/BsQtKvbY2xQ2RBb344ouVX3/9dc2VV16JINUKaiYHFtMFNm+oKUGzwEIyqJgRmAoLTuMsLmfQoEH5S5YssWzevLkuWRAW45GdnW3i97USFbmp3l+o5kYtEMbSp08fH4vYjvVN0AYd9Gu8uSTmW7znnWHYgTDjjcWw04hpyMT71GY3s5zHBjDbputZfUNBGMs17RTQFeNvaYjFoQWILwwgEQsppSlv3L59e/+GDRtKBw8ebEe2BNVO7G4t2lSk/w0SCOdOnTrVvmnTpvpbbrnF3RQPgXvZOeszNhEIRskZ8S7bt2/XBI89e/ZYWfQm4/duDHzBsLeLVrGyaJuvYtJzmFnWW8OZ8eH+zNmYhmw8xTIICOsSHacWIP4Rsbpky6uvvlputVpzOSu2XoCsuLF9LkDYbrPZcl955RXj008/Xd+UDwOAdLBod6ymBGHhoeF94YUXLFoXrlu3zsZVeepJ870ak1D8eWli0b7jKNwct3VhqZzRJl3WHmeph+uUeaCT+jZuadmsu7BYccxJOGHChKLjx4+n6HS6oF6vD8LPUGFhoWvmzJklnTp18sVixiNGjAiuWLECgRjtamL3PpBAm2T/ZQoADQ1YUAuG0HK0b87gFOpvKmzC6Xa7Pfutt95i11xzjacpH1ZcXGw6duwYPksElAgQjBd0IPexWp+J3/G+7kWLFvmNRmPG/Pnzw3bbtWvXpt5///1tv/32W5wjaGJxs9j7BLECVxhh1LrzuF7EBp/lylbMNu+KxjFhLP8+qLBhD0tiH6UFiH9EZePGja0OHjyIjLaKgylOlixgcAUTJ048DovvhNZ377nnnnIA4gLO/AQYxwLfWA7xsiN8rIgt+Z5qwRFMYoqx7t2U/rdi40nxQ542bZoFQDguE16zZo31ySefLDx06FAaAKzZ41FwG8dCl5WV5cvJyfEWFRU5+/btW/uXv/yl9PXXX8f7V6qAIO0LGdxC7Oxde60AEh2/DhtS989//tO6dOnSIhDA+pqaGgsIb3xH3Kwt53PHxcEm1ICxl3FHYaahUEh3noA47EM+ok1sAnPPZtbm/SOs7YEaZZwV//EsC/O0S2euzg5Wf1d3dnpoa+beX61cjuMkNrUT9ippAeIfE23W6ZDR4I5uCV9QOFkQCOyw+HKheP785z+Xq3136NCh7hQobrdb2NgMMVR1A1ls1CGeAgD1lfVqqLwy0BhZtP+tgWmH4wbIfZsjGIKyYfvIkSNts2fPjrkh9+GHH6YBs+yye/duIcwoqClAXFFRgdW0b98+4+rVq63PPvtsm7Zt26LQO83B0M0ingqC1Qmbp4UIJhoQEpAAyEDAVzBs4W+L17ugWIABW3nbhCtjDYsO5lAbJyMBORMZN8rSxeZySjAYNJwnIBZtSJ3UVXtjbvhK1n3dCdaWC6FDHGT9FR4YKw8z7ShnpmUHWH7/HObcV62Qk2oWCXxJOAy+BYh/XEAc4JOkjFcnX7y40Pwvv/xyphYQcxNFYM+ePWYJBCkzk/1nhUO8RQJjAcLCSd/Jf3oIcIQIAAuQ0XKyN0hALACIBkK4JMAPNWIRU0ZltUF56aWXYgV5MFD5M+6+++4+IPRwoR7kC7aWRfyzKaiFBY3T6QwBKPv4O4jw6gABYsHIRSCDAOMAiwTkuPn9KUDqWCSAx8P/L0eRyVpGSMM8Q23lKaRayfP0RACL76WfRyBWntsjkxnbpmkH6Gw8xdpwllvChaFweaObtPovypTLPSzid+9tMU20FHUKp9eLyDDheF7PFwp+bj569Kgt1ve5q5GsAusI6xGLDwHBPmjQoNRRo0YpAE69BzBo4ZNPPrFCta9cuTLE21LDgUmATZBFRwwq9ywsLEy/5JJLjD169NB16NDBDz/9l112WZRNduHChdbt27djzdy6dauH37uaLxIXURsbw4bDqu3YsWPNwFrrEgBhXK6nuBAUftmxQm0pGPokG3E4LPmmm27KfPvtt4XHDLX1G0H4ZvN3DoK8MI4fP143btw4tPnjdSbQdOzr168X7TDBGJtZJKdGVBkyZIh1w4YNTi4UqCYi+07bBw8ebB0wYICuX79+4bHHcQdtAAOHUtetW2ctKSkxBwIB/3kCYqWfHebYZgnvma02N5+b1RyUvYQoyNoYDaEOtgBxS1HFUhad+EQ2D8RcFKWlpWZpctFND0VFZ+gQP2iQA1RqDwCmqr0UgNOHdcaMGWzz5s3mBx54IBcWeBphajreHmGDtd5+++1ZN998M/q5xnUHg2udUJXf3333XdxoalVcXGwlNs4Qi97sSmYhh12fAGRjtumJJ57oDCBcyUH4OIsEQ1BzzFkgIdldxXjJ9mEzAJump0NOTk6rsrIyf9++fevff//9UvRJpv/nodtmDtZmDjqqpa6uzs7HxUlUbz2LJO/JAMGYAeMZ/O1vf+vUGnceTVgxZsyY1nv37k0/T+sgxH+JOQdGtWWH/nNMIQFqGflk84ycXChhRtzivvZjQuEzjNZITAhU3bcUFRVpuu/gzj3aL8kkDMl2UqhZ9957r+I/CyCcENMB0PYCMy4DVomTXQSOWInZwQTsKn3BggUsVrCBVrnhhhtc+/fvL7vmmmuwffkIFiwSFNEYNqUAcbdu3Syx3nXatGmtDxw4YOAsuIRFEtgIE4OO2HnFeMjmH6Ziiw2bgwBMNaMps7KyjAC+RjUQVnTpM6HbNg6kMQOC+LUihwPN1IafZcMYZn799dcuAOGEvEbee++9Ew899NDJ80hKAp+WxL5ozbVs/+hCRXCiZoEunDl8DqWzSFKkAEs8XWcLELeUSE4BvvgcfFIh+GXAoqjW+uLcuXPzJTtuULJRZs6ZM8c6b968pNyAli1bdnr48OFpHCwdnGUpNksAdv2OHTsaZUtctWpVWfv27bMQm8giSuaeUdnKgOHFXEP//e9/8zgLr2ARbxUf0UiF2SWDt02umfx/DhadopNuVGoKFVD9U5YuXXpYDYT5/wXwC0HAYtxLCAq6EYtzKWPcuHE2GMMGjz2Adu35AmE+Du6Fe2ILoJXXsMMfX8cOD2+jzPNCqLh5l8fB2U6Ig1a6zBYgbilRjFjHATiLTyRkoAVWqzVv1qxZHjkBDS3vvPNOHrHhis0lASQOZLQA5K7GtG/hwoWleXl5AoCiQnlXrlxpbuz7T506tZYzmsZGCIZTjvbu3TvmzjiwcSuLeB1Qty8D7zs6Huge2BpqG1Jb88/z+cK3sbMj7DQFyi9+8YuTscw5XEuKex9+rdicEmxdEeqFhYUZIIC9P6SlwIFYycg2/xsWNz/LkALmWTuandx0PasYW8TsrawKGLfhayiLALKJJeEj3WIj/hGVDh061BuNRj3UFIPBkGW32709evTw/fGPfyzXYkxYrr766k4VFRVOzuhELl7GiNfAU089paqOopfFhAkTum7duhXBxJ+ZmYn22wN/+9vfzlIKMXAEmJX7+eefzybMUdkA2bhxY/i6O+64o83OnTvte/fuzayqqjIJNbCgoKAeGNYxtXtjueeee6qhndlHjhyxs8jud7KmCcU27nA4NFVQ9BcGdT7AIqkRvZImYcX2wHubXS6XAavKbRTwM0NJT0+33HDDDQgaaOt2swSCYQAgT8R6GZgHwqtCtlXHE0QClO3Tp09nseaP6Iv58+cX1NXVGfv27Vv95JNPnjqPS4G6N9ZtL2P1M7ewjLmXsaq4prR85oWK3hPsiS+Z/e+7WdtTzvAmntiAVXPxawHilhJWk/c29DuTJk0q/M9//oMs7CifbC5uAxNmjnRg0iZYiKqM6KqrrhpYUlKCixZtge7KykoDLMJ2JpMp8Pjjj5fJ1z/33HMlL730UicApTQO+orr2WeffVY3efJk22uvvZYL/7NyMCxjkU0R88mTJy0YKAHgEsRACLX29OrVKwBALFileJdkwFjxFBk1apQmE0TPDQ3bodjgtCIIjxkzRmzCJVJyWMTvOJnjmnDzMAeEcRA0IR/gOwUOSwPeX3FLa9eunW3KlCmaQSwoiEFb6rV7924HH0/f2rVr0d2vzTPPPLPvPJkmBBiLMan82w7Wtr2Npd/VnSWcnGlWP1aDddLHLPut75i13q9oWZW8f1yEsMQFYz2LfcxOrCND4kVPnYuidgqCfBKCSaXKAQG6ZmjP+eqTJim4gHr27NkfFgyqxqUc9ISNUwQA4MRLu++++1RV34kTJ7ZHFyXO4PAeJbyWv/LKK5lazx4wYICfq+AWPok9wHyrFy5cWAcgLO5zmttdBQsRyb7dwL4ytO4NgqGGq5AWpp5NrUFjHIsJ6vV6mseBBqsIILdosOBYJZNFbNwNavuIESO6paSkXPXQQw91nDlzZv4f/vCH9B07dgjXPk+CwE79Z1NuvPHGmBePHj26H4Aw9jWmsTzAzqS0PAAaVhkI1g64CXyeTBPh4BU+r0t/v5FZb1mvmIgaVBb9lJUvuYq5iuyK+Qg39DJY9HFbCTFiNVeZUJyXkAeGvlwwUSnQBKAn7yDrNCpj6s7pARZ9hlWoCdpDw27l8+B+EDl8FyxYkDljxowB1dXK3t1xPlGribkg7DUAjFCTDW/YsCGfMEJR8Xveo0ePWj755BPLkCFDzjJpdO/e3QvfFWBpYpHABBfpWxEoYERf1WAw6O/SpUul3+83tm7dWlPFBrXYze2tYuff18gxT2TRa6r3mBy+gc9MI++esF124MCBvbdu3Yqs9BRnbdTMFOQagr8B81zx7x45cqTmd+bMmZN74MABHMNjXCMqJ3Mgw+12B6ZPn563fPny4+cJjEVYt3in0NJ9LO+LMnbRrL6sfHynxNnx2CLmHJDLvD2WsXynP4ptBxLpV8EIKIPUSWAl7FSMnR23T4EwKD040MwgLGe/ks8AM0jXyH5+fqIyNvYoILXwXhpJ5GfRPqDf6wJMpbKwsHDTrbfe2g3UfRFIQJ3UwwnQAfw0gQQWYRa3xaZwFmck48W++uorVSAuKipycxVcRNBFPROA1oLq/LXXXlsDjKtBCXaAFQp/2WTTOSZ8EnB+fr6fxc4DETAYDA2dD0I4JdxudKEDEMaxOMGBuJRFNg9D7Oww5ESB2AL9rwlWb775ZlsO+mVEg/GySBCRCeZIbhNiQjJgLKILa8XfX1ewrJvXsZx5u1juiDas7i8DWWkiN2tvY364tnbqZoUVC/KQUCSnkUVHL5nJgFDjvbguyKKd0PVkUtAjx+NNYjVQ1WIScpYpeTLQM6YMLDovATVNqJ0zJcJr9RIYN7S9tD1mwrboQKsNyvcWlK+++monMNadvXv3LgL12SyBiWDE5lg+tKFQaFUyzwZ1txZU5zYscpglPjeFBAtUNvL1qBkr2QWsAClG8WEAidpFIMiqb7vtNjOZhzTHg+I6lZqamtLcgLNx48ZsoX5zIC7n897PIt4P8txXG88oAtSmTZuYZpUTJ06kcCYsNKo6FvFDx/5wGo1GbxOCcEM0lJBkoohyacO2bitlmVAzFuxhuQNzmevZwexYJ3tsDWpKT1YD12cCmDuIsPPFI6YCtCwgNfEU23yo2TfddBOyERw8xZWoqqoqBz7PggknPkcbiD0nJ8fBv5P7yCOPoG1FnCCQolLNLNr1hSZxMce41iRdR4MQlIieLVu2YBtyiouL0X6W+cEHH9jg7xSoxtCZ4oXq4T8D6LKDRwr973//y2QRdyC5vRYWnbhEq73UD1OxmW7atAnbkwcqvnA5EqcCpBBhd87TAHbo0OEnOp1uNNSRUIf16dOn59KlS+1a12NqTACSKt5HViJgwsJu+PDhvqZuJ0/JSUObs8aNG5fRkGCBBPZG9I0A4bCmU1lZGZOZQh/X8vegJwuHuOCvu+GGGzwwFllQu0IdhOPS1P1ZUVFhYZGkPaKKcwi9LLn8wnrQTGL2H27MsugDaH2SRurjYfdNxYR1oVCDxzREBSNnxuVcgCh27XI3O7rqKPP3WsY6j17N2se74U9aKe/rIORWn+iENL788sth6QZqaSpXDXO6deuW6XCcOWW8V69eqdy+hgDmALUyfPz4smXL0vnDhT9dGv89g3yeThonAC2cR0DlWisFXP6ZjVTlbxAUCot3u934LvZEN0BqamqMLPrUVxrk4CBtSJXAX7SXtlUkXgm3p6SkJJUb73NZxNcwTdI+zhkYw6T3cmaCNrlDO3fu9Nxyyy2d582bp7m5hV4Mubm5YixTJWZniOe21EiwVE5XHjZsWPq//vUvVxPeu7F9Hg4P/+qrr0xxbLM1ZK6KDRyhKbn4oj/F7ajCHt+0drwzWfc8pDaFiSyRTeiQZJI7K2kQ5sRuovFUBGsCieHV2kHNsR4upKq5BoGAjB5Dh9wBdvzDI8w8ZAXrEOsBl+cp2obADWOiQKzYesvLy40bNmxQACwvL8/AQcbRr18/M1EZvaBKCZByZGVlKWrVqVOn9Nw9JZ0AcCaLhAXmETByUBDVuDaHMEkbAUjh7J/DIlFHNlCjbTCguT179sTvGseOHWvHv6G2g9oDN4WwnR999FEKZx09obbhPplCNbPze+ZyYSPanCm110HaQNsrrrPV1tYaOdBb+P9pzSGag4mdw2OHePY1kUkKJxcehHn0iSeeKIgDJn4WCQ22nCM2j201WqEASdC0Q6J3x5gxYzp17Njx0pSUlCHIKKGOOAebPIrJadu2bTEvfvHFF4/zdUJJioks+jpuQz3Fa3MAcYhFh6YHmwD44pbMzEyvyt5NVGrTJLKvyRvxNLrQ2MqqbQIorgn3OwVjasoUbRXJe0RaSxGejqB8csMpZpm9TcEA1TKhc3hfxNwQIA7bYd9//31FuvOEHQqo9OjRQ3kxBDNkP/A3Eyywe/fuypeXLFmSRiSArXfv3hlPP/00mjosGI2DFRa7A4BSBtrs/v3758K1mdK1mDwk6tri4uIs+F/6nXfeqaipmCXq7bffxhd1vP7662h2KH3llVeED5+fRVIsulXYjI+oTFis48ePd4Dqm8rNGTrcSILniIMzc4WpZtSoUTkrVqyw4/PxWviO5de//rUIT8WfNmDmyuRyOp1m0Br8R48eLYVrnWgSgedksUhoZCo7h77cnBnVcTAW9sJTIISrH3vsMU1WDO9XwSL5CIS9WFnQmFGrqdsJ88Ehxu3nP/+5V4t1Y37fyy+/fPDy5csxn4PP4/FQN7vmBGJhV3RjikpMXBTrCw899NARSbCLdJU6sl9BXfCaq82sCUA4vOH9zTffxLywXbt2LqJFWiQznvJ3QUFBQzw11EyE1FxpLUzXBuK3DyhrTi1XitiLsBIzJTUj+YjQRNNF7deVzJwAtupZgpuqRqJm+Tdu3KiAAj81lsECNXfu3Nl/6NAh49SpU9t/+eWXey+77DInsACFeQJQKRFMW7duTeP3Sr300ksDn3/++VmT6cEHH3RDRR/R7O3btyudMWjQIDwU8awjuaVrlclTV1enHF/+s5/9DMM2FTUVo3QQHFwul7JovV6vnkg0kefVZDQaqSoifAeFEV0P4G5+4YUX3JJtL4Dq8N13323/xz/+gSDkgfaG1qxZU08nMwiM4BtvvOExm832pUuXKqqnz+dTNiCmT59egdFi9L4gNLzwfxsIEcaiPTcCzQ3Eer1eRBO5+IQSNrvUXbt2adqK0el+8uTJhSBg0vikFRFiftCEzJhRS+17GRkZ11RXVxtZZCM0lmdKkKjron26kSNHagLTI4880hHuLwI7RHrCFC40WDODsRD2dXPmzMkGoaCZx3natGlVQCRSYI4VsEhoeC2LTvwjbyY1NSNu9L3JfRTMqK+vDxw7dkzTPPWb3/zmxM6dO9txbUCMo5/PIUXD7Nu3rz9BEKZZ/vTSZ6mc2NgmdmaaG7nlbuVa2dkgRWKvjJhT6Lo0UtJUZNN2SlhzLJy7IuFTYagnhOfTTz9VOhb/cdFFFzlB1dOBmu9cvHix/dtvv81AQL7vvvtwwplycnLCzuwAxEoqu9TUVP0777xTI27erVu3zjB4A/Anfhc/e/bZZ3ECtoJrc9566y13AtcqjJjbfxGE3TfeeGMBXNtt4sSJBVTigJqjk1Q+/H6NcBHiP52Eefg6dOigFyCMrB/e+VIQQpegGQM/e/7552tyc3ORLeZiakf8DBkQvH93aENf+K7y7qA+1+Tn5ysbdsI3FEH4yiuv7ATXDYZ79hXvBSxOR1T9ZJPPNJYdCVBWNihAyMb8UteuXf3Eti362btu3TrNaKwxY8bsIWxPJKQ/zZn4Sf4zrPKxiHuVOI3Co+WRoCys8vJUFu39gtWTl5fnauY+DJsm8N1WrVoVjMeKQZifeuqpp07DXMI5i4ljRJ6CPKJxiWPYv88lRFR3z9///ndNoXf//fdXDB48uI6b+qi5T1nTRUVF5scff7wmQSA2ESFLTYPhenMn5rssT9urYVeFotGJDUohEK2Tu7Kc+T9h+b2ylPFoy2sBH5980mbFGaDIzoJPXq4N+GuPMTtT98KKC8TiRAPvsmXLlInQpUsXF4CiYpv74osv0vFcrUWLFjkQXGBR1hcWFiovjOACqjcuCB1It7AaCSyqYM+ePTixgngM98MPP4wvoqQ97N+/Pyb01olrb7755tb02j/96U/Z4tpLLrkEn5MuwA1Yatq7777bikXn0lWze4fdxlQYcdiN7Nprrw2D4Ny5cwvgPVMrKirS5s+fn0uEhB/ULJNw1Zo1a1YrAAHspwB8J2wrgvfH5+m5QECVNAcYP97Hiykk0VyjSNOiIuFAn3quN+wkMBYLyv3dd9/5hRBWK6Dp1BEbsYH3nwcElqbqtWTJkkMzZszYmZWV5SKTUj6+SPztSUtLq+cCVIQ2x/TIgH6s4vcUKT3RpGxesGBByTkSZML/tAo0p8x4X8RcF6dPny6+9957gyCMc6GtFyHnYZGMXtm9evUKfs+BmOaxdm7ZsiWm6g1a9nfXXXedC4hXa/6uyJDbwLqzfPzxx2UJPlMk4bc9NoDlDWutAHob3m8XATDmzurH/K8NYzHdGreWMgeLPhEF542tlZWl/183Fto5lnk/G8N8t3dlaVe3ZTkd7cozwmMEf+eN78R0H193JteEVtlcoggLYfpMCIyNTPKtBRVVyUTUsWNHjzjYD9gSvoBn9erVdjxKBwCpRoANgrNY1ACsYTWjqqrKTIDPf/z48TCtb9WqVYDuloJ6GXUtAIKJXouD4Pf7dZy1phOQdRGmyzhYU+O4Lo7BH80IYfD54IMPDrEz51JFFYfDEQTmHFZFQM20CfPH4cOHQ/AubZnKcfY1NTV6IoEDGN+PnwNzDrCzc8/6NHZ1zxWzc7366qvWBx54QDX2/5e//GUFAFwHFtn5VxbiiRMn6mbOnJkBAknVLosJeLCCNoEnQaTBWCljT8cfzQ/9+vXzosAEYWYhqqF3xYoVKagFqd0bc2fAgu4AZMAA37W0bt3a/eijj5ZqmUoas/Gk0XfiCKPqr776KnXcuHF5mM4z3hfnzZtX3khB8H1gxUrifgBTP2oDSJq0LoYxxI1hhtojhn2PHj3a3QBvG2HHTW1vY5aH+zMf1AAX1gmXJ75kORUeZbzocVM4j9OHFETmADJqqBXJdgyaJQCI07n2R5P/NAiIvdCpCohNmjSpGqSZFxkvgCg2uH737t0G/PuOO+6o4J9hdFSasP/RxcVBXKi/fliAfmJCUJOiqtfy+4RBHBacOItLmBf0SUQnhRehECicgXf59NNP8wlbCx/SOGTIEHnxUGEgpKsSOMJzDDBMbEM2DP0Wi8UvSXmx4WAiUjrImmZnO9EFFXZi37lzpyarw4i07OxsPTcHiBMd8P2rn3/++fTrr78+5mKcMmVKDdZ4DUpDWlxfL0wm3jVr1qRqATHfsDuY7Ng3ASsWcwDfy4THFd166625ixcvLm3GMQueY2EdSwjh+1fjCSuY3D/el+666666JMdJ8WzKTw2TtQaXJfsUU4M4jsvF38FoNzPziDasyXzh/7CJdWKRTGw0hDyutKGTyrd3715FRUUTBG7ScMaruHK4XC7Pm2++mYphqePHj6/jbDldbACdPBlJtm+32+mBiGgvDS9SuC4Fq/jbZrP5ta4FxhVlM+OsUqTuUxYrAF5QmiSy+i2+K+d9CAAbDz+3Xbt2TsIShc1ROQwQACgsPIDRCmDQd+7cGQNEyqGegn7B60PEJh0km08us9kckPpeqFwpLNq3uKHuYaEGgHdIw1bs2rp1a8xnduvWTRw2KgS4AkIAnJW/+93vsoQNvDGlqKhI+GsrxyWhf3tT3Fejv5LtO9lWWs8X36klS5YEhw0b1qYZQVDe9Eym7Y2ZP0EW7XlUs2HDBhcQt+xkXgbdD0HQdk4AjE2dHckJz7H/Ze33VyttruBAHD41+yetmi4n+6DlrAs8x8ciZxK6EzVN6Fm0X6QCbsJOjAVYUgqLbHDVbtq0Kax+c7ZsEP8HUPYJO+Mbb7xxvGvXrsrC7dmzp2/27NnV3LRg2bFjhwNtwWKBAbgf07oWGDcKApew83Jwo3beMMvkACizyqBkI6Y7ot7Vq1eHwfHxxx8/lZmZicfGB955552DAK77oBYDONQcOHAgKN4NVPFT6FWCgDFr1qzwxtC2bduwrwKCEXOhITwjvMI0QdoZzmDG7a/UBqtLAoRjqnvcjzigsoiVsS8uLvbE2nSCsRF5GsSGnRBYFdA/FQBAeWjDb8xkBsHmY5FTiF0A8jUTJkzIaMg98LBO9C2OAyZqds+G9J0aGCsRWR999JETyER77obX1MUp2R6TbXtj5o+o4Ui0l156KTRt2rTshoIwpkl1Op2xwLBRwSe3f8La/fugYhs+zcdHnJytvMOluazRh5fuqWLmi99kfT4tUdbtKQmIEzLB6FVUVOe+ffvCE/Wzzz4z8cYrHgjr168P0/jnnntOJNhWPBTqoIwdOza8EL/99tu9AGQ7d+3adUTYhH7/+9+j0b4CD1MESdgqgWuVkEzBMjmrFCGTSv4GUPmD3BQg2LKPgi0BcWHbEtVdW1uLicqVNmNobUVFxTZg/l/gWWdcpU4HkAnAZy5QwWzcXlpfVla2G9q7R5xQC9pDBh59jveFNgaJaULYiL3QzgBh5gFub8Zw6wwQaK1YxN+yoRt4Yc+XmIOt11MBRoFEuPTVvvbaa5q5D0AAlUpqvWD8ShTSwYMHy371q19l4qGQyaQ3RMGMNmQW7VtbBYyrrk+fPq0TYcYzZsxodffdd/eDMdM8/qawsLCKRbsx+ZPoO9nOLkAJ++jY4cOHS/D8vh49enR88MEHG5XYBgHrzjvvbM2ZdrUExr5GtD3Z+eMn66ueM82Sp556Cg8IbZfIOGFO5KFDh/YtKSkxwlqKNdfF+vH9rB1L2BsGbbV93mY9Fu1RvJNQVS/h7XSyiEeD79X9zHfPZpZ2qLbh/vwIwKM+ZJ37/Zv1Kq5R+uE4B2JxOKw3USA2SkCsTP4tW7Yo1pi1a9eaTp8+Xcsi8el+wFrf4sWLLbfeeqt/+/btIRZJqYcP1sF30avCcdNNNzHqmoIbOsC002Cxevj1XgBd/cUXX5wNwOaTrwVmlQ4D6hXPTU9PV14Ik1mziNuV0qHwmfIeyGRZ5IRZj1CfcSOH/z9IbERhNxZgUJby8nIbAK1bbPRgoMKcOXPSVq5cyfjkDwJImU+cOJExffp0l8j6hdc9+uij9lWrVgm7qQ/a6uf2Th9hDthOEwHiemrv8vl8Og7CvgaaJkLSxpEmkJIk4F6JaYQzUH388ceaAIbmKgCD2nXr1vklEHLR+yxfvjwLauGAAQOCoE348TRndGVSW4yoPYBwR9dI8969e4OcTdQSsPFwzSwEoJY/YsQI9tOf/rQefXPFfWA+OoDJ26DtWfv378c+xHSYmm5voM3UHzlyxE1ARdeIvqP9QDUMJZfEN998k4H1mWee6QL94cXNZ/hZl5ubG8CkQFp9An2cDWtNB32SBuQgxPukkrO6OgLExka2Pdn5Q3Ms1/M+xBiCnO7du7ceOHAgu+KKK1zDhw+v4xnv2F//+tds0BptsO7TgeyZ+LoqCwaDmnsLffv2PQ1asXI4wAvfMBN6JHQBaM2A1fbbi1ktBd4vy1jqtlJmA1BM3VGuvIc4K7Cc9JubaEQeuLbmma+ZBWpeu3Rm7Z3FfK2tzN/JwVw3dmC1NMnP4r3MUeJixo9OsCz8Cc8Qx2Ad42NTQbAw0fzOUcxGR+yVIkTZxv8WUk8EXlhYJAmMmMC1ZDEiiIswaJGbQEdsSvRe4ihum8q1Hknyi2iaILmPh7db5LYQXgp1/P8h3l5x6qqBt7OG2IrMLBJmLaLd9ITlUFcqI3+WyBsgAmI8xBYsMloJbcMn7dIKW3CQRUf5+ImKW0/sS4nuKlt5n6ObYB7pf5FZro5PFJGOsIZFog6FiURJsMOiQ7vNpM9FQpRSPvHqiOAIu5CxSOi6iMZLZdEJg3RErRbaiZO3qZpPZjE+OhZx2HeQdllZ9Cm6Yt9A7FTriNlHaBl+ft8K8g5O/j97En0X0thYEtFawu+V5iIRfSE2d2n0lZyi1Uveq55Fzr6rI8+3JDnuoSaYPx5C6Ch2iLGyMRXfc7L/4uRjp2eRFALirMIAf98qXt38cxuZAylEe6T9JkypcpIjD1lTAu/ofKXJuUS6UTk1MCWCYg+JjouqwAOtN2FGTDepQuTFqfpDF04tbyBN8Rgi9luX1FE07NjDoo/bqde4VpggaD7aEIvOIawjHUNB3CNtQND/U9D0kXevJzbaoMq1erIgxOGTIRYdMi0DcYBFh1S6yHtQm11QAu1QAxmxAHHGf68kgs1PFnONZLsKSQtECI8aFh2C7SOCiUaFBSUbo5eAtpVFZ6gzqpjDAgRwXKR6yPgGCPOuIyYck7TAPXQjhp2dIjVI3qGGRacoTKbv1MYioNIXIvdACgFhM4vOlc2kfvSR+eCjJi6J1eka2fbGzB+60R+UzBXVRFjScfIR4SLWtiAC9OQUSricROA7CV7QYCgq2N0EKN0sOstciMwp0dYAIWgWMrdMZIwoRlKMcUlYlVRec530Oz0GxUg2TejGgGA/BgloAmQDirplGaTFRNPh6Yg0VbuW2rV0Uqf7yT0MKt8NEIlvIoBCN/toG2SwoB4FPmlx03Se1L5O20SZX0DylNCRZ6ipiPR8s0Rt/QbCSs3SOwekCeSV+kgnjQXtC3mcvQQc5AMA5CQsJrJY6PhSRhyUbI4+aT6FpPczkbYZJTAISGNglOayzDbpuBqT7Lt4a0vOj2Ai/UMFttwnVGOSDxeQj1wyNbLt+ia4D80HIa9pQbBo8iE554NFY6x80jgZpLlJTxWifSbPpaCGBiPPV3qMmpzQn26OJvqMhBixLoapQk9ekFb5f0zF9UUvdZLs+hJkZ2c/Urs2RBYVY2cfy0TvofU/OVtTSOXe8rFLcsfLz1K7TjXNn4rrkE7yWFFjJ8mcFEIXgtqRTfR4KLWjmyhw0OAUvcbuerzjn+Q+lcc4pDEntO4Z6zxA2VtGnltMZawC0lxpTN8lMjY6ae3I/avWJ1rv1ZTj3hz3UTvGTJ5DVJjo4oyV/Cyt8yCD0v0bMk5a7dapbGwGG7pW4wJxvAtaSktpKS2lpTRv+X8BBgDflBXoY41+xgAAAABJRU5ErkJggg=="}();return sa()?{getVersion:qa,setRootContext:na,setAssetRoot:oa,setDebug:g,setLogging:h,setTrace:h,_log:j,setMobile:fb,$_setMobileEnabled:function(a){cd=a},getTimer:m,Dictionary:db,Dimensoion:Xe,SummaryMode:Fe,ValueType:ie,DataField:xf,RowState:je,LocalDataProvider:Mf,GridContainer:am,GridView:jm,CellIndex:Ye,ColumnHeaderItemLocation:Ke,ColumnGroup:ak,Column:Zj,ValueColumn:pk,DataColumn:rk,SeriesColumn:tk,ColumnLayout:vk,VisualStyles:ng,SelectionStyle:He,SelectionManager:Hl,BlockSelection:Il,RowSelection:Jl,ColumnSelection:Kl,ImageList:hb,ColumnGroupOrientation:oe,CellButton:we,SolidBrush:yd,LocalTreeDataProvider:Xn,TreeDataRow:Sn,TreeContainer:oo,TreeView:po,realgrid:new Ko,Progress:Kc,PopupMenu:fd,PopupMenuManager:hd,GridBase:em,AssertError:T,ColumnHeader:Xj,BooleanConverter:mb,DateTimeReader:Lb,DecimalFormatter:kb,SeriesCell:Kh,ExpressionSyntaxError:ca,DataRowExpressionRuntime:Cm,GridExcelExporter:Fn,StylesArchiver:Eg}:null}(this);